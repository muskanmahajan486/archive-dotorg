<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : ubuntu, z-wave, stick - problem</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : ubuntu, z-wave, stick - problem
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Sep 14, 2013 by <font color="#0050B2">muzer</font>.
				    </div>

				    <p>Hello,</p>

<p>can't get it work.<br/>
Only two variants: no exceptions but no discovery or good discover but "reader thread is dead" and exceptions in zwave.jar (and no source code <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> ). Below some info. </p>

<p>$ cat /etc/issue<br/>
Ubuntu 13.04 \n \l</p>

<p>$ uname -a<br/>
Linux serv 3.8.0-19-generic #30-Ubuntu SMP Wed May 1 16:36:13 UTC 2013 i686 i686 i686 GNU/Linux</p>

<p>$ java -version<br/>
java version "1.6.0_27"<br/>
OpenJDK Runtime Environment (IcedTea6 1.12.6) (6b27-1.12.6-1ubuntu0.13.04.2)<br/>
OpenJDK Client VM (build 20.0-b12, mixed mode, sharing)</p>

<p>$ dpkg -s librxtx-java | grep Version<br/>
Version: 2.2pre2-11</p>

<p>'/usr/lib/libtcnative-1.so' -&gt; '/opt/openremote/webapps/controller/WEB-INF/lib/native/libtcnative-1.so'<br/>
'zwave.jar' from <a href="http://download.openremote.org/free/zwave">http://download.openremote.org/free/zwave</a> -&gt; '/opt/openremote/webapps/controller/WEB-INF/lib/zwave.jar'<br/>
'/usr/share/java/RXTXcomm-2.2pre2.jar' -&gt; '/opt/openremote/webapps/controller/WEB-INF/lib/RXTXcomm-2.2pre2.jar'</p>

<p>OpenRemote-Controller-2.1.0_SNAPSHOT-2013-06-17<br/>
1. /usr/lib/jni/librxtxSerial.so -&gt; /opt/openremote/webapps/controller/WEB-INF/lib/native/</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
$ sudo sh openremote.sh run
Using CATALINA_BASE:   /opt/openremote
Using CATALINA_HOME:   /opt/openremote
Using CATALINA_TMPDIR: /opt/openremote/temp
Using JRE_HOME:       /usr

---- Logging ----------------------------------------------------------

 Console (stdout) threshold [CONTROLLER_CONSOLE_THRESHOLD]: INFO

 <span class="code-object">System</span> logs:

   - Controller startup log [CONTROLLER_STARTUP_LOG_LEVEL]: DEBUG
     

-----------------------------------------------------------------------
Sep 14, 2013 3:39:27 AM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.24.
Sep 14, 2013 3:39:27 AM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [<span class="code-keyword">true</span>], sendfile [<span class="code-keyword">true</span>], accept filters [<span class="code-keyword">false</span>], random [<span class="code-keyword">true</span>].
Sep 14, 2013 3:39:27 AM org.apache.coyote.http11.Http11AprProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Sep 14, 2013 3:39:27 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1126 ms
Sep 14, 2013 3:39:27 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Sep 14, 2013 3:39:27 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
Sep 14, 2013 3:39:27 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive webconsole.war
Sep 14, 2013 3:39:29 AM org.openremote.controller.bootstrap.Startup redirectJULtoLog4j
INFO: Initialized JUL to LOG4J Redirector.
INFO 2013-09-14 03:39:31,487 : 

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

WARNING:  RXTX Version mismatch
	Jar version = RXTX-2.2pre1
	<span class="code-keyword">native</span> lib Version = RXTX-2.2pre2
RXTX Warning:  Removing stale lock file. /<span class="code-keyword">var</span>/lock/LCK..ttyUSB0
INFO 2013-09-14 03:39:41,924 : No rule definitions found in '/opt/openremote/webapps/controller/rules'.
INFO 2013-09-14 03:39:41,925 : Initialized event processor : Drools Rule Engine
INFO 2013-09-14 03:39:42,107 : Initialized event processor : RRD4J Data Logger
INFO 2013-09-14 03:39:42,108 : Initialized event processor : EmonCMS Data Logger
ERROR 2013-09-14 03:39:42,181 : Creating sensor failed. Error : The node '2' is not known by the Z-Wave controller 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"18"</span> name=<span class="code-quote">"Light status"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"17"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:108)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)
	at org.openremote.controller.service.Deployer.startController(Deployer.java:336)
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
ERROR [main]: Creating sensor failed. Error : The node '2' is not known by the Z-Wave controller 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"18"</span> name=<span class="code-quote">"Light status"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"17"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:108)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)
	at org.openremote.controller.service.Deployer.startController(Deployer.java:336)
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
INFO 2013-09-14 03:39:42,203 : Startup complete.
INFO 2013-09-14 03:39:42,205 : Controller Definition File Watcher <span class="code-keyword">for</span> Default Deployer started.
Sep 14, 2013 3:39:42 AM org.apache.coyote.http11.Http11AprProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Sep 14, 2013 3:39:42 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 15127 ms
</pre>
</div></div>
<p>And zwave-debug:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
INFO 2013-09-14 03:39:31,970 (Z-Wave): Reader thread asked to start
INFO 2013-09-14 03:39:31,973 (Z-Wave): Writer thread asked to start
INFO 2013-09-14 03:39:31,975 (Z-Wave): Writer thread starting
DEBUG 2013-09-14 03:39:31,976 (Z-Wave): sending: 01 08 00 54 00 01 01 01 01 a3 
DEBUG 2013-09-14 03:39:31,978 (Z-Wave): Message lock exists. Frame waiting: 01 03 00 02 fe 
DEBUG 2013-09-14 03:39:31,982 (Z-Wave): received: 06 01 04 01 54 00 ae 
DEBUG 2013-09-14 03:39:31,984 (Z-Wave): Controller registered as SUC/SIS
DEBUG 2013-09-14 03:39:32,029 (Z-Wave): sending: 06 
DEBUG 2013-09-14 03:39:32,031 (Z-Wave): sending: 01 03 00 02 fe 
DEBUG 2013-09-14 03:39:32,034 (Z-Wave): received: 06 
DEBUG 2013-09-14 03:39:42,150 (Z-Wave): Building Z-Wave command
DEBUG 2013-09-14 03:39:42,151 (Z-Wave): Z-Wave command: nodeId = 2
DEBUG 2013-09-14 03:39:42,153 (Z-Wave): Z-Wave command: command = status
</pre>
</div></div>

<p>2. <br/>
librxtxSerial.so from 2.2pre1 -&gt; /opt/openremote/webapps/controller/WEB-INF/lib/native/</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
$ sudo sh openremote.sh run
Using CATALINA_BASE:   /opt/openremote
Using CATALINA_HOME:   /opt/openremote
Using CATALINA_TMPDIR: /opt/openremote/temp
Using JRE_HOME:       /usr

---- Logging ----------------------------------------------------------

 Console (stdout) threshold [CONTROLLER_CONSOLE_THRESHOLD]: INFO

 <span class="code-object">System</span> logs:

   - Controller startup log [CONTROLLER_STARTUP_LOG_LEVEL]: DEBUG
     

-----------------------------------------------------------------------
Sep 14, 2013 3:40:16 AM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.24.
Sep 14, 2013 3:40:16 AM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [<span class="code-keyword">true</span>], sendfile [<span class="code-keyword">true</span>], accept filters [<span class="code-keyword">false</span>], random [<span class="code-keyword">true</span>].
Sep 14, 2013 3:40:16 AM org.apache.coyote.http11.Http11AprProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Sep 14, 2013 3:40:16 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1108 ms
Sep 14, 2013 3:40:16 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Sep 14, 2013 3:40:16 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
Sep 14, 2013 3:40:16 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive webconsole.war
Sep 14, 2013 3:40:18 AM org.openremote.controller.bootstrap.Startup redirectJULtoLog4j
INFO: Initialized JUL to LOG4J Redirector.
INFO 2013-09-14 03:40:20,429 : 

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

RXTX Warning:  Removing stale lock file. /<span class="code-keyword">var</span>/lock/LCK..ttyUSB0
Exception in thread <span class="code-quote">"<span class="code-object">Thread</span>-5"</span> java.lang.ArrayIndexOutOfBoundsException: 32
	at org.openremote.controller.protocol.zwave.model.Controller.extractNodesFromBitMask(Controller.java:180)
	at org.openremote.controller.protocol.zwave.model.Controller.handleResponseMessage(Controller.java:80)
	at org.openremote.controller.protocol.zwave.model.ZWaveNode.handleZWaveResponseEvent(ZWaveNode.java:159)
	at org.openremote.controller.protocol.zwave.ZWaveGateway.fireZWaveResponseEvent(ZWaveGateway.java:93)
	at org.openremote.controller.protocol.zwave.ZWaveGatewayRxtx$ZWaveReaderThread.run(ZWaveGatewayRxtx.java:288)
INFO 2013-09-14 03:40:30,854 : No rule definitions found in '/opt/openremote/webapps/controller/rules'.
INFO 2013-09-14 03:40:30,855 : Initialized event processor : Drools Rule Engine
INFO 2013-09-14 03:40:31,035 : Initialized event processor : RRD4J Data Logger
INFO 2013-09-14 03:40:31,036 : Initialized event processor : EmonCMS Data Logger
ERROR 2013-09-14 03:40:31,111 : Creating sensor failed. Error : The node '2' is not known by the Z-Wave controller 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"18"</span> name=<span class="code-quote">"Light status"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"17"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:108)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)
	at org.openremote.controller.service.Deployer.startController(Deployer.java:336)
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
ERROR [main]: Creating sensor failed. Error : The node '2' is not known by the Z-Wave controller 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"18"</span> name=<span class="code-quote">"Light status"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"17"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:108)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)
	at org.openremote.controller.service.Deployer.startController(Deployer.java:336)
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
INFO 2013-09-14 03:40:31,132 : Startup complete.
INFO 2013-09-14 03:40:31,134 : Controller Definition File Watcher <span class="code-keyword">for</span> Default Deployer started.
Sep 14, 2013 3:40:31 AM org.apache.coyote.http11.Http11AprProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Sep 14, 2013 3:40:31 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 15099 ms
</pre>
</div></div>
<p>And zwave-debug:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
INFO 2013-09-14 03:40:20,907 (Z-Wave): Reader thread asked to start
INFO 2013-09-14 03:40:20,910 (Z-Wave): Writer thread asked to start
INFO 2013-09-14 03:40:20,912 (Z-Wave): Writer thread starting
DEBUG 2013-09-14 03:40:20,913 (Z-Wave): sending: 01 08 00 54 00 01 01 01 01 a3 
DEBUG 2013-09-14 03:40:20,915 (Z-Wave): Message lock exists. Frame waiting: 01 03 00 02 fe 
DEBUG 2013-09-14 03:40:20,918 (Z-Wave): received: 06 01 04 01 54 00 ae 
DEBUG 2013-09-14 03:40:20,921 (Z-Wave): Controller registered as SUC/SIS
DEBUG 2013-09-14 03:40:20,966 (Z-Wave): sending: 06 
DEBUG 2013-09-14 03:40:20,968 (Z-Wave): sending: 01 03 00 02 fe 
DEBUG 2013-09-14 03:40:20,971 (Z-Wave): received: 06 
DEBUG 2013-09-14 03:40:21,013 (Z-Wave): received: 01 25 01 02 05 00 1d ff 0f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
DEBUG 2013-09-14 03:40:21,014 (Z-Wave): Node id: 1 discovered
DEBUG 2013-09-14 03:40:21,015 (Z-Wave): Node id: 2 discovered
DEBUG 2013-09-14 03:40:21,014 (Z-Wave): sending: 06 
DEBUG 2013-09-14 03:40:21,016 (Z-Wave): Node id: 3 discovered
DEBUG 2013-09-14 03:40:21,016 (Z-Wave): Node id: 4 discovered
DEBUG 2013-09-14 03:40:21,018 (Z-Wave): Node id: 5 discovered
DEBUG 2013-09-14 03:40:21,019 (Z-Wave): Node id: 6 discovered
DEBUG 2013-09-14 03:40:21,019 (Z-Wave): Node id: 7 discovered
DEBUG 2013-09-14 03:40:21,020 (Z-Wave): Node id: 8 discovered
DEBUG 2013-09-14 03:40:21,020 (Z-Wave): Node id: 9 discovered
DEBUG 2013-09-14 03:40:21,020 (Z-Wave): Node id: 10 discovered
DEBUG 2013-09-14 03:40:21,021 (Z-Wave): Node id: 11 discovered
DEBUG 2013-09-14 03:40:21,021 (Z-Wave): Node id: 12 discovered
INFO 2013-09-14 03:40:21,025 (Z-Wave): Reader thread is dead, clean and re-<span class="code-keyword">try</span> to connect
INFO 2013-09-14 03:40:21,065 (Z-Wave): Reader thread asked to start
INFO 2013-09-14 03:40:21,066 (Z-Wave): Writer thread asked to start
INFO 2013-09-14 03:40:21,067 (Z-Wave): Writer thread starting
DEBUG 2013-09-14 03:40:31,078 (Z-Wave): Building Z-Wave command
DEBUG 2013-09-14 03:40:31,081 (Z-Wave): Z-Wave command: nodeId = 2
DEBUG 2013-09-14 03:40:31,082 (Z-Wave): Z-Wave command: command = status
</pre>
</div></div>

<p>OpenRemote-Controller-2.2.0_TTS-Email-Serial and OpenRemote-Controller-2.1.0_FM_SNAPSHOT-2013-07-18 have the same behaviour with importless difference. Sometimes no discovery -&gt; node not known, sometimes discovery -&gt; read thread dead -&gt; no node.</p>

<p>There are different digits in exception message from time to time: java.lang.ArrayIndexOutOfBoundsException: 32 (&lt;-- here)</p>

<p>Stick: Z-Wave USB Dongle. It'w work fine with z-cloud. <br/>
And one strange thing - the same exceptions I had on raspberrypi, but I tried a little there, then moved my attempts to common computer. Maybe I do something in very wrong way? Or it's specific stick? <br/>
Please, help. <br/>
I can do any experiments, but suggest something <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22876517"></a>
                                    <font class="smallfont"><p>No ideas? </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by muzer at Sep 18, 2013 09:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876519"></a>
                                    <font class="smallfont"><p>Sorry, didn't have time to respond earlier.</p>

<p>The array index out of bounds looks bad. We definitely need to improve error handling there (too).</p>

<p>It looks like you're seeing 12 nodes in the second example. But the free version currently has a limit of 10 nodes. I wonder if the array error is related to that (would logically make sense). If that's the case, it is handling the array overflow very badly.</p>

<p>Is it possible for you to try by dropping your Z-Wave nodes below 10 and see if it makes a difference?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 18, 2013 09:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886006"></a>
                                    <font class="smallfont"><p>I've just started with Openremote.</p>

<p>Using Aeon s2 stick and QNAP NAS TS-412.<br/>
First got it running on PC (win8), and now trying on the NAS.<br/>
At first didn't succeed in getting the z-wave stack up and running, but after changing the discovery address to 8088 (8080 is used by the NAS itself) I could see my only 1 node (node 2).<br/>
But then I run into the same error:</p>

<p>org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller</p>

<p>With only a single node, no chance I am running out of free license count.<br/>
Any ideas anybody ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jvaassen at Apr 21, 2014 17:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886037"></a>
                                    <font class="smallfont"><p>With the current Z-Wave implementation this error message is displayed if the Z-Wave network does not contain a node with ID 2 or if communication with the Z-Wave interface (Z-Stick) cannot be established (e.g. invalid serial port configuration) even if the Z-Wave network contains a node with ID 2.</p>

<p>Are there any errors like "Z-Wave gateway was not started" in the Z-Wave log ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rhitz at Apr 23, 2014 08:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886050"></a>
                                    <font class="smallfont"><p>I started openremote.sh by hand, with ALL logging on, and got the following response:<br/>
java.lang.UnsatisfiedLinkError: gnu.io.RXTXCommDriver.nativeGetVersion()Ljava/lang/String; thrown while loading gnu.io.RXTXCommDriver<br/>
java.lang.NoClassDefFoundError: Could not initialize class gnu.io.RXTXCommDriver thrown while loading gnu.io.RXTXCommDriver<br/>
gnu.io.NoSuchPortException<br/>
        at gnu.io.CommPortIdentifier.getPortIdentifier(CommPortIdentifier.java:269)<br/>
        at org.openremote.controller.protocol.zwave.ZWaveGatewayRxtx$ZWaveConnectionThread.run(ZWaveGatewayRxtx.java:108)</p>

<p>DEBUG 2014-04-23 21:29:25,983 : Created object model for Command( ID = 37, Type = zwave, Properties : <div class="error"><span class="error">Unknown macro: {nodeId=2, name=status, command=status}</span> </div>).</p>

<p>So apparently still an RXTX issue. I already used the QPKG Optware RXTX library (for ARM ?), but will check further.<br/>
<span class="error">&#91;/share/MD0_DATA/.qpkg/Optware/lib&#93;</span> # ll librxtxSer*<br/>
-rwxr-xr-x    1 admin    administ      6.6k Feb 14  2012 librxtxSerial-2.1-7.so*<br/>
-rwxr-xr-x    1 admin    administ       950 Feb 14  2012 librxtxSerial.la*<br/>
lrwxrwxrwx    1 admin    administ        22 Apr 20 20:50 librxtxSerial.so -&gt; librxtxSerial-2.1-7.so*<br/>
<span class="error">&#91;/share/MD0_DATA/.qpkg/Optware/lib&#93;</span> #</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jvaassen at Apr 23, 2014 22:35
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>