<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Release - Docker container for OpenRemote controller</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Release - Docker container for OpenRemote controller
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 16, 2015 by <font color="#0050B2">aptalca</font>.
				    </div>

				    <p>Hi everyone,</p>

<p>I created a docker container for OpenRemote Controller 2.1.0</p>

<p>It runs on any x64 platform that supports docker, including unRaid and some Synology servers.</p>

<p>You can find the container and the instructions here: <a href="https://hub.docker.com/r/aptalca/docker-openremote/">https://hub.docker.com/r/aptalca/docker-openremote/</a></p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23600544/23789956.png">or error.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23600544/23789957.png">Capture15.PNG</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23600547"></a>
                                    <font class="smallfont"><blockquote><p>It runs on any platform that supports docker</p></blockquote>
<p>Just for my understanding. Would it also run on the ARM platform of Raspberry Pi for which there seems to be a Docker available? I read a bit around docker yesterday. I understood compilation was done per processor architecture: x86, armhef etc.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 16, 2015 09:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600554"></a>
                                    <font class="smallfont"><p>I looked into it and you are right, containers built for x86/x64 don't run on rpi (fixed the post)</p>

<p>I'll look into how to build for arm</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aptalca at Aug 16, 2015 18:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600731"></a>
                                    <font class="smallfont"><p>Hi.</p>

<p>I updated to 5.2 version of the DSM, and can not now start OpenRemote (before update DSM, OpenRemote on DSM 5.1 version worked fine with Java 6. Now is not working.
<a href="http://www.openremote.org/pages/viewpage.action?pageId=23600722">http://www.openremote.org/pages/viewpage.action?pageId=23600722</a></p>

<p>I installed Docker on my DS3615 DSM5.2-5592U3, and try to run Openremote. But I get this error (screenshot). What could it be?</p>

<p><a class="confluence-thumbnail-link 1005x543" href='http://www.openremote.org/download/attachments/23600544/or error.png'><img src="attachments/thumbnails/23600544/23789956" align="left" border="0"/></a></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aleksey_z at Aug 22, 2015 14:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600735"></a>
                                    <font class="smallfont"><p>Based on that picture, it seems you didn't enter the controller ip address<br/>
the format should be <a href="http://serverip:port/controller">http://serverip:port/controller</a><br/>
What you have is <a href="http://:port/controller">http://:port/controller</a> (missing the ip and that's why the webconsole cannot connect)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aptalca at Aug 22, 2015 17:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600736"></a>
                                    <font class="smallfont"><p>This picture, with the following container configuration:</p>

<p>Local Port: 18581<br/>
Port container: 8080<br/>
Reference: <a href="http://192.168.1.7:18581/controller">http://192.168.1.7:18581/controller</a></p>

<p>And another question, in OpenRemote (in Docker), for OpenRemote need to replace the file zwave.jar. I replace a file, but if I sync with the designer, the file is replaced.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aleksey_z at Aug 22, 2015 20:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600781"></a>
                                    <font class="smallfont"><p>You need to provide more info. What you provided is confusing.</p>

<p>I am assuming that the picture was taken from the address <a href="http://192.168.1.7:18581/webconsole">http://192.168.1.7:18581/webconsole</a><br/>
You also mentioned that you can sync with the designer.<br/>
So it's safe to assume that your controller is working.</p>

<p>Your picture however displays the controller url with a blank ip address. The web console is trying to reach your controller at <a href="http://:18581/controller/">http://:18581/controller/</a> and it is not able to access because the correct address should be <a href="http://192.168.1.7:18581/controller/">http://192.168.1.7:18581/controller/</a></p>

<p>In the web console, edit the controller you added and fix the address and it should work. Attached is a pic of my webconsole showing the correct url (My server ip is 192.168.1.40 and the host port is 8089):<br/>
 <a class="confluence-thumbnail-link 657x1006" href='http://www.openremote.org/download/attachments/23600544/Capture15.PNG'><img src="attachments/thumbnails/23600544/23789957" align="absmiddle" border="0"/></a></p>

<p>Regarding the designer sync rewriting files, that is not related to docker. It is an openremote thing and it is not under my control</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aptalca at Aug 24, 2015 18:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602046"></a>
                                    <font class="smallfont"><p>Hi<br/>
Just updated my DSM to 5.2-5644. Had OpenRemote package installed some time ago. But after update ti didn't work anymore. Tried to uninstall and install again, just to find the package wont install again.<br/>
Found this entry, and tried the docker package instead.<br/>
I am new to openremote aswell as docker.<br/>
I managed to retrieve the image.<br/>
Selected "Start" and "Run" pasted the run string found on docker hub:<br/>
docker run -d --name="OpenRemoteController" --net="bridge" -p 8080:8080/tcp -v "/path/to/config":"/config":rw -v /etc/localtime:/etc/localtime:ro aptalca/docker-openremote<br/>
changed "/path/to/config" to a folder i created at "/opt/share/openremote/config".<br/>
When it try to start it, i get "unsoported --net". I just ignored it, but it fails to start, and log show:<br/>
Start container OpenRemoteController failed: Cannot start container 172e2aa09b5b522982ebb9f5e5f62f55df62e510713aa46706cc428b9a9261f8: 8 System error: exec: "-v": executable file not found in $PATH<br/>
admin<br/>
2015/11/07 00:10:45<br/>
err</p>

<p>I dont know what i am missing here - any clues?<br/>
BR Kim</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kimschmock at Nov 06, 2015 23:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602332"></a>
                                    <font class="smallfont"><p>Hi Aptalca,<br/>
First of all, thank you for sharing your work. I really appreciate. The container is installed and it's running exept the KNX connection. here are the logs. Could help me to have Openremote connecting to my KNX gateway <br/>
For your information,:</p>
<ul class="alternate" type="square">
	<li>a classical openremote installation is fully functional and communicate with the KNW gateway</li>
	<li>I'm running DSM 6.0 beta</li>
	<li>the controller/webconsole is reachable</li>
</ul>


<p>regards<br/>
Yann</p>

<p>WARN 2015-11-23 18:46:51,735 (KNX): Could not connect<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX-IP interface not found<br/>
at org.openremote.controller.protocol.knx.KNXIpConnectionManager.waitForConnection(KNXIpConnectionManager.java:264)<br/>
at org.openremote.controller.protocol.knx.KNXIpConnectionManager.getConnection(KNXIpConnectionManager.java:222)<br/>
at org.openremote.controller.protocol.knx.KNXIpConnectionManager$ConnectionTask.run(KNXIpConnectionManager.java:989)<br/>
at java.util.TimerThread.mainLoop(Timer.java:534)<br/>
at java.util.TimerThread.run(Timer.java:484)<br/>
INFO 2015-11-23 18:46:51,737 (KNX): Trying to create connection<br/>
INFO 2015-11-23 18:46:51,737 (KNX): Removing connection<br/>
INFO 2015-11-23 18:46:51,738 (KNX): KNX-IP socket listener IOException<br/>
java.net.SocketException: Socket closed<br/>
at java.net.PlainDatagramSocketImpl.receive0(Native Method)<br/>
at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:136)<br/>
at java.net.DatagramSocket.receive(DatagramSocket.java:759)<br/>
at org.openremote.controller.protocol.port.DatagramSocketPort.receive(DatagramSocketPort.java:78)<br/>
at org.openremote.controller.protocol.knx.ip.IpProcessor$PhysicalBusListener.run(IpProcessor.java:82)<br/>
WARN 2015-11-23 18:46:51,739 (KNX): KNX-IP socket listener stopped<br/>
INFO 2015-11-23 18:46:51,740 (KNX): KNX Connection manager resolving local host IP addresses...<br/>
INFO 2015-11-23 18:46:51,741 (KNX): Found candidate NIC: name:eth0 (eth0)<br/>
INFO 2015-11-23 18:46:51,742 (KNX): Skipped IPv6 address (not supported by KNX) /fe80:0:0:0:42:acff:fe11:2%15<br/>
INFO 2015-11-23 18:46:51,742 (KNX): Added candidate IP address to set - /172.17.0.2<br/>
INFO 2015-11-23 18:46:51,743 (KNX): Skipping loopback interface: name:lo (lo)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Nov 23, 2015 19:00
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:33</font></td>
		    </tr>
	    </table>
    </body>
</html>