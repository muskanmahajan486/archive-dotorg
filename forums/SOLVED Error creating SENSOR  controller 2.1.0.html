<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : SOLVED Error creating SENSOR  controller 2.1.0</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : SOLVED Error creating SENSOR  controller 2.1.0
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 17, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hi everyone.</p>

<p>I created a new sensor with controller 2.1.0 and I have this error in the boot log:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">
INFO 2013-04-12 15:43:03,127 : Initialized event processor : Drools Rule Engine 
ERROR 2013-04-12 15:43:04,234 : Creating sensor failed. Error : Expression '//or
:*[@id='4035']' matches more than one element : 2                               
 XML Element : <span class="code-tag">&lt;sensor xmlns=<span class="code-quote">"http://www.openremote.org"</span> id=<span class="code-quote">"2487284"</span> name=<span class="code-quote">"SN_CORRIDOIO_J2J3"</span> type=<span class="code-quote">"switch"</span>&gt;</span>                                                   
      <span class="code-tag">&lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"4035"</span> /&gt;</span>                                     
      <span class="code-tag">&lt;state name=<span class="code-quote">"on"</span> /&gt;</span>                                                       
      <span class="code-tag">&lt;state name=<span class="code-quote">"off"</span> /&gt;</span>                                                      
    <span class="code-tag">&lt;/sensor&gt;</span>                                                                   
org.openremote.controller.exception.XMLParsingException: Expression '//or:*[@id='4035']' matches more than one element : 2                                      
        at org.openremote.controller.deployer.AbstractModelBuilder.queryElementFromXML(AbstractModelBuilder.java:201)                                           
        at org.openremote.controller.deployer.AbstractModelBuilder.queryElementById(AbstractModelBuilder.java:119)                                              
        at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:414)                                 
        at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)                                                    
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:799)                               
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:645)                                            
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:539)                                                       
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)                                                    
        at org.openremote.controller.service.Deployer.startup(Deployer.java:785)
        at org.openremote.controller.service.Deployer.softRestart(Deployer.java:393)                                                                            
        at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1249)                                                         
        at java.lang.Thread.run(Thread.java:679)        
</pre>
</div></div>


<p>The sensor created till this new version are all OK<br/>
INFO 2013-04-12 15:49:14,414 : Registered sensor : Switch Sensor (Name = 'SN A4 LUX TAVERNA', ID = '6433')                                                      <br/>
INFO 2013-04-12 15:49:14,417 : Registered sensor : Switch Sensor (Name = 'SN CAM REBECCA TAPP', ID = '1118377')                                                 <br/>
INFO 2013-04-12 15:49:14,417 : Registered sensor : Switch Sensor (Name = 'SN A3 LUX TAVERNA', ID = '6432')                                                      <br/>
INFO 2013-04-12 15:49:14,417 : Registered sensor : Switch Sensor (Name = 'SN A6 LUX TAV', ID = '6435')                                                          <br/>
INFO 2013-04-12 15:49:14,419 : Registered sensor : Switch Sensor (Name = 'SN SALA TAPP', ID = '1118378')                                                        <br/>
INFO 2013-04-12 15:49:14,419 : Registered sensor : Switch Sensor (Name = 'SN A5 LUX TAV CUCINA', ID = '6434')                                                   <br/>
INFO 2013-04-12 15:49:14,419 : Registered sensor : Switch Sensor (Name = 'SN SALA TELO', ID = '1118379')                                                        <br/>
INFO 2013-04-12 15:49:14,419 : Registered sensor : Switch Sensor (Name = 'SN J1 INGRESSO INTER', ID = '9344')                                                   <br/>
INFO 2013-04-12 15:49:14,420 : Registered sensor : Switch Sensor (Name = 'SN TAP BAGNO VASCA', ID = '1118380')                                                  <br/>
INFO 2013-04-12 15:49:14,420 : Registered sensor : Switch Sensor (Name = 'SN BAGNO SM MIRROR', ID = '9079')                                                     <br/>
INFO 2013-04-12 15:49:14,421 : Registered sensor : Switch Sensor (Name = 'SN TAPP TAVERNA', ID = '1118381')                                                     <br/>
INFO 2013-04-12 15:49:14,421 : Registered sensor : Switch Sensor (Name = 'SN TAPP OSPITI', ID = '1118382')                                                      <br/>
INFO 2013-04-12 15:49:14,430 : Registered sensor : Switch Sensor (Name = 'SN TAPP CUCINA', ID = '1118383')                                                      <br/>
INFO 2013-04-12 15:49:14,434 : Registered sensor : Switch Sensor (Name = 'SN PORTA TAVERNA', ID = '1117943')                                                    <br/>
INFO 2013-04-12 15:49:14,434 : Registered sensor : Switch Sensor (Name = 'SN TELO ', ID = '1118368')                                                            <br/>
INFO 2013-04-12 15:49:14,436 : Registered sensor : Switch Sensor (Name = 'SN TENDA CUCINA', ID = '1118374')                                                     <br/>
INFO 2013-04-12 15:49:14,439 : Registered sensor : Switch Sensor (Name = 'SN CAME SM PORTA', ID = '1118375')                                                                                     <br/>
INFO 2013-04-12 15:49:14,439 : Registered sensor : Switch Sensor (Name = 'SN TAPP INTERCAPEDINE', ID = '1118385')                                                             </p>


<p>and so ON...</p>

<p>I couldn't understand;<br/>
 please thanks for any suggestions... <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>



				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21860363"></a>
                                    <font class="smallfont"><p>Hi Marcus or Juha,<br/>
could someone help me to understand this error ?</p>

<p>ERROR 2013-04-12 15:43:04,234 : Creating sensor failed. Error : Expression '//or<br/>
:*<span class="error">&#91;@id=&#39;4035&#39;&#93;</span>' matches more than one element : 2                               <br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="2487284" name="SN J2J3 CORRIDOIO" type="switch"&gt;                                                   <br/>
      &lt;include type="command" ref="4035" /&gt;                                     <br/>
      &lt;state name="on" /&gt;                                                       <br/>
      &lt;state name="off" /&gt;                                                      <br/>
    &lt;/sensor&gt;          </p>



<p>From my controller.xml</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;sensor id=<span class="code-quote">"2487284"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span> name=<span class="code-quote">"SN J2J3 CORRIDOIO"</span>&gt;
 &lt;include ref=<span class="code-quote">"4035"</span> type=<span class="code-quote">"command"</span>/&gt;
 &lt;state name=<span class="code-quote">"on"</span>/&gt;
 &lt;state name=<span class="code-quote">"off"</span>/&gt;
&lt;/sensor&gt;

&lt;command id=<span class="code-quote">"4035"</span> protocol=<span class="code-quote">"knx"</span>&gt;
 &lt;property name=<span class="code-quote">"command"</span> value=<span class="code-quote">"STATUS"</span>/&gt;
 &lt;property name=<span class="code-quote">"groupAddress"</span> value=<span class="code-quote">"1/1/23"</span>/&gt;
 &lt;property name=<span class="code-quote">"DPT"</span> value=<span class="code-quote">"1.001"</span>/&gt;
 &lt;property name=<span class="code-quote">"name"</span> value=<span class="code-quote">"1/1/23 ST J2J3 CORRID"</span>/&gt;
&lt;/command&gt;
</pre>
</div></div>

<p>Could be a problem, there is a sensor with id="4035" ? <br/>
&lt;sensor id="4035" type="switch" name="SN ON/OFF SALA LUCE BINARIO"&gt;<br/>
&lt;include ref="3832" type="command"/&gt;<br/>
&lt;state name="on"/&gt;<br/>
&lt;state name="off"/&gt;<br/>
&lt;/sensor&gt;</p>

<p>Thanks for any suggestion. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mb at Apr 16, 2013 09:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860379"></a>
                                    <font class="smallfont"><p>Yes, the error is due to duplicate ID.</p>

<p>Not sure where / how it appeared and I need more time to analyze and investigate (and to think). Today's schedule unfortunately has all my thinking cycles already allocated. Will need to wait for a bit later.</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 16, 2013 11:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860554"></a>
                                    <font class="smallfont"><p>Hi Juha,<br/>
Any news ?</p>

<p>I need two more devices with two new sensors, <br/>
I created it but now I have errors in boot.log creating the sensors.</p>

<p>If you need, you have the admin role in the account manager.</p>

<p>In this link:<br/>
boot.log<br/>
controller.xml<br/>
panel.xml<br/>
<a href="https://www.dropbox.com/s/lwn6o6llfi5pvtw/OpenRemote.zip">https://www.dropbox.com/s/lwn6o6llfi5pvtw/OpenRemote.zip</a></p>

<p>Thanks for any help or suggestion.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mb at Apr 18, 2013 14:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860568"></a>
                                    <font class="smallfont"><p>Can you send me your username anyway, I've lost track of accounts.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 19, 2013 07:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860570"></a>
                                    <font class="smallfont"><p>There's a patch that is missing in designer preview and that needs to be applied to fix this issue. Will get back to it later.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 19, 2013 08:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860571"></a>
                                    <font class="smallfont"><p>PS. don't try other versions of designer in the meantime, it will screw you up.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 19, 2013 08:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860573"></a>
                                    <font class="smallfont"><p>How many online designer website? I know you two, what are the differences between them? Which one should I use. Is there an offline designer?</p>

<p>1 - <a href="http://composer.openremote.org/preview/login.jsp">http://composer.openremote.org/preview/login.jsp</a> (Markab)<br/>
2 - <a href="http://composer.openremote.org/demo/login.jsp">http://composer.openremote.org/demo/login.jsp</a> (Rosemary)</p>

<p>Thanks</p>

<p>Ali Haydar</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ali at Apr 19, 2013 09:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860606"></a>
                                    <font class="smallfont"><p>Ok, patch is now in preview, can you try it?</p>

<p>(it worked for me)</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 20, 2013 20:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860617"></a>
                                    <font class="smallfont"><p>Great Juha <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>It works !!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mb at Apr 22, 2013 11:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872898"></a>
                                    <font class="smallfont"><p>Hi Joha.</p>

<p>I have a similar issue but with extra stuff - see my new topic "Designer went crazy" of today. The issue is I have used the May 11 2013 snapshot which is a later version which I guess contains the patch.<br/>
The issue is that the errors I get along with the "matches more than one element : 2" issues (many such errors), are in the controller.xml. Sensor are linked twice while I did not touch any of the sensors for quite some time and everything was workibg fine. The new saving from yesterday went crazy.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niraviry at Jun 17, 2013 05:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872919"></a>
                                    <font class="smallfont"><p>Ok, will look into it.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 17, 2013 14:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872922"></a>
                                    <font class="smallfont"><p>Just to add some more details.<br/>
I have a constantly running message "Requested sensor id xxx not found.." of several sensors.<br/>
I have  "matches more than one element : 2" issue with several devices.<br/>
Some of the buttons do not work and some do (no special pattern here).<br/>
Rules do not work.<br/>
I removed most of the rules keeping just the Init ones. Situation is the same.<br/>
One bright side. The May 11 snapshot solves the issue with the Webconsole running on a different PC over my home network.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niraviry at Jun 17, 2013 17:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872924"></a>
                                    <font class="smallfont"><p>well the errors would show up because the wrong indexing,</p>

<p>so don't go changing things in your account, you'll just end up having to add them back later again</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 17, 2013 17:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872926"></a>
                                    <font class="smallfont"><p>No Problem.<br/>
Just keep in mind that most of the rules code was removed trying to figure out what happened.<br/>
I have a backup.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niraviry at Jun 17, 2013 17:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872927"></a>
                                    <font class="smallfont"><p>You've got two accounts, which one are you using?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 17, 2013 18:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872928"></a>
                                    <font class="smallfont"><p>Ok nevermind, I'm seeing the issue now.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 17, 2013 18:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872930"></a>
                                    <font class="smallfont"><p>I'm checking with Eric the status of the patch that fixed the original issue reported in this thread.</p>

<p>Yours is closely related but it's unclear if the same patch applies.</p>

<p>Please do not log into your account while resolving this to prevent any potential other side-effects occurring. Will let you know once this is fixed.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 17, 2013 19:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872931"></a>
                                    <font class="smallfont"><p>OK.</p>

<p>Thanks.</p>

<p>Let me know if the original symptom (lack of response while saving) is the warning symptom.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niraviry at Jun 17, 2013 19:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880958"></a>
                                    <font class="smallfont"><p>Hello Juha - I experience the very same issues. Can you let me know, how I can fix the issue? I only added one sensor and added a few rules. Thanks for helping. Best, Fabian</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bauers.allershausen at Dec 08, 2013 22:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881395"></a>
                                    <font class="smallfont"><p>Fabian,</p>

<p>Sorry for the delayed reply. There's a patch currently in testing at <a href="https://composer.openremote.com/staging">https://composer.openremote.com/staging</a> for similar issue. The original patch that initially fixed Maurizio's issue worked for a while but seems to have resurfaced. There's an additional patch in the URL above. You can try to log in there and report back if it solves your issue but I would not recommend making any further changes in your account (and save your openremote.zip in a safe backup location before you test things). Just let us know if it resolves your issue or not. You can test by logging into the staging designer, and exporting a new version of openremote.zip. You can manually upload it into your controller.</p>

<p>Best regards,</p>

<p>&#8211; Juha</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Dec 18, 2013 18:04
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>