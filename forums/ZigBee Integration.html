<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : ZigBee Integration</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : ZigBee Integration
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 19, 2009 by <font color="#0050B2">juha</font>.
				    </div>

				    
<p>Another discussion thread I want to move out on the public forum is regarding ZigBee integration via FreakLabs OSS ZigBee stack (by Akiba).</p>

<p>We've shared some initial thoughts about how an integration would work and thought a simple way to start is to have a serial module interpret commands and translate them to ZigBee RF protocol.</p>

<p>Additional opinions and ZB feedback welcome...</p>


<blockquote>
<p>I think the initial version would just be an open source module that<br/>
connects via USB and looks like a COM port to Linux. I'll implement a<br/>
command parser inside the module that will interpret simple serial commands<br/>
like "on", "off", "dim 30" (dim 30%), etc. For an initial version, something<br/>
like that should be enough to get people to try it out and then make<br/>
suggestions/recommendations for other features. </p>

<p>I already have some test hardware that can be used to try it out or people<br/>
can use the Atmel AVR Raven USB stick (USB stick with 802.15.4 radio) which<br/>
is about $40 at Digikey. </p>

<p>I guess we can discuss further on the forums with everyone else  <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> </p>

<p>Akiba<br/>
FreakLabs Open Source Zigbee Project<br/>
Web: <a href="http://www.freaklabs.org">http://www.freaklabs.org</a><br/>
Twitter: <a href="http://www.twitter.com/freaklabs">http://www.twitter.com/freaklabs</a></p>

</blockquote>
<p>&gt; &gt; So far the protocol integrations we have are through IP, serial via<br/>
&gt; &gt; RS-232 for X10 and IR via lircd daemon which does lib-usb internally.<br/>
&gt; &gt; <br/>
&gt; &gt; This leaves it pretty open as far as I'm concerned regarding options. I<br/>
&gt; &gt; think eventually once on our side we understand zigbee better I could<br/>
&gt; &gt; put together more precise opinions. At the moment anything from<br/>
&gt; &gt; standalone native process we execute from Java, integration via standard<br/>
&gt; &gt; i/o streams or even a hard-linked C library API (I can wrap it with<br/>
&gt; &gt; TCP/IP daemon for runtime integration purposes) would be an ok option<br/>
&gt; &gt; from my point of view.<br/>
&gt; &gt; <br/>
&gt; &gt; Open for input from your side where is the path of least resistance.<br/>
&gt; &gt; Quick and dirty to get things started and in the hands of community is<br/>
&gt; &gt; just fine with me  right now (we can iterate towards higher quality<br/>
&gt; &gt; production solutions once we get some basic integration done).<br/>
&gt; &gt; <br/>
&gt; &gt; &#8211; Juha</p>
<blockquote></blockquote>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-4948210"></a>
                                    <font class="smallfont"><p>Hi all.</p>

<p>Just wanted to introduce myself. I'm Akiba and run the FreakLabs Open Source Zigbee Project and am also an active participant in the Open Hardware community. I talked with Juha and will be putting together some Zigbee Home Automation hardware and software for Open Remote. Of course everything will be open source so I'll be releasing schematics and the source code can always be found on Sourceforge (the link is on my site). I'm thinking to start off easy for the moment and am planning some simple on/off and dimmer switches/controllers that have a simple serial interface. The interface would be implemented via USB CDC (Communications Device Class) and would emulate a serial port. The hardware would have a command parser so you would just need to send a plaintext command through the serial port such as "on &lt;address&gt;" or "off &lt;address&gt;" to control a particular node.</p>


<p>I'll keep Juha updated on the progress, but since November is going to be really busy for me, I'm targeting having something working around December. I'm also open to suggestions, comments, criticism of Zigbee, and of course questions about the Zigbee protocol or low power wireless in general.</p>

<p>Hope I can put something together for OR that really kicks ass <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Akiba</p>

<p>FreakLabs Open Source Zigbee Project</p>

<p><a href="http://www.freaklabs.org">http://www.freaklabs.org</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by freaklabs at Oct 19, 2009 17:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948222"></a>
                                    <font class="smallfont"><p>Thank God, a hardware person&#33; These software people scare me. <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>May I suggest that you use &lt;address&gt; off and &lt;address&gt; on instead as the uC can then ignore the rest of the packet immediately? I'll read this further later as I'm a little short for time.</p>

<p>Oh, I like the AVR also, they're one of my favorite uCs (and I've use a lot).</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by linuxha at Oct 20, 2009 16:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948225"></a>
                                    <font class="smallfont"><p>Thanks for the suggestion. The command parser I'll be implementing is still flexible at this stage so your suggestion will come in handy. As for the AVR, I'm pretty much microcontroller agnostic, but I have been taking a liking to the AVR recently due to the low cost emulators for their smaller MCUs. It seems that Atmel is going out of their way to attract indie developers which always gets kudos from me. I'll be posting more details soon on the project. I've also discussed with the Tokyo Hackerspace and it looks like we're going to try and set up an Open Remote testbed inside the hackerspace house. Sounds like they might have more fun than me in playing with it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by freaklabs at Oct 20, 2009 17:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948238"></a>
                                    <font class="smallfont"><blockquote>
<p>I've also discussed with the Tokyo Hackerspace and it looks like we're going to try and set up an Open Remote testbed inside the hackerspace house. Sounds like they might have more fun than me in playing with it.</p></blockquote>

<p>Let me know if you guys need any assistance/support with this.</p>

<p>&#8211; Juha</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 21, 2009 08:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948239"></a>
                                    <font class="smallfont"><p>Ha ha...I'll definitely let you know if I have problems. Should go pretty smooth I hope. Its a house full of geeks. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by freaklabs at Oct 21, 2009 08:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948244"></a>
                                    <font class="smallfont"><p>I'm just thinking out out here, so bear with me.</p>

<p>Not to rain on anyone's parade (and hard work), but what about 6LoPAN?&nbsp; 6LoPAN is basically IPv6 over low power wireless networks. There are several stacks (contiki, arch rock) already. In fact, the ZigBee alliance has proposed <a href="http://www.engadget.com/2009/04/27/zigbee-adding-ip-capabilities-to-its-wireless-devices-texas-ins/">extending zigbee</a> and adding IP. Then you don't need any serial-&gt;zigbee gateway devices. The command packets are generated by the BOSS and just fired off to the proper IP end device (light dimmer) for example.</p>

<p>There still is complexity with device discovery (i.e. how does the BOSS know what light switches are out there?).&nbsp; Maybe when a new light device comes online, it sends a broadcast packet (or packets) alerting the BOSS about it's self. Then the BOSS master control panel could inform the user that a new device has arrived on the network and ask for info on location and other parameters. Kind of like how an iPhone automatically asks you to join a wireless network when it detects one. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yzf600 at Oct 21, 2009 14:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948246"></a>
                                    <font class="smallfont"><p>Actually, I use Contiki in my stack and am a fan of 6LoWPAN but the problem is that its just a compression scheme for IP packets to fit into 802.15.4 frames. Hence 6LoWPAN is basically TCP/IP, which in itself is not a bad thing. The problem with using TCP/IP at this point is that there is no application layer standardized for devices. Device and service discovery are still being worked out in 6LoWAPP and there are no standardized profiles, ie: Home Automation profile. Without interoperability, it won't make much sense for home automation which requires multiple vendors to work together.</p>

<p>As an example, take TCP/IP for PC communications. Above TCP/IP, it still requires a standardized protocol (HTTP) so that devices (client PCs) can communicate with other devices (servers). On top of that, other protocols are required to decipher the raw data, such as HTML, CSS, etc... which were standardized by the W3C before browser compatibility could be achieved. All of these needed to exist before real communications could take place. IPSO (IP for Smart Objects) is working on device compatibility and using TCP/IP and 6LoWPAN and there are a lot of draft specs for the IETF. Once things become standardized, then device to device communications using 6LoWPAN and TCP/IP or UDP/IP will probably take off.</p>

<p>For Zigbee/IP, there is currently an effort underway to combine it with 6LoWAPP for smart energy applications. Most likely, it will end up with Zigbee standardizing on 6LoWPAN for all their profiles, but from my experience with the Alliance, it will take time. I have more information on my website about the efforts to combine Zigbee/IP with 6LoWAPP. Here's the link:</p>

<p><a href="http://freaklabs.org/index.php/Blog/Zigbee/Outline-Summary-of-IETF-Draft-Smart-Energy-Requirements-for-6LowAPP.html">Link</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by freaklabs at Oct 21, 2009 15:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948289"></a>
                                    <font class="smallfont"><p>Good point and agreed on the need on profiles and app level protocols. Datalink and transport only get you so far. But once they are in place at least it becomes feasible to start planning, implementing and experimenting with various higher level protocols &#8211; that's where the fun starts.</p>

<p>Too bad we're still stuck in the proprietary rut.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 22, 2009 20:53
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:32</font></td>
		    </tr>
	    </table>
    </body>
</html>