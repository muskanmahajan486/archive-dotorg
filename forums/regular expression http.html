<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : regular expression http</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : regular expression http
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 19, 2014 by <font color="#0050B2">adrian1983</font>.
				    </div>

				    <p>what's the syntax for the regular expression field when you use http protocol?</p>

<p>thanks in advance</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22883053"></a>
                                    <font class="smallfont"><p>I found a tutorial here: <a href="http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial">http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial</a></p>

<p>I am collecting texts and links relating to ReGex in my <a href="http://www.openremote.org/display/~pz1/HowTo+RegEx">private space</a>. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 19, 2014 11:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883063"></a>
                                    <font class="smallfont"><p>thanks for the answer.</p>

<p>i'm trying to read the value of an arduino input with an http GET request.<br/>
When i use it from a browser it works good for exemple if i want to read the variable "J"(which represent the value of an input) i send a GET <a href="http://192.X.X.X/J">http://192.X.X.X/J</a> and the browser print 3 (which is the right value) but when i use it with openremote i really don't see how i could represent J in the regular expression path.<br/>
Do you have an idea ?? I tried to write simply J but it didn't work. I'm gonna try other things.</p>

<p>thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Jan 19, 2014 13:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883065"></a>
                                    <font class="smallfont"><p>Please be more concrete.<br/>
Give screendumps of the http command that you defined, and the sensor that you configured on that command.<br/>
Can you give more detail on the source you are reading? what is it xml, html?....</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 19, 2014 13:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883068"></a>
                                    <font class="smallfont"><p>Sorry, it's a little complicated cause i'm reading informations from an arduino with a fake webserver in it cause the arduino is not running a real webserver as a service. It's maybe why i can't have a real http answer of my arduino.<br/>
I will continue to try things.<br/>
(It's hard to explain it and i won't give you the all code of my arduino it would be too long).</p>

<p>Thanks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Jan 19, 2014 14:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883074"></a>
                                    <font class="smallfont"><p>Well, then you're on your own.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 19, 2014 14:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883105"></a>
                                    <font class="smallfont"><p>From this, it looks to me that "http://192.X.X.X/J" is the URL to use in the HTTP command the it returns a string "3" which is the value you want to use.<br/>
I don't see the need to any regular expressions here. Those are just to process the response body from the HTTP request to e.g. extract a value from a longer output.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Jan 20, 2014 08:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884032"></a>
                                    <font class="smallfont"><p>eric tu es français ???</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 06, 2014 16:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884033"></a>
                                    <font class="smallfont"><p>eric i think you totaly understood my problem!! but i don't get how you extract J inside the response???</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 06, 2014 16:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884079"></a>
                                    <font class="smallfont"><p>Je suis Belge et parle français. Si tu préfères, on peut discuter du problème en français et je posterai la conclusion en anglais pour les autres.</p>

<p>For non French speaking users, we'll discuss the issue in French here and I'll post the conclusion in English for general information.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 07, 2014 13:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884080"></a>
                                    <font class="smallfont"><p>Pas certain. Je ne comprend pas bien d'où vient le J.</p>

<p>D'après ce que je comprend, c'est juste le nom d'une variable, donc c'est constant et tu peux le "hardcoder" dans l'URL.<br/>
Ce qui est variable, c'est la valeur retournée. Et elle est dans la réponse à la command, pas dans l'URL.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 07, 2014 13:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884119"></a>
                                    <font class="smallfont"><p>En fait le J est la variable qui contient la valeur d'une entrée de l'arduino (je ne sais pas si j'ai précisé que je travaille avec un arduino) donc dans ma requete HTTP j'envoie <a href="http://192......../J">http://192......../J</a> et dans mon code arduino cette commande me renvoie bien la valeur de J. Pour les tests j'ai forcé la valeur de J à 3 quand j'envoie ma requete depuis mon navigateur je vois bien 3 apparaître sur ma page web. Le problème c'est que je ne comprends pas comment je dois faire avec openremote pour pouvoir traiter cette valeur et l'afficher grâce au système de sensor?? comment openremote se débrouille pour parser la réponse et afficher 3 ??</p>

<p>merci d'avance.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 08, 2014 10:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884120"></a>
                                    <font class="smallfont"><p>Si la requête retourne juste la valeur 3, sans autre texte, alors aucun parsing à faire.<br/>
Tu peux simplement créer un sensor de type "custom" (ou range si c'est uniquement une valeur numérique) et utiliser cela dans l'interface utilisateur (sur un label par exemple) ou dans les règles.</p>

<p>Sinon, peux-tu poster la résultat de la requête? Par exemple le "view source" du résultat de la requête dans un browser.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 08, 2014 10:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884127"></a>
                                    <font class="smallfont"><p>Je vois ce que tu veux dire mais dans une réponse HTTP obligatoirement il y a toute l'entête ainsi que la réponse "200 ok"qui est renvoyeé non ??? donc comment openremote fait pour se concentrer uniquement sur le champ 3 et virer tout le reste de la trame de réponse. Je suis entrain de tester la même chose avec une petite page en PHP et j'ai le même problème.<br/>
J'envoie mon GET depuis openremote avec une valeur à retourner, wireshark voit bien l'échange mais rien ne se produit dans Openremote.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 08, 2014 14:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884211"></a>
                                    <font class="smallfont"><p>Au niveau TCP effectivement, il y a bien toute la structure du protocol HTTP, mais si tu utilises une commande HTTP, tout cela est pris en compte par le protocol et tu as juste le "payload" en retour.</p>

<p>Peux-tu décrire ce que tu as fait dans OR ?</p>

<p>Tu devrais avoir une commande HTTP. Il vaut mieux paramétrer un "polling interval". Ensuite lier cette commande à un sensor, puis le sensor sur un label.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 10, 2014 08:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884246"></a>
                                    <font class="smallfont"><p>la config sur laquelle je travaille sur mes informations de retour depuis plusieurs semaines est exactement celle que tu décris!!</p>

<p>J'ai testé a base de requête HTTP en premier, pour les tests j'ai essayé d'envoyer mes requetes sur un serveur que j'ai codé en PHP je n'ai aucun retour dans openremote alors que je fais le même test à l'aide de HERCULES (logiciel client TCP) j'ai bien mon retour d'infos.</p>

<p>Ensuite je viens de teste avec un serveur que j'ai codé en C# mais la j'utilise des requêtes TCP HERCULES affiche bien la valeur de retour mais Openremote ne veut rien savoir !!</p>

<p>Je suis perdu!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 11, 2014 14:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884247"></a>
                                    <font class="smallfont"><p>ah oui et wireshark voit bien les échanges avec la trame de retour renvoyée sur OpenRemote mais Openremote n'affiche strictement rien dans le Label!!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 11, 2014 14:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884249"></a>
                                    <font class="smallfont"><p>ça maaaaaarrrchheeee j'en pouvais plus je n'avais jamais utilisé le polling !!! je pense que ça vient de là!!<br/>
je pensais que ce n'était pas nécéssaire.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by adrian1983 at Feb 11, 2014 15:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22887181"></a>
                                    <font class="smallfont"><p>bonjour,</p>

<p>je viens de débuter un projet sous openremote + ARDUINO.<br/>
J'aimerais communiquer avec un arduino (allumer une led pour commencer) :</p>
<ul class="alternate" type="square">
	<li>dans un premier temps je pensais utiliser la liaison série mais cela ne fonctionne pas pourtant lorsque je le teste avec un terminal série cela fonctionne.</li>
	<li>Comme j'ai un shield Ethernet je me suis dit que j'allais utiliser les commandes par HTTP get....<br/>
Est ce que tu pourrais mettre le code de l'arduino et les paramètre utilisé du côté openremote stp ?</li>
</ul>


<p>Merci d'avance<br/>
Lionel</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by lionel81 at Jun 19, 2014 21:28
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:38</font></td>
		    </tr>
	    </table>
    </body>
</html>