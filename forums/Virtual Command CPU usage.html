<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Virtual Command CPU usage</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Virtual Command CPU usage
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 21, 2013 by <font color="#0050B2">thenetstriker</font>.
				    </div>

				    <p>Since i've configured 4 virtual commands in Openremote the CPU usage of the openremote process has increased from about 1% to 6%. I think the problem is that the sensors read those virtual commands to often and that this causing this higher CPU usage. I've changed the virtual command on my installation and replaced the depricated "StatusCommand" interface with the new "EventListener" interface and now my CPU usage is much lower. You can see my changes here: <a href="http://pastebin.com/TC8X8tza">http://pastebin.com/TC8X8tza</a></p>

<p>But his is not a very clean solution because now the class ignores the sensor type completeley and also it will not be possible to have more than one sensor per command. (I don't know if this is required in some scenarios) Will this command be improved in future releases?</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22878607"></a>
                                    <font class="smallfont"><p>Hi David,</p>

<p>Thanks for reporting this. Yes it looks like the command should be upgraded to the EventListener interface. Not sure when we get to this yet. I can try to schedule it for 2.2 release.</p>

<p>If anyone wants to take a stab at patching this, please let us know on this thread. There's a couple of things I'd like to see in the patch to maintain backwards compatibility which I can discuss if anyone's interested in doing the migration work.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 22, 2013 01:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878822"></a>
                                    <font class="smallfont"><p>Thanks for your answer. I think I just found the first problem with my solution. I configured the rrd database to store values from my virtual command, but the command just gets saved to the rrd database if the sensor.update method is called every couple minutes.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by thenetstriker at Oct 24, 2013 22:38
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>