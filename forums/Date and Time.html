<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Date and Time</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Date and Time
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 09, 2015 by <font color="#0050B2">rich.sperrin</font>.
				    </div>

				    <p>I found a way of adding data and time to your openremote interface using jsontest.com - might come in useful.</p>

<p>jsontest.com offers a number of endpoints that return json data - i was particularly interested in date &amp; time.</p>

<p>Its easy to do:-</p>

<p>1. create a HTTP command; Name:GetTime, Protocol:HTTP, URL:<a href="http://time.jsontest.com">http://time.jsontest.com</a>, Method:HTTP, Interval:1s, Expression:$.time<br/>
2. create a sensor; Name:GetTime Sensor, Command:GetTime, Type:custom<br/>
3. add a label and set the Sensor to GetTime Sensor.</p>

<p>As you can imagine the date is very similar - just use a less frequent interval - I settled for 1m so it flips over reasonably close to midnight.</p>

<p>Heres a pic of finished front screen complete with date and time:-</p>

<p><img src="attachments/23597472/23789836.png" align="absmiddle" border="0"/></p>


<p>Yea you spotted it, timezone and date format - fortunately timezone is GMT lucky for me in UK - date format is a little ropey though! - perhaps someone can recommend a more suitable source. I was wondering how I would go about doing this with my raspberry pi2 server.</p>

<p>Theres another feature on jsontest called echo. By constructing the URL and sending to jsontest you can achieve this:-</p>

<p>URL: <a href="http://echo.jsontest.com/time/21:21/date/08-04-2015">http://echo.jsontest.com/time/21:21/date/08-04-2015</a><br/>
RESULT:<br/>
{<br/>
   "time": "21:21",<br/>
   "date": "08-04-2015"<br/>
}</p>

<p>Again could be useful but if its constructing the values in the first place why not use those instead of pinging it around the net. </p>




				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597472/23789835.jpg">IMG_20150408_210319.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597472/23789836.png">IMG_20150408_210319.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23597477"></a>
                                    <font class="smallfont"><p>What is wrong with OpenRemote's built-in Date/time function?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 09, 2015 08:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597490"></a>
                                    <font class="smallfont"><p>Glad you bought that up <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>This is where I first looked but as far as I can tell it doesnt do time - only date and isDay and sunset etc.</p>

<p>Hopefully I missed something? I tried time format IE hh:mm but its not documented and didnt want to know.</p>

<p>cheers</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 09, 2015 18:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597492"></a>
                                    <font class="smallfont"><p>You can select (format) with:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">dd.MM.yyyy HH:mm:ss</pre>
</div></div>
<p>Just use the elements you need. There is a reference to formats in the <a href="http://www.openremote.org/x/koYoAQ">HowTo</a> </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 09, 2015 18:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597518"></a>
                                    <font class="smallfont"><p>That seems to working - I would guess the refresh interval is not configurable? I ask because I included seconds in the format but doesnt change. Seconds are not essential though!</p>

<p>Is there a format for British Summer Time?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 10, 2015 18:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597522"></a>
                                    <font class="smallfont"><p>IIRC some "devices" are update every 500 ms. Not sure if that applies to this protocol.</p>

<blockquote><p>Is there a format for British Summer Time</p></blockquote>
<p>That should be determined by the time zone setting in the command I assume. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 10, 2015 18:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597526"></a>
                                    <font class="smallfont"><p>Thats what I figured as well - tried GMT &amp; BST in Timezone - still an hour slow. I'll keep digging.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 10, 2015 18:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597527"></a>
                                    <font class="smallfont"><p>Is the "locale" in your controller computer properly set?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 10, 2015 18:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597528"></a>
                                    <font class="smallfont"><p>Thats the badger!</p>

<p>A quick sudo cp /usr/share/zoneinfo/Europe/London /etc/localtime did the trick (on raspberry pi)</p>

<p>Sorted</p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 10, 2015 19:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597529"></a>
                                    <font class="smallfont"><p>Not so fast!!</p>

<p>Raspberry Pi is reporting correct time for BST and has been rebooted.</p>

<p>Sensor is still displaying hour slow. Tried Timezone Europe/London &amp; GMT &amp; BST</p>

<p>Bizarre!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 10, 2015 19:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597561"></a>
                                    <font class="smallfont"><p>Okay - using sudo dpkg\-reconfigure tzdata on RPi2 tells me I have:-<br/>
Local Time : Sun Apr 12 15:20:48 BST 2015<br/>
Universal Time : Sun Apr 12 14:20:48 UTC 2015</p>

<p>Unfortunately the OR2 Java command is returning UTC</p>

<p>I've tried adjusting the timezone to Europe/London &amp; BST (&amp; UTC) but it wont budge.</p>

<p>And thats after restarting OR2 each time on the tablet.</p>

<p>GOT THERE!</p>

<p>Restarted the RPi2 after using the command above.</p>

<p>(I left the timezone blank in the end)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Apr 12, 2015 15:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601649"></a>
                                    <font class="smallfont"><p>Hi Rich i have a question for you, about a different topic (sorry for hijack you post)</p>

<p>in you design you have a tune in button.  I have tune in working with vlc but in fact is a mess.</p>

<p>Can you let me know haw you make it work for you.</p>

<p>Thanks in advance.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Oct 11, 2015 23:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601664"></a>
                                    <font class="smallfont"><p>Hi</p>

<p>I have removed the Tune-In radio button but was using it with the built-in HTML that my network Philips speakers serve.</p>

<p>The built in media software is called Philips Airplay+ and has a Tune-In radio section.</p>

<p>I wrote quite a long piece on sending HTML commands on another OR2 page - here is the link:-</p>

<p><a href="http://www.openremote.org/display/forums/Commands+for+Philips+AW9000+Wifi+speakers">http://www.openremote.org/display/forums/Commands+for+Philips+AW9000+Wifi+speakers</a></p>

<p>Sorry - but suspect this doesnt help you very much.</p>

<p>What may help is Firefox's Web Console - this exposes HTML commands. Maybe you could use this with the OR2 web browser control? I have to admit I didnt have much luck with sending HTML URL commands to the OR2 browser control though :-/</p>

<p>[Edit]</p>

<p>Just had a quick look at Tune-In radio - as an example you can send the URL <a href="http://tunein.com/radio/Sam-FM-Bristol-1065-s80728/">http://tunein.com/radio/Sam-FM-Bristol-1065-s80728/</a> - this will tune the target device to a station. The command can be sent to the device using the HTML function in the OR2 command option.</p>

<p>regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Oct 13, 2015 19:39
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:33</font></td>
		    </tr>
	    </table>
    </body>
</html>