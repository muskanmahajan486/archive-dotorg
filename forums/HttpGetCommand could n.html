<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : HttpGetCommand could n</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : HttpGetCommand could n
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 06, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hello, </p>

<p>I'm trying to use the HTTP command protocol to control my Philips JointSpace (JSON POST and GET) enabled TV. However I get the following warning: </p>

<div style="max-width: 800px;"><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ERROR [HTTP-Thread-3]: HttpGetCommand could not execute
org.apache.http.client.HttpResponseException: Not Found
        at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:67)
        at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:54)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:735)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:709)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:700)
        at org.openremote.controller.protocol.http.HttpGetCommand.requestURL(HttpGetCommand.java:176)
        at org.openremote.controller.protocol.http.HttpGetCommand.send(HttpGetCommand.java:136)
        at org.openremote.controller.service.impl.ControlCommandServiceImpl.trigger(ControlCommandServiceImpl.java:95)
        at org.openremote.controller.rest.ControlCommandRESTServlet.handleRequest(ControlCommandRESTServlet.java:77)
        at org.openremote.controller.rest.RESTAPI.doPost(RESTAPI.java:125)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
</pre>
</div></div></div>

<p>My data in the command are: <br/>
URL: <a href="http://10.0.0.97:1925/1/input/key">http://10.0.0.97:1925/1/input/key</a><br/>
Method: POST<br/>
Workload: {"key": "ChannelStepDown"}<br/>
Polling interval: 120m</p>

<p>I've tried in editing various space positions in the workload field, eg no spaces, spaces between each value, etcetera. Also with polling on 120m and blank. Nothing works, always the same error. OpenRemote Controller v2.0.2. </p>

<p>Thanks in advance. </p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21859775"></a>
                                    <font class="smallfont"><blockquote>
<p>org.apache.http.client.HttpResponseException: Not Found</p></blockquote>

<p>This is the usual HTTP 404 Page Not Found error. It would seem that the URL is not correct?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 06, 2013 18:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859878"></a>
                                    <font class="smallfont"><p>I've tested some commands with a regular programmed PHP page using CURL and those worked. <br/>
It seems that the TV standard gives a 404 although the command is received and executed. Is there a workaround for OR to use the HTTP function with POST to a URL without giving an exception for a 404 (otherwise the command is not executed). <br/>
Or maybe I have to use the PHP page to relay the commands via OR to the TV... That is also a possibility but not the one I am planning to use. </p>

<p>Thank you. </p>

<div style="max-width: 800px;"><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>&lt;?php

$data = array("key" =&gt; "ChannelStepUp");                                                                    
$data_string = json_encode($data);                                                                                   
 
$ch = curl_init('http://10.0.0.97:1925/1/input/key');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   
 
$result = curl_exec($ch);

if ($result) {
	echo "command executed! &lt;br /&gt;";
	echo $result; 
}
else {
	echo "command not executed. "; 
}

curl_close($ch);
?&gt;
</pre>
</div></div></div>

<p>Executing the PHP page results in: <div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>command executed! 
Ok
</pre>
</div></div></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by arjen at Apr 08, 2013 09:16
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>