<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Micasaverde's Vera - Polling interval</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Micasaverde's Vera - Polling interval
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 06, 2012 by <font color="#0050B2">milimilo</font>.
				    </div>

				    <p>Hello guys</p>

<p>I'm working on an UI for my Vera. <br/>
I have a question about the sensors. I have to create several sensors to get the status of my switches and dimmers. The problem is that each sensor created individually sends a request to the Vera. And now i have too much request and the Vera is totally flooded.</p>

<p>Isn't it possible that the Controller polls the xml status file from the Vera and stores it ? Then each sensors picks the good information in the stored file but doesn't send a new request the the Vera.</p>

<p>Thanks for you help.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20449648"></a>
                                    <font class="smallfont"><p>The current implementation does not support that. I did something similar for the ShellExe protocol where you can attache multiple sensor to the same command and the command would be triggered only once. Based on a regex the different sensor were updated from only one result.</p>

<p>This is not available for HTTP in the moment.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 07, 2012 00:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449654"></a>
                                    <font class="smallfont"><p>This is exactly what we need for http protocol !<br/>
Any chance to be implemented ?</p>

<p>Thx</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by milimilo at Aug 07, 2012 14:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449664"></a>
                                    <font class="smallfont"><p>I will create a JIRA issue, so we don't forget.<br/>
Feel free to contribute <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 07, 2012 16:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449666"></a>
                                    <font class="smallfont"><p>Thank you very much.</p>

<p>I've already heard your contribution request <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
I am a real zer√ò in programming so i really can't help that way. I am an art director so i could help this way ^^<br/>
Once we will have enought things about OpenRemote and Vera i'll complete the wiki.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by milimilo at Aug 07, 2012 17:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451636"></a>
                                    <font class="smallfont"><p>Quote: I have to create several sensors to get the status of my switches and dimmers. </p>

<p>How did you do that? Did you use wget http commands?<br/>
Can you give an example, please?</p>

<p>I trying the same thing, but can't get the right way to do this....</p>

<p>Thanx in advance!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jerommeke at Oct 09, 2012 21:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451640"></a>
                                    <font class="smallfont"><p>Hello Lambikkel</p>

<p>You can have a look at this link
<a href="http://www.touteladomotique.com/forum/viewtopic.php?f=48&amp;t=8112&amp;p=65618#p65650">http://www.touteladomotique.com/forum/viewtopic.php?f=48&amp;t=8112&amp;p=65618#p65650</a><br/>
It is french words but google can easily translate, or just have a look at the video and you'll answer the mechanism.</p>

<p>Ask if you need some help.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by milimilo at Oct 09, 2012 22:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037951"></a>
                                    <font class="smallfont"><p>We are still interested in your contribution. Being an art director, even better! <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre kil at Nov 30, 2012 12:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038239"></a>
                                    <font class="smallfont"><p>I know it is a bit late to respond, but I do it anyway..... <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I struggled a lot to get it working but it finally does. For all of you who struggling for commands, this is what I found so far. All settings are HTTP - Wget commands. Everything between &lt;TEXT&gt; depends on your local configuration.</p>

<p>Credits for Mililliccuty for pointing me to the right direction!</p>

<ul>
	<li>Turn a switch/dimmer on:<br/>
URL: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//&lt;IP_OF_VERA&gt;:3480/data_request?id=lu_action&amp;output_format=xml&amp;DeviceNum=&lt;DEVICE_ID_NUMBER&gt;&amp;serviceId=urn:upnp-org:serviceId:SwitchPower1&amp;action=SetTarget&amp;newTargetValue=1</span></pre>
</div></div> </li>
</ul>


<ul>
	<li>Turn a switch/dimmer off:<br/>
URL: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//&lt;IP_OF_VERA&gt;:3480/data_request?id=lu_action&amp;output_format=xml&amp;DeviceNum=&lt;DEVICE_ID_NUMBER&gt;&amp;serviceId=urn:upnp-org:serviceId:SwitchPower1&amp;action=SetTarget&amp;newTargetValue=0</span></pre>
</div></div></li>
</ul>


<ul>
	<li>Status of a Switch:<br/>
URL: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//&lt;IP_OF_VERA&gt;:3480/data_request?id=sdata&amp;output_format=xml</span></pre>
</div></div><br/>
XPath Expression: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">//devices/device[@id='&lt;DEVICE_ID_NUMBER&gt;']/@status</span></pre>
</div></div>Polling interval: 60</li>
</ul>


<ul>
	<li>Slider of a dimmer:<br/>
URL: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//&lt;IP_OF_VERA&gt;:3480/data_request?id=lu_action&amp;output_format=json&amp;DeviceNum=&lt;DEVICE_ID_NUMBER&gt;&amp;serviceId=urn:upnp-org:serviceId:Dimming1&amp;action=SetLoadLevelTarget&amp;newLoadlevelTarget=${param}</span></pre>
</div></div></li>
</ul>


<ul>
	<li>Dimmer Value:<br/>
Vitrine Dimmer Status (http - GET):<br/>
URL: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//&lt;IP_OF_VERA&gt;:3480/data_request?id=sdata&amp;output_format=xml</span></pre>
</div></div><br/>
XPath Expression: <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">//devices/device[@id='&lt;DEVICE_ID_NUMBER&gt;']/@level</span></pre>
</div></div>Polling interval: 60</li>
</ul>


<p>This are the commands I used and they seems to work!</p>

<p>The next issue I want to resolve is how to monitor Energy readings from a Energy monitoring device (probably i have to change @level in something else, but what?). If anyone can help in the right direction, it would be appreciated!!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jerommeke at Dec 07, 2012 21:45
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>