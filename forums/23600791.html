<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Math.random value to string?</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Math.random value to string?
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 25, 2015 by <font color="#0050B2">robnas</font>.
				    </div>

				    <p>Hello,</p>

<p>Im trying to get a random hexvalue to a string:<br/>
according to <a href="http://www.paulirish.com/2009/random-hex-color-code-snippets/">http://www.paulirish.com/2009/random-hex-color-code-snippets/</a><br/>
i would like to use this code:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
(<span class="code-object">Math</span>.random().toString(16) + '0000000').slice(2, 8)
</pre>
</div></div>

<p>it has to be converted to a string<br/>
i tried:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-object">String</span> test = (<span class="code-object">int</span>)(<span class="code-object">Math</span>.random().toString(16) + '0000000').slice(2, 8);
</pre>
</div></div>

<p>and:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-object">String</span> test = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random().toString(16) + '0000000').slice(2, 8);
</pre>
</div></div>

<p>but they both fail, can someone help me to get this right?</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23600791/23789964.jpg">Naamloos3.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23600791/23789970.jpg">Naamloos11.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23600827"></a>
                                    <font class="smallfont"><p>Your first line already returns string.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Aug 26, 2015 08:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600907"></a>
                                    <font class="smallfont"><p>Correct but I need 16 strings of this and would like to have something like the second line. So string1 =  string2 = and so on. Do you know how? They will be combined later in one string and send to a Wifi370 rgb controller</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 01, 2015 14:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600908"></a>
                                    <font class="smallfont"><p>The second line should be simply</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-object">String</span> test = (<span class="code-object">Math</span>.random().toString(16) + '0000000').slice(2, 8);
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Sep 01, 2015 14:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600971"></a>
                                    <font class="smallfont"><p>i tried that but the boot.log shows an error:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR 2015-09-02 13:23:15,664 : Rule definition 'modeler_rules.drl' could not be deployed. See errors below.
ERROR 2015-09-02 13:23:15,664 : Rule Compilation error Invalid character constant
ERROR 2015-09-02 13:23:15,665 : There was an error parsing the rule definition 'modeler_rules.drl' : Could not parse knowledge.
java.lang.IllegalArgumentException: Could not parse knowledge.
	at org.drools.builder.impl.KnowledgeBuilderImpl.newKnowledgeBase(KnowledgeBuilderImpl.java:58)
	at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:532)
	at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)
	at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)
	at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:659)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:872)
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:454)
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1411)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)
INFO 2015-09-02 13:23:15,702 : Initialized event processor : Drools Rule Engine
INFO 2015-09-02 13:23:15,831 : Initialized event processor : RRD4J Data Logger
INFO 2015-09-02 13:23:15,831 : Initialized event processor : EmonCMS Data Logger

</pre>
</div></div>


<p>i tried without the ' and with "000000"  but then the folowing error:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR 2015-09-02 13:38:04,645 : Rule definition 'modeler_rules.drl' could not be deployed. See errors below.
ERROR 2015-09-02 13:38:04,646 : Rule Compilation error Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
Cannot invoke toString(<span class="code-object">int</span>) on the primitive type <span class="code-object">double</span>
ERROR 2015-09-02 13:38:04,648 : There was an error parsing the rule definition 'modeler_rules.drl' : Could not parse knowledge.
java.lang.IllegalArgumentException: Could not parse knowledge.

</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 02, 2015 14:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23600977"></a>
                                    <font class="smallfont"><p>Seems like this code is not compatible with Java that Openremote uses. You will need to find different code snippets with less hacking, or write your own, clean code.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Sep 02, 2015 15:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601002"></a>
                                    <font class="smallfont"><p>i found a solution already, i need a string of 96 bytes, mostly the string will be 94, 95 or 96 bytes. if lower then 96 bytes a "0"  or "00" will be added to the header of the string</p>

<p>heres the code for controlling 2 wificontrollers with a switch its possible to chain them so the rgb controllers will output the same colours</p>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"wifi rgb controller 1 + 2 random"</span> 
timer (<span class="code-object">int</span>: 2s 180s)
when eval (<span class="code-keyword">true</span>)
Event( source==<span class="code-quote">"random.wifi1"</span>, $val01 : value)
Event( source==<span class="code-quote">"random.wifi2"</span>, $val02 : value)
Event( source==<span class="code-quote">"koppeling"</span>, $val03 : value)
then
  <span class="code-object">String</span> val01a = $val01.toString();
  <span class="code-object">String</span> val02a = $val02.toString();
  <span class="code-object">String</span> val03a = $val03.toString();
<span class="code-keyword">if</span> (val01a.length() == 2) {

<span class="code-object">String</span> valStra1 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra2 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra3 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra4 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra5 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra6 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra7 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra8 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra9 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra10 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra11 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra12 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra13 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra14 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra15 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra16 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));

<span class="code-object">String</span> hex1b = valStra1.toString() + valStra2.toString() + valStra3.toString() + valStra4.toString() + valStra5.toString() + valStra6.toString() + valStra7.toString() + valStra8.toString() + valStra9.toString() + valStra10.toString() + valStra11.toString() + valStra12.toString() + valStra13.toString() + valStra14.toString() + valStra15.toString() + valStra16.toString() ;

<span class="code-object">String</span> snelh = <span class="code-quote">"1f"</span>;
<span class="code-object">String</span> fade = <span class="code-quote">"3a"</span>;
<span class="code-object">String</span> foot2 = <span class="code-quote">"ff"</span>;
<span class="code-object">String</span> foot3 = <span class="code-quote">"66"</span>;

<span class="code-keyword">if</span> (hex1b.length() == 96) {
<span class="code-object">String</span> total1 = <span class="code-quote">"99"</span> + hex1b.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total1.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi1 controller:"</span> + <span class="code-quote">" "</span> + total1.toString());

}
<span class="code-keyword">if</span> (hex1b.length() == 95) {
<span class="code-object">String</span> total1 = <span class="code-quote">"99"</span> + <span class="code-quote">"0"</span>  + hex1b.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total1.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi1 controller:"</span> + <span class="code-quote">" "</span> + total1.toString());

}
<span class="code-keyword">if</span> (hex1b.length() == 94) {
<span class="code-object">String</span> total1 = <span class="code-quote">"99"</span> + <span class="code-quote">"00"</span> +  hex1b.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total1.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi1 controller:"</span> + <span class="code-quote">" "</span> + total1.toString());
 }
}
<span class="code-keyword">if</span> (val02a.length() == 2) {
<span class="code-object">String</span> valStra1 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra2 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra3 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra4 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra5 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra6 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra7 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra8 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra9 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra10 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra11 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra12 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra13 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra14 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra15 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
<span class="code-object">String</span> valStra16 = <span class="code-object">String</span>.format(<span class="code-quote">"%x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));

<span class="code-object">String</span> hex1a = valStra1.toString() + valStra2.toString() + valStra3.toString() + valStra4.toString() + valStra5.toString() + valStra6.toString() + valStra7.toString() + valStra8.toString() + valStra9.toString() + valStra10.toString() + valStra11.toString() + valStra12.toString() + valStra13.toString() + valStra14.toString() + valStra15.toString() + valStra16.toString() ;

<span class="code-object">String</span> snelh = <span class="code-quote">"1f"</span>;
<span class="code-object">String</span> fade = <span class="code-quote">"3a"</span>;
<span class="code-object">String</span> foot2 = <span class="code-quote">"ff"</span>;
<span class="code-object">String</span> foot3 = <span class="code-quote">"66"</span>;

<span class="code-keyword">if</span> (hex1a.length() == 96) {
<span class="code-object">String</span> total2 = <span class="code-quote">"99"</span> + hex1a.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi2.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi2 controller:"</span> + <span class="code-quote">" "</span> + total2.toString());
<span class="code-keyword">if</span> (val03a.length() == 2) {
execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Koppeling actief, command verzonden naar Wifi Controller1"</span>);
 }
}
<span class="code-keyword">if</span> (hex1a.length() == 95) {
<span class="code-object">String</span> total2 = <span class="code-quote">"99"</span> + <span class="code-quote">"0"</span>  + hex1a.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi2.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi2 controller:"</span> + <span class="code-quote">" "</span> + total2.toString());
<span class="code-keyword">if</span> (val03a.length() == 2) {
execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Koppeling actief, command verzonden naar Wifi Controller1"</span>);
 }
}
<span class="code-keyword">if</span> (hex1a.length() == 94) {
<span class="code-object">String</span> total2 = <span class="code-quote">"99"</span> + <span class="code-quote">"00"</span>  + hex1a.toString() +  snelh.toString() + fade.toString() + foot2.toString() + foot3.toString();

execute.command(<span class="code-quote">"wifi2.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Verzonden RGB string Wifi2 controller:"</span> + <span class="code-quote">" "</span> + total2.toString());
<span class="code-keyword">if</span> (val03a.length() == 2) {
execute.command(<span class="code-quote">"wifi1.shell.sed.fade"</span>, total2.toString());
log(<span class="code-quote">"Koppeling actief, command verzonden naar Wifi Controller1"</span>);
 }
}
}
end
</pre>
</div></div>

<p>wifi1.shell.sed.fade  is a shell command, <br/>
<img src="attachments/23600791/23789964.jpg" align="absmiddle" border="0"/></p>

<p>shell command contains this code:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
echo -ne <span class="code-quote">"$(echo $1 | sed -e 's/../\\x&amp;/g')"</span> | nc -q 3 192.168.1.43 5577
</pre>
</div></div>
<p>note: Bootstrap, Netcat and Sed needs to be installed. Sed will put a \x after each colour in the string and send it to the controller</p>

<p>more info:  <a href="http://www.openremote.org/pages/viewpage.action?pageId=23600633">http://www.openremote.org/pages/viewpage.action?pageId=23600633</a></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 03, 2015 12:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601003"></a>
                                    <font class="smallfont"><p>Nice to hear that you've got it working.</p>

<p>I still don't find it pretty that you need to use netcat through shell. It is not easy portable and uses too many resources - <br/>
shell command allocates the same memory on heap as the running openremote process causing problems on smaller systems with less memory.<br/>
The reason is that TCP command is blocking and you use -q switch in netcat to force quit. If your wificontroller accepts UDP instead of TCP then<br/>
it would not block. Otherwise we would need to amend the TCP command implementation. Would you mind to report it in <a href="http://jira.openremote.org/">jira</a>?<br/>
IMHO, this addition would be useful with other systems too, i.e. non-blocking TCP command which terminates connection after EOF of input data.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Sep 03, 2015 12:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601004"></a>
                                    <font class="smallfont"><p>Michal, i agree that this is not the best solution via shell. but the controller only accepts TCP not UDP ive tried UDP but noting happends.<br/>
if the TCP protocol could be amended that would be great and the code will be a lot easyier. i will report this in JIRA and hopefully it could be fixed.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 03, 2015 13:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601007"></a>
                                    <font class="smallfont"><p>jira issue: <a href="http://jira.openremote.org/browse/INFRA-14">http://jira.openremote.org/browse/INFRA-14</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 03, 2015 13:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601017"></a>
                                    <font class="smallfont"><p>this also works:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-object">String</span> valStra1 = <span class="code-object">String</span>.format(<span class="code-quote">"%06x"</span>,(<span class="code-object">int</span>)(<span class="code-object">Math</span>.random()*16777216));
</pre>
</div></div>

<p>%06 ensures that the output will be 6 chars, if not the beginchars will be filled with zeros, x converts them in to HEX, use X for Capital HEX chars</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 03, 2015 23:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601190"></a>
                                    <font class="smallfont"><p>i think i solved this tcp/udp thing.<br/>
you could login the rgb controller and set it to udp or tcp, standaard the tcp port is set to 300sec which can be ajusted (see pic below)</p>

<p>you can enter the ip of the rgb controller in yourbrowser (port 80) with login: admin and pass: nimda<br/>
after that you can adjust it.</p>

<p>i tried to set to tcp with 1 second and it works but its not the best solution as sometimes you have to push the button twice probably of the lag or else, but set the time to 5 seconds would freeze your rules again (as descibed above)<br/>
note that the android app for this controller will not work when setting this to 1 sec</p>

<p>im expirimenting with udp now because that works to and there is no closing time. also your sandard android app will not work this app works only in tcp mode, so if you want everyting to work then netcat and sed is a good alternative. <br/>
i had also installed my openremote controller on a rasberry pi2 which works excellent will all functions see: <a href="http://www.openremote.org/display/forums/New+Raspberry+Pi+2?focusedCommentId=23601122#comment-23601122">http://www.openremote.org/display/forums/New+Raspberry+Pi+2?focusedCommentId=23601122#comment-23601122</a></p>

<p>the rule code could be the same, put this code in your TCP or UDP command line </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
0x${param}
</pre>
</div></div>
<p>so that rules will send the hex code to </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
${param}
</pre>
</div></div>

<p>this will show when you login the rgb controller:<br/>
<img src="attachments/23600791/23789970.jpg" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 09, 2015 22:48
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:33</font></td>
		    </tr>
	    </table>
    </body>
</html>