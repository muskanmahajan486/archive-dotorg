<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Problem with denon over tcp</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Problem with denon over tcp
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 08, 2012 by <font color="#0050B2">mathiasj</font>.
				    </div>

				    <p>hi there,</p>

<p>i'm trying to controll my denon AVR3312 over TCP/IP.<br/>
All the commands work fine but i cant get the sensors to work...</p>

<p>If i ask the status of my denon he sends the complete package (status,vol,source,....) at once<br/>
Is there a way to use regex on the feedback from my device???</p>

<p>Hope someone can help me out</p>


				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20449701"></a>
                                    <font class="smallfont"><p>Yes, you can use regex for the feedback. In the moment you will have to create one command for each sensor though and change the regex to extract the correct information. This is not perfect since your device returns all sensor data already with one call, but for now this is how it works. We will have to enhance the protocol to support multiple sensors with one command.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 09, 2012 08:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449703"></a>
                                    <font class="smallfont"><p>Thanks for the quick response!</p>

<p>but i still can't figure it out... Where do i put the regex information?<br/>
I've tried using a custom sensor but nowhere to put regex info there?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mathiasj at Aug 09, 2012 08:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449704"></a>
                                    <font class="smallfont"><p>You define the regex at the command not the sensor.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 09, 2012 09:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449705"></a>
                                    <font class="smallfont"><p>is there somewhere i can view a example of this?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mathiasj at Aug 09, 2012 09:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449706"></a>
                                    <font class="smallfont"><p><a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+HTTP+Protocol">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+HTTP+Protocol</a></p>

<p>This is using Xpath but just use rexex instead. Everything else is the same.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 09, 2012 09:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449707"></a>
                                    <font class="smallfont"><p>ok Thanks a lot!</p>

<p>I'll do some experimenting tonight!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mathiasj at Aug 09, 2012 09:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449714"></a>
                                    <font class="smallfont"><p>just did some testing and no luck <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>i don't think i can connect with my denon over http...</p>

<p>When i use tcp/ip everyting works perfect in one way <br/>
but i cant do anything with the feedback (over tcp/ip) </p>

<p>i can show the feedback in a tekst label but i cannot parse it<br/>
when i send commands over http it tells me the command is not found and there is no response at all</p>

<p>when I ask for status on my denon it returns something like "Z2ONZ2NET"    (NET is the source)<br/>
so i need the "ON" to connect to a switch...</p>

<p>hope you can help!!!</p>

<p>and of course many many thank you's in advance <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mathiasj at Aug 09, 2012 20:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449716"></a>
                                    <font class="smallfont"><p>Ok, I did not know the denon only use TCP. <br/>
This means you are out of luck for now. The current TCP protocol implementation does not support regex.<br/>
If you know Java, feel free to contribute.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 09, 2012 23:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452186"></a>
                                    <font class="smallfont"><p>I am using Telnet to control a Denon AVR3313. OpenRemote Telnet does support regular expressions. So I got sensors to work. The problem however is that if you have several sensors polling concurrently the Telnet sessions will collide and you will get session rejects. In addition it looks like that not all the data sent by the Denon Telnet server actually makes it into the OpenRemote sensor. I checked in parallel with Wireshark and it looks like when Denon sends longer multi-packet replies at least the first packet is lost. This makes it difficult to apply regular expressions. I got the best results using custom sensors with some custom states. At the end I decided to just use the commands without sensors, since the controls ended up to be not reliable with the sensor-Telnet-sessions colliding all the time. And when you increase the polling cycles the information update delays make the controls confusing.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by othmark at Oct 16, 2012 01:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886243"></a>
                                    <font class="smallfont"><p>Is there any news in relation to getting status to work with TCP on Denon?<br/>
I am getting all commands to work fine with Denon 3313 over TCP/IP, but I can't get any sensors to work.<br/>
Is there a workaround?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by istian at May 03, 2014 15:02
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:31</font></td>
		    </tr>
	    </table>
    </body>
</html>