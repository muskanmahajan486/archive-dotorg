<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Z-Wave setup - veralite</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Z-Wave setup - veralite
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 07, 2015 by <font color="#0050B2">kslate</font>.
				    </div>

				    <p>What needs to be configured to get Openremote to work with a vera lite controller to control a z-wave light switch? I configured the vera section under Config for Controller but does the z-wave portion also need to be filled out as well? If so, what needs to be selected? Can Openremote control a z-wave device through the vera lite?</p>

<p>I created a command and selected the Vera protocol. Picked ON for one command and OFF for another. I also added the ID number of the z-wave device. I then created two buttons that use those two commands. When I hit either one, I get a "command not found" error.</p>

<p>Probably doing something wrong but I'm not sure what. Can anyone point me in the right direction?</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597441/23789854.png">Controller screen.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597441/23789855.png">Controller screen AG.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597441/23789856.png">zwave1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597441/23789857.png">zwave2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23597441/23789858.png">zwave3.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23597498"></a>
                                    <font class="smallfont"><p>So... does anyone know if you can use a Veralite to control z-wave devices through Openremote? All the docs point at having an Aeon Z-stick 2 but if that is the case what is the point of the Vera configuration connection in the designer? What does this connection get you?</p>

<p>I'm aware that the professional designer allows for easier z-wave integration, but is this limited to using a Aeon Z-stick only? Do you have to use the z-wave 2 jar file in the free designer? Is it even possible with a Veralite to control z-wave devices? I purchased the Veralite in hopes of expanding my Openremote ability control other things such as z-wave or insteon but was that a bad choice?</p>

<p>I'd like to start doing some z-wave design but I'd prefer to do this in Openremote. The Vera interface is painfully bad in comparison to what you can come up with within Openremote.</p>

<p>Has anyone successfully done this with a Veralite? Or done any integration with one?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kslate at Apr 10, 2015 00:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597669"></a>
                                    <font class="smallfont"><p>Hi Kevin.  Yes Openremote is able to control z-wave devices.  </p>

<p>Actually we prefer let the z-wave network to vera and the interface is handled by openremote.</p>

<p>I think this can help you.</p>

<p><a href="http://openremote.org/display/docs/OpenRemote+2.0+How+To+-+Micasaverde+Vera">http://openremote.org/display/docs/OpenRemote+2.0+How+To+-+Micasaverde+Vera</a></p>

<p>For better performance avoid  veralite  UI7. Everything work better with the UI5.</p>



</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Apr 17, 2015 00:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597743"></a>
                                    <font class="smallfont"><p>After a lot of trial and error, I gave up on the Veralite box and returned it. I was very unimpressed with it's user interface (UI7). It was clunky and very frustrating to use. The interface(s) I've created with Openremote far exceed anything I found on the Vera box. I have a couple of Globalcache IR boxes that I've got working to my liking. The Vera interface was terrible in comparison. I control my Tivo via Openremot and it is great. The Vera's Tivo add on was REALLY BAD. It even caused my Tivo to spontaneously reboot several times (it's stopped after I removed the app).</p>

<p>I also was getting nowhere trying to get Openremote to use the vera for z-wave control so ended up picking up a Aeon Z Stick 2. Unfortunately I'm not having a lot of luck with it either. I've tried the Z stick with a couple of other Home automation software packages and it works fine with them. I can control my z-wave light dimmer switch with a few of these other software platforms... Just not in Openremote. I did get the dimmer working with the Vera as well, but the interface was not great. Pretty frustrating. I've followed every set of instructions / forum posts I could fine but still no go. (And yes, I do shut down the other programs before trying to get things working on Openremote.)</p>

<p>Nothing logs into my z-wave log files at all. No matter what I do. Each time I restart Openremote I get a single line:</p>

<p>INFO 2015-04-15 23:01:36,141 (Z-Wave): </p>

<p>--------------------------------------------------------------------</p>

<p>  OpenRemote Z-Wave protocol version : '2.0.0'</p>

<p>--------------------------------------------------------------------</p>

<p>But nothing else ever logs. I've downloaded the updated zwave jar file. I've changed the logging level to DEBUG (log4j.properties). I've configured the Z stick in the configuration section of the designer. I've followed the instructions for z-wave version 2 and created an include and exclude switch (I never get a nodeID.xml file). I've even tried things on an entirely different computer. Still things don't log at all. Not sure what I'm missing but very frustrating. I have other log files that are logging, but I don't find anything in them to point to why the z-wave setup is not working.</p>

<p>I would really like to incorporate z-wave light control into my setup but I'm not getting anywhere.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kslate at Apr 21, 2015 01:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597760"></a>
                                    <font class="smallfont"><p>Sounds very similar to my initial issues here :</p>

<p><a href="http://www.openremote.org/display/forums/Trouble+with+Z+Wave+addition+Aeon+Labs+Zstick+2E?focusedCommentId=22889243#comment-22889243">http://www.openremote.org/display/forums/Trouble+with+Z+Wave+addition+Aeon+Labs+Zstick+2E?focusedCommentId=22889243#comment-22889243</a></p>

<p>Is your machine running a 64bit operating system? </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Apr 21, 2015 12:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597795"></a>
                                    <font class="smallfont"><p>Hi Kevin.</p>

<p>As i can see you Z-stick is fine.</p>

<p>Have you assigned the right com port in designer.  Double check you configuration in controller.  zwave.pad.port: 7876</p>

<p>                                                                                                  zwave.commLayer: rxtx</p>

<p>you will need three  commands in order to make it works  off, on and status.<br/>
Also create a switch  and a sensor.<br/>
All this have to be done in building modeler</p>


<p>After that go to ui designer tab and tie each command to the images in you desing.</p>

<p>And.  SAVE.  </p>

<p>the final step is sync you local controller with the content that you have in designer.</p>

<p>When you be testing with you mobile device (android/ios).  look at the blue light of the stick it should be blinking every time you press the button in you interface.</p>

<p>also keep an eye and check if any error pop up in you local controller.   </p>

<p>A question for you.  Do you see any error when you controller deploy or in </p>

<p>openremote-controller &gt; logs &gt; zwave ?</p>


<p>Just in case you can get success post an image of you controller and zwave log file.  </p>

<p>happy testing.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Apr 21, 2015 15:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597807"></a>
                                    <font class="smallfont"><p>My original server is a 32 bit OS. When that did not work, I also tried it on a 64 bit OS but did not see/find any rxtxserial.dll errors in any of the logs. I also double checked the settings and the com port is set correctly as is the rest of the configuration portion. I have an ON OFF and Status command configured with a sensor and a switch. Still does not work. No logs within the zwave/zwave.log files at all. Except for the protocol version listed above.</p>

<p>So after a lot more trial and error... I have at least figured out that Openremote is NOT talking to the serial port at all. I ran a serial port monitor program and I get nothing at all when Openremote is running. There is not data going to and from the serial port at all. I then installed Domoticz and can watch it query the Z stick and I can see my zwave lamp module with it, AND the Serial monitor program shows the traiffc to and from the Z stick.</p>

<p>Any thoughts on how to trouble shoot the serial port through Openremote?</p>

<p><img src="attachments/23597441/23789856.png" align="left" border="0"/></p>

<p><img src="attachments/23597441/23789857.png" align="left" border="0"/></p>

<p><img src="attachments/23597441/23789858.png" align="left" border="0"/></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kslate at Apr 22, 2015 01:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597810"></a>
                                    <font class="smallfont"><p>can you post  something like this</p>

<p><img src="attachments/23597441/23789855.png" align="absmiddle" border="0"/></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Apr 22, 2015 03:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597813"></a>
                                    <font class="smallfont"><p>There does seem to be an issue with my sensor but would that be enough to cause nothing to be sent to the serial port?</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

INFO 2015-04-21 21:38:37,231 : No rule definitions found in 'c:\openremote\webapps\controller\rules'.
INFO 2015-04-21 21:38:37,231 : Initialized event processor : Drools Rule Engine
INFO 2015-04-21 21:38:37,250 : Initialized event processor : RRD4J Data Logger
INFO 2015-04-21 21:38:37,250 : Initialized event processor : EmonCMS Data Logger
ERROR 2015-04-21 21:38:37,452 : Creating sensor failed. Error : org/openremote/controller/ZWaveConfiguration 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"106973171"</span> name=<span class="code-quote">"TV Room Light"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"4729"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
java.lang.NoClassDefFoundError: org/openremote/controller/ZWaveConfiguration
	at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.createZWavePortConfiguration(DefaultZWaveConfigurationManager.java:74)
	at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.getPortConfiguration(DefaultZWaveConfigurationManager.java:47)
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.initZWaveController(ZWaveCommandBuilder.java:245)
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:145)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)
	at java.lang.<span class="code-object">Thread</span>.run(Unknown Source)
INFO 2015-04-21 21:38:37,575 : Registered sensor : Sensor (Name = 'Status Contact 3', ID = '106905250', State Mappings: {state,1:3,0=OFF, state,1:3,1=ON})
INFO 2015-04-21 21:38:37,575 : Registered sensor : Sensor (Name = 'Status Contact 2', ID = '106905249', State Mappings: {state,1:2,1=ON, state,1:2,0=OFF})
INFO 2015-04-21 21:38:37,575 : Registered sensor : Sensor (Name = 'Status Contact 1', ID = '106905248', State Mappings: {state,1:1,1=ON, state,1:1,0=OFF})
INFO 2015-04-21 21:38:37,586 : Startup complete.
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kslate at Apr 22, 2015 03:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597816"></a>
                                    <font class="smallfont"><p>ok now we know how proceed.</p>

<p>you right there is a problem with you sensor.</p>

<p>Recheck you  building modeler, take a look to you zwave log files</p>

<p>and post again you controller screen but the lines that show you java version.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Apr 22, 2015 03:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597818"></a>
                                    <font class="smallfont"><p>Main parts from stdout log:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
2015-04-21 21:38:14 Commons Daemon procrun stderr initialized
21-Apr-2015 21:38:15.045 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.0.20
21-Apr-2015 21:38:15.047 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Feb 15 2015 18:10:42 UTC
21-Apr-2015 21:38:15.047 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.0.20.0
21-Apr-2015 21:38:15.047 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Windows Server 2008
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            6.0
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          x86
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             C:\Program Files\Java\jre7
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.7.0_75-b13
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation
21-Apr-2015 21:38:15.048 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         C:\openremote
21-Apr-2015 21:38:15.049 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         C:\openremote
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kslate at Apr 22, 2015 04:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597820"></a>
                                    <font class="smallfont"><p>As i can see you have java 7</p>

<p>For my was a headache until i changed to java 1.6.0.18</p>

<p>to confirm  type c:\java -version and hit enter.  </p>

<p>In order to make openremote you need to set Java environment.  </p>

<p>After that restart conrtroller and sync with designer. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Apr 22, 2015 04:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601804"></a>
                                    <font class="smallfont"><p>I am planning to migrate from my currently working x10/OR setup to zwave. Gradually.<br/>
The above question is exactly mine:</p>

<p>Zwave via z-stick, or zwave via vera.</p>

<p>Edito says: "Actually we prefer let the z-wave network to vera and the interface is handled by openremote." Is this OR's advice?</p>

<p>Native OR support of the z-stick comes with a 10 unit zwave limit; not a real showstopper but a note.</p>

<p>Vera blogs indicate lots of issues; as opposed to OR general blogs indicating lots of capability.</p>

<p>My experience with OR is great. Even using x10 via mochad.</p>

<p>But, if/when the cm15A dies, Insteon seems to be able to handle x10, and Vera can handle Insteon. One could still use one's x10 modules.<br/>
At a minimum $50/module for zwave, or anything else, squeezing life out of x10 modules is usually worth it.</p>


<p>It seems like Vera has some nice capabilities, but significant drawbacks.</p>

<p>Can this community weigh in on this question. Given the popularity of x10, there has to be a (z)wave of migration coming.</p>

<p>z-stick or Vera.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scruise at Oct 19, 2015 22:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601835"></a>
                                    <font class="smallfont"><p>Further research indicates that RaZberry is a decent path.</p>

<p>Perhaps the forum is trying to tell me this ....</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scruise at Oct 22, 2015 00:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601850"></a>
                                    <font class="smallfont"><p>Hi Stan.</p>

<p>I have tested both.  I ended with the Z-stick.  Why?  The Z-stick propagate status change of the light faster than the vera light.  For example, when turn on the light in the wall switch </p>

<p>you can see immediately the status change in the tablet or mobile phone.  With vera this can take 1,2 or 3 seconds.  And there is not reason for that because the switch support stauts report</p>


<p>Vera is a versatile device but a little bit slow for me.  </p>

<p>About the Raspberry Pi, for me is a little bit slow.  In my scenario the machine that run openremote controller also acts as media player (Kodi actually), Maybe when the Raspberry Pi 3 see </p>

<p>the light depending of the spec i'll give it  a opportunity.</p>

<p>If you choose vera keep in maind this, if vera lost the network connection for a while you have to restart openremote controller to re establish the communication with vera.  Learned in the hard way...  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by edito at Oct 22, 2015 23:36
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>