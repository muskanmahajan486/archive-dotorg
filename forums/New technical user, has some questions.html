<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : New technical user, has some questions</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : New technical user, has some questions
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Sep 09, 2012 by <font color="#0050B2">devzero</font>.
				    </div>

				    <p>Hello OpenRemote community,</p>

<p>I'm a seasoned software developer looking to setup home automation, and this looks like a great project!  I'm currently interested in setting up my home theater (TV, Xbox 360, TiVo) first and control it with my wife's and my android phones.  I have an iTach WF2IR ordered and have already gotten the controller setup with a simple example controlling my TiVo over telnet.  This is all wonderful and I want to thank all of you for your help ahead of time.  I do have a few questions:</p>

<p>It's unclear to me what many of the options in the designer mean and I haven't been able to find any documentation or forum posts.  For example, in the Telnet attributes of a command, what do the "Read Regex Filter", "Read Regex Group" and "Default Read Response" mean?  I was having trouble controlling the TiVo until I discovered a forum post discussing the "string_to_waitfor_or_null|string_to_output" syntax for the command.  I'm wondering if I'm doing things wrong.  </p>

<p>Also it looks like it's creating a new TCP socket for each command.  As that does work, it adds a little latency to each button-press, am I missing something?</p>

<p>Is it possible to have a button that changes after the keypress.  If so, how?  For example, my TiVo remote interface has a Pause and a Play command.  Ideally, I'd like to have a toggle-able button that alternates between the two.  Is there a way to make the buttons invisible/visible upon keypresses?  Is navigation the correct way to do this?</p>

<p>In terms of sensors.  What do the different sensor types mean (e.g. switch, level, range, color)?  Are sensors polled by the controller?  Most of the devices I'm dealing with are IR remotes, and there's no way to get the state of the TV (e.g. which input it is on, whats the current volume, etc).  Is there a way to have a virtual sensor that you can manually set the state for (e.g. last we checked, the volume was 19) and update based on commands issued so that I could for example have a volume slider on my remote even though I can't get feedback from it, or I could intelligently change TV input sources when I switch between menus on my phone?</p>

<p>What are the rules for?  I haven't found any documentation on them?  Maybe this will answer some of my above questions?</p>

<p>Are macros just lists of commands to run in batch with no control flow or state?</p>

<p>I know this is a lot of questions and I want to thank you ahead of time for all of your work on this and to the community.  I'm interested in working with this project to help my home and others' as well.</p>

<p>Thanks,<br/>
-Chris</p>

<p>P.S.<br/>
Also, I have some small feature requests for the smartphone panel interfaces.  If you are interested in these features, I wouldn't mind contributing code to make them happen.  Would that be accepted? (1) Improved Gesture support (e.g. two-finger swipe/tap, clockwise circle, etc), (2) Allow to use the android's volume buttons as button triggers (3) a Streaming video/webcam support (I have a 3D printer in my office with a webcam that I'd love to see as I'm issuing commands to it remotely)</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20450436"></a>
                                    <font class="smallfont"><blockquote><p>It's unclear to me what many of the options in th designer mean and I designer mean and I haven't been able to find any documentation or forum posts. For example, in the Telnet attributes of a command, what do the "Read Regex Filter", "Read Regex Group" and "Default Read Response" mean? I was having trouble controlling the TiVo until I discovered a forum post discussing the "string_to_waitfor_or_null|string_to_output" syntax for the command. I'm wondering if I'm doing things wrong.</p></blockquote>

<p>Indeed, they should have been documented when originally implemented if they haven't. Thanks for pointing this out.</p>

<p>I think default read response simply allows for a default response value to be returned for a sensor if there's no response from the telnet connection.</p>

<p>Read regexp group allows indicating regexp group to use in return value if a regular expression with groups is used to filter the response from telnet request.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 10, 2012 10:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450437"></a>
                                    <font class="smallfont"><p>Thanks! That makes sense.  Any idea on the other questions?</p>

<p>Thanks,<br/>
-Chris</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by devzero at Sep 10, 2012 12:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450439"></a>
                                    <font class="smallfont"><blockquote><p>Also it looks like it's creating a new TCP socket for each command. As that does work, it adds a little latency to each button-press, am I missing something? </p></blockquote>

<p>Richard Turner is adding connection management for generic protocols (TCP, telnet and serial at least) for use cases where persistent connections would be desirable.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 10, 2012 14:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450440"></a>
                                    <font class="smallfont"><blockquote><p>Is it possible to have a button that changes after the keypress. If so, how? For example, my TiVo remote interface has a Pause and a Play command. Ideally, I'd like to have a toggle-able button that alternates between the two. </p></blockquote>

<p>You should be able to create a switch and assign two separate commands to it, for the two different states. Switch usually also uses a sensor to update its state from external input from the device but if that is not available to you, create a sensor with in-memory virtual command which will just return the last known state.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 10, 2012 14:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450444"></a>
                                    <font class="smallfont"><blockquote><p>Is there a way to make the buttons nvisible/visible upon keypresses? Is navigation the correct way to do this?</p></blockquote>

<p>There's currently no direct way to control widget visibility. This is part of the current wish list described in  <a href="UI elements available in Modeler.html" title="UI elements available in Modeler">UI elements available in Modeler</a>.</p>

<p>You can try to use navigation to fake similar effect &#8211; you'd want to save your initial screen first as a template and reload it to another group of screens and adjust which elements are present (different screen group to avoid transition effects that occur when navigating between screens in the same group &#8211; this works at least on android but hasn't been confirmed to work consistently across all panel implementations)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 10, 2012 15:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450467"></a>
                                    <font class="smallfont"><blockquote><p>Also, I have some small feature requests for the smartphone panel interfaces. If you are interested in these features, I wouldn't mind contributing code to make them happen. Would that be accepted? (1) Improved Gesture support (e.g. two-finger swipe/tap, clockwise circle, etc),</p></blockquote>

<p>Yes.</p>

<blockquote><p> (2) Allow to use the android's volume buttons as button triggers </p></blockquote>

<p>Yes.</p>

<blockquote><p> (3) a Streaming video/webcam support (I have a 3D printer in my office with a webcam that I'd love to see as I'm issuing commands to it remotely)</p></blockquote>

<p>There's a web widget coming in the next release of the designer (IIRC, you can already use it but have to add the elements to panel.xml manually) &#8211; this may be sufficient for your webcam if it allows streaming through HTTP. If instead you need direct support for RTP or something similar then it's something that's of interest but development needs to be synchronized between panel implementations and designer which involves multiple developers.</p>

<p>In any case, this part of the thread should continue in the <a href="Design Forum.html" title="Design Forum">Design Forum</a>.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 11, 2012 00:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450512"></a>
                                    <font class="smallfont"><blockquote><p>What do the different sensor types mean (e.g. switch, level, range, color)?</p></blockquote>

<p>Datatypes: on/off, 0-100, n..m</p>


<blockquote><p>Are sensors polled by the controller?</p></blockquote>

<p>Depends on the protocol and device implementation. Passive devices that require a request to retrieve state are polled. Active devices and protocols which broadcast state changes can implement a listener that pushes new state to controller's "state cache" directly.</p>

<blockquote>
<p>What are the rules for? I haven't found any documentation on them? Maybe this will answer some of my above questions?</p></blockquote>

<p>For executing logic based on incoming device events. Haven't added more specific documentation on them as I'm not happy with the way the rules are exposed to users yet &#8211; far too much rope to hang oneself with unless you can manage programming concepts in general &#8211; and also because the rule engine when exposed in its entirety is a rather open-ended system, a lot can be achieved with it making the documentation a rather large undertaking. Therefore for now just providing use case examples as templates for people to try. You can find some here: <a href="https://openremote.svn.sourceforge.net/svnroot/openremote/tags/project/Controller/Controller_2_0_0/test/org/openremote/controller/fixture/statuscache/rules/">https://openremote.svn.sourceforge.net/svnroot/openremote/tags/project/Controller/Controller_2_0_0/test/org/openremote/controller/fixture/statuscache/rules/</a> and also some additional ones posted on these forums. The rule engine documentation itself is here (but again, not all possibilities have been tested in context of OR system): <a href="http://docs.jboss.org/drools/release/5.2.0.Final/drools-expert-docs/">http://docs.jboss.org/drools/release/5.2.0.Final/drools-expert-docs/</a></p>


<blockquote><p>Are macros just lists of commands to run in batch with no control flow or state?</p></blockquote>

<p>Yes, the only flow control is delays that can be inserted between command executions.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 12, 2012 12:52
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>