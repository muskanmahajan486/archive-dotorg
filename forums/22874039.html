<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Motion Sensor setup?</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Motion Sensor setup?
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jul 21, 2013 by <font color="#0050B2">moonf4</font>.
				    </div>

				    <p>Has anyone added/setup a Schlage RS200HC Motion Sensor (or similar) to their openremote installation? I am looking for the proper way to setup the sensor. I am not clear on the whole Command - Type - Custom sensor setup. </p>

<p>Found this comment in an Amazon review. Not sure if it is relevant or not. </p>

<p>The RS200HC works great with System xxx... After pairing, you'll see four new devices: Root, Power Management Alarm, Battery, and Binary Switch. The device is manufactured by Ecolink, runs ZDK version 4.54, and supports classes SENSOR BINARY, ALARM, MANUFACTURER SPECIFIC, VERSION, ASSOCIATION V2, WAKE UP, BATTERY, and CONFIGURATION V2.</p>

<p>Thanks,</p>

<p>M-</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22874060"></a>
                                    <font class="smallfont"><p>Are you using the native OR ZWave implementation or RazBerry or something else?<br/>
In general you can define PIR sensors with a status command and a switch sensor.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 22, 2013 08:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874065"></a>
                                    <font class="smallfont"><p>Sorry, forgot to add the implementation details. I am running Openremote 2.1.0 on a Raspberry Pi with a Aeotec Z-Stick Series 2. From what I can tell all seems good with the install. (Very good instructions btw ) Openremote starts up cleanly and I see Node ID's 1 &amp; 2 in the zwave-debug log. </p>

<p>Thanks for the reply. I'll double check the command and sensor I defined and do some more testing/troubleshooting. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Jul 22, 2013 16:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874084"></a>
                                    <font class="smallfont"><p>Let us know how it goes. Always useful to have community report back on new and successfully integrated devices.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 23, 2013 11:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874176"></a>
                                    <font class="smallfont"><p>No luck with getting any info from the motion sensor. All the sensors I have tried to setup show N/A on the Panel. </p>

<p>I have done some research which is clearing up bits and pieces, but I am still unclear on most of it. This motion sensor is battery operated, so I take it that it goes to sleep and wakes up every 60 seconds or something like that. </p>

<p>I removed all the sensors/commands from the Panel to get back to the beginning. </p>

<p>Can someone help me interpret the info I see in the debug-log? Obviously, there is Node ID 1 &amp; 2, but doesn't "Sending: 06" mean there is a Node ID 6 ? Does one of the bytes in the received message indicate which Node ID it was sent from? </p>

<p>DEBUG 2013-07-27 14:18:49,295 (Z-Wave): Node id: 1 discovered<br/>
DEBUG 2013-07-27 14:18:49,297 (Z-Wave): Node id: 2 discovered<br/>
DEBUG 2013-07-27 14:18:49,303 (Z-Wave): sending: 01 04 00 41 01 bb <br/>
DEBUG 2013-07-27 14:18:49,312 (Z-Wave): Message lock exists. Frame waiting: 01 04 00 41 02 b8 <br/>
DEBUG 2013-07-27 14:18:49,316 (Z-Wave): received: 06 01 09 01 41 92 16 00 02 02 01 33 <br/>
DEBUG 2013-07-27 14:18:49,365 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 14:18:49,369 (Z-Wave): sending: 01 04 00 41 02 b8 <br/>
DEBUG 2013-07-27 14:18:49,377 (Z-Wave): received: 06 01 09 01 41 53 9c 00 04 20 01 5c <br/>
DEBUG 2013-07-27 14:18:49,383 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 14:18:49,404 (Z-Wave): Node: 2 created, Type: BinarySensor, Listening: false<br/>
DEBUG 2013-07-27 14:41:01,900 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 14:41:01,903 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 14:45:11,277 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 14:45:11,280 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 16:02:09,912 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 16:02:09,915 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 16:05:20,658 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 16:05:20,662 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:13:55,205 (Z-Wave): received: 01 08 00 04 04 02 02 84 07 74 <br/>
DEBUG 2013-07-27 17:13:55,208 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:13:55,211 (Z-Wave): I am awake: 2<br/>
DEBUG 2013-07-27 17:13:55,213 (Z-Wave): Sending device back to sleep. Id: 2<br/>
DEBUG 2013-07-27 17:13:55,217 (Z-Wave): sending: 01 09 00 13 02 02 84 08 05 00 6c <br/>
DEBUG 2013-07-27 17:13:55,224 (Z-Wave): received: 06 01 04 01 13 01 e8 <br/>
DEBUG 2013-07-27 17:13:55,227 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:14:35,172 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 17:14:35,176 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:17:46,479 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 17:17:46,482 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:18:37,326 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 17:18:37,330 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:22:02,600 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 17:22:02,604 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:25:53,348 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 17:25:53,351 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 17:29:04,853 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 17:29:04,856 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 19:23:41,198 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 19:23:41,202 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 19:30:25,198 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 19:30:25,201 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 19:47:32,905 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 ff 3b <br/>
DEBUG 2013-07-27 19:47:32,909 (Z-Wave): sending: 06 <br/>
DEBUG 2013-07-27 19:50:45,796 (Z-Wave): received: 01 09 00 04 04 02 03 30 03 00 c4 <br/>
DEBUG 2013-07-27 19:50:45,799 (Z-Wave): sending: 06 </p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Jul 28, 2013 05:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874177"></a>
                                    <font class="smallfont"><p>Hi Michael,</p>

<p>Thinks the 06 might be an ACK to the received frame, not a device id.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 28, 2013 08:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874178"></a>
                                    <font class="smallfont"><p>The received messages are coming from node 2 (the sixth byte)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 28, 2013 09:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874179"></a>
                                    <font class="smallfont"><p>It's receiving the payload from your binary sensor in node 2 which should translate to 'true' if the z-wave command is mapped to a 'switch' sensor in the Designer UI.</p>

<p>For some reason it doesn't seem to support 'custom' sensors in the designer.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 28, 2013 09:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874182"></a>
                                    <font class="smallfont"><p>Thanks Juha, that was it. I was using a custom sensor. I setup a switch sensor and now the motion sensor is now reporting correctly to the panel. </p>

<p>Now to start reading up on how / if there is a way to send a text alert... </p>

<p>Thanks again!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Jul 28, 2013 18:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874183"></a>
                                    <font class="smallfont"><p>Will look at extending the motion sensor to work with custom sensor as well, would appreciate if you could test the implementation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 28, 2013 22:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874184"></a>
                                    <font class="smallfont"><p>You got it. When you get to that point, just let me know. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Jul 28, 2013 23:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874308"></a>
                                    <font class="smallfont"><p>Michael,</p>

<p>There's a new test version available at <a href="http://download.openremote.org/free/zwave/1.1/beta1">http://download.openremote.org/free/zwave/1.1/beta1</a></p>

<p>This version supports binding a 'custom' sensor to Z-wave binary sensors. It also adds an option to set distinct levels to DIM commands, e.g. 'DIM 25' to configure a command to dim lights to the specified level.</p>

<p>Would appreciate if you could test this release candidate.</p>

<p>Save the download to your controller's /webapps/controller/WEB-INF/lib directory by overwriting the existing zwave.jar file that is there.</p>

<p>Let us know if you find issues.</p>

<p>Best regards,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 02, 2013 15:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874339"></a>
                                    <font class="smallfont"><p>Juha,</p>

<p>The custom sensor appears to work fine. It reports as "on" or "off". Didn't appear to be a way to customize the Sensor State On or Off text in the UI, but I imagine that is step 2.</p>

<p>Mike</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Aug 03, 2013 17:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874417"></a>
                                    <font class="smallfont"><p>Hi Mike,</p>

<p>Thanks for verifying the fix. See the documentation on custom sensors here: <a href="http://www.openremote.org/display/docs/Designer+2.0+-+Create+Custom+Sensor" title="Designer 2.0 - Create Custom Sensor">Designer 2.0 &#45; Create Custom Sensor</a>. If the description at the bottom is correct, there's something odd with the implementation. Will check it once I get to applying the current set of overdue patches on the designer.</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 05, 2013 10:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874420"></a>
                                    <font class="smallfont"><p>I am responsible for the last textual revision of that Custom Sensor description. I did test it with ORC 1.07. For a binary switch it is critical that the values in the Name column are <b>on</b> or <b>off</b> in lower case without any quotes in the string.<br/>
I perceive the <em>Custom State item</em> interface a bit counter intuitive. I would swap the colums, and change <em>Name</em> into <em>Map to</em> </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 05, 2013 11:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874423"></a>
                                    <font class="smallfont"><p>Yes, mapping is also the terminology used in the controller code for state sensors. Should update designer to reflect this.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 05, 2013 12:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874430"></a>
                                    <font class="smallfont"><p>My mistake. Looking at my Switch Sensor, I created the Custom Sensor with only the status command. I added the Custom state items and now I see I can edit the sensor state text normally. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moonf4 at Aug 05, 2013 15:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875220"></a>
                                    <font class="smallfont"><p>Hey Guys well i think that most motion sensors are battery power and don't require a immediate power However it is very important to make sure that battery power are always examined and changed often.Thanks!!</p>

<p><a href="http://southoceansensor.com/cross-beams/">cross bridge load cells</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by markspend01 at Aug 21, 2013 19:57
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>