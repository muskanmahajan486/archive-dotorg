<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Controller error - QuartzScheduler</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Controller error - QuartzScheduler
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 14, 2011 by <font color="#0050B2">yannph</font>.
				    </div>

				    <p>Hi,</p>

<p>I've this strange error when launching the controller<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
Controller 2011-04-14 11:29:30,036 ERROR [DefaultQuartzScheduler_QuartzSchedul<br/>
erThread] org.quartz.core.ErrorLogger.schedulerError(2166) | An error occured in<br/>
stantiating job to be executed. job= 'DEFAULT.controllerXMLChangeListenJob'<br/>
org.quartz.SchedulerException: Problem instantiating class 'org.openremote.contr<br/>
oller.config.ControllerXMLChangeListener' -  [See nested exception: java.lang.No<br/>
SuchMethodError: org.quartz.SchedulerException.&lt;init&gt;(Ljava/lang/String;Ljava/la<br/>
ng/Exception;)V]<br/>
        at org.quartz.core.JobRunShell.initialize(JobRunShell.java:136)<br/>
        at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:<br/>
384)<br/>
Caused by: java.lang.NoSuchMethodError: org.quartz.SchedulerException.&lt;init&gt;(Lja<br/>
va/lang/String;Ljava/lang/Exception;)V<br/>
        at org.springframework.scheduling.quartz.AdaptableJobFactory.newJob(Adap<br/>
tableJobFactory.java:41)<br/>
        at org.quartz.core.JobRunShell.initialize(JobRunShell.java:129)<br/>
        ... 1 more</p>

<p>I'm running the Controller from brnach "Controller 2.0.0 Alpha KNXIP". Do you know if there is patch available or a latest version for the QuartzScheduler?</p>

<p>Regards<br/>
Yann</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-16023835"></a>
                                    <font class="smallfont">
<p>Hi Yann,</p>


<p>I've patched this (I think, didnt do much testing as it was a side effect of other things I was working on) which you can try here &#8211; <a href="https://openremote.svn.sourceforge.net/svnroot/openremote/workspace/juha/Controller_EP_SNAP_20110412/">https://openremote.svn.sourceforge.net/svnroot/openremote/workspace/juha/Controller_EP_SNAP_20110412/</a></p>

<p>The snapshot unfortunately does not include your KNX patches yet which I will try to find time to include this week (Olivier is also doing some heavy KNX patching as we speak based on some KNX deployments we worked on recently), so you'll have to apply your patches again if you want to use the SNAPSHOT.</p>

<p>However, the error while annoying, can be currently ignored in most cases (or restart to get rid of it, IIRC).</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 14, 2011 11:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023837"></a>
                                    <font class="smallfont"><p>Waough, good news.<br/>
Yes I'll try your snapshot and reapply my patch.<br/>
I'll let you know if any issue.<br/>
Regards<br/>
Yann</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Apr 14, 2011 11:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023838"></a>
                                    <font class="smallfont"><p>The first run comes with some errors:<br/>
log4j:ERROR setFile(null,true) call failed.<br/>
java.io.FileNotFoundException: ..\logs\onewire\onewire.log (Le chemin dÆaccÞs sp<br/>
ÚcifiÚ est introuvable)  =  PATH not found<br/>
        at java.io.FileOutputStream.openAppend(Native Method)<br/>
        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:177)<br/>
        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:102)<br/>
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:282)<br/>
        at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)<br/>
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:161)<br/>
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)<br/>
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)<br/>
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)<br/>
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)<br/>
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)<br/>
        at org.apache.log4j.PropertyConfigurator.parseCatsAndRenderers(PropertyConfigurator.java:533)<br/>
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:417)<br/>
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)<br/>
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:468)<br/>
        at org.apache.log4j.LogManager.&lt;clinit&gt;(LogManager.java:122)<br/>
        at org.apache.log4j.Logger.getLogger(Logger.java:103)<br/>
        at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:283)<br/>
        at org.apache.commons.logging.impl.Log4JLogger.&lt;init&gt;(Log4JLogger.java:108)<br/>
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br/>
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)<br/>
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)<br/>
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)<br/>
        at org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1040)<br/>
        at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:838)<br/>
        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:601)<br/>
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:333)<br/>
        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:307)<br/>
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)<br/>
        at org.springframework.util.SystemPropertyUtils.&lt;clinit&gt;(SystemPropertyUtils.java:42)<br/>
        at org.springframework.web.util.Log4jWebConfigurer.initLogging(Log4jWebConfigurer.java:129)<br/>
        at org.springframework.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:51)<br/>
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)<br/>
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)<br/>
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)<br/>
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)<br/>
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)<br/>
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)<br/>
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)<br/>
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)<br/>
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)<br/>
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)<br/>
        at org.apache.catalina.core.StandardService.start(StandardService.java:516)<br/>
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)<br/>
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
        at java.lang.reflect.Method.invoke(Method.java:597)<br/>
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)<br/>
log4j:ERROR setFile(null,true) call failed.</p>

<p>Once the sud-dir "onewire", as well as "knx" created, it's start running.</p>

<p>I think this can be easily fix.</p>

<p>Yann</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Apr 14, 2011 14:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023839"></a>
                                    <font class="smallfont"><p>Yes, these have already been added to a updated Runtime: <a href="https://openremote.svn.sourceforge.net/svnroot/openremote/trunk/Runtime/apache-tomcat-6.0.18/logs/">https://openremote.svn.sourceforge.net/svnroot/openremote/trunk/Runtime/apache-tomcat-6.0.18/logs/</a></p>

<p>So it just requires packaging with the new runtime.</p>

<p>Thanks,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 14, 2011 15:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023844"></a>
                                    <font class="smallfont"><p>OK Juha,<br/>
I'm using your snapshot, and no more error in runtime, currently, no KNX error.<br/>
But, in the interface, previous LABEL sersor are now "N/A" and buttons doesn't work.<br/>
I've seen some depreciated code mainly on Command and Sensor.</p>

<p>Do you have an advice to help me going through that?</p>

<p>Regards<br/>
Yann</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Apr 14, 2011 19:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023850"></a>
                                    <font class="smallfont"><p>Ok, thanks for reporting.</p>

<p>That snapshot hasn't been fully tested and unfortunately the original automated tests are insufficient to catch all cases. I need to test first if the issue was raised between this and the previous snapshot <a href="https://openremote.svn.sourceforge.net/svnroot/openremote/workspace/juha/Controller_EP_SNAP_20110410/">Controller_EP_SNAP_20110410</a> &#8211; the snapshot of 20110412 made a large change in the way the controller is bootstrapped so it's not surprising there would be issues.</p>

<p>Let me know if you uncover further details.</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 15, 2011 11:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024223"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>I've used the latest release revision (4142) in Controller_2_0_0_Alphas, but still have the same issue with an fresh new runtime directory (no sync with the designer, so no cache, no panel.xml, no controller.xml)<br/>
Any idea? <br/>
Does this branch not a correct one?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at May 02, 2011 21:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024225"></a>
                                    <font class="smallfont"><p>Sounds like a different issue &#8211; I haven't merged anything related to this to release branches yet, so it should work as usual.</p>

<p>On the other hand, I haven't yet run all the tests after the latest merges either.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 02, 2011 22:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024226"></a>
                                    <font class="smallfont"><p>Sorry,<br/>
Trying to reproduce it, but (un)fortunalty, I can't.<br/>
It happens only once when I started with this new release, but since ... it's working without error.<br/>
I've applied the "RANGE" patch for DPT 5.010 and the "Float2Byte" for DPT 9.001 and there working also.</p>

<p>And my KNX bus is quite silent <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
I'm working with Android Panel and iPad panel. When updating status from one panel, the other one is updated immediatly. The IP/KNX Bus Listener seems to work perfectly well.</p>

<p>Olivier, Juha, Thanks for your job</p>

<p>Yann</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at May 02, 2011 22:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024230"></a>
                                    <font class="smallfont"><blockquote>
<p>I've applied the "RANGE" patch for DPT 5.010 and the "Float2Byte" for DPT 9.001 and there working also.</p></blockquote>

<p>These are also now integrated to /branches/project/Controller_2_0_0_Alphas, see <a href="http://lists.openremote.org/pipermail/openremote-svn/2011-May/004173.html">R4152</a></p>


<blockquote>
<p>Trying to reproduce it, but (un)fortunalty, I can't.<br/>
It happens only once when I started with this new release, but since ... it's working without error.</p></blockquote>

<p>Yeah I think I know what it is and it is intermittent &#8211; was taking a look at it earlier but will do so again to finish what I started. Maybe sometime this week although have quite a few other tasks on the plate first.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 03, 2011 00:00
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:30</font></td>
		    </tr>
	    </table>
    </body>
</html>