<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : An interesting question about Switches and Rules</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : An interesting question about Switches and Rules
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 08, 2013 by <font color="#0050B2">mbarne36</font>.
				    </div>

				    <p>Hello All</p>

<p>I have hit a snag and need your collective advice.</p>

<p>My problem is this; I have an OpenRemote layout that controls multiple pieces of equipment in multiple rooms. I have switches on the control panel that determine the "room" I am in, and the "activity" I am controlling (Media Player, DVD, TV etc).</p>

<p>I have rules set up so that when I press the "Lounge" switch, I deactivate all other room switches, and my rules engine knows I am in the Lounge, and all other "room" switches go into greyed out state.</p>

<p>I also have rules set up so that when I press the "TV" switch, I deactivate all other activities, and my rules engine knows I am wanting to watch TV, and all other activity switches go into greyed out state.</p>

<p>Ok, so imagine my layout... I press TV activity and all other switches on the layout that relate to TV are turned by my rules into active state, and all switches on my layout that do not relate to the TV are set to inactive state and thus greyed out.</p>

<p>Example: I have Play and Record switches on my layout. When I press the activity for "DVD", my rules put these switches into their active state and they highlight. But when I press the activity for "TV", I don't need the Play and Record switches, so my rules put these switches into their deactivated (greyed out) state.</p>

<p>Everything works fine so far... and the glory of this is that things like the volume buttons can be told to control the right piece of equipment in the right room (depending upon the state of the Room and Activity switches) - all from the same screen and layout.</p>

<p>Ok, so now my problem... my rules are set to fire when one of the function switches goes to "on". Of course. So when I press "play", my rule knows which room I am in and what activity I am doing and sends the appropriate "play" command to the appropriate piece of equipment. But... my problem is that when you press the switch for Lounge, and the activity for DVD, and when my rule activates the "Play" button, it also fires it. So the very act of sending an "on" to the Play switch to stop it being off and greyed out, not only highlights it (good), but also sends the "play" command (bad) - before I press it.</p>

<p>so, how do I disassociate the action of enabling and disabling switches, without sending On and Off commands from my rules, which (of course) end up sending On and Off Commands, when all I want to do it enable and disable the buttons.</p>

<p>Make sense?</p>

<p>oh.. and of course, I am using Virtual In-Memory variables for the switches and sensors, and just using my rules to control them.</p>

<p>thanks in advance.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22880959"></a>
                                    <font class="smallfont"><p>Could you please show a part of your code?</p>

<p>So the very act of sending an "on" to the Play switch to stop it being off and greyed out, not only highlights it (good), but also sends the "play" command (bad)<br/>
//<br/>
I have almost the same problem.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by sattva at Dec 08, 2013 23:34
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>