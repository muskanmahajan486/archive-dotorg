<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Trouble with Z Wave addition Aeon Labs Zstick 2E</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Trouble with Z Wave addition Aeon Labs Zstick 2E
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 06, 2014 by <font color="#0050B2">niedejb</font>.
				    </div>

				    <p>Hello all!</p>

<p>Having trouble configuring openremote to see my zwave devices:</p>

<p>Boot log:</p>

<p>INFO 2014-10-05 17:52:44,039 : </p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2014-10-05 17:52:56,119 : Initialized event processor : Drools Rule Engine<br/>
INFO 2014-10-05 17:52:56,159 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2014-10-05 17:52:56,160 : Initialized event processor : EmonCMS Data Logger<br/>
ERROR 2014-10-05 17:52:56,217 : Creating sensor failed. Error : Unable to create Z-Wave command, missing configuration parameter(s) <br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="5573740" name="ZWLS_1" type="switch"&gt;<br/>
      &lt;include type="command" ref="2940" /&gt;<br/>
      &lt;state name="on" /&gt;<br/>
      &lt;state name="off" /&gt;<br/>
    &lt;/sensor&gt;<br/>
org.openremote.controller.exception.NoSuchCommandException: Unable to create Z-Wave command, missing configuration parameter(s)<br/>
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:103)<br/>
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
	at org.openremote.controller.service.Deployer.startController(Deployer.java:336)<br/>
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)<br/>
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)<br/>
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)<br/>
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)<br/>
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)<br/>
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)<br/>
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)<br/>
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)<br/>
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)<br/>
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)<br/>
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)<br/>
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)<br/>
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)<br/>
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)<br/>
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)<br/>
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)<br/>
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)<br/>
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)<br/>
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)<br/>
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)<br/>
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
	at java.lang.reflect.Method.invoke(Method.java:597)<br/>
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)</p>

<p>INFO 2014-10-05 17:52:56,308 : Registered sensor : Sensor (Name = 'jbn_amp_sensor', ID = '5115622', State Mappings: <div class="error"><span class="error">Unknown macro: {state,1}</span> </div>)<br/>
INFO 2014-10-05 17:52:56,308 : Registered sensor : Sensor (Name = 'jbn_dw_sensor', ID = '5109957', State Mappings: <div class="error"><span class="error">Unknown macro: {state,1}</span> </div>)<br/>
INFO 2014-10-05 17:52:56,308 : Registered sensor : Switch Sensor (Name = 'VM 1 Sensor', ID = '5572362')<br/>
INFO 2014-10-05 17:52:56,311 : Startup complete.<br/>
INFO 2014-10-05 17:52:56,312 : Controller Definition File Watcher for Default Deployer started.</p>

<p>ZWave Log:</p>

<p>DEBUG 2014-10-05 17:53:57,087 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:53:57,087 (Z-Wave): Z-Wave command: command = on<br/>
DEBUG 2014-10-05 17:54:17,030 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:54:17,030 (Z-Wave): Z-Wave command: command = on<br/>
DEBUG 2014-10-05 17:54:24,138 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:54:24,138 (Z-Wave): Z-Wave command: command = on</p>

<p>ZWave-Debug Log:</p>

<p>DEBUG 2014-10-05 17:53:57,087 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:53:57,087 (Z-Wave): Z-Wave command: command = on<br/>
DEBUG 2014-10-05 17:54:17,030 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:54:17,030 (Z-Wave): Z-Wave command: command = on<br/>
DEBUG 2014-10-05 17:54:24,138 (Z-Wave): Building Z-Wave command<br/>
DEBUG 2014-10-05 17:54:24,138 (Z-Wave): Z-Wave command: command = on</p>

<p>Settings:</p>

<p>Off Command:<br/>
<img src="attachments/22889156/23036640.png" align="absmiddle" border="0"/></p>

<p>Status Command:<br/>
<img src="attachments/22889156/23036642.png" align="absmiddle" border="0"/></p>

<p>On Command:<br/>
<img src="attachments/22889156/23036643.png" align="absmiddle" border="0"/></p>


<p>You can also see in the background that the COM3 port is set as well as the RXTX for the ZWave Controller Config</p>

<p>Can interface the switch via Zsend and OZWForm and turn the switch on and off successfully.  Pretty sure I'm just missing something with the setup between the Aeon stick and openremote.</p>

<p>I have followed the attached step by step and have synced the controller as well:<br/>
<a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave</a></p>

<p>Any help would be greatly appreciated.</p>



<p>Jeremy</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22889156/23036641.png">off.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22889156/23036640.png">off.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22889156/23036642.png">status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22889156/23036643.png">on.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22889156/23036646.jpg">64bit.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22889171"></a>
                                    <font class="smallfont"><p>I think that hexadecimal for Z-Wave node ID's is not supported. Instead of 0x02 use 2 for the node ID.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rhitz at Oct 06, 2014 09:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889172"></a>
                                    <font class="smallfont"><p>I  will give it another try.   Ended up with hex since the decimal kept returning "node not found" </p>

<p>Guessing at node names since the logs have no node nomenclature in them.   Not sure how to make that happen. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Oct 06, 2014 10:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889173"></a>
                                    <font class="smallfont"><p>Changing to 2 gets me this:</p>

<p>ERROR 2014-10-06 06:13:53,268 : Creating sensor failed. Error : The node '2' is not known by the Z-Wave controller <br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="5573740" name="ZWLS_1" type="switch"&gt;<br/>
      &lt;include type="command" ref="2939" /&gt;<br/>
      &lt;state name="on" /&gt;<br/>
      &lt;state name="off" /&gt;<br/>
    &lt;/sensor&gt;<br/>
org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller<br/>
	at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:108)<br/>
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)<br/>
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)<br/>
	at java.lang.Thread.run(Thread.java:662)</p>

<p>Any other thoughts?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Oct 06, 2014 12:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889174"></a>
                                    <font class="smallfont"><blockquote><p>org.openremote.controller.exception.NoSuchCommandException: The node '2' is not known by the Z-Wave controller </p></blockquote>
<p>This means that your Z-Wave network does not contain a Z-Wave device with the node ID '2'.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rhitz at Oct 06, 2014 12:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889210"></a>
                                    <font class="smallfont"><p>Thanks for the reply.  Both Zsend and OZWForm refer to that particular zwave switch as Node 2.</p>

<p>How do I determine what openremote thinks the node name is?</p>

<p>Setting the log4j.properties to DEBUG did not produce what I needed in the zwave or zwave-debug log files.</p>

<p>Again, thanks for the guidance.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Oct 06, 2014 14:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889216"></a>
                                    <font class="smallfont"><p>OK - I could imagine that the serial port is not properly configured. The Z-Wave stack tries to retrieve the node ID list from the Z-Wave interface (Aeon Z-Stick). If this request fails, the node ID list is empty and you'll see the message "The node '2' is not known by the Z-Wave controller" when the command is created. </p>

<p>Are there any log entries indicating that there is something wrong with the serial communication ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rhitz at Oct 06, 2014 16:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889217"></a>
                                    <font class="smallfont"><p>I will need to look...which log files should I be searching through?</p>

<p>If it helps, the serial communication works flawlessly with Zsend and OZWForm as I can find all the nodes and execute on off commands through them.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Oct 06, 2014 16:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22889243"></a>
                                    <font class="smallfont"><p>Sooo...I figured out what the problem was:</p>

<p>The file ..\OpenRemote\webapps\controller\WEB-INF\lib\native\rxtxSerial.dll was a 32 bit dll.  I'm using Windows 7 64bit.</p>

<p>I just happened to see this error:</p>

<p><img src="attachments/22889156/23036646.jpg" align="absmiddle" border="0"/></p>

<p>I googled rxtxSerial.dll 64bit and found the following link:</p>

<p>       <a href="http://www.java2s.com/Code/Jar/r/Downloadrxtxnativewindowsjar.htm">http://www.java2s.com/Code/Jar/r/Downloadrxtxnativewindowsjar.htm</a></p>

<p>Extracted the 64 bit dll and renamed it to the original file rxtxSerial.dll, launched Openremote and now my ZWave logs work...Node names work...and my ZWave switches work.</p>

<p>Looks like we need to add OS specific downloads to the ZWave How To perhaps?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niedejb at Oct 08, 2014 23:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23595083"></a>
                                    <font class="smallfont"><p>i am running into the same issue, this is rather poor that we download their software and they dont care or ask what<br/>
OS we run on, i am also 64 bit and i just can't get the thing working, i have done as you suggested above, which <br/>
is annoying to hack around with a new install, anyway, I did it, i did get me further, but now i get other errors,<br/>
 rxtxserial mismatch, but it does then discover some devices and give node ids, then starts saying <br/>
unable to retreive controller id, then tells me could not announce discovered devices deployerpasswordexception, password <br/>
for user error, this makes no sense, as it syncs up, i am signed in, i have a paid account, paid software, is this <br/>
really buggy software?  really disappointed so far <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by darren.jenkins at Jan 03, 2015 11:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23595105"></a>
                                    <font class="smallfont"><p>Have you linked the controller in the designer? Do you see on the controller syncing page "This controller is linked to account ID: ..." ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Jan 04, 2015 00:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23595111"></a>
                                    <font class="smallfont"><p>yeah, i linked everything up, i got the mac address in the controller, put that in the designer, i got <br/>
it working in the end but auto discovery doesn't work which was the main reason for buying the <br/>
software, it now fails on password, even tho it syncs up etc, so far i am unimpressed with the <br/>
softwsre and support its flakey to setup, lots of errors, no reply from the team and this was <br/>
expensive software, i could have bought the vera for the same money as a hardware/software solution, <br/>
its poorly documented, poorly supported, not designed to work on 64 bit out the box and just run <br/>
from one problem to the other. </p>

<p>i hope they reply better when we are out the holiday season as i much prefer to be positive about <br/>
things i spent money on <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by darren.jenkins at Jan 04, 2015 08:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23595115"></a>
                                    <font class="smallfont"><p>Please wait few days more. The developer of this feature will be back next week.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Jan 04, 2015 09:37
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:39</font></td>
		    </tr>
	    </table>
    </body>
</html>