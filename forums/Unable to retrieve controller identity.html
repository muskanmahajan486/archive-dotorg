<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Unable to retrieve controller identity</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Unable to retrieve controller identity
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 06, 2015 by <font color="#0050B2">paul.cannon</font>.
				    </div>

				    <p>I just converted to the Professional Designer.    I was setting up the z-wave integration but have had some issues.  I had the z-wave devices working in the open release.  The z-wave.log is currently empty so the system is not getting far enough to initialize it I believe.  Here is the error that keeps repeating in the boot log.</p>

<p>RACE 2015-10-05 22:58:03,341 : Unable to retrieve controller identity<br/>
org.openremote.controller.exception.ConnectionException: The required password for user '&lt;username&gt;' was not found. Password manager error : Password for user 'org.openremote.security.PasswordManager$PasswordNotFoundException: Implementation Error: password alias '&lt;username&gt;' does not correspond to secret key entry in the keystore.' was not found<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.connect(Unknown Source)<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.httpRequest(Unknown Source)<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.httpPost(Unknown Source)<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.getControllerIdentity(Unknown Source)<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.getRemoteCommandService(Unknown Source)<br/>
	at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.run(Unknown Source)<br/>
	at java.lang.Thread.run(Thread.java:744)</p>

<p>I feel this is caused due to having the opensource version and then installing the new version.  Not sure what to clean up to fix this though. </p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23601578"></a>
                                    <font class="smallfont"><p>I had the same problem with a Pro-beta version. There I had to install the JCE (Java Cryptography Extension) package for my Java version. That helped.<br/>
The problem occured again for me with the Pro 1.2.0 release. I did install JCE, but this time it did not cure the problem. I wrote to Eric about this a couple of weeks ago, and again a two days ago. No response yet.</p>

<p>In my last mail I asked explicitly how to stop my controller from connecting back to Beehive, since I don't think I do need that. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 06, 2015 12:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601579"></a>
                                    <font class="smallfont"><p>I am having the same issue with the pro release, have not found a solution.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by drewscm at Oct 06, 2015 12:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601582"></a>
                                    <font class="smallfont"><p>Maybe its specific to our setup </p>

<p>I am runningon a Rasberry Pi 2 (java 8)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by paul.cannon at Oct 06, 2015 13:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601584"></a>
                                    <font class="smallfont"><p>@Paul<br/>
Pro version 1.2.0 ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 06, 2015 13:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601585"></a>
                                    <font class="smallfont"><p>Yes latest version</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by paul.cannon at Oct 06, 2015 14:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601687"></a>
                                    <font class="smallfont"><p>Can you guys go to the controller folder (under webapps) and remove the files .user and .keystore ?<br/>
Then do a sync with the online designer again.</p>

<p>There should be something addressing that in Pro 1.3.0 release and I'll post a more detailed explanation then.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 15, 2015 09:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601688"></a>
                                    <font class="smallfont"><p>OK, done. Do you have a release date for 1.3?<br/>
<b>edit</b>: The messages no longer occur in the logs</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 15, 2015 09:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601712"></a>
                                    <font class="smallfont"><p>Pro 1.3.0 is released.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 16, 2015 08:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601773"></a>
                                    <font class="smallfont"><p>I now get these messsages in my boot.log</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
DEBUG 2015-10-18 14:07:44,340 : Connecting user '&lt;username&gt;' to 'https:<span class="code-comment">//designer.openremote.com/ccs/<span class="code-keyword">rest</span>/commands/301' 
</span>  Connection Timeout : 15,000 
  Response Timeout : 10,000
TRACE 2015-10-18 14:07:44,541 : Remote command check waiting <span class="code-keyword">for</span> next connection attempt in 30,000 ms...
TRACE 2015-10-18 14:07:44,541 : Remote command check waiting <span class="code-keyword">for</span> next connection attempt in 30,000 ms...</pre>
</div></div>

<p>How can I block these call backs? I don't think I need those</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 18, 2015 13:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601794"></a>
                                    <font class="smallfont"><p>Check the config.properties file and look for the <em>controller.performBeehiveSyncing</em> parameter.<br/>
Setting it to false should stop communication with Beehive.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 19, 2015 13:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601798"></a>
                                    <font class="smallfont"><p>I did edit webapps\controller\WEB-INF\classes\config.properties to:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">#Should the controller announce himself and discovered devices to Beehive
controller.performBeehiveSyncing=<span class="code-keyword">false</span></pre>
</div></div>

<p>Stopped and started controller on my Synology box. Unfortunately still getting the same messages.<br/>
<b>update</b> Even a restart of my Synology box did not change the situation</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 19, 2015 16:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601906"></a>
                                    <font class="smallfont"><p>I'll look into that.</p>

<p>In the meantime, maybe try setting the <em>remote.command.request.interval</em> to a big value, so e.g. 12h instead of 30s</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 28, 2015 07:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601914"></a>
                                    <font class="smallfont"><blockquote><p>I'll look into that.</p></blockquote>
<p>Thanks</p>
<blockquote><p>In the meantime, maybe try setting the remote.command.request.interval to a big value, so e.g. 12h instead of 30s</p></blockquote>

<p>My configuration is now</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">remote.command.service.uri=https:<span class="code-comment">//designer.openremote.com/ccs/<span class="code-keyword">rest</span>
</span>remote.command.request.interval = 12h
remote.command.connection.timeout = 15s
remote.command.response.timeout = 10s</pre>
</div></div>

<p>Strange, nothing changed! Even not after a complete reboot of the Synology server which hosts my OpenRemote controller.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 28, 2015 12:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601921"></a>
                                    <font class="smallfont"><p>Doubled check and <em>controller.performBeehiveSyncing</em> is NOT taken into account for that specific call. Need to review implementation of that bit anyway.</p>

<p>Regarding <em>remote.command.request.interval</em> parameter, only ms, s and m are supported as units. Can you try changing the value to 720m instead ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 29, 2015 10:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601922"></a>
                                    <font class="smallfont"><blockquote><p>Can you try changing the value to 720m instead </p></blockquote>
<p>It looks like that one is going to work <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">TRACE 2015-10-29 12:04:55,705 : Remote command check waiting <span class="code-keyword">for</span> next connection attempt in 43,200,000 ms...</pre>
</div></div>
<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 29, 2015 11:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602199"></a>
                                    <font class="smallfont"><p>I don't know if this helps you guys find a solution....</p>

<p>I loaded Java 1.8 with security patch into my Pro Controller and the identity error stopped instantly.</p>


<p>But so did the Drools.</p>


<p>So I'm back to Java 1.6, with the security patch.</p>

<p>Now I have working Drools and the constant identity error.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mdar at Nov 16, 2015 20:29
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>