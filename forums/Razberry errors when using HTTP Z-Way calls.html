<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Razberry errors when using HTTP Z-Way calls</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Razberry errors when using HTTP Z-Way calls
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 12, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hi,<br/>
 i am a new user with the Raspberry PI (Linux Debian) and the Razberry Z-Wave controller. <br/>
I have installed the Razberry software on the Pi and after that i can use the demo UI<br/>
I also can add and remove devices and switch On and Off AN157 via the demo UI.<br/>
But when i try to do commands to an AN157 (Device address 3) via the Chrome browser then i get errors:<br/>
The commands are a copy of the OpenRemote Cofigure Z-Wave for Razberry</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>http://192.168.1.110:8083/JS/Run/devices[3].instances[0].commandClasses[0x20].Set(1)
</pre>
</div></div>

<p>or</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>http://192.168.1.110:8083/JS/Run/devices[3].instances[0].commandClasses[0x20].Set(255)
</pre>
</div></div>

<p>gives the error    "Uncaught ReferenceError: devices is not defined"</p>

<p>and </p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>http://192.168.1.110:8083/ZWaveAPI/Run/devices[3].instances[0].commandClasses[0x20].Set(1)
</pre>
</div></div>

<p>gives the error "Uncaught TypeError: Cannot call method 'Set' of undefined"</p>

<p>Have I somerthing forgotten to install, or to configure?</p>

<p>thanks allready for the help </p>

<p>Hazet</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22872251"></a>
                                    <font class="smallfont"><p>See <a href="http://www.openremote.org/x/nwFWAQ">http://www.openremote.org/x/nwFWAQ</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 03, 2013 14:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872252"></a>
                                    <font class="smallfont"><p>when i click on the sugested URL <a href="http://www.openremote.org/x/nwFWAQ">http://www.openremote.org/x/nwFWAQ</a> then it is switched to:</p>

<p><a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry</a></p>

<p>I followed this document for installation and testing and it goes wrong with the HTTP calls.</p>

<p>When i type the URL <a href="http://www.openremote.org/x/nwFWAQ">http://www.openremote.org/x/nwFWAQ</a> then i got the message that i am not authorized to see that page.</p>

<p>Henk</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hazet at Jun 03, 2013 15:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872253"></a>
                                    <font class="smallfont"><p>Sorry, I don'tunderstand your last two sentences.</p>

<p>I indeed intended to refer you to the page:
<a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 03, 2013 15:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872255"></a>
                                    <font class="smallfont"><p>Oke,<br/>
i read that manual and i donn't see what i did wrong.</p>

<p>The only software i have installed on the Pi is:</p>

<p>$ wget -q -O - <a href="http://razberry.z-wave.me/install">http://razberry.z-wave.me/install</a> | sudo bash</p>

<p>What shall i do more on the Pi or my Windows Xp PC.</p>

<p>Henk</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hazet at Jun 03, 2013 15:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872256"></a>
                                    <font class="smallfont"><p>There is a Howto for installing OR on Pi. I haven't done that myself, but one of the users here on the Razberry thread seems to have done that.<br/>
For early experimentation you could consider installing on your XP machine. That is how I started.<br/>
There is a How To for that installation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 03, 2013 15:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872318"></a>
                                    <font class="smallfont"><p>Hi Henk,</p>

<p>Like peiter mentioned, the How to install Openremote in raspberry pi guide is more than enough to get started. Search it in google. I followed that and was able to get Openremote up and running without any problem. </p>

<p>If you are still having probs, post here, I will share whatever I can to help you out. </p>

<p>Regards,</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at Jun 05, 2013 19:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874219"></a>
                                    <font class="smallfont"><p>Hi all</p>

<p>I have the same probem. My CommandClass0x20 don't work and i can't work openremote.<br/>
Fresh install of raspbian and "wget -q -O - <a href="http://razberry.z-wave.me/install">http://razberry.z-wave.me/install</a> | sudo bash" run</p>

<p>But it's a Razberry problem, not an openremote problem. So see that :<br/>
<a href="http://en.z-wave.me/content/documentation-wrong">http://en.z-wave.me/content/documentation-wrong </a>  (0x14 strange :/ )</p>

<p>POST :<br/>
[http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x26.Set(255)]<br/>
RESULT :<br/>
Work great and my light is up</p>

<p>POST :<br/>
[http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x20.Set(255)]<br/>
RESULT :<br/>
"Uncaught TypeError: Cannot call method 'Set' of undefined"</p>

<p>POST :<br/>
[http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x32.Set(255)]<br/>
RESULT :<br/>
"Uncaught TypeError: Cannot call method 'Set' of undefined"</p>

<p>POST:<br/>
[http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.Basic.Set(255)]<br/>
RESULT :<br/>
"Uncaught TypeError: Cannot call method 'Set' of undefined"</p>

<p>So...</p>

<p>In /var/log/z-way-server.log i can see when i start /etc/init.d/Z-Way :</p>

<p><span class="error">&#91;2013-07-31 00:55:21.990&#93;</span> Error returned from zway_fc_enable_suc(zway, TRUE, TRUE, NULL, NULL, NULL): Function class not supported by the hardware (-4)</p>

<p>It's normal? I am alone in this case?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 03:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874226"></a>
                                    <font class="smallfont"><p>Sorry I don't know. I noticed that you posted the same question on the RaZberry forum. That's indeed the place were it should be answered. Unfortunately the Zwave.me forum is a bit slow in this time of the year, so expect you have to wait a while for PoltoS to respond. It could be helpful if you posted there the type of device you try to control.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 06:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874230"></a>
                                    <font class="smallfont"><p>It's a FGD211 V1.9.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 11:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874231"></a>
                                    <font class="smallfont"><p>I found this <a href="http://en.z-wave.me/content/ui-bug-zddx-compatibility">http://en.z-wave.me/content/ui-bug-zddx-compatibility</a> on the Z-Wave.me forum. That points to a problem in the PepperOne database. I don't know if the ZDDX database in the distribution has been updated in the latest release. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 11:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874232"></a>
                                    <font class="smallfont"><p>Thank PE Zanstra,</p>

<p>But, my UI work, i think it's not the same problem.<br/>
My Razberry software version is 1.3.1.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 11:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874234"></a>
                                    <font class="smallfont"><p>I don't have a dimmer myself, so I can not test. Forum member Velouria made an adaptation to the RaZ-OR dimmer module as you can see in this post: <a href="http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22873767#comment-22873767">http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22873767#comment-22873767</a>.</p>

<p>So elaborating on what he wrote you could try the direct HTTP call to Razberry:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//x.x.x.x:8083/ZWaveAPI/Run/devices[3].instances[0].SwitchMultilevel.SetWithDuration(SetLevel,0)</span></pre>
</div></div>

<p><b>Edit</b>: I put the url here in {code} tags to prevent a weird display on this forum page.<br/>
<b>Edit2</b>: Replace the parameter <em>SetLevel</em> with the value intend to send to the device.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 12:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874237"></a>
                                    <font class="smallfont"><p>I see that, but SwitchMultilevel use BASIC command (commandClasses0x20). <br/>
And just with Razberry software <a href="http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x20.Set(255)">http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x20.Set(255)</a> don't work :/</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 14:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874238"></a>
                                    <font class="smallfont"><p>I see that, but SwitchMultilevel use BASIC command (commandClasses0x20). <br/>
And just with Razberry software <a href="http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x20.Set(255)">http://x.x.x.x:8083/ZWaveAPI/Run/devices3.instances0.commandClasses0x20.Set(255)</a> don't work :/</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 15:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874240"></a>
                                    <font class="smallfont"><p>Did you try as in Velouria's example the <em>SetWithDuration</em> instead of simply <em>Set</em> ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 15:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874241"></a>
                                    <font class="smallfont"><p>Yes i try,</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
POST :
zway.devices[N].instances[0].SwitchMultilevel.SetWithDuration(SetLevel,0)
OR
DimmerSet(SetLevel,0)
RESULT :
Uncaught ReferenceError: SetLevel is not defined

POST :
DimmerLevel(3)
OR
zway.devices[N].instances[0].SwitchMultilevel.data.level.value
RESULT :
0

POST :
DimmerStatus(3)
RESULT :
<span class="code-quote">"off"</span>
</pre>
</div></div>
<p>Only DimmerSet function don't work :/</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 16:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874242"></a>
                                    <font class="smallfont"><p><br/>
<br/>
Thank you for your help <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 16:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874248"></a>
                                    <font class="smallfont"><blockquote><p>Uncaught ReferenceError: SetLevel is not defined</p></blockquote>
<p>I quess I confused you with my original example. For <em>SetLevel</em> you schould fill in the desired powerlevel (0-99), and the <em>N</em> should be 3 in your case.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 18:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874249"></a>
                                    <font class="smallfont"><p>It's not DimmerSet but SwitchMultilevelSet</p>

<p>/JS/Run/SwitchMultilevelSet(3,99) Work !!!!</p>

<p>A Big tanks you !!! <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by metrem at Jul 31, 2013 18:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874252"></a>
                                    <font class="smallfont"><blockquote><p>It's not DimmerSet but SwitchMultilevelSet</p></blockquote>

<p>Argh! My bad. I just copied Velouria's code into my master openremote.js. Sorry you had to go through this agony. I will change it back into <b>DimmerSet</b> in the next RaZ-OR release (to be uploaded in a minute.)</p>

<p>Thank you for uncovering this error. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 31, 2013 18:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874321"></a>
                                    <font class="smallfont"><p>Hi Henk,</p>

<p>I put my actions on <a href="http://www.lelieveld.info/?p=345">my blog</a> that might help you out.</p>

<p>Success!<br/>
Robert</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by eivwer at Aug 02, 2013 21:34
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:42</font></td>
		    </tr>
	    </table>
    </body>
</html>