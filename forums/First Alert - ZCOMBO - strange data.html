<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : First Alert - ZCOMBO - strange data</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : First Alert - ZCOMBO - strange data
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 26, 2014 by <font color="#0050B2">nostep</font>.
				    </div>

				    
<p>I see occasional and confusing data from the smoke detector.  Here's the story.</p>

<p>I have a standard z-way setup on Raspberry Pi.  I was able to "include" a First Alert ZCOMBO and get data from it.  I wrote up a simple js to read some door switches and a Lowes siren.  I added the ability for the smoke detector to trigger the siren and it works great.  Here is the data when the smoke detector is triggered (note detector is device 12):</p>

<p><span class="error">&#91;2014-01-26 15:59:32.041&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.type = 12 (0x0000000c)<br/>
<span class="error">&#91;2014-01-26 15:59:32.041&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.level = 255 (0x000000ff)<br/>
<span class="error">&#91;2014-01-26 15:59:32.041&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event = Empty</p>

<p>This is the code when it stops it test (and goes quiet):</p>

<p><span class="error">&#91;2014-01-26 15:59:32.060&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.type = 12 (0x0000000c)<br/>
<span class="error">&#91;2014-01-26 15:59:48.630&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.level = 0 (0x00000000)<br/>
<span class="error">&#91;2014-01-26 15:59:48.630&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event = Empty</p>

<p>The V1event is the alarm, and a "level" of 255 means it went off.  "type = 12" seems to exist upon testing the detector.</p>

<p>Now, here are strange codes which show up from time to time without warning (and setting off my siren).</p>

<p><span class="error">&#91;2014-01-26 17:31:11.456&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.type = 13 (0x0000000d)<br/>
<span class="error">&#91;2014-01-26 17:31:11.456&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event.level = 255 (0x000000ff)<br/>
<span class="error">&#91;2014-01-26 17:32:10.914&#93;</span> SETDATA devices.12.instances.0.commandClasses.113.data.V1event = Empty</p>

<p>I cannot figure out how to test for V1event.type = 12.  I only want to set off the siren when type is 12 and level =255, but "type" always comes back as undefined.  Any help is appreciated.</p>

<p>code snippet:</p>

<p>//Smoke Alarm<br/>
zway.devices12.instances0.commandClasses113.data.V1event.bind(function()<br/>
  {<br/>
  if(this.type.value==12)<br/>
    {<br/>
    if (this.level.value == 255)</p>
      <div class="error"><span class="error">Unknown macro: {
      alarmStart();
      }</span> </div>
<p>    }<br/>
  });</p>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:36</font></td>
		    </tr>
	    </table>
    </body>
</html>