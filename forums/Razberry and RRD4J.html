<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Razberry and RRD4J</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Razberry and RRD4J
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 02, 2013 by <font color="#0050B2">eivwer</font>.
				    </div>

				    <p>Hi,</p>

<p>Just tried to get this working in openremote 2.1.0.<br/>
Somehow the RRD db doesn't seem to get filled?</p>

<p>This is my config:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">
<span class="code-tag">&lt;rrd4j xmlns=<span class="code-quote">"http://www.openremote.org"</span> <span class="code-keyword">xmlns:xsi</span>=<span class="code-quote">"http://www.w3.org/2001/XMLSchema-instance"</span> xsi:schemaLocation=<span class="code-quote">"http://www.openremote.org http://www.openremote.org/schemas/rrd4j.xsd"</span>&gt;</span>

  <span class="code-tag">&lt;rrdDB fileName=<span class="code-quote">"home.rrd"</span> step=<span class="code-quote">"60"</span>&gt;</span>
    <span class="code-tag">&lt;datasource name=<span class="code-quote">"SenTempFront"</span> type=<span class="code-quote">"GAUGE"</span> heartbeat=<span class="code-quote">"120"</span> /&gt;</span>
    <span class="code-tag">&lt;datasource name=<span class="code-quote">"SenTempBack"</span> type=<span class="code-quote">"GAUGE"</span> heartbeat=<span class="code-quote">"120"</span> /&gt;</span>
	<span class="code-tag">&lt;archive function=<span class="code-quote">"AVERAGE"</span> xff=<span class="code-quote">"0.5"</span> steps=<span class="code-quote">"1"</span> rows=<span class="code-quote">"300"</span> /&gt;</span>
	<span class="code-tag">&lt;archive function=<span class="code-quote">"AVERAGE"</span> xff=<span class="code-quote">"0.5"</span> steps=<span class="code-quote">"10"</span> rows=<span class="code-quote">"144"</span> /&gt;</span>
	<span class="code-tag">&lt;archive function=<span class="code-quote">"AVERAGE"</span> xff=<span class="code-quote">"0.5"</span> steps=<span class="code-quote">"15"</span> rows=<span class="code-quote">"672"</span> /&gt;</span>
	<span class="code-tag">&lt;archive function=<span class="code-quote">"AVERAGE"</span> xff=<span class="code-quote">"0.5"</span> steps=<span class="code-quote">"60"</span> rows=<span class="code-quote">"744"</span> /&gt;</span>
	<span class="code-tag">&lt;archive function=<span class="code-quote">"AVERAGE"</span> xff=<span class="code-quote">"0.5"</span> steps=<span class="code-quote">"120"</span> rows=<span class="code-quote">"4380"</span> /&gt;</span>
  <span class="code-tag">&lt;/rrdDB&gt;</span>
 
  <span class="code-tag">&lt;rrd_graph_def name=<span class="code-quote">"temperature"</span>&gt;</span>
     <span class="code-tag">&lt;options&gt;</span>
         <span class="code-tag">&lt;vertical_label&gt;</span>C<span class="code-tag">&lt;/vertical_label&gt;</span>
         <span class="code-tag">&lt;title&gt;</span>OpenRemote RRD4J Test<span class="code-tag">&lt;/title&gt;</span>
     <span class="code-tag">&lt;/options&gt;</span>
     <span class="code-tag">&lt;datasources&gt;</span>
         <span class="code-tag">&lt;def&gt;</span>
             <span class="code-tag">&lt;name&gt;</span>SenTempFront<span class="code-tag">&lt;/name&gt;</span>
             <span class="code-tag">&lt;rrd&gt;</span>home.rrd<span class="code-tag">&lt;/rrd&gt;</span>
             <span class="code-tag">&lt;source&gt;</span>SenTempFront<span class="code-tag">&lt;/source&gt;</span>
             <span class="code-tag">&lt;cf&gt;</span>AVERAGE<span class="code-tag">&lt;/cf&gt;</span>
         <span class="code-tag">&lt;/def&gt;</span>
         <span class="code-tag">&lt;def&gt;</span>
             <span class="code-tag">&lt;name&gt;</span>SenTempBack<span class="code-tag">&lt;/name&gt;</span>
             <span class="code-tag">&lt;rrd&gt;</span>home.rrd<span class="code-tag">&lt;/rrd&gt;</span>
             <span class="code-tag">&lt;source&gt;</span>SenTempBack<span class="code-tag">&lt;/source&gt;</span>
             <span class="code-tag">&lt;cf&gt;</span>AVERAGE<span class="code-tag">&lt;/cf&gt;</span>
         <span class="code-tag">&lt;/def&gt;</span>
     <span class="code-tag">&lt;/datasources&gt;</span>
     <span class="code-tag">&lt;graph&gt;</span>
         <span class="code-tag">&lt;line&gt;</span>
             <span class="code-tag">&lt;datasource&gt;</span>SenTempFront<span class="code-tag">&lt;/datasource&gt;</span>
             <span class="code-tag">&lt;color&gt;</span>#FF0000<span class="code-tag">&lt;/color&gt;</span>
             <span class="code-tag">&lt;legend&gt;</span>Temperature front\r<span class="code-tag">&lt;/legend&gt;</span>
             <span class="code-tag">&lt;width&gt;</span>2<span class="code-tag">&lt;/width&gt;</span>
         <span class="code-tag">&lt;/line&gt;</span>
         <span class="code-tag">&lt;line&gt;</span>
             <span class="code-tag">&lt;datasource&gt;</span>SenTempBack<span class="code-tag">&lt;/datasource&gt;</span>
             <span class="code-tag">&lt;color&gt;</span>#0000FF<span class="code-tag">&lt;/color&gt;</span>
             <span class="code-tag">&lt;legend&gt;</span>Temperature back\r<span class="code-tag">&lt;/legend&gt;</span>
             <span class="code-tag">&lt;width&gt;</span>2<span class="code-tag">&lt;/width&gt;</span>
         <span class="code-tag">&lt;/line&gt;</span>
         <span class="code-tag">&lt;comment&gt;</span>This chart displays OR sensor values.<span class="code-tag">&lt;/comment&gt;</span>
     <span class="code-tag">&lt;/graph&gt;</span>
 <span class="code-tag">&lt;/rrd_graph_def&gt;</span>
 
 
<span class="code-tag">&lt;/rrd4j&gt;</span>
</pre>
</div></div>

<p>When starting OR, the following sensors seem to be in place:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>INFO 2013-08-02 17:31:43,330 : Initialized event processor : Drools Rule Engine
INFO 2013-08-02 17:31:44,120 : Initialized event processor : RRD4J Data Logger
INFO 2013-08-02 17:31:44,126 : Initialized event processor : EmonCMS Data Logger
INFO 2013-08-02 17:31:45,649 : Registered sensor : Range Sensor (Name = 'SenHumidBack', ID = '58', Min: 0, Max: 100)
INFO 2013-08-02 17:31:45,659 : Registered sensor : Range Sensor (Name = 'SenLumenBack', ID = '59', Min: 0, Max: 1000)
INFO 2013-08-02 17:31:45,705 : Registered sensor : Switch Sensor (Name = 'SenSensorBack', ID = '62')
INFO 2013-08-02 17:31:45,721 : Registered sensor : Switch Sensor (Name = 'SenSwitchFront', ID = '63')
INFO 2013-08-02 17:31:45,731 : Registered sensor : Switch Sensor (Name = 'SenSensorFront', ID = '60')
INFO 2013-08-02 17:31:45,748 : Registered sensor : Range Sensor (Name = 'SenLumenFront', ID = '61', Min: 0, Max: 1000)
INFO 2013-08-02 17:31:45,772 : Registered sensor : Range Sensor (Name = 'SenHumidFront', ID = '68', Min: 0, Max: 100)
INFO 2013-08-02 17:31:45,870 : Registered sensor : Switch Sensor (Name = 'SenSwitchBack', ID = '65')
INFO 2013-08-02 17:31:45,884 : Registered sensor : Range Sensor (Name = 'SenTempBack', ID = '64', Min: -100, Max: 100)
INFO 2013-08-02 17:31:45,900 : Registered sensor : Range Sensor (Name = 'SenTempFront', ID = '67', Min: -100, Max: 100)
INFO 2013-08-02 17:31:45,912 : Registered sensor : Switch Sensor (Name = 'SenSceneFront', ID = '66')
</pre>
</div></div>

<p>I removed the home.rrd file and restarted OR. The file size is not increasing which gives me to think RRD4J is not adding sensor data to it.</p>

<p>No errors starting RRD4J, so I guess the XML is correct?<br/>
Any ideas?</p>

<p>Thanks,<br/>
Robert</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22874477"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>Does anybody have tips and tricks on using RRD4J?</p>

<p>Thanks,<br/>
Robert</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by eivwer at Aug 06, 2013 17:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874478"></a>
                                    <font class="smallfont"><p>Razberry user DSEN choose EmonCMS in favor of RRD4J<br/>
He seems to got that working, but I haven't seen a final report on it yet.</p>

<p><a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Energy+Monitoring+with+EmonCMS">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Energy+Monitoring+with+EmonCMS</a></p>

<p>I haven't found the time yet to look at it myself properly</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 06, 2013 18:10
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:42</font></td>
		    </tr>
	    </table>
    </body>
</html>