<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : UDP Example</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : UDP Example
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 12, 2011 by <font color="#0050B2">mariom</font>.
				    </div>

				    <p>Has anybody an example for an udp command (i.e. print hello world) in OR? <br/>
I use a java udp server I want send commands to.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19433622"></a>
                                    <font class="smallfont"><p>Hi Mario,</p>

<p>Only UDP Send is implemented at present and here is a UDP command I use, the entire section after command= (i.e. "K 2622 .... 2000") is what is sent in the datagram to the specified IP and Port: -</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
    &lt;command id=<span class="code-quote">"64"</span> protocol=<span class="code-quote">"udp"</span>&gt;
      &lt;property name=<span class="code-quote">"host"</span> value=<span class="code-quote">"192.168.1.64"</span> /&gt;
      &lt;property name=<span class="code-quote">"port"</span> value=<span class="code-quote">"65432"</span> /&gt;
      &lt;property name=<span class="code-quote">"send"</span> value=<span class="code-quote">"command=K 2622 2150 10BA 0213 063D 0213 0213 0213 063D 0213 0213 0213 0213 0213 063D 0213 0213 0213 063D 0213 0213 0213 063D 0213 0213 0213 063D 0213 063D 0213 0213 0213 063D 0213 0213 0213 0213 0213 063D 0213 0213 0213 0213 0213 063D 0213 0213 0213 0213 0213 0213 0213 063D 0213 0213 0213 063D 0213 063D 0213 0213 0213 063D 0213 063D 0213 063D 0213 2000"</span> /&gt;
    &lt;/command&gt;
</pre>
</div></div>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 13, 2011 10:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433641"></a>
                                    <font class="smallfont"><p>thanks for your reply. So I can't reveive status information of some components via udp then? Sending a hello world is receiving by the udp server. This works very well</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 13, 2011 17:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433645"></a>
                                    <font class="smallfont"><p>I only got round to implementing UDP Send functionality as I needed it for a project I was working on.</p>

<p>What sort of reading are you looking for: -</p>

<p>1). Response to UDP send command i.e. you're querying the UDP device and want to use the response in a sensor within OR<br/>
2). Capture UDP broadcast message and update sensor if response changes.</p>

<p>Although neither is implemented at present it wouldn't be too much work to get option 1). working as it would be similar to how the other protocols work whereas option 2). is a bit more tricky and would require a similar approach to that used for the KNX protocol.</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 13, 2011 18:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433647"></a>
                                    <font class="smallfont"><p>It's the first example. I would use it for quering status information and display ist in a label</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 13, 2011 19:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433648"></a>
                                    <font class="smallfont"><p>OK does the UDP server send the response to the same port as the message was sent to or does it use a different port?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 13, 2011 19:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433649"></a>
                                    <font class="smallfont"><p>It's the same port. (9876)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 13, 2011 19:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433660"></a>
                                    <font class="smallfont"><p>Hi Mario,</p>

<p>I have got UDP read functionality working; I have hardcoded the packet size to 512bytes which isn't ideal, if your server's response is larger it will be truncated, let me know.</p>

<p>I have only tested this briefly with a UDP server I quickly put together as I didn't have one to try, seems to work OK.</p>

<p>The UDP read functionality is included in the below branch: -</p>

<p><a href="http://openremote.svn.sourceforge.net/svnroot/openremote/branches/project/Controller_2_0_0_Alphas">http://openremote.svn.sourceforge.net/svnroot/openremote/branches/project/Controller_2_0_0_Alphas</a></p>

<p>Let me know how you get on.</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 14, 2011 20:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433670"></a>
                                    <font class="smallfont"><p>ok. will check it. Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 15, 2011 19:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433839"></a>
                                    <font class="smallfont"><p>Hi Richard,<br/>
I compiled your version to test it. I placed a sensor (type level) with udp command on a panel. But nothing comes to udp server. How can I receive Information via udp from udp Server into a sensor?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 24, 2011 23:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433855"></a>
                                    <font class="smallfont"><p>Hi Mario,</p>

<p>Try a custom sensor and a text label on your screen to make sure a response is being received, I have tested this and it works OK so let's see if you can also get this to work.</p>

<p>Once you see text appearing within your screen label provided the response is an integer (i.e. 0 or 100) then you should be able to use a range type sensor with a slider widget.</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 25, 2011 11:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433886"></a>
                                    <font class="smallfont"><p>Hello Richard,</p>

<p>after compiling again I get a XML to JSON Parsing Error. Wenn I deconfigure the udp command everything runs fine. Any idea?</p>

<p>Mario</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mariom at Nov 27, 2011 21:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433887"></a>
                                    <font class="smallfont"><p>Hi Mario,</p>

<p>The error you are seeing is related to JSONP API changes I have also made in that branch of the controller; could you please send me your controller and panel xml files showing the error so I can figure out what the problem is please?</p>

<p>richard[at]openremote[dot]org</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 27, 2011 21:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19439790"></a>
                                    <font class="smallfont"><p>Hi everybody, </p>

<p>I have troubles getting the udp sensor to work. I tried different sensor types (switch, level, custom) but nothing is parsed on the receiver side. UDP send and receive ports are the same. Any ideas why this is not working?<br/>
Is the current controller version featuring the udp sensor anyway?</p>

<p>Another question, is there a way to get sensor events without polling? For example receiving and event by udp that then changes on image or similar.</p>

<p>Thanks for your help. </p>

<p>Alex</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aschwith at Mar 18, 2012 17:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038194"></a>
                                    <font class="smallfont"><p>I am trying to do the same with my Micasaverde Vera.<br/>
But don't really understand how does it work ^^</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by milimilo at Dec 06, 2012 16:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038203"></a>
                                    <font class="smallfont"><p>Please see this forum for a Controller version that has the UDPListener protocol: -</p>

<p><a href="http://www.openremote.org/display/forums/Sending+generic+TCPIP+events+to+Eventghost?focusedCommentId=21038106#comment-21038106">http://www.openremote.org/display/forums/Sending+generic+TCPIP+events+to+Eventghost?focusedCommentId=21038106#comment-21038106</a></p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Dec 06, 2012 17:40
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 11:02</font></td>
		    </tr>
	    </table>
    </body>
</html>