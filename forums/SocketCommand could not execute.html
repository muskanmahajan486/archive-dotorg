<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : SocketCommand could not execute</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : SocketCommand could not execute
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 03, 2013 by <font color="#0050B2">rich.sperrin</font>.
				    </div>

				    <p>Hi - anyone shed some light on this error? "ERROR HTTP\-Thread\-5: SocketCommand could not execute"</p>

<p>Running OpenRemote2 on Windows7<br/>
Protocol TCP/IP Port 8080 to ITach IP2IR</p>

<p>thanks for looking <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>C:\OpenRemote2\bin&gt;openremote run<br/>
Using CATALINA_BASE:   C:\OpenRemote2<br/>
Using CATALINA_HOME:   C:\OpenRemote2<br/>
Using CATALINA_TMPDIR: C:\OpenRemote2\temp<br/>
Using JRE_HOME:        C:\Program Files\Java\jdk1.7.0_45<br/>
Dec 02, 2013 8:37:04 PM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\OpenRemo<br/>
te2\webapps\controller\WEB-INF\lib\native<br/>
Dec 02, 2013 8:37:04 PM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8080<br/>
Dec 02, 2013 8:37:04 PM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 538 ms<br/>
Dec 02, 2013 8:37:04 PM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Dec 02, 2013 8:37:04 PM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Dec 02, 2013 8:37:04 PM org.apache.catalina.startup.HostConfig deployWAR<br/>
INFO: Deploying web application archive webconsole.war<br/>
Dec 02, 2013 8:37:05 PM org.openremote.controller.bootstrap.Startup redirectJULtoLog4j<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
INFO 2013-12-02 20:37:08,543 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>



<p>*****************************************************************</p>

<p>  The license restrictions Sigma Designs places on Z-Wave<br/>
  implementations prevents us from distributing Z-Wave with<br/>
  an Open Source product.</p>

<p>  To test Z-Wave, download a freely available binary from<br/>
  <a href="http://download.openremote.org/free/zwave">http://download.openremote.org/free/zwave</a> and follow the<br/>
  installation instructions at <a href="http://www.openremote.org/x/xAo4AQ">http://www.openremote.org/x/xAo4AQ</a></p>

<p>*****************************************************************</p>


<p>INFO 2013-12-02 20:37:08,870 : No rule definitions found in 'C:\OpenRemote2\webapps\controller\rules'.<br/>
INFO 2013-12-02 20:37:08,870 : Initialized event processor : Drools Rule Engine<br/>
INFO 2013-12-02 20:37:09,057 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2013-12-02 20:37:09,057 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2013-12-02 20:37:09,057 : Startup complete.<br/>
INFO 2013-12-02 20:37:09,073 : Controller Definition File Watcher for Default Deployer started.<br/>
Dec 02, 2013 8:37:09 PM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
Dec 02, 2013 8:37:09 PM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 4623 ms<br/>
ERROR HTTP\-Thread\-5: SocketCommand could not execute<br/>
java.net.ConnectException: Connection refused: connect<br/>
        at java.net.DualStackPlainSocketImpl.connect0(Native Method)<br/>
        at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)<br/>
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)<br/>
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)<br/>
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)<br/>
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)<br/>
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)<br/>
        at java.net.Socket.connect(Socket.java:579)<br/>
        at java.net.Socket.connect(Socket.java:528)<br/>
        at java.net.Socket.&lt;init&gt;(Socket.java:425)<br/>
        at java.net.Socket.&lt;init&gt;(Socket.java:208)<br/>
        at org.openremote.controller.protocol.socket.TCPSocketCommand.requestSocket(TCPSocketCommand.java:162)<br/>
        at org.openremote.controller.protocol.socket.TCPSocketCommand.send(TCPSocketCommand.java:156)<br/>
        at org.openremote.controller.service.impl.ControlCommandServiceImpl.trigger(ControlCommandServiceImpl.java:95)<br/>
        at org.openremote.controller.rest.ControlCommandRESTServlet.handleRequest(ControlCommandRESTServlet.java:77)<br/>
        at org.openremote.controller.rest.RESTAPI.doPost(RESTAPI.java:159)<br/>
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)<br/>
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)<br/>
        at java.lang.Thread.run(Thread.java:744)<br/>
ERROR HTTP\-Thread\-6: SocketCommand could not execute<br/>
java.net.ConnectException: Connection refused: connect</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22880635"></a>
                                    <font class="smallfont"><p>Double-checked IP for iTach in Controller.XML and corrected it in designer. I'm now getting connection timeout <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
I have double-checked the IP using the iTach iLearn tool. One question arises; If I change the panel design, save and restart OpenRemote2 Controller, should the new XML be picked up or do I zip them up and copy them to the WebApps folder?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 03, 2013 13:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880636"></a>
                                    <font class="smallfont"><p>You should sync your design to the controller.<br/>
Easiest way is to go to controller home page and perform an on-line sync.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Dec 03, 2013 13:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880637"></a>
                                    <font class="smallfont"><p>Thanks Eric - knew that step was there for a reason! Will give it a go this eve.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 03, 2013 14:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880645"></a>
                                    <font class="smallfont"><p>Still getting socket timeout error <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Controller (laptop windows7) is running on 192.168.1.71 - check<br/>
iTach (IP2IR) is running on 192.168.1.72 - check</p>

<p>clearly I've still got something not quite right</p>

<p>Its very possible I havent got the senddir Command spot on yet but that shouldnt hurt? Is it possible the target is ignoring the command coz it doesnt make any sense? I'm sending this over 8080 using IP protocol in GlobalCache format :-</p>

<p>sendir,1:1,1,37202,1,1,10,74,16,27,15,69,21,63,21,64,21,21,21,3700</p>

<p>One other thought; the GlobalCache iHelp cant find iTach on .72 - think something maybe blocked? (i got the IP from router admin)</p>

<p>Also - took wifi out of equation and connected controller to router ethernet</p>

<p>thoughts please!</p>

<p>c:\OpenRemote2\bin&gt;openremote run<br/>
Using CATALINA_BASE:   c:\OpenRemote2<br/>
Using CATALINA_HOME:   c:\OpenRemote2<br/>
Using CATALINA_TMPDIR: c:\OpenRemote2\temp<br/>
Using JRE_HOME:        C:\Program Files\Java\jdk1.7.0_45<br/>
Dec 03, 2013 6:17:21 PM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: c:\OpenRemo<br/>
te2\webapps\controller\WEB-INF\lib\native<br/>
Dec 03, 2013 6:17:21 PM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8080<br/>
Dec 03, 2013 6:17:21 PM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 507 ms<br/>
Dec 03, 2013 6:17:21 PM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Dec 03, 2013 6:17:21 PM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Dec 03, 2013 6:17:21 PM org.apache.catalina.startup.HostConfig deployWAR<br/>
INFO: Deploying web application archive webconsole.war<br/>
Dec 03, 2013 6:17:22 PM org.openremote.controller.bootstrap.Startup redirectJULtoLog4j<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
INFO 2013-12-03 18:17:24,378 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>



<p>*****************************************************************</p>

<p>  The license restrictions Sigma Designs places on Z-Wave<br/>
  implementations prevents us from distributing Z-Wave with<br/>
  an Open Source product.</p>

<p>  To test Z-Wave, download a freely available binary from<br/>
  <a href="http://download.openremote.org/free/zwave">http://download.openremote.org/free/zwave</a> and follow the<br/>
  installation instructions at <a href="http://www.openremote.org/x/xAo4AQ">http://www.openremote.org/x/xAo4AQ</a></p>

<p>*****************************************************************</p>


<p>INFO 2013-12-03 18:17:24,565 : No rule definitions found in 'c:\OpenRemote2\webapps\controller\rules'.<br/>
INFO 2013-12-03 18:17:24,565 : Initialized event processor : Drools Rule Engine<br/>
INFO 2013-12-03 18:17:24,706 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2013-12-03 18:17:24,706 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2013-12-03 18:17:24,706 : Startup complete.<br/>
INFO 2013-12-03 18:17:24,706 : Controller Definition File Watcher for Default Deployer started.<br/>
Dec 03, 2013 6:17:24 PM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
Dec 03, 2013 6:17:24 PM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 3251 ms<br/>
INFO 2013-12-03 18:17:34,768 :</p>

<p>--------------------------------------------------------------------</p>

<p>  UNDEPLOYING CURRENT CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2013-12-03 18:17:34,768 : Stopped event processor : Drools Rule Engine<br/>
INFO 2013-12-03 18:17:34,768 : Stopped event processor : RRD4J Data Logger<br/>
INFO 2013-12-03 18:17:34,768 : Stopped event processor : EmonCMS Data Logger<br/>
INFO 2013-12-03 18:17:34,768 : Shutdown complete.<br/>
INFO 2013-12-03 18:17:34,768 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2013-12-03 18:17:34,814 : No rule definitions found in 'c:\OpenRemote2\webapps\controller\rules'.<br/>
INFO 2013-12-03 18:17:34,814 : Initialized event processor : Drools Rule Engine<br/>
INFO 2013-12-03 18:17:34,830 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2013-12-03 18:17:34,846 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2013-12-03 18:17:34,846 : Startup complete.<br/>
ERROR HTTP\-Thread\-2: SocketCommand could not execute<br/>
java.net.ConnectException: Connection timed out: connect<br/>
        at java.net.DualStackPlainSocketImpl.connect0(Native Method)<br/>
        at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)<br/>
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)<br/>
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)<br/>
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)<br/>
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)<br/>
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)<br/>
        at java.net.Socket.connect(Socket.java:579)<br/>
        at java.net.Socket.connect(Socket.java:528)<br/>
        at java.net.Socket.&lt;init&gt;(Socket.java:425)<br/>
        at java.net.Socket.&lt;init&gt;(Socket.java:208)<br/>
        at org.openremote.controller.protocol.socket.TCPSocketCommand.requestSocket(TCPSocketCommand.java:162)<br/>
        at org.openremote.controller.protocol.socket.TCPSocketCommand.send(TCPSocketCommand.java:156)<br/>
        at org.openremote.controller.service.impl.ControlCommandServiceImpl.trigger(ControlCommandServiceImpl.java:95)<br/>
        at org.openremote.controller.rest.ControlCommandRESTServlet.handleRequest(ControlCommandRESTServlet.java:77)<br/>
        at org.openremote.controller.rest.RESTAPI.doPost(RESTAPI.java:159)<br/>
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)<br/>
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)<br/>
        at java.lang.Thread.run(Thread.java:744)</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 03, 2013 18:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880672"></a>
                                    <font class="smallfont"><p>Okay - so i've used GC iLearn &amp; iTest to prove the commands are working okay. I've added the commands to designer and synced. </p>

<p>Still getting same old error (below) <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>This test takes iTach out of the equation and leaves me with Controller, Java and Network</p>

<p>thoughts?</p>

<p>INFO 2013-12-04 18:31:44,992 : Startup complete.<br/>
ERROR [HTTP-Thread-6]: SocketCommand could not execute<br/>
java.net.ConnectException: Connection timed out: connect<br/>
        at java.net.DualStackPlainSocketImpl.connect0(Native Method)<br/>
        at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)<br/>
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 04, 2013 18:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880707"></a>
                                    <font class="smallfont"><p>Port 4998 seems to do the trick. my original design uses 8080. not sure where I found that answer now but wasnt immediately obvious. i now have a working panel - yay!</p>

<p>Anybody tell me what different ports do and how a system decides which are enabled/disabled - just a link to more info would be good <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 05, 2013 10:49
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:39</font></td>
		    </tr>
	    </table>
    </body>
</html>