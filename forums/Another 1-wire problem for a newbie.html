<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Another 1-wire problem for a newbie</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Another 1-wire problem for a newbie
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 23, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hi Everyone,</p>

<p>First of all, can I say how great the OpenRemote stuff is<img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> However, I need a bit of help, please.</p>

<p>I'm trying to get OpenRemote working with OWFS, using the i2c bus master approach with Sheepwalk Electronic's DS18B20 sensors on a Raspberry Pi with latest Raspbian image. I installed OWFS using the apt-get method, and OpenRemote controller as per the on line instructions.</p>

<p>I have OWFS, OWSERVER, OWHTTPD, and OWFTPD services running. I have also tried this with OWFS not running at all, and have the same error (see below).</p>

<p>The basic 1-wire web server is responding on the default port (2121), and OWREAD commands (in an SSH session) work directly as expected. The OpenRemote designer is communicating with my Controller instance, which appears to be running OK, apart from the fact that I am getting an error message:-</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR [Polling thread <span class="code-keyword">for</span> sensor: TestSensor]: OneWire error, unable to read from OWSERVER.
org.owfs.jowfsclient.OwfsException: Error received
</pre>
</div></div>

<p>On my OpenRemote iPad app, I see N/A for the sensor value, which I have seen in one other thread, but not apparently for the same reason as I have.</p>

<p>There are some instructions which I don't quite understand regarding the use of OWSERVER vs OWFS, and how to configure this properly, and I suspect this may be where I am going wrong.</p>

<p>Any and all pointers or assistance will be gratefully received.</p>

<p>Hugh</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22414245"></a>
                                    <font class="smallfont"><p>I forgot to mention that I'm using the newer ARM Sdk</p>

<p><a href="https://jdk8.java.net/fxarmpreview/index.html">https://jdk8.java.net/fxarmpreview/index.html</a></p>

<p>Could this be the problem ? And would I be better advised to use the latest developer release of the controller, rather than 2.0.x, with the newer ARM SDK ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 14, 2013 18:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414247"></a>
                                    <font class="smallfont"><p>The 1-Wire Howto is describing everything. The standard install after apt-get normally does not start owserver or it is started so that we cannot attach to it.<br/>
We don't need owftp, owread, owfs or anything like that. Just owserver.<br/>
An owserver needs to be accessable via network.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 14, 2013 19:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414406"></a>
                                    <font class="smallfont"><p>Thanks, Marcus. I had installed OWFS via the apt-get method, so I am now wiping the pi and starting again, using the link at the bottom of your page </p>

<p><a href="http://openremote.org/display/docs/OpenRemote+2.0+How+To+-+1-Wire+Sensors">http://openremote.org/display/docs/OpenRemote+2.0+How+To+-+1-Wire+Sensors</a> </p>

<p>I missed that link before. I guess it might be useful to add the comment there that the apt-get install method for OWFS does not appear to work with OpenRemote ?</p>

<p>Your link points to <a href="https://help.ubuntu.com/community/1wireSoftware">https://help.ubuntu.com/community/1wireSoftware</a></p>

<p>so that's what I am trying next.</p>

<p>Thanks for your help. I will let you know how that goes.</p>

<p>Hugh</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 17, 2013 10:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414686"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>I've started all over again, using the latest ALPHA Openremote controller V2.1.0_SNAPSHOT-2013-05-11, and the 2.9p0 OWFS installation from Sourceforge, and the java dev version at <a href="https://jdk8.java.net/fxarmpreview/">https://jdk8.java.net/fxarmpreview/</a>. All of this running on the latest Raspbian image, updated with rpi-update and apt-get update and apt-get upgrade.</p>

<p>OWSERVER and OWHTTPD are running OK and producing the normal web pages seen on port 2121. Neither OWFTPD, nor OWFS is ruuning. However, I am still getting exactly the same error as before:-</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR [Polling thread <span class="code-keyword">for</span> sensor: TestSensor]: OneWire error, unable to read from OWSERVER.
org.owfs.jowfsclient.OwfsException: Error received
        at org.owfs.jowfsclient.internal.OwfsClientImpl.readPacket(OwfsClientImpl.java:576)
        at org.owfs.jowfsclient.internal.OwfsClientImpl.read(OwfsClientImpl.java:314)
        at org.openremote.controller.protocol.onewire.OneWireCommand.read(OneWireCommand.java:139)
        at org.openremote.controller.protocol.onewire.OneWireCommand.run(OneWireCommand.java:219)
        at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:722)
</pre>
</div></div>

<p>I have also tried stopping the OWHTTPD service, but get the same results. Any idea how I can debug the problem please ?</p>

<p>Regards</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 13:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414688"></a>
                                    <font class="smallfont"><p>It must be the way owserver is configured.</p>

<p>How is owserver started? Do you have a file "/etc/init.d/owfs.sh"?<br/>
If yes, you can stop the service with "/etc/init.dowfs.sh stop".<br/>
After that start owserver manually using this command line: /bin/owserver --device=/dev/ttyUSB0 -p 4304<br/>
This would use the 1-Wire stick connected to /dev/ttyUSB0 and listen on incoming connections on port 4304.<br/>
Put the IP of your raspberry in hostname for 1-wire protocol and use port 4304.</p>

<p>If this works, you have to change the default startup and config somehow.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 13:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414691"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>I'm starting with an owserver shell script in /etc/init.d, and using an owfs.conf in /etc.</p>

<p>owfs.conf is below, followed by the owserver script. This all came from the original apt-get install, modified for the new 2.9p0 location of OWFS. For hardware, I'm talking to Sheepwalk electronic's RPI3 module, using a busmaster (DS2482-800 chip) approach:- </p>

<p><a href="http://www.sheepwalkelectronics.co.uk/RPI3.shtml">http://www.sheepwalkelectronics.co.uk/RPI3.shtml</a></p>

<p>So, could the difference be that I'm not using a serial/USB port ?</p>

<p>I've tried stopping the OWSERVER service using<br/>
sudo service owserver stop<br/>
followed by<br/>
sudo /opt/owfs/bin/owserver --device=/dev/i2c -p 4304</p>

<p>but I just get "Cannot access device /dev/i2c"</p>

<p>Does that help ?</p>

<div style="max-width: 800px;"><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
# Sample configuration file <span class="code-keyword">for</span> the OWFS suite <span class="code-keyword">for</span> Debian GNU/Linux.
#
#
# This is the main OWFS configuration file. You should read the
# owfs.conf(5) manual page in order to understand the options listed
# here.

######################## SOURCES ########################
#
# With <span class="code-keyword">this</span> setup, any client (but owserver) uses owserver on the
# local machine...
! server: server = localhost:4304
#
# ...and owserver uses the real hardware, by <span class="code-keyword">default</span> fake devices
# This part must be changed on real installation
# server: FAKE = DS18S20,DS2405
#
# I2C device: DS2482-100
# If Raspberry Pi version 1
#server: device = /dev/i2c-0
# If Raspberry Pi version 2
server: device = /dev/i2c-1
#
# USB device: DS9490
#server: usb = all
#
# Serial port: DS9097
#server: device = /dev/ttyS1
#
# owserver tcp address
#server: server = 192.168.10.1:3131
#
# random simulated device
#server: FAKE = DS18S20,DS2405
#
######################### OWFS ##########################
#
#mountpoint = /mnt/1wire
#allow_other
#
####################### OWHTTPD #########################

http: port = 2121

####################### OWFTPD ##########################

ftp: port = 2120




#!/bin/sh

### BEGIN INIT INFO
# Provides:          owserver
# Required-Start:    $remote_fs $syslog $network $named
# Required-Stop:     $remote_fs $syslog $network $named
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# <span class="code-object">Short</span>-Description: 1-wire TCP server
# Description:       Start and stop a TCP server <span class="code-keyword">for</span> 1-wire control.
### END INIT INFO

PATH=/sbin:/bin:/usr/sbin:/usr/bin
CONFFILE=/etc/owfs.conf
DESC=<span class="code-quote">"1-Wire TCP Server"</span>
NAME=<span class="code-quote">"owserver"</span>
DAEMON=/opt/owfs/bin/$NAME
PIDDIR=/<span class="code-keyword">var</span>/run/owfs
PIDFILE=$PIDDIR/$NAME.pid

# Gracefully exit <span class="code-keyword">if</span> the <span class="code-keyword">package</span> has been removed.
test -x $DAEMON || exit 0

. /lib/lsb/init-functions

d_start() {
    [ -d $PIDDIR ] || {
    mkdir -m 0775 -p $PIDDIR
    chown root:root $PIDDIR &gt;/dev/<span class="code-keyword">null</span> 2&gt;&amp;1
    }
    start-stop-daemon --start --quiet --oknodo --exec $DAEMON -- -c $CONFFILE \
        --pid-file $PIDFILE
    # ensure the daemon has been started 
    sleep 1
    pidofproc -p $PIDFILE $DAEMON &gt;/dev/<span class="code-keyword">null</span>
}

d_stop() {
    start-stop-daemon --stop --quiet --oknodo --exec $DAEMON
    sleep 1
    <span class="code-keyword">if</span> [ -f $PIDFILE ] &amp;&amp; ! ps h `cat $PIDFILE` &gt; /dev/<span class="code-keyword">null</span>
    then
        # Stale PID file (owserver was successfilly stoped),
        #remove it
        rm -f $PIDFILE
    fi
}

d_status() {
    pidofproc -p $PIDFILE $DAEMON &gt; /dev/<span class="code-keyword">null</span>
}

<span class="code-keyword">case</span> <span class="code-quote">"$1"</span> in
    start)
        log_daemon_msg <span class="code-quote">"Starting $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_start
        log_end_msg $?
        ;;
    stop)
        log_daemon_msg <span class="code-quote">"Stopping $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_stop
        log_end_msg $?
        ;;
    restart|force-reload)
        log_daemon_msg <span class="code-quote">"Restarting $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_status &amp;&amp; d_stop
        d_start
        log_end_msg $?
        ;;
    status)
        d_status
        <span class="code-keyword">if</span> [ $? -eq 0 ];then
            log_success_msg <span class="code-quote">"$NAME is running"</span>
        <span class="code-keyword">else</span>
            log_failure_msg <span class="code-quote">"$NAME is not running"</span>
        fi
        ;;
    *)
        echo <span class="code-quote">"Usage: /etc/init.d/$NAME {start|stop|restart|force-reload|status}"</span> &gt;&amp;2
        exit 1
        ;;
esac

exit 0
</pre>
</div></div></div>





</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 13:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414693"></a>
                                    <font class="smallfont"><p>Sorry, that paste went a bit wrong <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Anywhere I can post the files for you ? Can I make attachments to this forum entry ?</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 13:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414700"></a>
                                    <font class="smallfont"><p>Put the pasted code between {code}...{code} tags.<br/>
You can also upload files to the forum. It's a bit tricky though.<br/>
If owserver is stopped with the service try to use "sudo /opt/owfs/bin/owserver --device=/dev/i2c-1 -p 4304"</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 14:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414720"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>OK, I've pasted those two files below between the relevant tags.<br/>
I've also stopped the owserver service with:-</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
sudo service owserver stop
</pre>
</div></div>

<p>and followed that with</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
sudo /opt/owfs/bin/owserver --device=/dev/i2c-1 -p 4304
</pre>
</div></div>

<p>which starts owserver OK, and I see the owhttpd page at port 2121, as expected.</p>

<p>When I then do </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
./openremote.sh run
</pre>
</div></div>

<p>I get exactly the same error as before.</p>

<p>My owserver scriupt and owfs.conf follow.</p>

<p>Regards</p>

<p>Hugh</p>

<p>owserver script</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh

### BEGIN INIT INFO
# Provides:          owserver
# Required-Start:    $remote_fs $syslog $network $named
# Required-Stop:     $remote_fs $syslog $network $named
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# <span class="code-object">Short</span>-Description: 1-wire TCP server
# Description:       Start and stop a TCP server <span class="code-keyword">for</span> 1-wire control.
### END INIT INFO

PATH=/sbin:/bin:/usr/sbin:/usr/bin
CONFFILE=/etc/owfs.conf
DESC=<span class="code-quote">"1-Wire TCP Server"</span>
NAME=<span class="code-quote">"owserver"</span>
DAEMON=/opt/owfs/bin/$NAME
PIDDIR=/<span class="code-keyword">var</span>/run/owfs
PIDFILE=$PIDDIR/$NAME.pid

# Gracefully exit <span class="code-keyword">if</span> the <span class="code-keyword">package</span> has been removed.
test -x $DAEMON || exit 0

. /lib/lsb/init-functions

d_start() {
    [ -d $PIDDIR ] || {
    mkdir -m 0775 -p $PIDDIR
    chown root:root $PIDDIR &gt;/dev/<span class="code-keyword">null</span> 2&gt;&amp;1
    }
    start-stop-daemon --start --quiet --oknodo --exec $DAEMON -- -c $CONFFILE \
        --pid-file $PIDFILE
    # ensure the daemon has been started 
    sleep 1
    pidofproc -p $PIDFILE $DAEMON &gt;/dev/<span class="code-keyword">null</span>
}

d_stop() {
    start-stop-daemon --stop --quiet --oknodo --exec $DAEMON
    sleep 1
    <span class="code-keyword">if</span> [ -f $PIDFILE ] &amp;&amp; ! ps h `cat $PIDFILE` &gt; /dev/<span class="code-keyword">null</span>
    then
        # Stale PID file (owserver was successfilly stoped),
        #remove it
        rm -f $PIDFILE
    fi
}

d_status() {
    pidofproc -p $PIDFILE $DAEMON &gt; /dev/<span class="code-keyword">null</span>
}

<span class="code-keyword">case</span> <span class="code-quote">"$1"</span> in
    start)
        log_daemon_msg <span class="code-quote">"Starting $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_start
        log_end_msg $?
        ;;
    stop)
        log_daemon_msg <span class="code-quote">"Stopping $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_stop
        log_end_msg $?
        ;;
    restart|force-reload)
        log_daemon_msg <span class="code-quote">"Restarting $DESC"</span> <span class="code-quote">"$NAME"</span>
        d_status &amp;&amp; d_stop
        d_start
        log_end_msg $?
        ;;
    status)
        d_status
        <span class="code-keyword">if</span> [ $? -eq 0 ];then
            log_success_msg <span class="code-quote">"$NAME is running"</span>
        <span class="code-keyword">else</span>
            log_failure_msg <span class="code-quote">"$NAME is not running"</span>
        fi
        ;;
    *)
        echo <span class="code-quote">"Usage: /etc/init.d/$NAME {start|stop|restart|force-reload|status}"</span> &gt;&amp;2
        exit 1
        ;;
esac

exit 0
</pre>
</div></div>

<p>owfs.conf</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
# Sample configuration file <span class="code-keyword">for</span> the OWFS suite <span class="code-keyword">for</span> Debian GNU/Linux.
#
#
# This is the main OWFS configuration file. You should read the
# owfs.conf(5) manual page in order to understand the options listed
# here.

######################## SOURCES ########################
#
# With <span class="code-keyword">this</span> setup, any client (but owserver) uses owserver on the
# local machine...
! server: server = localhost:4304
#
# ...and owserver uses the real hardware, by <span class="code-keyword">default</span> fake devices
# This part must be changed on real installation
# server: FAKE = DS18S20,DS2405
#
# I2C device: DS2482-100
# If Raspberry Pi version 1
#server: device = /dev/i2c-0
# If Raspberry Pi version 2
server: device = /dev/i2c-1
#
# USB device: DS9490
#server: usb = all
#
# Serial port: DS9097
#server: device = /dev/ttyS1
#
# owserver tcp address
#server: server = 192.168.10.1:3131
#
# random simulated device
#server: FAKE = DS18S20,DS2405
#
######################### OWFS ##########################
#
#mountpoint = /mnt/1wire
#allow_other
#
####################### OWHTTPD #########################

http: port = 2121

####################### OWFTPD ##########################

ftp: port = 2120

####################### OWSERVER ########################

server: port = 4304

</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 17:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414721"></a>
                                    <font class="smallfont"><p>Next thing I've tried is removing the automatic start of owserver and owhttpd (using update-rc.d remove commands), rebooting the PI, and just running </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
sudo /opt/owfs/bin/owserver --device=/dev/i2c-1 -p 4304
</pre>
</div></div>
<p>followed by</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
sudo /opt/openremote/bin/openremote.sh run
</pre>
</div></div>

<p>I get the same problem again.</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 17:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414722"></a>
                                    <font class="smallfont"><p>Also just tried using the perl module OWNet, with a two line perl program, saved as test.pl:-</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
use OWNet ;
print OWNet::read( <span class="code-quote">"localhost:4304"</span> , <span class="code-quote">"/26.FFE755010000/temperature"</span> ) .<span class="code-quote">"\n"</span> ;
</pre>
</div></div>
<p>Then ran</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
perl test.pl
</pre>
</div></div>

<p>That returned the same temperature as shown by the web page at port 2121.</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 17:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414723"></a>
                                    <font class="smallfont"><p>How does your openremote command look?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 17:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414724"></a>
                                    <font class="smallfont"><p>Not sure what you mean ?<br/>
I start openremote controller with the shell script above (openremote.sh), or did you mean what the Openremote designer Command looks like ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 17:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414725"></a>
                                    <font class="smallfont"><p>Yes, the designer.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 17:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414727"></a>
                                    <font class="smallfont"><p>Name: GetSensorInfo<br/>
Protocol: 1-Wire Protocol</p>

<p>Hostname: "MYDNSName" - but this is not visible from the Internet right now<br/>
Port: 4304<br/>
Device address: /26.FFE755010000<br/>
Sensor attribute: temperature<br/>
Temp scale: Celsius<br/>
Polling interval: 60s</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 17:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414728"></a>
                                    <font class="smallfont"><p>If you run the controller where owserver is running, you also have to use 'localhost' just like your perl script.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 18:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414729"></a>
                                    <font class="smallfont"><p>Oops. Didn't realise that. I haven't got access to the Pi right now, so I'll try again tomorrow. <br/>
Thanks for all the help.Hopefully, that will fix it.</p>

<p>If it does work, I've got a complete step-by-step of installation commands from the most recent Raspbian image,<br/>
updating it, installing OWFS, and then OpenRemote that I would be happy to upload somewhere if that helps. </p>

<p>Regards</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 22, 2013 18:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414779"></a>
                                    <font class="smallfont"><p>Yes it does help so I can set up a wiki page for that if you want to write it up.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 23, 2013 12:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414826"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>After changing the 'Host' field in the Designer App to 'localhost', I've got somewhere, but still have the dreaded 'N/A' on the iPad Openremote app. </p>

<p>First time around I did get an error from openremote:-</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR [HTTP-<span class="code-object">Thread</span>-1]: CommandException occurs
org.openremote.controller.config.ControllerXMLChangedException: The content of controller.xml had changed.
followed by lots of lines of 
at xxxxx
</pre>
</div></div>
<p>After rebooting and re-executing Sync commands from the controller port 8080 web page, that error has now gone away, and I see:-</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
INFO 2013-05-23 16:13:15,845 : No rule definitions found in '/opt/openremote/webapps/controller/rules'.
INFO 2013-05-23 16:13:15,848 : Initialized event processor : Drools Rule Engine
INFO 2013-05-23 16:13:15,920 : Registered sensor : Level Sensor (Name = 'T1', ID = '11', Min: 0, Max: 100)
INFO 2013-05-23 16:13:15,954 : Startup complete.
</pre>
</div></div>
<p>So that looks to me like my very simple iPad Designer screen should be working, but I am still getting 'N/A' for the value of that sensor. <br/>
I am able to place (and remove) an image on the screen in Designer, and have it appear (and disappear) on the iPad, <br/>
so some communication is definitely working.<br/>
One other detail -  when I select the 'Reload configuration and clear cache' link on the Controller Port 8080 page,<br/>
it returns an error message at the top saying 'Failed to reload configuration and clear cache', but if I then press the <br/>
'Sync with Online Designer' button, it reports 'Sync Complete'. I have also done the 'Test UI Online' in Designer, and it returns OK.</p>

<p>Any ideas ?</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 23, 2013 16:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414831"></a>
                                    <font class="smallfont"><p>Just found the bit about needing a custom sensor for 1-wire temperature, cos of the decimal point. I'll try that tomorrow.</p>

<p>Hugh</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by scohrab at May 23, 2013 19:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414833"></a>
                                    <font class="smallfont"><p>Yes, custom sensor is needed. That should help.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 23, 2013 20:28
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:40</font></td>
		    </tr>
	    </table>
    </body>
</html>