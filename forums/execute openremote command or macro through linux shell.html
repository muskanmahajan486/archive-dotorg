<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : execute openremote command or macro through linux shell</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : execute openremote command or macro through linux shell
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 11, 2013 by <font color="#0050B2">simnet</font>.
				    </div>

				    <p>Hi there,</p>

<p>I have a little question to finish an home automation concept. We have some LUA script or bash script on a linux computer and we need to integrate Openremote macro or command on it. </p>

<p>It's possible to call an Openremote command or macro through the shell ? I have read the REST API but i don't found a procedure to execute a command that is not linked to a design ...</p>

<p>Possible ?</p>

<p>Thanks a lot for your answer.</p>

<p>Guillaume</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22414129/23036158.png">SMSalert.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22414129/23036172.png">Sensor-command.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22414145"></a>
                                    <font class="smallfont"><p>As far as I recall the REST call to trigger a command is based on the button ID, which would fit to your findings.<br/>
You can create a panel though where you don't have any navigation towards it and place the button on that.<br/>
Then you should be able to trigger the button (command) through the REST API.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 12, 2013 11:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414163"></a>
                                    <font class="smallfont"><p>Yes I thought of this solution. But it's not very usefull.<br/>
There is no way to execute openremote command through shell ? Like the drools syntax execute.command() <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> ?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at May 12, 2013 17:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414171"></a>
                                    <font class="smallfont"><p>No. Shell would be an external process which only has access through REST.<br/>
Drools is running inside the controller and therefor can execute commands directly.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 12, 2013 19:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414200"></a>
                                    <font class="smallfont"><p>If you want to execute a command from an external shell, just use the curl command to trigger the REST HTTP call.<br/>
I've done it in the past for demo purposes and it does work.</p>

<p>However, you already found one of the limitations that you need to have a (potentially unused) button to trigger a command or macro.<br/>
The other issue is that the REST API uses the button id, which is generated when saving the XML/syncing with the controller and will potentially change from one sync to the next.</p>

<p>The ideal solution is to add an additional REST call on the controller that could take e.g. the command name and execute it.<br/>
I'm afraid we don't have time to work on this right now, but if you (or somebody else) want to take a shot at implementing it, I'm happy to point you in the right direction.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at May 13, 2013 12:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414260"></a>
                                    <font class="smallfont"><p>Ok thanks.</p>

<p>Yes it can be a very nice solution to integrate Openremote macros with Crestron or other home automation system.</p>

<p>We look in our side how we can help you on this development.</p>

<p>Regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at May 15, 2013 08:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414292"></a>
                                    <font class="smallfont"><p>FYI: we do support a close integration with AMX control systems for the Pro version.</p>

<p>What other system were you thinking about ?</p>

<p>Also, a closer integration with Crestron could be nice.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at May 15, 2013 13:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877235"></a>
                                    <font class="smallfont"><p>Hello team,</p>

<p>I'm now starting with rule programming. The first one I have tried was a rule that execute a bash script after an event happens (for example light status on). The problem I had was the script never runs. I have added a sentence to check if the rule works, sending a message to the log when the lights goes on, and it worked fine, but the script doesn't run. I have tested the script solely and work fine.<br/>
I have tried this rule in two ways, putting the script name in the execute.command sentence (execute.command ("script name with entire path"), other way was creating a command type "shell executing protocol" and calling it from the execute.command in the rule. <br/>
Have somebody any idea why this happens?<br/>
I have created a new device called ShellExecution and have added a command type "Shell execution protocol" pointing to my bash script. I have created a button with this command and didn't work either.</p>

<p>The script I have created is like this (echo "message" | gokii --sendsms "phone number"). I have a gsm module connected in the USB port of my raspberry-pi and I use gnokii to send SMS messages. The idea is (if finally the rule works) to add a door sensor and send alerts when door is open.</p>

<p>Thanks in advance</p>

<p>Abraham Martin</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Sep 30, 2013 20:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877329"></a>
                                    <font class="smallfont"><p>If the script doesn't execute even from a button then there's something wrong with the inter-process communication. I'd leave the rules out of it for now and just try to get the button to work first. It may be a permission issue &#8211; at the moment I can't think of other reasons why the button would fail to execute a script. Unless there are some specific errors in the logs.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 02, 2013 11:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877357"></a>
                                    <font class="smallfont"><p>Hello Juha,</p>

<p>As I see in another forum I have added a SHELL command log in the log4j.. configuration file and I have no error messages from the shell execution: Here you are the output:<br/>
 " DEBUG 2013-10-02 16:40:01,012 (Shell): Will start shell command: /home/pi/.config/gnokii/mensajes/SMSalert.sh and use params: null<br/>
DEBUG 2013-10-02 16:40:01,075 (Shell): Shell command: /home/pi/.config/gnokii/mensajes/SMSalert.sh returned:<br/>
DEBUG 2013-10-02 16:41:01,004 (Shell): Found cached ShellExe command with id: 480  "</p>

<p>I cant't understand why the result of the shell doesn't work. I have no SMS received in my mobile, but it seems to be executed correctly.</p>

<p>If you have any idea to test, it will be very appreciated.</p>

<p>Abraham</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 02, 2013 15:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877363"></a>
                                    <font class="smallfont"><p>Reading in another forum I have seen a problem like mine and the solution given was to create a new sensor type=custom and add the command that uses the "Shell execution protocol". After that I have an error in the shell.log file (I have no rule created only the sensor with the shell). The output is :</p>

<p>" DEBUG 2013-10-02 20:40:01,017 (Shell): Shell command: Rr returned:<br/>
DEBUG 2013-10-02 20:41:01,003 (Shell): Found cached ShellExe command with id: 484<br/>
DEBUG 2013-10-02 20:41:01,004 (Shell): Will start shell command: Rr and use params: null<br/>
ERROR 2013-10-02 20:41:01,012 (Shell): Could not execute shell command: Rr<br/>
java.io.IOException: Cannot run program "Rr": error=2, No such file or directory<br/>
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:1043)<br/>
        at java.lang.Runtime.exec(Runtime.java:620)<br/>
        at java.lang.Runtime.exec(Runtime.java:485)<br/>
        at org.openremote.controller.protocol.shellexe.ShellExeCommand.executeCommand(ShellExeCommand.java:119)<br/>
        at org.openremote.controller.protocol.shellexe.ShellExeCommand.send(ShellExeCommand.java:82)<br/>
        at org.openremote.controller.model.Command.execute(Command.java:230)<br/>
        at org.openremote.controller.model.Command.execute(Command.java:199)<br/>
        at org.openremote.controller.statuscache.CommandFacade.command(CommandFacade.java:80)<br/>
        at org.openremote.controller.statuscache.CommandFacade.command(CommandFacade.java:57)<br/>
        at org.openremote.controller.model.event.Rule_TurnLightOff_0.defaultConsequence(Rule_TurnLightOff_0.java:15)<br/>
        at org.openremote.controller.model.event.Rule_TurnLightOff_0DefaultConsequenceInvoker.evaluate(Rule_TurnLightOff_0DefaultConsequenceInvoker.java:25)<br/>
        at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:917)<br/>
        at org.drools.common.Scheduler$ActivationTimerJob.execute(Scheduler.java:73)<br/>
        at org.drools.time.impl.JDKTimerService$JDKCallableJob.call(JDKTimerService.java:147)<br/>
        at org.drools.time.impl.JDKTimerService$JDKCallableJob.call(JDKTimerService.java:125)<br/>
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)<br/>
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)<br/>
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)<br/>
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)<br/>
        at java.lang.Thread.run(Thread.java:724)<br/>
Caused by: java.io.IOException: error=2, No such file or directory<br/>
        at java.lang.UNIXProcess.forkAndExec(Native Method)<br/>
        at java.lang.UNIXProcess.&lt;init&gt;(UNIXProcess.java:136)<br/>
        at java.lang.ProcessImpl.start(ProcessImpl.java:134)<br/>
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:1024)<br/>
        ... 20 more<br/>
DEBUG 2013-10-02 20:41:01,019 (Shell): Shell command: Rr returned:<br/>
DEBUG 2013-10-02 20:41:14,438 (Shell): Found cached ShellExe command with id: 480<br/>
DEBUG 2013-10-02 20:41:14,448 (Shell): *** setSensor called as part of EventListener init *** sensor is: Sensor (Name = 'SMSAlert Sensor', ID = '3069850', State Mappings: {})"</p>

<p>The message "No such file or directory" I suppose is the key in this problem, but I don't know why it happens.</p>


<p>Abraham</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 02, 2013 19:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877365"></a>
                                    <font class="smallfont"><p>It could be that the openremote controller is started with a user that does not have exec rights on your shell script.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 02, 2013 19:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877367"></a>
                                    <font class="smallfont"><p>I have reviewed the rights that the script has and it seems to be ok. Here you are a snapshot:</p>

<p>pi@openremote ~/.config/gnokii/mensajes $ ls -la<br/>
total 12<br/>
drwxr-xr-x 2 pi pi 4096 sep 29 00:34 .<br/>
drwxr-xr-x 3 pi pi 4096 sep 28 14:34 ..<br/>
-rwxr-xr-x 1 pi pi   84 oct  2 16:31 SMSalert.sh</p>

<p>thanks</p>

<p>Abraham</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 02, 2013 22:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877368"></a>
                                    <font class="smallfont"><p>Your log says:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"> Shell command: Rr returned: </pre>
</div></div>
<p>But your command is SMSalert.sh.<br/>
It looks like your Button/Rule is triggering the wrong command or you have specified the wrong command path in the protocol.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 02, 2013 22:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877408"></a>
                                    <font class="smallfont"><p>The command I have created is the next:</p>

<p><img src="attachments/22414129/23036158.png" align="left" border="0"/></p>

<p>I have added the entire path to the command.</p>

<p>And the scrip is : SMSalert.sh</p>

<p>#!/bin/sh</p>

<p>echo "Alert: lights on" | gnokii --sendsms 999999999</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 03, 2013 18:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877410"></a>
                                    <font class="smallfont"><p>1. Your command should be /bin/sh<br/>
2. Your command parameter should be /path/SMSalert.sh <br/>
3. Inside SMSalert.sh the path to gnokii should be specified.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Oct 03, 2013 19:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877413"></a>
                                    <font class="smallfont"><p>Something seems to be wrong at anywhere. I have deleted the command SMSalert and in the log appears the same error massage as before, pointing to the path given in the shell execution protocol attributes. I have checheck the time and are new entries to the log, not old ones. I can't understand why this happens if the command doesn't exist.<br/>
I have rebooted the raspberrypi and now the OR has installed other configuration that isn't the actual I have in the Designer. It's like the system store the configuration and didn't refresh after presing the command "Sync with online designer" </p>

<p>Is there a cache to clear? The command "Reload configuration and clear cache" I can't use because it returns me the error "failed to reload configuration and clear cache"</p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 03, 2013 20:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877422"></a>
                                    <font class="smallfont"><p>Is there a way to flush memmory after rule creation. After some modifications in the Designer, log continue showing the configuration as it was before the change. I have to reboot my raspberry to apply new changes.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 03, 2013 21:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877424"></a>
                                    <font class="smallfont"><p>Hi Michal,</p>

<p>When you write: "your command should be: /bin/sh" are you refering to the path?</p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 03, 2013 21:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877440"></a>
                                    <font class="smallfont"><p>Hi Michal,</p>

<p>With your suggestion and appliying the information I asked in my last post finally it works. Great!. I have spent more than two week with this issue. I have not solved yet how to say gnokii to send a message when the command is executed by OR, but now I have the certaninty that the scipts runs.</p>

<p>Thanks to everybody that help me with this problem.</p>

<p>Abraham</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 03, 2013 23:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877571"></a>
                                    <font class="smallfont"><p>Once solved the problem related with the Shell execution in rules I have the next issue related with rule scripting. Why the next rule works?</p>

<p>package org.openremote.controller.model.event</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;</p>

<p>import org.openremote.controller.protocol.*;</p>

<p>//-----------------------------------------------------------------------------------------------</p>

<p>rule "TurnLightOff"</p>

<p>timer (cron: 1 * * * * ?)</p>

<p>when</p>

<p>eval (true)</p>

<p>then</p>

<p>execute.command ("SMSalert") ;</p>

<p>end</p>


<p>and this one doesn't:</p>


<p>package org.openremote.controller.model.event</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;<br/>
import org.openremote.controller.protocol.*;</p>

<p>rule "Send Alert SMS"  when</p>

<p>  Event ( source ==  "Fibaro2-Luces_pasillo", value == "on" )</p>

<p>then</p>

<p>  execute.command ("SMSalert");</p>

<p>end</p>


<p>"Fibaro2-Luces_pasillo" is a sensor with two possible values on/off</p>


<p>Thanks again.</p>

<p>Abraham Mart√≠n</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 06, 2013 05:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877574"></a>
                                    <font class="smallfont"><p>Is that sensor of <b>type:switch</b> ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 06, 2013 08:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877658"></a>
                                    <font class="smallfont"><p>Yes, it is a type:switch sensor</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 07, 2013 08:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877659"></a>
                                    <font class="smallfont"><p>Sorry, that the only thing that came up to my mind, except for checking once more if there isn't a typing error in the sensor name.<br/>
PS: For better readability enclose your rules within {code}..{code} tags(<a href="http://www.openremote.org/display/website/Wiki+Markup+Quick+Start">see markup instructions</a>). Do not place a / inside the end tag. That makes the rules easier to read, which increases your chances to get an answer <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 07, 2013 08:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877661"></a>
                                    <font class="smallfont"><p>I just created a rule type:custom and worked fine. I don't know why but it worked!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 07, 2013 08:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877663"></a>
                                    <font class="smallfont"><p>There is something funny with this switch sensor. It is described as boolean, but has as values <b>on</b> and <b>off</b> instead of <b>false/true</b> what I would expect. Did you add any <em>custom state items</em> in the screen? If so which pairs did you enter?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 07, 2013 09:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877689"></a>
                                    <font class="smallfont"><p>No, I haven't added nothing special. I only created a new sensor type:custom and added the same command that sensor type:switch had.</p>

<p><img src="attachments/22414129/23036172.png" align="absmiddle" border="0"/></p>


<p>Abraham</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abrmartin at Oct 07, 2013 12:36
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>