<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Voice Recognition (google Sarah)</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Voice Recognition (google Sarah)
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 27, 2016 by <font color="#0050B2">pierre2302</font>.
				    </div>

				    <p>I use the voice recognition ( Google sarah) with my razberry and URL supplied in the module OpenRemoteHelpers of zwave.me. </p>

<p>it works very well.</p>

<p>If that interests you I can supply you the plugins which it is necessary to install in Google sarah</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23605406"></a>
                                    <font class="smallfont"><p>Hi</p>

<p>That's interesting.</p>

<p>Is this something specific to the RaspberryPi and Z-Wave?</p>

<p>I'm running OR_Pro on Windows 7 Netbooks, with a mixture of HTTP commands and Velbus modules.</p>


<p>Or is this more to do with each Android device accessing OR commands?</p>


<p>Many thanks,</p>

<p>Stuart</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mdar at Jan 27, 2016 20:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605407"></a>
                                    <font class="smallfont"><p>The plugins I've done is specific to the Razberry.</p>

<p>But from the moment you have http command, you can use him. You will just have simply to create your plugins it is rather easy.</p>

<p>Sarah works on windows 7, 8 and 10 because it uses voice recognition microsoft.</p>

<p>I use sarah v3.16 with Windows 7 + kinnect v1</p>

<p>Here is a demo video in French : <a href="https://www.youtube.com/watch?v=Gskd8U0Nwt0">https://www.youtube.com/watch?v=Gskd8U0Nwt0</a></p>


<p>sorry for my English.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Jan 27, 2016 21:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605421"></a>
                                    <font class="smallfont"><p>thanks for posting, I use a Rapberry Pi and have HomeBridge installed on it, Siri does great voice control for me.</p>

<p>I won't be using this as I don't want to leave a PC on</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by glennl at Jan 28, 2016 00:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605422"></a>
                                    <font class="smallfont"><p>Very nice application! Do you run Openremote on Pi as well, or is that on your Win7?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 28, 2016 08:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605424"></a>
                                    <font class="smallfont"><p>OpenRemote is installed on my raspberry pi. there are only Sarah that is installed on win 7.</p>

<p>For those who do not want PC there is a possibility of installing Sarah on a key Intel compute stick</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Jan 28, 2016 13:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605425"></a>
                                    <font class="smallfont"><p>here is a sample plugin that I use for my home automation.</p>

<p>file prop</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"> 
{
  <span class="code-quote">"modules"</span> : { 
    <span class="code-quote">"zway"</span>  : {
      <span class="code-quote">"description"</span>: <span class="code-quote">"Sarah controle mon raspberry"</span>,
      <span class="code-quote">"version"</span>    : <span class="code-quote">"1.0"</span>,
	  <span class="code-quote">"zway_http"</span>: <span class="code-quote">"http:<span class="code-comment">//192.168.1.100:8083/OpenRemote/"</span>
</span>    }
  }
}
</pre>
</div></div>


<p>file xml</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;grammar version=<span class="code-quote">"1.0"</span> xml:lang=<span class="code-quote">"fr-FR"</span> mode=<span class="code-quote">"voice"</span> root=<span class="code-quote">"rulezway"</span> xmlns=<span class="code-quote">"http:<span class="code-comment">//www.w3.org/2001/06/grammar"</span> tag-format=<span class="code-quote">"semantics/1.0"</span>&gt;
</span>  &lt;rule id=<span class="code-quote">"rulezway"</span> scope=<span class="code-quote">"<span class="code-keyword">public</span>"</span>&gt;
    &lt;example&gt;Sarah allume la chauffage&lt;/example&gt;
	&lt;example&gt;Sarah quelle est la température du salon&lt;/example&gt;
    &lt;tag&gt;out.action=<span class="code-keyword">new</span> <span class="code-object">Object</span>(); &lt;/tag&gt;
	&lt;tag&gt;out.action._attributes.threashold = <span class="code-quote">"0.10"</span>; &lt;/tag&gt;

	
    &lt;item&gt;Sarah&lt;/item&gt;
		
	
    &lt;one-of&gt;
          &lt;item&gt;Allume&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"allumé"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOn"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
          &lt;item&gt;Demarre&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"demarré"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOn"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Ouvre&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"ouvert"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOn"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Active&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"activé"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOn"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Eteint&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"eteint"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOff"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Arrete&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"arrété"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOff"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Ferme&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"fermé"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOff"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Désactive&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"désactivé"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOff"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Coupe&lt;tag&gt;out.action.ttsAction=<span class="code-quote">"coupé"</span>;out.action.module=<span class="code-quote">"SwitchBinaryOff"</span>;out.action._attributes.tts = <span class="code-quote">"je m'en occupe"</span>;&lt;/tag&gt;&lt;/item&gt;
          &lt;item&gt;quel est la Température&lt;tag&gt;out.action.module=<span class="code-quote">"TemperatureLevel"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est l'Humidité&lt;tag&gt;out.action.module=<span class="code-quote">"HumidityLevel"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est la Luminosité&lt;tag&gt;out.action.module=<span class="code-quote">"LuminosityLevel"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est Le status&lt;tag&gt;out.action.module=<span class="code-quote">"SwitchBinaryStatus"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est L'état&lt;tag&gt;out.action.module=<span class="code-quote">"SensorBinaryStatus"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est La consommation&lt;tag&gt;out.action.module=<span class="code-quote">"MeterLevel"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est L'intensité&lt;tag&gt;out.action.module=<span class="code-quote">"SwitchMultilevelStatus"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;quel est le niveau&lt;tag&gt;out.action.module=<span class="code-quote">"BatteryLevel"</span>;out.action._attributes.tts = <span class="code-quote">"j'analyse"</span>;&lt;/tag&gt;&lt;/item&gt;
	&lt;/one-of&gt;
	
	
	&lt;item repeat=<span class="code-quote">"0-1"</span> &gt;
    &lt;one-of&gt;
	  &lt;item&gt;De la baterie du multisensor du salon&lt;tag&gt;out.action.ttsName=<span class="code-quote">"Multisensor du salon"</span>;out.action.id=<span class="code-quote">"3"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;De la baterie du multisensor de la chambre&lt;tag&gt;out.action.ttsName=<span class="code-quote">"Multisensor dde la chambre"</span>;out.action.id=<span class="code-quote">"15"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;De la baterie du multisensor de la salle de bain&lt;tag&gt;out.action.ttsName=<span class="code-quote">"Multisensor de la salle de bain"</span>;out.action.id=<span class="code-quote">"4"</span>;&lt;/tag&gt;&lt;/item&gt;
          &lt;item&gt;La lumiere du salon&lt;tag&gt;out.action.ttsName=<span class="code-quote">"La lumiere du salon"</span>;out.action.id=<span class="code-quote">"2/0"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Le chauffage de la chambre&lt;tag&gt;out.action.ttsName=<span class="code-quote">"Le chauffage de la chambre"</span>;out.action.id=<span class="code-quote">"5/0"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;Du salon&lt;tag&gt;out.action.ttsName=<span class="code-quote">"Du salon"</span>;out.action.id=<span class="code-quote">"3/0"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;De la chambre&lt;tag&gt;out.action.ttsName=<span class="code-quote">"De la chambre"</span>;out.action.id=<span class="code-quote">"6/0"</span>;&lt;/tag&gt;&lt;/item&gt;
	  &lt;item&gt;De la salle de bain&lt;tag&gt;out.action.ttsName=<span class="code-quote">"De La salle de bain"</span>;out.action.id=<span class="code-quote">"4/0"</span>;&lt;/tag&gt;&lt;/item&gt;

    &lt;/one-of&gt;
    &lt;/item&gt;
	
	
    &lt;tag&gt;out.action._attributes.uri=<span class="code-quote">"http:<span class="code-comment">//127.0.0.1:8080/sarah/zway"</span>;&lt;/tag&gt;
</span>  &lt;/rule&gt;
&lt;/grammar&gt;
</pre>
</div></div>


<p>file JS</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
exports.action = function(data, callback, config, SARAH){
  <span class="code-comment">// Retrieve config
</span>    config = config.modules.zway;
    <span class="code-keyword">if</span> (!config.zway_http){
      console.log(<span class="code-quote">"No link http found <span class="code-keyword">for</span> ZWAY"</span>);
      callback({'tts' : 'La config est invalide'});
      <span class="code-keyword">return</span>;
    }
	console.log('api :'+config.zway_http);
	<span class="code-keyword">var</span> url = config.zway_http+data.module+'/'+data.id;
	<span class="code-keyword">var</span> request = require('request');                                     
	request({ 'uri' : url }, function (err, response, body){
  
    <span class="code-keyword">if</span> (err || response.statusCode != 200) {
      callback({'tts': <span class="code-quote">"L'action a échoué"</span>});
      <span class="code-keyword">return</span>;
    }
	
	<span class="code-keyword">switch</span> (data.module) {
	
	<span class="code-keyword">case</span> 'BatteryLevel' :
			callback({'tts' : <span class="code-quote">" la batterie du "</span> + data.ttsName + <span class="code-quote">" est a "</span> + body + <span class="code-quote">" pour cent "</span> });
		<span class="code-keyword">break</span>;
		
	<span class="code-keyword">case</span> 'SwitchMultilevelStatus' :
			callback({'tts' : data.ttsName + <span class="code-quote">" a une intensité de "</span> + body + <span class="code-quote">" pour cent "</span> });
		<span class="code-keyword">break</span>;
		
	<span class="code-keyword">case</span> 'MeterLevel' :
			callback({'tts' : data.ttsName + <span class="code-quote">" consomme "</span> + body + <span class="code-quote">" wate "</span>});
		<span class="code-keyword">break</span>;

	<span class="code-keyword">case</span> 'SwitchBinaryOn' :
			callback({'tts' : data.ttsName + <span class="code-quote">" est "</span> + data.ttsAction });
		<span class="code-keyword">break</span>;

	<span class="code-keyword">case</span> 'SwitchBinaryOff' :
			callback({'tts' : data.ttsName + <span class="code-quote">" est "</span> + data.ttsAction });
		<span class="code-keyword">break</span>;
		
		
        <span class="code-keyword">case</span> 'SwitchBinaryStatus' :
		
		<span class="code-keyword">if</span> (( body == '<span class="code-quote">"on"</span>' ) &amp;&amp; ( data.ttsName == <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est activé"</span>  });
		
		<span class="code-keyword">else</span> <span class="code-keyword">if</span> (( body == '<span class="code-quote">"off"</span>' ) &amp;&amp; ( data.ttsName == <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est désactivé"</span>  });
		
		<span class="code-keyword">else</span> <span class="code-keyword">if</span> (( body == '<span class="code-quote">"on"</span>' ) &amp;&amp; ( data.ttsName != <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est allumé"</span>  });
		
		<span class="code-keyword">else</span> (( body == '<span class="code-quote">"off"</span>' ) &amp;&amp; ( data.ttsName != <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est éteint"</span>  });

		<span class="code-keyword">break</span>;
		
		
        <span class="code-keyword">case</span> 'SensorBinaryStatus' :
		
		<span class="code-keyword">if</span> (( body == '<span class="code-quote">"on"</span>' ) &amp;&amp; ( data.ttsName == <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est activé"</span>  });
		
		<span class="code-keyword">else</span> <span class="code-keyword">if</span> (( body == '<span class="code-quote">"off"</span>' ) &amp;&amp; ( data.ttsName == <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est désactivé"</span>  });
		
		<span class="code-keyword">else</span> <span class="code-keyword">if</span> (( body == '<span class="code-quote">"on"</span>' ) &amp;&amp; ( data.ttsName != <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est allumé"</span>  });
		
		<span class="code-keyword">else</span> (( body == '<span class="code-quote">"off"</span>' ) &amp;&amp; ( data.ttsName != <span class="code-quote">"La centrale d'alarme"</span> ))
			callback({'tts' : data.ttsName + <span class="code-quote">" est éteint"</span>  });

		<span class="code-keyword">break</span>;
		
		
       <span class="code-keyword">case</span> 'TemperatureLevel' :
			callback({'tts' : <span class="code-quote">" La température "</span> + data.ttsName + <span class="code-quote">" est de "</span> + body + <span class="code-quote">" Degré "</span>});
		<span class="code-keyword">break</span>;
		
       <span class="code-keyword">case</span> 'LuminosityLevel' :
			callback({'tts' : <span class="code-quote">" La luminosité "</span> + data.ttsName + <span class="code-quote">" est de "</span> + body + <span class="code-quote">" Luxe "</span>});
		<span class="code-keyword">break</span>;
		
       <span class="code-keyword">case</span> 'HumidityLevel' :
			callback({'tts' : <span class="code-quote">" L'hygrométrie "</span> + data.ttsName + <span class="code-quote">" est de "</span> + body + <span class="code-quote">" pour cent "</span>});
		<span class="code-keyword">break</span>;
		
	}
	});
}
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Jan 28, 2016 13:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605634"></a>
                                    <font class="smallfont"><p>Sarah is functional in English! </p>

<p>There is also possibility of making Sarah speak with an URL, has a practice with rules openremote (for example according to a status)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Feb 11, 2016 19:41
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:32</font></td>
		    </tr>
	    </table>
    </body>
</html>