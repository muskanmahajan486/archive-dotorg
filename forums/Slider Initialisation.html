<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Slider Initialisation</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Slider Initialisation
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 03, 2014 by <font color="#0050B2">estegenburgs</font>.
				    </div>

				    <p>I have seen already a lot of strange situations here in OpenRemote, if we speak about Drool's rules. But today I encountered a very stupid problem, at least I think so <img class="emoticon" src="images/icons/emoticons/biggrin.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Now I'm using my Raspberry PI as a controller for heating of house, since our big heating pump's logic system failed. And the problem:<br/>
In OpenRemote there are two sliders, which define the minimum and maximum temperature in one of the rooms.</p>

<p>2 sliders are built like this (Command -&gt; Sensor -&gt; Slider):<br/>
Get_Istabas_T_min -&gt; Istabas_T_min_Status -&gt; Slider name 1<br/>
Get_Istabas_T_max -&gt; Istabas_T_max_Status -&gt; Slider name 1<br/>
And "Istabas_T" is the sensor for room's temperature (it uses 1-Wire protocol).</p>


<p>package org.openremote.controller.protocol</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;</p>

<p>rule "Initialisation"<br/>
when  eval ( true ) then<br/>
 execute.command("Get_Istabas_T_min", 18);<br/>
 execute.command("Get_Istabas_T_max", 19);<br/>
end</p>

<p>rule "Conergy-1"<br/>
when<br/>
  Event( source == "Istabas_T_min_Status", $min : value )<br/>
  Event( source == "Istabas_T", value &lt;= $min )<br/>
then<br/>
  execute.command( "Conergy_ON" );<br/>
end</p>

<p>rule "Conergy-2"<br/>
timer (cron: * * 7-5 * * ?) when<br/>
  Event( source == "Istabas_T_max_Status", $max : value )<br/>
  Event( source == "Istabas_T", value &gt;= $max &amp;&amp; value &lt; "100" )<br/>
then<br/>
  execute.command( "Conergy_OFF" );<br/>
end</p>


<p>Everything works fine, unless OpenRemote is synchronised or my device is restarted. What happens after synchronisation is the following. Both sliders get their initial values (18 &amp; 19) but rules "Conergy-1" and "Conergy-2" doesn't meet the conditions and doesn't start, although they should. At this moment if I manually change sliders' values, let's say to the same "18" or "19", rules "Conergy-1" and "Conergy-2" work. So, where is the problem about these sliders?</p>

<p>Also I wanted to know, how to avoid "N/A" readings? I found a way how to change "N/A" to anything if it's a custom sensor, even a valid value, but it isn't the best solution, and that's why in rule "Conergy-2" I have:<br/>
 &amp;&amp; value &lt; "100" .</p>

<p>Kind regards,<br/>
Edgars</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:39</font></td>
		    </tr>
	    </table>
    </body>
</html>