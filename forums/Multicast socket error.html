<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Multicast socket error</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Multicast socket error
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 29, 2010 by <font color="#0050B2">frbusu</font>.
				    </div>

				    <p>Hi everyone,</p>

<p>Can anyone help me with my problem? I have created a basic KNX model and installed everything well. I am connecting to a KNX-IP Gateway device through ethernet connection. I used an android os. Whenever I tried to open the model, after setting up the controller, I got a polling failed error. After viewing the controller log and digging up the problem, I found out that the problem lies in the setting of multicast addresses. I tried to set the tcpip properties to allow multicasting but unfortunately it is not available. I even tried setting directly the ip (eg 224. ....). This was not allowed. Is there any way of going around the problem and using unicast addresses instead or is there something that I am missing? Thanks</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-13697096"></a>
                                    <font class="smallfont"><p>Hi Franco,</p>

<p>out of curiosity, what is the multicast error you're seeing, can you post it here?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Nov 30, 2010 05:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697098"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Thanks for your reply. This is the latest controller log that I have:</p>

<p>Controller2010-11-29 12:21:30,952 INFO HTTP\-Thread\-65 org.openremote.controller.rest.RoundRobinRESTServlet.doPost(61) | Start RoundRobin group member REST service. at 2010-11-29 12:21:30<br/>
Controller2010-11-29 12:21:30,961 ERROR HTTP\-Thread\-65 org.openremote.controller.net.RoundRobinClient.sendRoundRobinUDPMultiCastRequest(136) | Created UDP request socket fail.<br/>
java.net.SocketException: Not a multicast address<br/>
	at java.net.MulticastSocket.joinGroup(Unknown Source)<br/>
	at org.openremote.controller.net.RoundRobinClient.sendRoundRobinUDPMultiCastRequest(RoundRobinClient.java:125)<br/>
	at org.openremote.controller.net.RoundRobinClient.discoverGroupMembers(RoundRobinClient.java:102)<br/>
	at org.openremote.controller.net.RoundRobinClient.getGroupMemberURLsSet(RoundRobinClient.java:91)<br/>
	at org.openremote.controller.service.impl.RoundRobinServiceImpl.discoverGroupMembersAppURL(RoundRobinServiceImpl.java:58)<br/>
	at org.openremote.controller.rest.RoundRobinRESTServlet.doPost(RoundRobinRESTServlet.java:70)<br/>
	at org.openremote.controller.rest.RoundRobinRESTServlet.doGet(RoundRobinRESTServlet.java:57)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)<br/>
	at java.lang.Thread.run(Unknown Source)<br/>
Controller2010-11-29 12:21:31,274 ERROR HTTP\-Thread\-71 org.openremote.controller.rest.StatusCommandRESTServlet.doPost(92) | CommandException occurs<br/>
org.openremote.controller.exception.NoSuchComponentException: No such component in status cache : 33<br/>
	at org.openremote.controller.statuscache.StatusCache.queryStatuses(StatusCache.java:96)<br/>
	at org.openremote.controller.service.impl.StatusCacheServiceImpl.queryStatuses(StatusCacheServiceImpl.java:20)<br/>
	at org.openremote.controller.service.impl.StatusCommandServiceImpl.readFromCache(StatusCommandServiceImpl.java:99)<br/>
	at org.openremote.controller.rest.StatusCommandRESTServlet.doPost(StatusCommandRESTServlet.java:89)<br/>
	at org.openremote.controller.rest.StatusCommandRESTServlet.doGet(StatusCommandRESTServlet.java:66)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)<br/>
	at java.lang.Thread.run(Unknown Source)<br/>
Controller2010-11-29 12:21:31,506 INFO HTTP\-Thread\-65 org.openremote.controller.rest.RoundRobinRESTServlet.doPost(73) | Finished RoundRobin group member REST service.  at 2010-11-29 12:21:31</p>


<p>I have given an ip to the device. My problem is giving a multicast address to the ethernet connection. Could the problem be from the OS as I am using vista? </p>

<p>At the beginning when I got the polling failed error after a similar message to above this was what I got from the log:</p>

<p>Controller2010-11-29 08:44:07,691 INFO HTTP\-Thread\-11 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'<br/>
Controller2010-11-29 08:44:07,694 INFO HTTP\-Thread\-11 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'</p>

<p>I had created a basic switch that switches on and off an actuator channel. I am using an Android v2.1. Is there any test software that I could use which is already working....or can you give me specs that need to be set properly in the controller config? Because I'm guessing that the problem is either from there or from the multicast issue. Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Nov 30, 2010 07:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697099"></a>
                                    <font class="smallfont"><p>The multicast error shown here is not related. It has to do with the failover, if multiple (cluster) of controllers are installed for fail-over. It shouldn't crap out like that (confusing) but it is what it is.</p>

<p>The KNX frames are more relevant, and it is sending (successfully, unless there were other errors?) ON command to KNX group address 0/0/1.</p>

<p>The polling error happens though because for some reason it cannot read the switch status &#8211; not shown in this log why. Do you use the same group address for your 'STATUS' command?</p>

<p>You can also share your designer account if you want, to my email juha at openremote org, and I can see if I spot obvious configuration errors.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Nov 30, 2010 07:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697100"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>I have sent you an invitation. About the KNX frames, I have opened up ETS 3.0 and no commands are actually being sent to the gateway....I have a test setup rigged up and the actuator channel is not changing.</p>

<p>As regards to the ethernet connection, I tried giving first a normal Unicast IP Address to the IP Gateway..then I tried a multicast address and it gave me no errors. As i said before from the vista side, it doesn't let me give the connection a multicast ip.</p>

<p>I had originally thought that the polling error came because of failure to connect with the multicast device but I'm not sure about that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Nov 30, 2010 07:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697103"></a>
                                    <font class="smallfont"><p>I fixed some errors in your designer configuration on KNX read commands ('STATUS')</p>

<p>A sensor needs to be associated with a read command, not a write command such as 'on' or 'off'. So I changed this for you (with the assumption that the switch status read command targets the same KNX address 0/0/1 in your setup).</p>

<p>Configuring sensors wrong is the most common reason to seeing the polling error in the console.</p>

<p>Resync your controller and see if you see a different behavior now (or at least different error messages).</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Nov 30, 2010 08:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697107"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Before, there was an error message that was coming up after polling failed (I cannot recall it ...but it used to happen each time I tried to send a write command). It stopped now. However the polling failed error still occurred. Also, I changed the actuator channel manually, and no change occurred in the status. I'll give you the ip addresses I'm using maybe it will help figure out the problem.</p>

<p>Ethernet Network IP : 192.168.2.12  (cannot change to a multicast address)<br/>
Gateway Device IP : 224.0.1.101   (I had tried this with 192.168.2.14 before)</p>

<p>Changing the gateway device ip is not a problem. Here below is part of the latest log. For some reason it is not finding the ip gateway device:</p>

<p>Controller2010-11-30 10:32:29,575 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:30,069 ERROR Thread\-10 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:30,074 INFO Thread\-10 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:30,075 ERROR Thread\-9 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:30,080 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:30,574 ERROR Thread\-10 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:30,580 ERROR Thread\-9 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:30,581 INFO Thread\-10 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:30,588 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:31,088 ERROR Thread\-10 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:31,088 ERROR Thread\-9 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:31,092 INFO Thread\-10 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:31,098 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:31,598 ERROR Thread\-9 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:31,821 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:31,598 ERROR Thread\-10 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:31,826 INFO Thread\-10 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:32,322 ERROR Thread\-9 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:33,011 INFO Thread\-9 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.<br/>
Controller2010-11-30 10:32:32,326 ERROR Thread\-10 org.openremote.controller.protocol.knx.KNXCommand.read(340) | Unable to send FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 : KNX IP Gateway was not found.<br/>
org.openremote.controller.protocol.knx.ConnectionException: KNX IP Gateway was not found.<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(KNXConnectionManager.java:821)<br/>
	at org.openremote.controller.protocol.knx.KNXConnectionManager.getConnection(KNXConnectionManager.java:469)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.read(KNXCommand.java:335)<br/>
	at org.openremote.controller.protocol.knx.GroupValueRead.read(GroupValueRead.java:132)<br/>
	at org.openremote.controller.component.Sensor.readStatus(Sensor.java:124)<br/>
	at org.openremote.controller.statuscache.PollingMachineThread.run(PollingMachineThread.java:61)<br/>
Controller2010-11-30 10:32:33,019 INFO Thread\-10 org.openremote.controller.statuscache.StatusCache.saveOrUpdateStatus(68) | Status is null or "" while calling saveOrUpdateStatus in statusCache.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Nov 30, 2010 09:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697109"></a>
                                    <font class="smallfont"><p>Ok, thanks.</p>

<p>Can you confirm you are using the latest Developer Release 11 controller from <a href="http://download.openremote.org">http://download.openremote.org</a> ?</p>

<p>It fixes a similar issue on Windows 7 &#8211; I haven't had a chance to test Windows Vista. Is it possible for you to try the Dev Release 11 on either Win XP or Windows 7?</p>


<p>I want to make sure it is not the same Windows networking issue we had before on Win7.</p>

<p>Also, is your KNX IP gateway in the same subnet with your controller (windows machine) or behind a switch or router? The latest dev release still requires the controller to be present with in the same subnet with the KNX IP gateway.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Nov 30, 2010 10:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697111"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Yes I have the latest Developer Release 11. I'll try to implement it on an XP Virtual Machine if you think Vista is an issue. </p>

<p>The KNX IP gateway is behind a router. I thought that might be a cause as well. The router multicast filter is off...so as such I think it would allow multicast messages.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Nov 30, 2010 10:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697112"></a>
                                    <font class="smallfont"><p>Ok,</p>

<p>So I think the issue can be either Vista (never had a chance to test it) or the router between the gateway and controller (multicast still not properly passing through).</p>

<p>If it's Vista, I need to find a VM/machine to test with, if its the router, I'll add the direct IP config (workaround is to move to same subnet for now).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Nov 30, 2010 11:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697113"></a>
                                    <font class="smallfont"><p>I'll try setting up an XP VM and see if anything is different. It could very possibly be the way vista handles multicast that is causing the problem as I came across this problem in other forums having different apps using multicast and vista.</p>

<p>I'll get back at you and post the controller log if there is an error. I'll also try to play around a little with the IP configs and see if any error change.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Nov 30, 2010 13:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-13697284"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Sorry for the long delay. I was sick last week. I tried it out with an XP VM....most of the errors vanished and I can see the ip gateway leds (Tx &amp; Rx) blinking whenever I send them a command. Unfortunately, the gateway is not sending anything on the KNX line. Later, I also tried connecting directly the ethernet port with the gateway (to avoid use of router) and used the emulator. Same Result. I made another account similar to the previous one and removed status....as it wasn't giving anything and put 2 buttons Command on and Command off. Here is the latest controller log:</p>

<p>Controller2010-12-07 09:41:33,920 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(353) | KNX Connection manager resolving local host IP addresses...<br/>
Controller2010-12-07 09:41:33,936 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.isCandidate(612) | Skipping loopback interface: name:lo (MS TCP Loopback interface) index: 1 addresses:<br/>
/127.0.0.1;</p>

<p>Controller2010-12-07 09:41:33,951 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(388) | Found candidate NIC: name:eth0 (AMD PCNET Family PCI Ethernet Adapter - Packet Scheduler Miniport) index: 2 addresses:<br/>
/192.168.2.100;</p>

<p>Controller2010-12-07 09:41:33,951 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(412) | Added candidate IP address to set - /192.168.2.100<br/>
Controller2010-12-07 09:41:34,186 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(353) | KNX Connection manager resolving local host IP addresses...<br/>
Controller2010-12-07 09:41:34,201 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.isCandidate(612) | Skipping loopback interface: name:lo (MS TCP Loopback interface) index: 1 addresses:<br/>
/127.0.0.1;</p>

<p>Controller2010-12-07 09:41:34,201 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(388) | Found candidate NIC: name:eth0 (AMD PCNET Family PCI Ethernet Adapter - Packet Scheduler Miniport) index: 2 addresses:<br/>
/192.168.2.100;</p>

<p>Controller2010-12-07 09:41:34,201 INFO main org.openremote.controller.protocol.knx.KNXConnectionManager.resolveLocalAddresses(412) | Added candidate IP address to set - /192.168.2.100<br/>
Controller2010-12-07 09:41:34,326 INFO main org.quartz.simpl.SimpleThreadPool.initialize(267) | Job execution threads will use class loader of thread: main<br/>
Controller2010-12-07 09:41:34,358 INFO main org.quartz.core.SchedulerSignalerImpl.&lt;init&gt;(60) | Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl<br/>
Controller2010-12-07 09:41:34,358 INFO main org.quartz.core.QuartzScheduler.&lt;init&gt;(220) | Quartz Scheduler v.1.7.3 created.<br/>
Controller2010-12-07 09:41:34,373 INFO main org.quartz.simpl.RAMJobStore.initialize(139) | RAMJobStore initialized.<br/>
Controller2010-12-07 09:41:34,373 INFO main org.quartz.impl.StdSchedulerFactory.instantiate(1240) | Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'<br/>
Controller2010-12-07 09:41:34,373 INFO main org.quartz.impl.StdSchedulerFactory.instantiate(1244) | Quartz scheduler version: 1.7.3<br/>
Controller2010-12-07 09:41:34,373 INFO main org.quartz.core.QuartzScheduler.setJobFactory(2075) | JobFactory set to: org.springframework.scheduling.quartz.AdaptableJobFactory@52c6b4<br/>
Controller2010-12-07 09:41:34,373 INFO main org.quartz.core.QuartzScheduler.start(472) | Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.<br/>
Controller2010-12-07 09:41:34,576 INFO Thread\-5 org.openremote.controller.net.IPAutoDiscoveryServer.run(60) | Created IP discover multicast server !<br/>
Controller2010-12-07 09:41:34,576 ERROR Thread\-5 org.openremote.controller.net.IPAutoDiscoveryServer.run(68) | Can't join group of 192.168.2.101:8443<br/>
java.net.SocketException: Not a multicast address<br/>
	at java.net.MulticastSocket.joinGroup(Unknown Source)<br/>
	at org.openremote.controller.net.IPAutoDiscoveryServer.run(IPAutoDiscoveryServer.java:65)<br/>
	at java.lang.Thread.run(Unknown Source)<br/>
Controller2010-12-07 09:41:34,576 INFO Thread\-5 org.openremote.controller.net.IPAutoDiscoveryServer.run(74) | Listening on  192.168.2.101:8443<br/>
Controller2010-12-07 09:41:34,623 INFO Thread\-6 org.openremote.controller.net.RoundRobinUDPServer.run(84) | UDP Server : Starting UDP server...<br/>
Controller2010-12-07 09:41:34,623 INFO Thread\-6 org.openremote.controller.net.RoundRobinUDPServer.run(88) | UDP Server : Started UDP server successfully.<br/>
Controller2010-12-07 09:41:34,639 INFO Thread\-7 org.openremote.controller.net.RoundRobinTCPServer.run(35) | TCP Server : starting for receiving groupmember urls...<br/>
Controller2010-12-07 09:41:34,654 INFO Thread\-7 org.openremote.controller.net.RoundRobinTCPServer.run(48) | TCP Server : started successfully for receiving groupmember urls...<br/>
Controller2010-12-07 09:41:34,654 INFO Thread\-7 org.openremote.controller.net.RoundRobinTCPServer.run(49) | TCP Server : Waiting for groupmember response...<br/>
Controller2010-12-07 09:42:48,373 INFO HTTP\-Thread\-1 org.openremote.controller.rest.RoundRobinRESTServlet.doPost(61) | Start RoundRobin group member REST service. at 2010-12-07 09:42:48<br/>
Controller2010-12-07 09:42:48,498 INFO Thread\-9 org.openremote.controller.net.RoundRobinUDPServer$UDPServerDealThread.run(132) | UDP Server : Received the controller multicast request from the same group floor20<br/>
Controller2010-12-07 09:42:48,514 INFO Thread\-7 org.openremote.controller.net.RoundRobinTCPServer.run(53) | TCP Server : a new groupmember socket established...<br/>
Controller2010-12-07 09:42:48,514 INFO Thread\-10 org.openremote.controller.net.RoundRobinTCPServer$AppendGroupMemberThread.run(80) | TCP Server deal thread : Ready for receiving groupmember url ...<br/>
Controller2010-12-07 09:42:48,529 INFO Thread\-10 org.openremote.controller.net.RoundRobinTCPServer$AppendGroupMemberThread.run(84) | TCP Server deal thread : received a groupmember url : <a href="http://192.168.2.100:8080/controller">http://192.168.2.100:8080/controller</a><br/>
Controller2010-12-07 09:42:48,998 INFO HTTP\-Thread\-1 org.openremote.controller.rest.RoundRobinRESTServlet.doPost(73) | Finished RoundRobin group member REST service.  at 2010-12-07 09:42:48</p>

<p>Controller2010-12-07 09:42:54,498 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'<br/>
Controller2010-12-07 09:42:54,498 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXConnectionManager.waitForDiscovery(785) | Discovered gateway: IPv4 UDP host 192.168.2.101 port 3671 through client IP /192.168.2.100<br/>
Controller2010-12-07 09:42:54,498 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXConnectionManager.buildConnection(709) | Creating connection from /192.168.2.100 to /192.168.2.101:3671<br/>
Controller2010-12-07 09:42:54,529 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXConnectionManager.buildConnection(718) | Connection 'KNXnet/IP tunnel 192.168.2.101' created (Using NAT = true).<br/>
Controller2010-12-07 09:42:54,529 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01<br/>
Controller2010-12-07 09:42:55,951 INFO HTTP\-Thread\-4 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 for group address '0/0/1'<br/>
Controller2010-12-07 09:42:55,951 INFO HTTP\-Thread\-4 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00<br/>
Controller2010-12-07 09:42:59,904 INFO HTTP\-Thread\-3 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'<br/>
Controller2010-12-07 09:42:59,904 INFO HTTP\-Thread\-3 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01<br/>
Controller2010-12-07 09:43:01,967 INFO HTTP\-Thread\-1 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 for group address '0/0/1'<br/>
Controller2010-12-07 09:43:01,983 INFO HTTP\-Thread\-1 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00<br/>
Controller2010-12-07 09:43:04,342 INFO HTTP\-Thread\-3 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'<br/>
Controller2010-12-07 09:43:04,342 INFO HTTP\-Thread\-3 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01<br/>
Controller2010-12-07 09:43:05,748 INFO HTTP\-Thread\-4 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 for group address '0/0/1'<br/>
Controller2010-12-07 09:43:05,748 INFO HTTP\-Thread\-4 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00<br/>
Controller2010-12-07 09:49:04,795 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00 for group address '0/0/1'<br/>
Controller2010-12-07 09:49:04,795 INFO HTTP\-Thread\-2 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x00<br/>
Controller2010-12-07 09:49:22,733 INFO HTTP\-Thread\-1 org.openremote.controller.protocol.knx.KNXCommandBuilder.build(349) | Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01 for group address '0/0/1'<br/>
Controller2010-12-07 09:49:22,748 INFO HTTP\-Thread\-1 org.openremote.controller.protocol.knx.KNXConnectionManager$CalimeroConnection.sendInternal(1133) | Sending : FRAME L_Data.req 0.0.0 -&gt; 0/0/1 Data: 0x01</p>


<p>IP Address of Device: 192.168.2.101</p>

<p>Controller Configs:<br/>
Advanced:<br/>
multicast.address = 192.168.2.101<br/>
multicast.port = 8443<br/>
controller.applicationname = controller</p>

<p>Roundrobin:<br/>
controller.roundrobin.tcpserver.port = 20000<br/>
controller.roundrobin.multicast.port = 10000<br/>
controller.groupname = floor20<br/>
controller.roundrobin.multicast.address = 224.0.1.200<br/>
controller.groupmember.autodetect.on = true</p>

<p>I'm almost 100% certain that there is something wrong in the configs. As I said before, I cant have a multicast address in the ethernet connection...but the ip gateway...i can give it any address. I had tried before with multicast.address = 224.0.1.201 (even the ipgateway was set that way and didn't work).</p>

<p> Any idea of what the problem may be?</p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frbusu at Dec 07, 2010 09:03
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:49</font></td>
		    </tr>
	    </table>
    </body>
</html>