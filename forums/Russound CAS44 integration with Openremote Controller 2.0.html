<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Russound CAS44 integration with Openremote Controller 2.0</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Russound CAS44 integration with Openremote Controller 2.0
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 03, 2013 by <font color="#0050B2">larathydo</font>.
				    </div>

				    <p>Hey all,</p>

<p>Quick question. I've followed the guide floating around to setup the integration of a Russound system on Openremote using the RNET protocol and appropriate setup in Designer. This seems to have gone smoothly, as well as the installation of OpenRemote Controller on my windows 7 box (first time user here).</p>

<p>I setup the buttons and whatnot using designer and see them when I open my Openremote app on my iPhone. Thing is, when I tap any buttons on my remote app nothing happens, as if the controller is not talking to the Russound receiver.</p>

<p>I checked the logs and nothing jumps out at me, so I think it's just a configuration issue for my Serial RS232 connection between my russound box and the receiver itself. Is anyone familiar with how to setup a traditional serial port setup without a gateway on my environment? It's going directly from my controller computer (male RS232) to the Russound unit (female RS232) and just want to make sure everything is working and setup correctly. Obviously, I'm not using a serial gateway, and yes I changed the config file to use com1 (I also tried com2) which should override the IP settings for gateway usage as I understand it.</p>

<p>Sorry I'm such a newb, and I don't have much experience with Serial technology but any help would be greatly appreciated.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21857045"></a>
                                    <font class="smallfont"><p>No entries in the logs sounds funny. If no communiations occurs there should be some execptions.<br/>
Maybe the "catalina.out" log file shows something?<br/>
Also, when you start tomcat from the command line you should see some console output. Do you see something regarding RX/TX?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 04, 2013 09:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857054"></a>
                                    <font class="smallfont"><p>Whoops! Looks like I may be mistaken. I restared openremote first and checked in the boot.log and noticed these series of errors (looks like it keeps mentioning "ERROR 2013-02-04 07:34:46,029 : Creating sensor failed. Error : Could not start Russound ip connection", so how should one properly setup the serial connection and define the serial port? I tried to change that config file to com1? - I'm pretty sure that's what com port it's connected to):</p>

<div style="max-width:600px;"><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ERROR 2013-02-04 07:34:46,029 : Creating sensor failed. Error : Could not start Russound ip connection 
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="43" name="Zone3 -power status sensor-" type="switch"&gt;
      &lt;include type="command" ref="41" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: Could not start Russound ip connection
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:78)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:93)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1188)
	at java.lang.Thread.run(Thread.java:722)
Caused by: gnu.io.NoSuchPortException
	at gnu.io.CommPortIdentifier.getPortIdentifier(CommPortIdentifier.java:269)
	at org.openremote.controller.protocol.russound.RussoundClient.&lt;init&gt;(RussoundClient.java:70)
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:76)
	... 11 more
INFO 2013-02-04 07:34:46,044 : Startup complete.
INFO 2013-02-04 07:34:48,044 : 

--------------------------------------------------------------------

  UNDEPLOYING CURRENT CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2013-02-04 07:34:48,044 : Stopping event processor: Drools Rule Engine
INFO 2013-02-04 07:34:48,044 : Stopped event processor : Drools Rule Engine
INFO 2013-02-04 07:34:48,044 : Shutdown complete.
INFO 2013-02-04 07:34:48,060 : 

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2013-02-04 07:34:48,107 : Created object model for Command( ID = 40, Type = russound, Properties : {name=Zone3 -off-, command=POWER_OFF, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:48,107 : Created object model for Command( ID = 41, Type = russound, Properties : {name=Zone3 -power status-, command=GET_POWER_STATUS, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:48,107 : Created object model for Command( ID = 42, Type = russound, Properties : {name=Zone3 -on-, command=POWER_ON, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:48,107 : Initializing event processor: Drools Rule Engine
INFO 2013-02-04 07:34:48,107 : No rule definitions found in 'C:\OpenRemote-Controller-2.0.1\webapps\controller\rules'.
INFO 2013-02-04 07:34:48,123 : Initialized event processor : Drools Rule Engine
ERROR 2013-02-04 07:34:48,169 : Creating sensor failed. Error : Could not start Russound ip connection 
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="43" name="Zone3 -power status sensor-" type="switch"&gt;
      &lt;include type="command" ref="41" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: Could not start Russound ip connection
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:78)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:93)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1188)
	at java.lang.Thread.run(Thread.java:722)
Caused by: gnu.io.NoSuchPortException
	at gnu.io.CommPortIdentifier.getPortIdentifier(CommPortIdentifier.java:269)
	at org.openremote.controller.protocol.russound.RussoundClient.&lt;init&gt;(RussoundClient.java:70)
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:76)
	... 11 more
INFO 2013-02-04 07:34:48,263 : Startup complete.
INFO 2013-02-04 07:34:50,279 : 

--------------------------------------------------------------------

  UNDEPLOYING CURRENT CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2013-02-04 07:34:50,279 : Stopping event processor: Drools Rule Engine
INFO 2013-02-04 07:34:50,279 : Stopped event processor : Drools Rule Engine
INFO 2013-02-04 07:34:50,294 : Shutdown complete.
INFO 2013-02-04 07:34:50,294 : 

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2013-02-04 07:34:50,341 : Created object model for Command( ID = 40, Type = russound, Properties : {name=Zone3 -off-, command=POWER_OFF, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:50,341 : Created object model for Command( ID = 41, Type = russound, Properties : {name=Zone3 -power status-, command=GET_POWER_STATUS, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:50,341 : Created object model for Command( ID = 42, Type = russound, Properties : {name=Zone3 -on-, command=POWER_ON, controller=1, zone=3}).
DEBUG 2013-02-04 07:34:50,341 : Initializing event processor: Drools Rule Engine
INFO 2013-02-04 07:34:50,341 : No rule definitions found in 'C:\OpenRemote-Controller-2.0.1\webapps\controller\rules'.
INFO 2013-02-04 07:34:50,357 : Initialized event processor : Drools Rule Engine
ERROR 2013-02-04 07:34:50,388 : Creating sensor failed. Error : Could not start Russound ip connection 
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="43" name="Zone3 -power status sensor-" type="switch"&gt;
      &lt;include type="command" ref="41" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: Could not start Russound ip connection
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:78)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:93)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1188)
	at java.lang.Thread.run(Thread.java:722)
Caused by: gnu.io.NoSuchPortException
	at gnu.io.CommPortIdentifier.getPortIdentifier(CommPortIdentifier.java:269)
	at org.openremote.controller.protocol.russound.RussoundClient.&lt;init&gt;(RussoundClient.java:70)
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:76)
	... 11 more
INFO 2013-02-04 07:34:50,498 : Startup complete.
DEBUG 2013-02-04 07:35:27,451 : Deployer 'Default Deployer' initialized.
DEBUG 2013-02-04 07:35:27,794 : Runtime object model has not been initialized. Using default configuration only.
DEBUG 2013-02-04 07:35:27,810 : Runtime object model has not been initialized. Using default configuration only.
DEBUG 2013-02-04 07:35:27,810 : Runtime object model has not been initialized. Using default configuration only.
DEBUG 2013-02-04 07:35:27,826 : Runtime object model has not been initialized. Using default configuration only.
INFO 2013-02-04 07:35:27,841 : 

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2013-02-04 07:35:28,373 : Created object model for Command( ID = 40, Type = russound, Properties : {name=Zone3 -off-, command=POWER_OFF, controller=1, zone=3}).
DEBUG 2013-02-04 07:35:28,373 : Created object model for Command( ID = 41, Type = russound, Properties : {name=Zone3 -power status-, command=GET_POWER_STATUS, controller=1, zone=3}).
DEBUG 2013-02-04 07:35:28,373 : Created object model for Command( ID = 42, Type = russound, Properties : {name=Zone3 -on-, command=POWER_ON, controller=1, zone=3}).
DEBUG 2013-02-04 07:35:28,388 : Initializing event processor: Drools Rule Engine
INFO 2013-02-04 07:35:28,388 : No rule definitions found in 'C:\OpenRemote-Controller-2.0.1\webapps\controller\rules'.
INFO 2013-02-04 07:35:28,404 : Initialized event processor : Drools Rule Engine
ERROR 2013-02-04 07:35:28,607 : Creating sensor failed. Error : Could not start Russound ip connection 
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="43" name="Zone3 -power status sensor-" type="switch"&gt;
      &lt;include type="command" ref="41" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.NoSuchCommandException: Could not start Russound ip connection
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:78)
	at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:93)
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
	at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
	at org.openremote.controller.service.Deployer.startController(Deployer.java:271)
	at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
	at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:364)
	at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
	at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: gnu.io.NoSuchPortException
	at gnu.io.CommPortIdentifier.getPortIdentifier(CommPortIdentifier.java:269)
	at org.openremote.controller.protocol.russound.RussoundClient.&lt;init&gt;(RussoundClient.java:70)
	at org.openremote.controller.protocol.russound.RussoundCommandBuilder.build(RussoundCommandBuilder.java:76)
	... 38 more
INFO 2013-02-04 07:35:28,810 : Startup complete.
INFO 2013-02-04 07:35:28,810 : Controller Definition File Watcher for Default Deployer started.
</pre>
</div></div></div>

<p>I couldn't seem tp find the catalina.out file you mentioned, however. Note that the above errors were just for the very scant commands I was working with in Designer while following the walkthrough. If I use the pre-created commands and update the config to sync with online, I see these errors times a million haha.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by larathydo at Feb 04, 2013 11:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857056"></a>
                                    <font class="smallfont"><p>"Caused by: gnu.io.NoSuchPortException" sounds like your com port definition is not correct.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 04, 2013 12:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857057"></a>
                                    <font class="smallfont"><p>Duly noted. I went into "C:\OpenRemote-Controller-2.0.1\webapps\controller\WEB-INF\classes\config.properties" and modified the line:</p>

<p>russound.serialDevice=com1</p>

<p>to</p>

<p>russound.serialDevice=COM1</p>

<p>And it seemed to stop those messages from occurring on startup, perhaps that's the correct syntax. That being said, after doing so I fired up the controller without issue:</p>

<p>&#8212;<br/>
C:\OpenRemote-Controller-2.0.1\bin&gt;openremote run<br/>
Using CATALINA_BASE:   C:\OpenRemote-Controller-2.0.1<br/>
Using CATALINA_HOME:   C:\OpenRemote-Controller-2.0.1<br/>
Using CATALINA_TMPDIR: C:\OpenRemote-Controller-2.0.1\temp<br/>
Using JRE_HOME:        C:\Program Files\Java\jdk1.7.0_13<br/>
Feb 04, 2013 9:06:48 AM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performanc<br/>
e in production environments was not found on the java.library.path: C:\OpenRemo<br/>
te-Controller-2.0.1\webapps\controller\WEB-INF\lib\native<br/>
Feb 04, 2013 9:06:48 AM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8080<br/>
Feb 04, 2013 9:06:48 AM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 1218 ms<br/>
Feb 04, 2013 9:06:48 AM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Feb 04, 2013 9:06:48 AM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Feb 04, 2013 9:06:48 AM org.apache.catalina.startup.HostConfig deployWAR<br/>
INFO: Deploying web application archive webconsole.war<br/>
Feb 04, 2013 9:06:51 AM org.openremote.controller.bootstrap.Startup redirectJULt<br/>
oLog4j<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
INFO 2013-02-04 09:06:54,299 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2013-02-04 09:06:54,893 : No rule definitions found in 'C:\OpenRemote-Contr<br/>
oller-2.0.1\webapps\controller\rules'.<br/>
INFO 2013-02-04 09:06:54,893 : Initialized event processor : Drools Rule Engine<br/>
WARNING:  RXTX Version mismatch<br/>
        Jar version = RXTX-2.2pre1<br/>
        native lib Version = RXTX-2.1-7<br/>
INFO 2013-02-04 09:06:55,144 : Registered sensor : Switch Sensor (Name = 'Zone3<br/>
<del>power status sensor</del>', ID = '43')<br/>
INFO 2013-02-04 09:06:55,566 : Startup complete.<br/>
INFO 2013-02-04 09:06:55,566 : Controller Definition File Watcher for Default De<br/>
ployer started.<br/>
Feb 04, 2013 9:06:56 AM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
Feb 04, 2013 9:06:56 AM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 7739 ms<br/>
&#8212;</p>

<p>But when I launch my iPhone app and connect to the controller and try to use my testing "zone 3 power on/off" switch i made through designer, there is no activity. Nothing happens on the keypad, nothing visibly happens on the controller/logs. I tried shutting down openremote, changing the port to COM2 to no avail as well incase it was that port. Do port speed settings matter? This is what each COM port is set to at the moment on my machine:</p>

<p>Bits per second: 9600<br/>
Data bits: 8<br/>
Parity: None<br/>
Stop Bits: 1<br/>
Flow control: None</p>

<p>(In the advanced section, "Use FIFO buffers (requires 16550 compatible UART) is enabed, with each slider put to High).</p>

<p>Do I need to do anything on the Russound receiver first as well? There is a toggle switch beside the serial port on the unit that says "Update" and "Run". It's currently set to "Run". When switched over to "Update", a red LED turns on (I cycled the power after trying that, switching it back to "run").</p>

<p>Is there a way to test connectivity over the port externally to OpenRemote just to make sure communication is possible and get some kind of test running?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by larathydo at Feb 04, 2013 13:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857064"></a>
                                    <font class="smallfont"><p>3.1 COM Settings<br/>
The following settings must be made to the RS-232 serial COM port used to interface with the<br/>
Controllers:<br/>
• 19200 baud rate<br/>
• 1 Start bit<br/>
• 1 Stop bit<br/>
• No flow control<br/>
• No parity</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 04, 2013 15:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857070"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>Thanks for all your help.</p>

<p>I've changed both settings on COM1 and COM2 to use the above connection settings (with the only exception being there's no seeming option to set a "Start bit" option). I tried FIFO both ways - turned on and off, no dice.</p>

<p>I still don't see anything in the command prompt window as the application is running when I try to click a button from my iPhone. Any other ideas?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by larathydo at Feb 04, 2013 19:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857073"></a>
                                    <font class="smallfont"><p>Sorry, I am out of options for now.<br/>
Maybe you can use some kind of test tool first? Russound has something which I could probably send you.<br/>
Drop me an email: marcus (at) openremote (dot) org</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 04, 2013 20:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857074"></a>
                                    <font class="smallfont"><p>Email sent. Thanks again for the help!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by larathydo at Feb 04, 2013 21:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857231"></a>
                                    <font class="smallfont"><p>Marcus,</p>

<p>Thank you so much for providing me with that testing tool / documentation. I figured out my problem! I bought a RS232 null modem cable. I needed to have a straight through cable. I just bought a null modem adapter for the cable to (effectively) turn it into a straight through cable and it works! I can turn off one of the zones for testing! I'll keep tinkering, but thanks for getting me on my feet!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by larathydo at Feb 07, 2013 00:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858546"></a>
                                    <font class="smallfont"><p>Hallo Markus. </p>

<p>What is currently a good tag/branch to work from if I want to get up to date with the current Russound protocol implementation? </p>

<p>I tried tags/project/Controller/Controller_2_0_0, but do not get it to work. The Controller does not rechognize that it have any commands - ControlCommandServiceImpl line 80 control.getExecutableCommands() returns an empty list. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by toesterdahl at Mar 12, 2013 21:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858550"></a>
                                    <font class="smallfont"><p>My 2.1-Integration branch is pretty recent.<br/>
You can try that: workspace/mredeker/Controller_2_1_0_Integration</p>

<p>Checkout and calling "ant" should produce a complete controller distribution in the output folder.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 12, 2013 22:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859416"></a>
                                    <font class="smallfont"><p>Hallo. </p>

<p>I migrated to the new version which indeed looks like a more solid base than the old one. I had some issue in the process which I take a note of here. I also see some need for improving the processing of responses from the Controller. Please let me know if you are interested in work there. </p>

<p>1. The rxtx native libs packaged with Openremote does not work for 64-bit architectures. </p>

<p>As a first shot i modified the openremote.sh shell script to set java.library.path to use shared libs installed with the Ubuntu librxtx-java package (2.2pre2-10).  <br/>
 -Djava.library.path=/usr/lib/jni</p>

<p>This initially solved the problem but still had occasional hickups and rarely ran for very long. As a second shot I checked out rxtx code from rxtx.org. I took the 'normal' branch, same as for 32-bit and compiled on the controller host using ./configure +  make + make install. This installed rxtxSerial into my JRE and seem to work for now. </p>

<p>2. The devices generated in the designer Russound Device Generator does not include the SELECT_SOURCE1.. commands defined in RussCmdEnum. They may be added manually but I suggest they should be added to the generator.  </p>

<p>3. I am also missing a 'Mute Zone' command, but this also needs an implementation on the Controller side.  </p>

<p>4. Since I needed to do some problem solving I am missing TRACE logging for the Russound implementation. The logging on DEBUG or INFO level is also not comprehensive. A first time user would expect to be able to get basic information about an error (i.e. IO Problems, missing config) without attaching a debugger. I suggest that a project that Openremote absolutely must have sensible logging of all functionalities. I propse the following as a guideline: <br/>
   TRACE: Entry and exit of all method calls.<br/>
   DEBUG: All relevant events and sufficient information to track the execution assuming that the source is available. <br/>
   INFO: All input / output of the system, business relevant results.</p>

<p>Once I got this far the system was quite useful and I could do all the things I could do with the old implementation. I then created a slider to control the volume which is really nice. As I attempted creating a switch for the power I got into some more issues. My conclusion at this point is that the reading of responses from the controller needs some 'maturing'. I sort of look for the following:</p>

<p>5.1 In the receiver thread there is an assumption that either a part of a message or one message have been received. If more than one message was received it fails. I believe it need to look for the end-of-message byte and possibly the checksum and dispatch valid messages for processing.      </p>

<p>5.2 According to the Russound spec it is important to send an accnowledge after getting the response to a 'Request Message'. The same applies once the 'Set Data' message (on the Russound controller). Failing to do so will result in a 2.5 second lock-up since the Controller is re-sending. There are some work-arounds but I suggest that the accnowledge should be implemented. </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by toesterdahl at Mar 31, 2013 22:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859509"></a>
                                    <font class="smallfont"><p>Thanks for the feedback.<br/>
Feel free to create some patches.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 01, 2013 21:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859520"></a>
                                    <font class="smallfont"><blockquote><p> Please let me know if you are interested in work there. </p></blockquote>

<p>Yes, definitely. Thanks for the offer Torbjörn.</p>

<blockquote>
<p>1. The rxtx native libs packaged with Openremote does not work for 64-bit architectures.</p>

<p>As a first shot i modified the openremote.sh shell script to set java.library.path to use shared libs installed with the Ubuntu librxtx-java package (2.2pre2-10). <br/>
-Djava.library.path=/usr/lib/jni</p>

<p>This initially solved the problem but still had occasional hickups and rarely ran for very long. As a second shot I checked out rxtx code from rxtx.org. I took the 'normal' branch, same as for 32-bit and compiled on the controller host using ./configure + make + make install. This installed rxtxSerial into my JRE and seem to work for now.</p></blockquote>

<p>Thanks for reporting this.</p>

<p>We do need to find a consistent way of handling the RXTX native lib on different architectures. Not only is there a 32 vs 64 bit concern but also ARM vs x86 binaries are needed separately.</p>

<p>This came up in the discussion with installing Z-wave on ARM-based Synology. <a href="http://www.openremote.org/display/~joefm1218">Joe Miller</a> proposed a solution for picking the right binaries based on the identifiers available through 'uname' in this response: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Synology+with+Z-Wave?focusedCommentId=21858665#comment-21858665">How To - Synology with Z-wave</a></p>

<p>I'd be interested in trying to automate the selection of correct library path based on what Joe proposed. At least for some well-known configurations (ARM, x86_64 vs x86_32). Was thinking of including the common compiled binaries all under the OR distribution under separate path directories and setting the library paths accordingly in <a href="http://svn.code.sf.net/p/openremote/code/workspace/juha/Controller_2_1_0_FeatureMergeBranch/runtime/apache-tomcat-6.0.18/bin/openremote.sh">openremote.sh</a> via the uname identifiers.</p>

<p>Won't get to this soon but if you'd like to take a stab at this, would appreciate it.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 02, 2013 11:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859521"></a>
                                    <font class="smallfont"><blockquote>
<p>4. Since I needed to do some problem solving I am missing TRACE logging for the Russound implementation. The logging on DEBUG or INFO level is also not comprehensive. A first time user would expect to be able to get basic information about an error (i.e. IO Problems, missing config) without attaching a debugger.</p></blockquote>

<p>Agreed.</p>

<blockquote>
<p> I suggest that a project that Openremote absolutely must have sensible logging of all functionalities. I propse the following as a guideline: <br/>
TRACE: Entry and exit of all method calls.</p></blockquote>

<p>I do not think trace is required for this purpose. If method entry/exit is required then tools exist to add this without modifying the source code. And therefore I would not pollute the source with redundant trace statements for this purpose (plus handling the correct exit traces with exceptions is hard to do anyway). So this is better handled outside of the method implementations themselves, and in most cases if you do need this level of output, a debugger is a better tool (or decorate the code automatically in a way that automates tracing in case of exceptions, etc.).</p>

<p>Instead TRACE should be used in cases where DEBUG would yield too verbose an output, inside a tight loop for instance. These cases are fairly few, and in most cases TRACE should not be used at all.</p>

<blockquote>
<p>DEBUG: All relevant events and sufficient information to track the execution assuming that the source is available.</p></blockquote>

<p>Correct, or to troubleshoot issues/bugs. The one thing to watch out for with DEBUG is not to overwhelm the log to make the output mostly useless, see the point on TRACE and tight loops above. So debug should log the internal flow of the implementation but it's use should be avoided inside loops, etc. so we don't end up with logs with hundreds or thousands of DEBUG statements that provide little additional value.</p>

<blockquote>
<p>INFO: All input / output of the system, business relevant results.</p></blockquote>

<p>Basically at INFO level information that is relevant for the user (not a developer) to see in the logs. A command sent, a command received. Protocol level (payloads, etc) are in most cases better handled as DEBUG statements (relevant to developers, who know where/how setup and view debug logging).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 02, 2013 11:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859522"></a>
                                    <font class="smallfont"><blockquote>
<p>5.1 In the receiver thread there is an assumption that either a part of a message or one message have been received. If more than one message was received it fails. I believe it need to look for the end-of-message byte and possibly the checksum and dispatch valid messages for processing.</p>

<p>5.2 According to the Russound spec it is important to send an accnowledge after getting the response to a 'Request Message'. The same applies once the 'Set Data' message (on the Russound controller). Failing to do so will result in a 2.5 second lock-up since the Controller is re-sending. There are some work-arounds but I suggest that the accnowledge should be implemented.</p></blockquote>

<p>For these two points we will need your patches, since you have access to the spec and can test the implementation against the hardware.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 02, 2013 11:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859523"></a>
                                    <font class="smallfont">
<blockquote>
<p>2. The devices generated in the designer Russound Device Generator does not include the SELECT_SOURCE1.. commands defined in RussCmdEnum. They may be added manually but I suggest they should be added to the generator.</p></blockquote>

<p>Tracking this in <a href="http://jira.openremote.org/browse/MODELER-473">MODELER-473</a>.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 02, 2013 11:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859524"></a>
                                    <font class="smallfont"><blockquote>
<p> I am also missing a 'Mute Zone' command, but this also needs an implementation on the Controller side.</p></blockquote>

<p>Tracking in <a href="http://jira.openremote.org/browse/ORCJAVA-323">ORCJAVA-323</a>. Feel free to assign to yourself.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 02, 2013 11:25
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:45</font></td>
		    </tr>
	    </table>
    </body>
</html>