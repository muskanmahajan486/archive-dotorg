<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Need Help to establish Connection between OpenRemote.Boss_1_0_2 and IRTrans LAN-DB Module</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Need Help to establish Connection between OpenRemote.Boss_1_0_2 and IRTrans LAN-DB Module
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 19, 2010 by <font color="#0050B2">fschneid</font>.
				    </div>

				    <p>Hello,</p>

<p>i have up and runnung an OpenRemote.Boss_1_0_2 Server (running on Windows) who works very well with my KNX Network over an ABB IP-Router. Now I want to enhance my installation to additionaly send IR Commands to my HomeCinema. I bought an IRTrans LAN-DB Module and load it with all my Remote Controller Commands&nbsp;. With http Links to the IRTrans LAN-DB Module, I can successful send all IR-Commands to my equipment (e.g. <a href="http://192.168.1.11/send.htm?remote=panasonic-dmp-bd35,command=Power%20on">http://192.168.1.11/send.htm?remote=panasonic-dmp-bd35,command=Power%20on</a>. If I try to send TCP/IP Commands from the OpenRemote Boss Server to the IRTrans Module nothing happens and an Java Exception occure:</p>

<p>[Controller]2010-04-19 18:11:31,429 ERROR [HTTP-Thread-5] org.openremote.controller.protocol.socket.TCPSocketEvent.exec(143) &#124; Socket event could not execute<br/>
java.net.ConnectException: Connection refused: connect<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.PlainSocketImpl.socketConnect(Native Method)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.PlainSocketImpl.doConnect(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.PlainSocketImpl.connectToAddress(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.PlainSocketImpl.connect(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.SocksSocketImpl.connect(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.Socket.connect(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.Socket.connect(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.Socket.&lt;init&gt;(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.net.Socket.&lt;init&gt;(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.openremote.controller.protocol.socket.TCPSocketEvent.exec(TCPSocketEvent.java:131)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.openremote.controller.service.impl.ButtonCommandServiceImpl.trigger(ButtonCommandServiceImpl.java:67)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.openremote.controller.rest.ButtonCommandRESTServlet.doPost(ButtonCommandRESTServlet.java:84)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.lang.Thread.run(Unknown Source)<br clear="all" /></p>

<p>In the Composer I have filled in the following data:<br clear="all" /> <img src="attachments/9601451/9764881.png" align="absmiddle" border="0"/><br/>
Is it necessary to install an additional Software on the Server? Is it right to use "TCP/IP" for the Communication to the IRTRANS-LAN-DB Module? Is it possible to test an TCP Socket connection to the IRTrans Module with an tool like putty or telnet?</p>

<p>In the IRTRANS Documentation I read, that the Socket Connection have to be opend with an ASCI Command. How can I do this over OpenRemote?</p>

<p>I hope this are not to much questions. But I can't find any Info about this in the Forum or at the IRTrans Website.<br clear="all" /></p>

<p>regards,</p>

<p>Frank</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9601451/9764881.png">OpenRemote_1.png</a> (image/x-png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-9601455"></a>
                                    <font class="smallfont"><p>Hallo Frank,</p>

<p>as I understand it, you have answered your question yourself: you have to open the connection with "ASCI" first, and this sort of protocol is not (as far as I understand it; it was some time since I looked into the Boss) supported. Btw, it is "Asnd", not "Asend".&nbsp; The alternative of using the udp interface in the Irtrans is also not (as far as I recall) supported by the Boss. So, unless you are willing to hack the code, staying with the web-api (which you already know) it may be the only way, at least with the present Boss.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by barf at Apr 21, 2010 20:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-9601459"></a>
                                    <font class="smallfont"><p>The socket event should be fine. Mine looks like this:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"> &lt;socketEvent id=<span class="code-quote">"21"</span> name=<span class="code-quote">"receiver on"</span> ip=<span class="code-quote">"192.168.100.80"</span> port=<span class="code-quote">"21000"</span> command=<span class="code-quote">"ASCI|Asnd yamaha-receiver,power"</span>/&gt;
</pre>
</div></div>So you are missing the "ASCI&#124;" at the beginning of your command.The exception you have in your post means that the connection was not established. It looks like the windows box running the openremote controller cannot connect to the IP of your irtrans on port 21000. You can try to telnet to the irtrans on port 21000 to see if a connection is possible.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 22, 2010 08:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-9601476"></a>
                                    <font class="smallfont"><p>Many thanks to Marcus and Bengt for your help. With your Example of the controller.xml entry I have established the connection. <img class="emoticon" src="images/icons/emoticons/biggrin.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>It is really a nice feeling to controll all Audio and Video Equipment together with the KNX Equipment with one iphone App.</p>

<p>regards,</p>

<p>Frank</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by fschneid at Apr 30, 2010 23:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-9601477"></a>
                                    <font class="smallfont"><p>Hi Frank, great to hear that you were successful.<br/>
&#45;-Marcus</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 01, 2010 08:52
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:50</font></td>
		    </tr>
	    </table>
    </body>
</html>