<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Synology+OR+shell command</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Synology+OR+shell command
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 15, 2012 by <font color="#0050B2">aktur</font>.
				    </div>

				    <p>Hello to everyone,</p>

<p>2 days ago I was attending the OpenRemote event in Eindhoven and I'm now trying to finally use my Synology NAS with OpenRemote installed on it. I've got some demo stuff running like using DateTime protocol and Samsung TV protocol. So today I've started to develop my first useful application (at least for me). I would like to have console which shows which devices attached to my home LAN are On and Off. Useful to know if the printer on 2nd floor is turned on. Anyway, I thought that I can use shell ping command for it. My command is:<br/>
<a class="confluence-thumbnail-link 396x358" href='http://www.openremote.org/download/attachments/21037421/ping_shell.png'><img src="attachments/thumbnails/21037421/21135381" align="absmiddle" border="0"/></a><br/>
As I understand that in order to display the status on a panel I must create a sensor. Therefore, I've made a sensor.<br/>
<a class="confluence-thumbnail-link 363x441" href='http://www.openremote.org/download/attachments/21037421/ping_sensor.png'><img src="attachments/thumbnails/21037421/21135382" align="absmiddle" border="0"/></a><br/>
However, it does not work. When I upload the configuration to my controller then I get the following error:</p>

<p>INFO 2012-11-15 13:43:28,751 : No rule definitions found in '/volume1/@appstore/OpenRemote/webapps/controller/rules'.<br/>
INFO 2012-11-15 13:43:28,751 : Initialized event processor : Drools Rule Engine<br/>
DEBUG 2012-11-15 13:43:28,755 : Created object model for sensor 'Time Sensor' (ID = '82').<br/>
DEBUG 2012-11-15 13:43:28,757 : Created object model for sensor 'Sunset Sensor' (ID = '83').<br/>
DEBUG 2012-11-15 13:43:28,760 : Created object model for sensor 'Sunrise Sensor' (ID = '84').<br/>
ERROR 2012-11-15 13:43:28,762 : Creating sensor failed. Error : The included command reference in a sensor (ID = 85) is not an event producer (Command id : 85, Type : 65) <br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="85" name="Samsung_TV_On" type="custom"&gt;<br/>
      &lt;include type="command" ref="65" /&gt;<br/>
    &lt;/sensor&gt;<br/>
org.openremote.controller.exception.XMLParsingException: The included command reference in a sensor (ID = 85) is not an event producer (Command id : 85, Type : 65)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:428)<br/>
	at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:760)<br/>
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)<br/>
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1188)<br/>
	at java.lang.Thread.run(Thread.java:662)<br/>
INFO 2012-11-15 13:43:28,763 : Registered sensor : Sensor (Name = 'Sunrise Sensor', ID = '84', State Mappings: {})<br/>
INFO 2012-11-15 13:43:28,763 : Registered sensor : Sensor (Name = 'Sunset Sensor', ID = '83', State Mappings: {})<br/>
INFO 2012-11-15 13:43:28,764 : Registered sensor : Sensor (Name = 'Time Sensor', ID = '82', State Mappings: {})<br/>
INFO 2012-11-15 13:43:28,766 : <br/>
Startup complete.</p>




<p>So it is not working. I am doing something wrong but have no idea what. Any help would be appreciated.</p>

<p>Kind regards,<br/>
Michal</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21037421/21135381.png">ping_shell.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21037421/21135382.png">ping_sensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21037421/21135384.png">controller.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21037421/21659658.png">ShellCommand.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21037448"></a>
                                    <font class="smallfont"><p>If you only have one sensor you don't need to fill "SensorNames" in the command.<br/>
Also, I am not sure what's the latest status on the shell commands. I remember I was working on that and added some stuff for multiple sensors. <br/>
I will have to double check that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 16, 2012 08:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037450"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>well it does not matter if I put anything in "SensorNames". It rises error on creating sensor anyway. Maybe the Synology package does not have the proper version. It says that it is running version 2.0.0-005. Is this the latest one?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Nov 16, 2012 10:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037454"></a>
                                    <font class="smallfont"><p>It seems to be an older version. Try and download 2.1 developersnapshot from sourceforge and put the webapps/controller folder onto the NAS.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 16, 2012 10:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037461"></a>
                                    <font class="smallfont"><p>Well, it seems more bumpy than I thought. I've put the 2.1 controller folder on NAS but I am unable to sync it with designer. In the log file I see:</p>

<p>Could not find a controller definition to load at path '../webapps/controller/controller.xml' (for version 2.0)<br/>
INFO 2012-11-16 13:27:18,173 : Controller Definition File Watcher for Default Deployer started.<br/>
ERROR 2012-11-16 13:27:20,905 : !!! Unable to announce controller MAC address to Beehive<br/>
java.lang.NullPointerException<br/>
	at java.io.StringReader.&lt;init&gt;(StringReader.java:33)<br/>
	at flexjson.JSONTokener.&lt;init&gt;(JSONTokener.java:70)<br/>
	at flexjson.JSONDeserializer.deserialize(JSONDeserializer.java:158)<br/>
	at org.openremote.controller.service.Deployer$ControllerAnnouncement.run(Unknown Source)<br/>
ERROR 2012-11-16 13:27:22,922 : Synchronizing controller with online account failed : Authentication failed, please check your username and password.<br/>
org.openremote.controller.exception.ConnectionException: Authentication failed, please check your username and password.<br/>
	at org.openremote.controller.service.Deployer$BeehiveConnection.downloadZip(Unknown Source)<br/>
	at org.openremote.controller.service.Deployer$BeehiveConnection.access$200(Unknown Source)<br/>
	at org.openremote.controller.service.Deployer.deployFromOnline(Unknown Source)</p>

<p>And my controller page looks like:</p>

<p><a class="confluence-thumbnail-link 495x510" href='http://www.openremote.org/download/attachments/21037421/controller.png'><img src="attachments/thumbnails/21037421/21135384" align="absmiddle" border="0"/></a></p>

<p>Please note that there is no MAC address so I am unable to link this controller with my account. Seems that I will need to wait for an official update of the Synology package. <br/>
Is there anybody in charge of it? Maybe if people are busy I can help as I'm spending my time on it right now anyway? I'm really keen to make a concept proof design ASAP, any links and help would be appreciate. The first thing would be to connect my synology controller with the designer pro account as I'm even unable to do this. The default one reads only from demo composer.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Nov 16, 2012 12:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037462"></a>
                                    <font class="smallfont"><p>This is the 2.1 snapshot from sourceforge, right?<br/>
Once Eric creates the pro account you can download a controller from there which should include the needed settings.<br/>
Did you give Eric your email at the training in Eindhoven?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 16, 2012 13:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037465"></a>
                                    <font class="smallfont"><p>Yes, 2.1 snapshot. And yes, Eric already created account for me, and yes, I gave him my e-mail at the training. Anyway, I try now the version on the controller from the pro designer account...<br/>
Well, the behavior is exactly the same. I think that the blocking error is:</p>


<p>ERROR 2012-11-16 14:39:16,899 : !!! Unable to announce controller MAC address to Beehive<br/>
java.lang.NullPointerException<br/>
	at java.io.StringReader.&lt;init&gt;(StringReader.java:33)<br/>
	at flexjson.JSONTokener.&lt;init&gt;(JSONTokener.java:70)<br/>
	at flexjson.JSONDeserializer.deserialize(JSONDeserializer.java:158)<br/>
	at org.openremote.controller.service.Deployer$ControllerAnnouncement.run(Unknown Source)</p>

<p>So I am unable to link this controller with designer. One more detail is that in the Synology package center the version on OpenRemote install is still reported as 2.0.0-005, so it does not pick the new controller version when simply copying it into webapps. I don't know how important this is though.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Nov 16, 2012 13:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037487"></a>
                                    <font class="smallfont"><p>To have a first try you can disable some of the new features.<br/>
In webapps/controller/wEB-INF/classes/config.properties change the following to read like this:</p>

<p>controller.performBeehiveSyncing=false</p>

<p>And to install design from Pro account change the other line needed is:</p>

<p>beehive.REST.Root.Url = <a href="http://designer.openremote.com/beehive/rest/">http://designer.openremote.com/beehive/rest/</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 16, 2012 20:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037488"></a>
                                    <font class="smallfont"><p>Thank you for pointing me on this file. The lines you've mentioned were OK, however I've noticed few lines which referred to port 8080. As the Synology's install uses port 18581 I've changed blindly all 8080 in this file to 18581 and tadaaa, sensor was created <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
I've moved forward, but have another problem. I was hoping from my config that it will return only 0 or 1 because of the parsing regexp. However in the text line I see only echo of the ping command:</p>

<p>PING 192.169.0.101 (192.168.0.101): 56 data bytes</p>

<p>Not what I was expecting <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>. The result I'm hoping to achieve is to get a sort of display which will show me simply on and off state. I've hoped to extract number of packets received in the regexp. I've changed it to<br/>
(\d+)\spackets\sreceived<br/>
but still I get in the label the same first line of ping. How can I get just the number of packets received?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Nov 16, 2012 22:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037514"></a>
                                    <font class="smallfont"><p>Trying to get it run saturday morning I came to conclusion that there must be something serious wrong.<br/>
First I've tried to pipe the ping output through perl in a shell script. No success.<br/>
Then I thought I'll call just call perl through shell command interface, and then very strange thing begun. Some parts of perl's output are displayed and some not. Moreover, I've noticed that some other text labels on display (DateTime sensors) get corrupted... spooky.</p>

<p>Here is the perl script I've tried to run:</p>

<p>DiskStation&gt; cat ping.pl <br/>
#!/usr/bin/perl<br/>
$ping = `/bin/ping -c 1 -W 1 $ARGV0`;<br/>
$ping =~ /(\d+)\spackets received/m;<br/>
print "$1\n";<br/>
print "hello\n";<br/>
DiskStation&gt;                                  </p>

<p>Running it on NAS gives following output:</p>

<p>DiskStation&gt; ./ping.pl 192.168.10.101<br/>
1<br/>
hello<br/>
DiskStation&gt; </p>

<p>Which means that device 192.168.10.101 is On. When device is off then the result is:</p>

<p>DiskStation&gt; ./ping.pl 192.168.10.99<br/>
0<br/>
hello<br/>
DiskStation&gt; </p>

<p>On the web interface I see only the "hello" string, which means that perl is called but the whole regexp result get lost. This is also strange as it depends on regexp, some of them pass through, but not this one. Moreover, on Android device this controller crashes the openremote app, it runs on iOS the same as on web interface. Perhaps you can run this simple perl script through the controller and see why it does not output correctly?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Nov 17, 2012 14:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037738"></a>
                                    <font class="smallfont"><p>Maybe you can try with a "clean" design? <br/>
Did you only try on your Synology or also on another machine?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 24, 2012 09:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21039365"></a>
                                    <font class="smallfont"><p>Hello,</p>

<p>Did you find the solution to ping some equipment with readable results ?<br/>
I'm also interested.</p>

<p>Thanks,<br/>
Regards<br/>
&#8211;<br/>
Veance</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by veance at Jan 05, 2013 14:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528741"></a>
                                    <font class="smallfont"><p>Marcus,</p>

<p>I had to set BeehiveSyncing=false for another reason.</p>

<p>I'm getting a:<br/>
2013-01-08 22:20:17,735 ERROR BeehiveCommandChecker: !!! Unable to check for new controller command from Beehive<br/>
java.lang.NullPointerException<br/>
        at java.io.StringReader.&lt;init&gt;(StringReader.java:33)<br/>
        at flexjson.JSONTokener.&lt;init&gt;(JSONTokener.java:70)<br/>
        at flexjson.JSONDeserializer.deserialize(JSONDeserializer.java:158)<br/>
        at org.openremote.controller.service.BeehiveCommandCheckService$BeehiveCommandChecker.run(Unknown Source)</p>


<p>I assume a rest call is being made to check if new commands are available at the check interval beehiveCommandService.check.interval=5000 (ie. every 5 seconds). </p>


<p>I'm using 2.1.0 Pro version on Synology 212+ and setting all rest URL's to <a href="http://designer.openremote.com/">http://designer.openremote.com/</a>... in the config.properities file.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by joefm1218 at Jan 09, 2013 03:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528749"></a>
                                    <font class="smallfont"><p>My logs were also flooded with this message. This is a known error registered in JIRA on 2012-12-29. It has priority 3. Will take a while before it is fixed I guess. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 09, 2013 09:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528761"></a>
                                    <font class="smallfont"><p>Following the instructions on page <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Execute+Shell+commands">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Execute+Shell+commands</a> I tried to run a shell script on my Synology DS212+.<br/>
<a class="confluence-thumbnail-link 493x279" href='http://www.openremote.org/download/attachments/21037421/ShellCommand.png'><img src="attachments/thumbnails/21037421/21659658" align="left" border="0"/></a><br/>
The full Path parameter is:<br/>
/volume1/@appstore/OpenRemote/webapps/private/GetPVlogger.sh<br/>
Nothing happens. Logged in as <del>admin</del><ins>root</ins> via telnet, it nicely downloads the status.xml file from my solar monitor if I start the script manually.<br/>
What can be wrong? <br/>
<ins>Later I got ping working at this level by temporarily issuing chmod +s /bin/busybox. This is not very secure. A safer alternative is to install the <b>inetutils</b> of IPKG on the Synobox. As shell command it is still not working unfortunately</ins></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 09, 2013 12:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528762"></a>
                                    <font class="smallfont"><p>Do you see any errors in the log files?<br/>
What user is the controller running at on Synology? Also admin othweise maybe a rights issue?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 09, 2013 12:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528763"></a>
                                    <font class="smallfont"><p>Vincent, as I'm testing now the professional designer with eBox, I've tried this ping on it. It partially works, i.e. the command is executed but I'm unable to filter output results. Currently I'm getting the full ping response instead of 1 or 0 what I want. I'll dig in it more.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Jan 09, 2013 12:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528765"></a>
                                    <font class="smallfont"><blockquote><p>Do you see any errors in the log files?</p></blockquote>
<p>Logfiles are useless atm, because they are flooded with beehive error messages. (See: <a href="http://www.openremote.org/pages/viewpage.action?pageId=21037421&amp;focusedCommentId=21528749#comment-21528749">http://www.openremote.org/pages/viewpage.action?pageId=21037421&amp;focusedCommentId=21528749#comment-21528749</a>)</p>
<blockquote><p>What user is the controller running at on Synology</p></blockquote>
<p>I do not know, and I do not know how to find that. I did notice that Patters created a new user <b>openremote</b> at installation. I did place the script file under the webapps/private subdirectory assuming that it would get the proper rights.</p>
<blockquote><p>Also admin othweise maybe a rights issue</p></blockquote>
<p>I do get the impression that it is a rights issue on the synobox. In my original post I stated by mistake that I was logged in as admin instead of root. If logged in with telnet as admin, the script does not run. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 09, 2013 13:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528774"></a>
                                    <font class="smallfont"><p>Login as root and performa a "chmod 777 /volume1/@appstore/OpenRemote/webapps/private/GetPVlogger.sh".</p>

<p>Other solution: <br/>
One user needed to pull some data from the Vera box and I created a rule for him which runs every minute and downloads a file and places in the controllers web folder. Maybe that would be something for you also?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 09, 2013 13:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528776"></a>
                                    <font class="smallfont"><p>Marcus,<br/>
I got one step further, but now the system complains that I must be root for executing the ping command in the script which checks if the site is alive. Did a bit of reading about it to find out that its very hard to make that work. I give up.</p>

<p>Thanks for the help anyhow</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 09, 2013 14:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528778"></a>
                                    <font class="smallfont"><p>What should the script do?<br/>
Maybe the solution I did for Erwan (Vera status download) can also work for you?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 09, 2013 14:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528789"></a>
                                    <font class="smallfont"><blockquote><p>What should the script do?</p></blockquote>
<p>I was just wrapping up some loose ends of my solar production monitoring. I had that working on PC, and wanted to port to the *nix based Synobox. At regular intervals I must copy a xml file from my PVlogger. As I thought Linux was simple and elegant, I made a simple script of the form:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">ping &lt;url&gt;
<span class="code-keyword">if</span> [ $? -eq 0 ]; then
 wget -N &lt;url&gt;/status.xml 
<span class="code-keyword">else</span>
 :
fi</pre>
</div></div>
<p>Apparantly the silly ping command is to dangerous for normal users <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>
<blockquote><p>Maybe the solution I did for Erwan</p></blockquote>
<p>You mean the PHP example? I saw that a couple of days ago. I may have a look into that route some later time. For now I am putting this project on a low burner   </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 09, 2013 16:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528797"></a>
                                    <font class="smallfont"><p>He used PHP to retrieve a file from Vera and save the result in a local copy.<br/>
This is so that the OpenRemote sensor don't call the Vera every 500ms or so but instead read a file which is local on the controller.<br/>
Here is a rule I created for him which is doing this and puts the file into the controller web folder which makes it accessible via <a href="http://controllerIP:8688/controller/vera.xml">http://controllerIP:8688/controller/vera.xml</a></p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">package</span> org.openremote.controller.model.event

<span class="code-keyword">import</span> org.apache.commons.io.FileUtils;
<span class="code-keyword">import</span> java.net.URL;
<span class="code-keyword">import</span> java.io.File;

rule <span class="code-quote">"Poll Vera every minute"</span>
    timer (cron: 0 * * * * ?)
when
    eval(<span class="code-keyword">true</span>)
then
    pollVera();
end

function void pollVera() {
    FileUtils.copyURLToFile(<span class="code-keyword">new</span> URL(<span class="code-quote">"http:<span class="code-comment">//www.google.de"</span>), <span class="code-keyword">new</span> File(<span class="code-quote">"../webapps/controller/vera.xml"</span>));
</span>}
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 09, 2013 19:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528827"></a>
                                    <font class="smallfont"><p>I adapted this one for my settings, i.e. I changed the url's. Initially it worked fine, but after a 3 minute shutdown of the PVlogger, the updating did not resume. I had to restart the controller to resume updating. As the PVlogger is powered by the solar panels it shuts down if the light levels become to low. So that is why I included the ping test in my *nix script.  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 10, 2013 10:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528828"></a>
                                    <font class="smallfont"><p>Ok, I assume the rule engine shuts down if an uncaught execption occurs.<br/>
You could wrap this inside a try, catch and ignore any errors that might occur. Not nice, but you can try.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
function void pollVera() {
    <span class="code-keyword">try</span> {
      FileUtils.copyURLToFile(<span class="code-keyword">new</span> URL(<span class="code-quote">"http:<span class="code-comment">//www.google.de"</span>), <span class="code-keyword">new</span> File(<span class="code-quote">"../webapps/controller/vera.xml"</span>));
</span>    } <span class="code-keyword">catch</span> (Throwable t) {
       <span class="code-comment">//Here the error should be handled. Lets just print it to the console
</span>       t.printStackTrace();
    }
}
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 10, 2013 10:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21528830"></a>
                                    <font class="smallfont"><p>It now has stopped updating the status.xml alltogether. I have sent you the log files by mail.<br/>
edit: In the mail exchange Marcus concluded he could not find any irregularities.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 10, 2013 11:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21529302"></a>
                                    <font class="smallfont"><p>Marcus,<br/>
I got the shell command with ping etc. working now. </p>
<ul class="alternate" type="square">
	<li>What I did wrong was that I only made the command, but not a sensor that uses the command. Because the command only had to copy the xml file I thought the sensor was not necessary.</li>
	<li>Apparantly the sensor is needed to let the command fire every so many sends.</li>
	<li>As a side effect the sensor helped me a bit with debugging. The sensor did show the console output if connected it to a text label in the UI. That reassured me that the shell script actually ran.<br/>
Pieter</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 16, 2013 08:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21529538"></a>
                                    <font class="smallfont"><p>I do get this repetitive <em>Too many open files</em> error at every run of my script file (Script see <a href="http://www.openremote.org/pages/viewpage.action?pageId=21037421&amp;focusedCommentId=21528789#comment-21528789">http://www.openremote.org/pages/viewpage.action?pageId=21037421&amp;focusedCommentId=21528789#comment-21528789</a>). Can't find the cause for this. Even though the log file says it can't run the script, I do see that the xml-file is copied every minute as specified in the OS command call. Unfortunately the error message does not get a time stamp, so it is hard to check if that error really occurs every minute.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">ERROR [Polling thread <span class="code-keyword">for</span> sensor: Get PVlogger Data 100459]: Could not execute shell command: /volume1/@appstore/OpenRemote/webapps/<span class="code-keyword">private</span>/pvlogger.sh
java.io.IOException: Cannot run program <span class="code-quote">"/volume1/@appstore/OpenRemote/webapps/<span class="code-keyword">private</span>/pvlogger.sh"</span>: java.io.IOException: error=24, Too many open files
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
	at java.lang.<span class="code-object">Runtime</span>.exec(<span class="code-object">Runtime</span>.java:593)
	at java.lang.<span class="code-object">Runtime</span>.exec(<span class="code-object">Runtime</span>.java:466)
	at org.openremote.controller.protocol.shellexe.ShellExeCommand.executeCommand(Unknown Source)
	at org.openremote.controller.protocol.shellexe.ShellExeCommand.run(Unknown Source)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)
Caused by: java.io.IOException: java.io.IOException: error=24, Too many open files
	at java.lang.UNIXProcess.&lt;init&gt;(UNIXProcess.java:148)
	at java.lang.ProcessImpl.start(ProcessImpl.java:65)
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
	... 5 more</pre>
</div></div>

<p>Any idea of what causes this?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 21, 2013 10:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21529627"></a>
                                    <font class="smallfont"><p>Might be that the used streams to read the data of the subprocess have to be closed.<br/>
I created a JIRA issue for it, so we won't forget. Can't say when I will look into it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jan 21, 2013 21:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21529665"></a>
                                    <font class="smallfont"><p>Fine, thanks. As this only is part of a not essential little demo project, it is not a real urgency for me. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 22, 2013 08:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857131"></a>
                                    <font class="smallfont"><p>I am working on a different solution for getting these data directly from the Solar data logger. The data logger holds an XML file that holds the most recent parameter values. With an http call I do get those as numerical values in a range sensor as described here: <a href="http://www.openremote.org/display/forums/How+to+make+a+Range+Sensor+from+an+HTTP+Command">http://www.openremote.org/display/forums/How+to+make+a+Range+Sensor+from+an+HTTP+Command</a> <br/>
The problem is that the data logger shuts down at sunset, and starts again at sunrise. During that time the screen displays N/A. I would rather have the system display the number 0 instead. </p>

<p>Following the example from the openremote.zip file from Marcus (<a href="http://openremote.org/pages/viewpage.action?pageId=19435074&amp;focusedCommentId=19440358#comment-19440358">http://openremote.org/pages/viewpage.action?pageId=19435074&amp;focusedCommentId=19440358#comment-19440358</a>), I created the following rule that is supposed to replace N/A with 0.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">package</span> org.openremote.controller.protocol

global org.openremote.controller.statuscache.CommandFacade execute;
<span class="code-keyword">import</span> org.openremote.controller.model.event.*


rule <span class="code-quote">"Reset SolarPower value to 0 at night"</span>
when
  $evt : Event (source == <span class="code-quote">"SolarPowerLevel"</span>, value == <span class="code-quote">"N/A"</span>)
then
 execute.command(<span class="code-quote">"SolarPower"</span>, 0);
end</pre>
</div></div>

<p>Apparantly I am still to naive w.r.t. rules, as nothing is happening. In this example I have a <b>range sensor</b> "SolarPowerLevel", which uses <b>http command</b> SolarPower.</p>

<p>Below the first part of the logfile</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">2013-02-05 12:54:30,045 ERROR [Polling thread <span class="code-keyword">for</span> sensor: SolarPowerLevel]: IOException when executing HTTP method
org.apache.http.conn.HttpHostConnectException: Connection to http:<span class="code-comment">//192.168.1.36 refused
</span>	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:127)
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147)
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:731)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:709)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:700)
	at org.openremote.controller.protocol.http.HttpGetCommand.requestURL(Unknown Source)
	at org.openremote.controller.protocol.http.HttpGetCommand.run(Unknown Source)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)
Caused by: java.net.ConnectException: Connection timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
	at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
	at java.net.Socket.connect(Socket.java:529)
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:123)
	... 10 more
2013-02-05 12:54:30,079 ERROR [Polling thread <span class="code-keyword">for</span> sensor: SolarPowerLevel]: Could not perform xpath evaluation
org.xml.sax.SAXParseException: Premature end of file.
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:124)
	at org.openremote.controller.protocol.http.HttpGetCommand.run(Unknown Source)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)
2013-02-05 12:54:51,198 ERROR [Polling thread <span class="code-keyword">for</span> sensor: SolarPowerLevel]: IOException when executing HTTP method
org.apache.http.conn.HttpHostConnectException: Connection to http:<span class="code-comment">//192.168.1.36 refused
</span>	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:127)
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147)
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:731)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:709)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:700)
	at org.openremote.controller.protocol.http.HttpGetCommand.requestURL(Unknown Source)
	at org.openremote.controller.protocol.http.HttpGetCommand.send(Unknown Source)
	at org.openremote.controller.model.Command.execute(Unknown Source)
	at org.openremote.controller.statuscache.CommandFacade.command(Unknown Source)
	at org.openremote.controller.statuscache.CommandFacade.command(Unknown Source)
	at org.openremote.controller.protocol.Rule_Reset_SolarPower_value_to_0_at_night_0.defaultConsequence(Rule_Reset_SolarPower_value_to_0_at_night_0.java:7)
	at org.openremote.controller.protocol.Rule_Reset_SolarPower_value_to_0_at_night_0DefaultConsequenceInvoker.evaluate(Rule_Reset_SolarPower_value_to_0_at_night_0DefaultConsequenceInvoker.java:25)
	at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:917)
	at org.drools.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:856)
	at org.drools.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1071)
	at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:785)
	at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:751)
	at org.drools.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:218)
	at org.openremote.controller.statuscache.rules.RuleEngine.push(Unknown Source)
	at org.openremote.controller.statuscache.EventProcessorChain.push(Unknown Source)
	at org.openremote.controller.statuscache.StatusCache.update(Unknown Source)
	at org.openremote.controller.model.sensor.Sensor.update(Unknown Source)
	at org.openremote.controller.protocol.http.HttpGetCommand.run(Unknown Source)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)
Caused by: java.net.ConnectException: Connection timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
	at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
	at java.net.Socket.connect(Socket.java:529)
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:123)
	... 26 more
2013-02-05 12:55:04,218 ERROR [Polling thread <span class="code-keyword">for</span> sensor: SolarPowerLevel]: IOException when executing HTTP method
java.net.NoRouteToHostException: No route to host
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
	at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
	at java.net.Socket.connect(Socket.java:529)
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:123)
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147)
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:731)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:709)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:700)
	at org.openremote.controller.protocol.http.HttpGetCommand.requestURL(Unknown Source)
	at org.openremote.controller.protocol.http.HttpGetCommand.run(Unknown Source)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:662)</pre>
</div></div>

<p>It would be nice if this could be handled from within the http-call. That would also reduce the number of error messages in the log.</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 05, 2013 14:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857132"></a>
                                    <font class="smallfont"><p>Hello,</p>

<p>Sure that "N/A" is a readable value ?<br/>
try with <br/>
value &lt; 1 | value &gt; yourmaxvalue </p>

<p>+1 for the http-call handling timeout error</p>


<p>Regards,</p>

<p>&#8211;<br/>
Veance</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by veance at Feb 05, 2013 14:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857135"></a>
                                    <font class="smallfont"><blockquote><p>Sure that "N/A" is a readable value ?</p></blockquote>
<p>Well Marcus' code suggests it is:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">rule <span class="code-quote">"Set Virtual Play/Pause to Pause when player is not available"</span>
when
  $evt : Event (source == <span class="code-quote">"XBMCActivePlayerId"</span>, value == <span class="code-quote">"N/A"</span>)
then
 execute.command(<span class="code-quote">"XBMC_Virtual_Player_status"</span>, <span class="code-quote">"off"</span>);
end</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 05, 2013 14:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857136"></a>
                                    <font class="smallfont"><p>Yes sorry I saw Marcus rules after replying</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by veance at Feb 05, 2013 15:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857151"></a>
                                    <font class="smallfont"><p>No need to apologize, I do appreciate that you did take the time to look into it.<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 05, 2013 15:41
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:45</font></td>
		    </tr>
	    </table>
    </body>
</html>