<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Openremote Controller on low-power device?</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Openremote Controller on low-power device?
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 25, 2012 by <font color="#0050B2">salesguy</font>.
				    </div>

				    <p>Hi.  I currently run my openremote controller on ubuntu, and really want to be able to run it on something very light weight like a router or raspberry pi type device.</p>

<p>Is it possible to run openremote on an optware enabled dd-wrt router?  I haven't seen any java releases for it so I doubt it.</p>

<p>Is there talk about porting the controller to other app server platforms?</p>

<p>Cheers</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19988868"></a>
                                    <font class="smallfont"><p>The controller is a regular webapp which should run on any JEE app server.<br/>
We already tested the controller on Raspberry Pi and that works quite well.<br/>
Some NAS systems were reported to work and we also recommend the PC engines ALIX board.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 25, 2012 22:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988869"></a>
                                    <font class="smallfont"><p>Ok - great.  I've been banging my head against the wall all afternoon trying to get tomcat to run on my router, of course I keep getting out of memory errors.  I setup jamvm and tomcat, but never got it to start.</p>

<p>What app server would you recommend for a MIPS platform running optware?  I have seen a few lightweight options like jetty and winstone but haven't tried them.  </p>

<p>Any assistance in this area would be greatly appreciated!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by salesguy at May 25, 2012 23:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988870"></a>
                                    <font class="smallfont"><p>I am not sure if jamvm and tomcat work together. If you can report a success, that would be great <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Unfortunately I cannot be of any help in the area of optware. I never used it or tried to run Java on it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 25, 2012 23:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988871"></a>
                                    <font class="smallfont"><p>Well, i'm trying really hard, but nothing yet.</p>

<p>If you were starting out fresh on a openwrt type platform - stripped down linux, what would you use for a jvm?  Which app server would you use as an alternative to tomcat?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by salesguy at May 25, 2012 23:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988872"></a>
                                    <font class="smallfont"><p>Sorry, I cannot give any hint on java or app servers on openwrt.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 25, 2012 23:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988875"></a>
                                    <font class="smallfont"><p>Ok, for anyone interested, I finally got tomcat to start without fatal errors, but it immediately crashed when a page request was made.  So I give up on this little project.</p>

<p>Marcus - if you can provide some details on how you setup the controller on the raspberry I'd appreciate it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by salesguy at May 26, 2012 23:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988884"></a>
                                    <font class="smallfont"><p>Too bad <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> Here in Germany a lot of people have the AVM Fritzbox and it would be nice to have OpenRemote running on that one. <br/>
You can only get the jamvm for that box but I guess tomcat is out of the picture.</p>

<p>Setting up the controller on Raspberry Pi is easy. The default OpenJDK that comes with the debian "squeeze" image is bad in performance though. The IcedTea cacao VM is much better. But that one has a threading problem with debian "squeeze". So I took the debian "squeeze" image from the Raspberry website and changed the "/etc/apt/sources.list" to point to the "wheezy" distro.</p>

<p>I then installed OpenJDK JRE and IcedTeac-Cacao-CM from wheezy.</p>

<p>Tomcat runs fine with that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 28, 2012 09:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19989104"></a>
                                    <font class="smallfont"><p>Hi</p>

<p>Is it possible to controller directly support GPIO ports on Raspberry Pi?</p>

<p>BR<br/>
Damir</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Jun 06, 2012 13:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19989107"></a>
                                    <font class="smallfont"><p>Using the "/sys/class/gpio/" driver you can access the GPIO subsystem using regular Java file I/O.<br/>
Here (<a href="http://hobbyelektronik.org/w/index.php/Raspberry_Pi_IO">http://hobbyelektronik.org/w/index.php/Raspberry_Pi_IO</a>) you can find some information on how to turn on/off some Led's attached to the Pi using PHP.<br/>
You can use Google translate to turn this into english <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jun 06, 2012 15:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19989133"></a>
                                    <font class="smallfont"><p>lol, does sound like is written on some strange language.</p>

<p>Is there a chance that will be supported directly in online designer?</p>

<p>tnx</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Jun 07, 2012 23:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19989139"></a>
                                    <font class="smallfont"><p>Well it's written in german <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> You can translate with Google if you are interested.<br/>
Supporting the GPIO of the Pi is nothing that is planned in the moment.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jun 08, 2012 09:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19989156"></a>
                                    <font class="smallfont"><p>Than google translate work very well, to me when translating from some language to Croatian usually result is junk.</p>

<p>My plan is to run ORB on Pi, so it would bi a good thing to have few I/O pins directly on device. If I manage to get this working and when you finish support for z-wave all I need is there.</p>

<p>tnx for answers.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Jun 09, 2012 09:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450111"></a>
                                    <font class="smallfont"><p>I have installed the controller on my new Raspberry pi and it works 100% faster then on my Synology. It was very slow on my Synology, but with the new Oracle "ejre-7u6-fcs-b24-linux-arm-vfp-client_headless-10_aug_2012.tar.gz", it works really good!</p>

<p>I have used <a href="http://www.savagehomeautomation.com/projects/raspberry-pi-installing-oracle-java-runtime-environment-jre.html">this</a> tutorial for installing Java.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dlowet at Aug 27, 2012 19:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450656"></a>
                                    <font class="smallfont"><p>Hi All</p>

<p>I too have OR Controller running on my Pi. (Almost) successfully.<br/>
It installs fine and works alongside either IcedTea (Cacoa JVM) or Oracle JVM. Either seems ok.</p>

<p>I followed the instructions <a href="http://www.openremote.org/pages/viewpage.action?pageId=20450400&amp;focusedCommentId=20450647#comment-20450647">here</a></p>

<p>There does seem to be a problem though when trying to use a Designer file with lots of panels, or lots of pages with graphics on several panels. I haven't gotten to the bottom of it yet, but it may be that the Pi is running out of memory. I can get it working perfectly by creating a new account and having a very basic Designer panel with a couple of buttons. However my primary Designer Account with lovely graphical panels doesn't work and complains "Cannot Get Panel List" - despite working fine when OR Controller is running on my PC.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Sep 17, 2012 09:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450669"></a>
                                    <font class="smallfont"><p>Do you see any exceptions in any of the log files on the controller?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Sep 17, 2012 14:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450670"></a>
                                    <font class="smallfont"><p>Hi Marcus</p>

<p>That's a good question - but alas I do not know.<br/>
I will take a look tonight.</p>

<p>thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Sep 17, 2012 14:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450676"></a>
                                    <font class="smallfont"><p>Hi Marcus (everyone)</p>

<p>Joy.... I have a log file.</p>

<p>So. Two experiments. First up, I loaded the "simple" designer files to the Pi (the one with one panel, one layout and one button). I ran up my Pi and connected to my android tablet. On the Pi, I looked in the Logs directory and saw that the log files had been created, but they were all empty.</p>

<p>Then, I downloaded using WinSCP the more complex designer files with multiple panels and layouts and did the same. Reboot, check the logs, and voila, I have a log in Catalina.2012-09-17 with the following entry;</p>

<p>Sep 17, 2012 6:12:50 PM org.apache.catalina.session.StandardManager doLoad<br/>
SEVERE: IOException while loading persisted sessions: java.io.EOFException<br/>
java.io.EOFException<br/>
	at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298)<br/>
	at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767)<br/>
	at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)<br/>
	at java.io.ObjectInputStream.&lt;init&gt;(ObjectInputStream.java:298)<br/>
	at org.apache.catalina.util.CustomObjectInputStream.&lt;init&gt;(CustomObjectInputStream.java:58)<br/>
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:362)<br/>
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:321)<br/>
	at org.apache.catalina.session.StandardManager.start(StandardManager.java:637)<br/>
	at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:438)<br/>
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4271)<br/>
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)<br/>
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)<br/>
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)<br/>
	at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:830)<br/>
	at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:719)<br/>
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:490)<br/>
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)<br/>
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)<br/>
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)<br/>
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)<br/>
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)<br/>
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)<br/>
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)<br/>
	at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)<br/>
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br/>
	at java.lang.reflect.Method.invoke(Method.java:601)<br/>
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)</p>

<p>Now, a much more edumacated person than me needs to translate this, but what I must add is that this designer file seems to work fine when the controller is running on a PC. </p>

<p>So... what do you think noble community. Please help. Obviously the word "SEVERE" doesn't fill me with great confidence.</p>

<p>thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Sep 17, 2012 19:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450677"></a>
                                    <font class="smallfont"><p>This is actually an error related to Tomcat's session persistency which we don't even need.<br/>
You can try and turn it off. Look at the file controller-2.0.x/conf/context.xml<br/>
All the way to the top you see a command about session persistence see. Try and uncomment as mentioned there.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Sep 17, 2012 19:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450984"></a>
                                    <font class="smallfont"><p>Thanks Marcus. I removed the error using your suggestion.</p>

<p>However, the problem still occurs. That is when loading a panel on my tablets, i get an error "Using Cached Content", "Current Controller isn't available".</p>

<p>I have been doing some tests....</p>

<p>I stripped down my existing designer files and started adding back screens. I added eight screens back in until the error occurred. At this point the zip of my designer files was 1.6M.</p>

<p>So - is there some memory or processing limitation on the Raspberry Pi that prevents using panel designer files &gt;= 1.6M ?  A bit of research reveals that I should have over 256MB of memory on my Pi so surely not a memory problems <img class="emoticon" src="images/icons/emoticons/help_16.gif" height="16" width="16" align="absmiddle" alt="" border="0"/>...</p>

<p>(don't forget these files works flawlessly on my PC Controller).</p>

<p>Looking forward to any help out there....</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Sep 26, 2012 18:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450985"></a>
                                    <font class="smallfont"><p>... bit more info....</p>

<p>Raspberry Pi seems to think that it has 42M memory free (according to "free -m").....</p>

<p>Me very confused.....</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Sep 26, 2012 18:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452227"></a>
                                    <font class="smallfont"><p>Hi Martyn</p>

<p>maybe this will help.... <a href="http://www.raspberrypi.org/archives/2180">http://www.raspberrypi.org/archives/2180</a></p>

<p>The new raspberry pi models have 512MB</p>

<p>oh well time to buy another <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by banditkd at Oct 16, 2012 13:21
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:31</font></td>
		    </tr>
	    </table>
    </body>
</html>