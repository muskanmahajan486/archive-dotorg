<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Help QNAP + Zwave</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Help QNAP + Zwave
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 08, 2014 by <font color="#0050B2">plindeas</font>.
				    </div>

				    <p>Hi!<br/>
I have struggled some nights and really need help...<br/>
Have installed qpgk on QNAP<br/>
Replaced zwave.jar<br/>
DEBUG in log4j.appender.zwave-file<br/>
Sync with empty panel but I cannot get anything in the zwave log...<br/>
Seems as the QNAP dont recognise the AEON Z-stick...<br/>
Dot get anything regarding ttyUSB0 for dmesg..<br/>
any idea?<br/>
BR Peter</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22882472"></a>
                                    <font class="smallfont"><p>If i type "lsusb" I get:<br/>
<span class="error">&#91;~&#93;</span> # lsusb<br/>
Bus 001 Device 006: ID 03f0:a611 Hewlett-Packard<br/>
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br/>
Bus 002 Device 004: ID 10c4:ea60 Cygnal Integrated Products, Inc. CP210x Composite Device<br/>
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br/>
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br/>
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br/>
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</p>

<p>If I type "cat /proc/bus/usb/devices" <br/>
T:  Bus=02 Lev=01 Prnt=01 Port=01 Cnt=01 Dev#=  4 Spd=12   MxCh= 0<br/>
D:  Ver= 1.10 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1<br/>
P:  Vendor=10c4 ProdID=ea60 Rev= 1.00<br/>
S:  Manufacturer=Silicon Labs<br/>
S:  Product=CP2102 USB to UART Bridge Controller<br/>
S:  SerialNumber=0001<br/>
C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=100mA<br/>
I:* If#= 0 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=00 Prot=00 Driver=(none)<br/>
E:  Ad=81(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms<br/>
E:  Ad=01(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms</p>

<p>so the stick is recognized in some way...<br/>
but if I type "dmesg | grep -i usb"<br/>
<span class="error">&#91;~&#93;</span> # dmesg | grep -i usb<br/>
[   97.106320] usbcore: registered new interface driver usbhid<br/>
[   97.111124] usbhid: USB HID core driver<br/>
[   97.217748] usblp6: USB Bidirectional printer dev 3 if 1 alt 0 proto 2 vid 0x03F0 pid 0xA611<br/>
[   97.230189] usbcore: registered new interface driver usblp<br/>
[   98.506368] usbcore: registered new interface driver snd-usb-audio<br/>
[   98.518280] usbcore: registered new interface driver snd-usb-caiaq<br/>
[   98.568102] usbcore: registered new interface driver uvcvideo<br/>
[   98.573458] USB Video Class driver (1.1.1)<br/>
[ 1328.787309] usb 1-2: USB disconnect, device number 3<br/>
[ 1328.794218] usblp6: removed<br/>
[ 1331.750099] usb 2-1: USB disconnect, device number 2<br/>
[ 1334.362071] usb 2-2: new full-speed USB device number 3 using uhci_hcd<br/>
[ 1335.250101] usb 2-2: USB disconnect, device number 3<br/>
[ 1336.956075] usb 2-2: new full-speed USB device number 4 using uhci_hcd<br/>
[ 1341.562069] usb 1-1: new high-speed USB device number 6 using ehci_hcd<br/>
[ 1341.704423] usblp3: USB Bidirectional printer dev 6 if 1 alt 0 proto 2 vid 0x03F0 pid 0xA611<br/>
[ 1341.740831] scsi11 : usb-storage 1-1:1.2<br/>
[ 1342.815089] <span class="error">&#91;#&#93;</span> set usb polling mode (sds)</p>

<p>I cannot see the device....<br/>
Anyone got zwave AEON stick working on a QNAP (TS-239Pro)? </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by plindeas at Jan 09, 2014 11:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882703"></a>
                                    <font class="smallfont"><p>Hi Peter,</p>

<p>I have exactly the same problem...<br/>
See QNAP forum topic: <a href="http://forum.qnap.com/viewtopic.php?f=306&amp;t=89223">http://forum.qnap.com/viewtopic.php?f=306&amp;t=89223</a></p>

<p>Hope we could fine the solution soon</p>

<p>Robert</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robdou at Jan 13, 2014 14:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882720"></a>
                                    <font class="smallfont"><p>Hi Peter,</p>

<p>Did you try to install OpenRemote on a regular PC or Mac to test your AEON stick?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robdou at Jan 13, 2014 17:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882780"></a>
                                    <font class="smallfont"><p>Robert,<br/>
I tried to install OR on a PC but could not get it working so I installed "InControl HA" and tested the stick, could connect and control my switch... so I guess the stick is ok...<br/>
It feels like the QNAP dont really recognise the AEON stick, maybe the modules for serial (usbserial.ko, cp210x.ko...got from Synology...) are not loaded but I do not know how to load this drivers...<br/>
/Peter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by plindeas at Jan 14, 2014 10:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882859"></a>
                                    <font class="smallfont"><p>Same for me<br/>
My AEON stick works fine on a mac running "indigo 6". I can turn on, off and dimm my zwave device<br/>
I found an other guy having the same problem:
<a href="http://www.openremote.org/display/forums/zwave+discovery+problem">http://www.openremote.org/display/forums/zwave+discovery+problem</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robdou at Jan 14, 2014 22:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882935"></a>
                                    <font class="smallfont"><p>I successfully installed OpenRemote-Controller-2.1.0_SNAPSHOT-2013-06-17 on a mac. Panel is created and work like a charm on my Iphone<br/>
I followed these steps:<br/>
1) download and install Mac OS X driver for the AEON stick (<a href="http://www.silabs.com/Support%20Documents/Software/Mac_OSX_VCP_Driver.zip">http://www.silabs.com/Support%20Documents/Software/Mac_OSX_VCP_Driver.zip</a>)<br/>
2) download OpenRemote-Controller-2.1.0_SNAPSHOT-2013-06-17.zip and extract zip file to desktop<br/>
3) Dowload and copy zwave.jar in folder .../webapps/controller/WEB-INF/Lib/<br/>
4) In file log4j.properties I check that log4j.appender.zwave-file.Threshold = DEBUG<br/>
5) Plug the AEON USB stick<br/>
6) run OR by typing "./openremote.sh run" in terminal after moving into ../bin folder<br/>
7) In Building Modeler, webapp.port is set to 8080<br/>
8) zwave.comPort: is set to /dev/tty.SLAB_USBtoUART<br/>
9) zwave.commLayer: is set to RXTX<br/>
10) save and go to localhost:8080/controller<br/>
11) sync online<br/>
11) zwave.log started to show something like in the how to<br/>
12) Create a panel with switch and dim button</p>

<p>and it works</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robdou at Jan 16, 2014 10:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883523"></a>
                                    <font class="smallfont"><p>Hi Peter,<br/>
On the QNAP, I found these usbserial.ko and cp210x.ko in two folders:</p>

<p>/usr/local/modules</p>

<p>and</p>

<p>/share/MD0_DATA/.qpkg/OpenRemote/module/misc/</p>

<p>In Putty I typed the two command:<br/>
insmod /usr/local/modules/usbserial.ko<br/>
insmod /usr/local/modules/cp210x.ko</p>

<p>then:<br/>
lsmod command shows  that they are loaded.<br/>
dmesg command shows something like : ...cp210x converter now attached to ttyUSB0</p>

<p>I thought I solved the problem but nothing changed regarding the empty log file and my panel doesn't turn on off or dim my light.</p>

<p>I also tried to load the two file from the second folder but I got errors:</p>

<p><span class="error">&#91;~&#93;</span> # insmod /share/MD0_DATA/.qpkg/OpenRemote/module/misc/usbserial.ko<br/>
insmod: cannot insert `/share/MD0_DATA/.qpkg/OpenRemote/module/misc/usbserial.ko': Invalid module format (-1): Exec format error<br/>
<span class="error">&#91;~&#93;</span> # insmod /share/MD0_DATA/.qpkg/OpenRemote/module/misc/cp210x.ko<br/>
insmod: cannot insert `/share/MD0_DATA/.qpkg/OpenRemote/module/misc/cp210x.ko': Invalid module format (-1): Exec format error<br/>
<span class="error">&#91;~&#93;</span> #</p>

<p>Aeon labs provides driver for linux 3.X.X. There are two files:<br/>
cp210x.c<br/>
Makefile</p>

<p>How can we use and install them on the QNAP? For Info my QNAP Kernel is linux 3.4.6</p>

<p>Any help would be very appreciate</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robdou at Jan 27, 2014 19:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593227"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>Did you get this working?</p>

<p>I've just picked up a QNAP TS-451 and would like to get ZWave functionality.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nodecentral at Oct 19, 2014 10:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593229"></a>
                                    <font class="smallfont"><p><a href="http://www.openremote.org/pages/viewpage.action?pageId=23592977&amp;focusedCommentId=23593011#comment-23593011">http://www.openremote.org/pages/viewpage.action?pageId=23592977&amp;focusedCommentId=23593011#comment-23593011</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aleksey_z at Oct 19, 2014 12:34
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:36</font></td>
		    </tr>
	    </table>
    </body>
</html>