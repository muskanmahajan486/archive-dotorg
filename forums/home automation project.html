<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : home automation project</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : home automation project
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 04, 2013 by <font color="#0050B2">hapmore</font>.
				    </div>

				    <p>Hello,</p>

<p>For school I need to make some sort of home automation project. But I've got 2 choices.<br/>
I can use O.R. (open remote) to send KNXnet/IP to my gateway which sends KNX to my UART and arduino which then control my stepping switches.<br/>
OR!<br/>
I can use O.R. to send KNXnet/IP directly to my arduino which then interprets it and controls my stepping switches.</p>

<p>now for my questions.</p>
<ul class="alternate" type="square">
	<li>What would be the best choice?</li>
	<li>Is there a library from KNXnet/IP to KNX that I can run on my arduino (without using a gateway)?</li>
	<li>Is there a way to interpret KNX directly on my arduino (without using an UART)?</li>
</ul>


<p>that's it for now.<br/>
Thanks in advance.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21858241"></a>
                                    <font class="smallfont"><p>Haven't heard of KNXnet/IP stacks for Arduino, so don't know if one exists or not.</p>

<p>Just curious why you've chosen to combine KNX with Arduino devices? Is it a requirement for your project? Using anything but KNX would simplify the task.</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 05, 2013 17:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858258"></a>
                                    <font class="smallfont"><p>The situation: In a house they have installed stepping switches to control the lights. We must make a system that controls these stepping switches maybe with openremote so we have chosen for the combination of Arduino and KNX because Openremote can send KNXnet/ip.</p>

<p>1. A possible way of or project is that we use a normal KNX system so with a gateway to receive the commands of openremote and use the arduino as a KNX module to control the stepping switches (<a href="http://dka.web-republic.de/2012/01/connecting-an-arduino-to-eibknx/">http://dka.web-republic.de/2012/01/connecting-an-arduino-to-eibknx/</a>) </p>

<p>2. Another way is that we receive the commands of openremote with the arduino and use the arduino for controlling the stepping switches so that there doesn't have to be a gateway and maybe no knx-bus. So you can save money by buying an arduino instead of a gateway. </p>

<p>So these are the requirements. in the link of point 1 there is a library for arduino so maybe there is a way that we can add something to that to make point 2.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hapmore at Mar 06, 2013 13:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858384"></a>
                                    <font class="smallfont"><p>What do you mean with stepping switches?<br/>
If you have KNX you normally have a KNX dim actuator and a KNX wall switch which sends the commands to the actuator.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 10, 2013 00:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858473"></a>
                                    <font class="smallfont"><p>stepping switches, teleruptors,impulse switches like <a href="https://www.google.be/search?hl=nl&amp;q=teleruptors+schematics&amp;bav=on.2,or.r_qf.&amp;bvm=bv.43287494,d.ZGU&amp;biw=1525&amp;bih=743&amp;um=1&amp;ie=UTF-8&amp;tbm=isch&amp;source=og&amp;sa=N&amp;tab=wi&amp;ei=nRc9UcyeAbTe7AbUqICAAg#um=1&amp;hl=nl&amp;tbm=isch&amp;sa=1&amp;q=teleruptor&amp;oq=teler&amp;gs_l=img.3.0.0l10.151.3420.1.4993.6.5.0.1.1.0.73.235.5.5.0...0.0...1c.1.5.img.1bg8iKf377o&amp;bav=on.2,or.r_qf.&amp;bvm=bv.43287494,d.ZGU&amp;fp=270f3e8d4addcbbe&amp;biw=1525&amp;bih=743">https://www.google.be/search?hl=nl&amp;q=teleruptors+schematics&amp;bav=on.2,or.r_qf.&amp;bvm=bv.43287494,d.ZGU&amp;biw=1525&amp;bih=743&amp;um=1&amp;ie=UTF-8&amp;tbm=isch&amp;source=og&amp;sa=N&amp;tab=wi&amp;ei=nRc9UcyeAbTe7AbUqICAAg#um=1&amp;hl=nl&amp;tbm=isch&amp;sa=1&amp;q=teleruptor&amp;oq=teler&amp;gs_l=img.3.0.0l10.151.3420.1.4993.6.5.0.1.1.0.73.235.5.5.0...0.0...1c.1.5.img.1bg8iKf377o&amp;bav=on.2,or.r_qf.&amp;bvm=bv.43287494,d.ZGU&amp;fp=270f3e8d4addcbbe&amp;biw=1525&amp;bih=743</a></p>


<p>so a pushbutton gives a pulse to the teleruptor an this switch on a lamp, there is not yet KNX in the house.<br/>
Butt openremote send only commands like KNX or X10 etc. And we need the arduino to recive the commands like an actuator. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hapmore at Mar 10, 2013 23:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858476"></a>
                                    <font class="smallfont"><p>Referring to a myriad of switches and solutions does not really help to narrow down your problem. Actually it is unclear to me what your problem is, because you start with a half baked solution rather than with a design.<br/>
Getting back to your first post: You say this is a school project. Are using KNX and Arduino requirements given by your teachers? Must it be a real house installation, or does a lab setting suffice. Those issues determine your otions.</p>

<p>Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 11, 2013 09:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858477"></a>
                                    <font class="smallfont"><p>Ok, so you don't have a KNX installation but you want to talk the KNX protocol to your arduino which then controls those propriatary devices.<br/>
We have a lot of users already who use TCP or HTTP to talk to arduino.</p>

<p>Why do you want to talk KNX if you don't even have KNX devices?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 11, 2013 09:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858478"></a>
                                    <font class="smallfont"><p>In the first post we say there are 2 options and we must make a decision of which is the best. The goal of the project is that it works in a real home. We must use the Arduino to control the stepping-switches. And use Openremote as interface to send commands.</p>

<p>So the first option is that we make something like <a href="http://dka.web-republic.de/2012/01/connecting-an-arduino-to-eibknx/">http://dka.web-republic.de/2012/01/connecting-an-arduino-to-eibknx/</a> and we can control the arduino with openremote. Is this a good option does it work?? </p>

<p>The other option is that we make a gateway with the Arduino Ethernet. Is this possible? Are there already project like this??</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hapmore at Mar 11, 2013 10:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858479"></a>
                                    <font class="smallfont"><p>If I understand correct, you don't have a KNX installation which means there is nothing where arduino can connect to.<br/>
The URL you gave is a system where arduino is physically connected to a KNX bus which is not the case in your scenario.</p>

<p>I can only see the solution where you use arduino as a gateway.</p>

<p>This means on arduino you need a process which receives commands via ethernet and controls your devices. <br/>
This is possible but depends on your arduino software and is not really related to OpenRemote.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 11, 2013 10:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858481"></a>
                                    <font class="smallfont"><p>Yes indeed, maybe it is a easy way to use TCP or HTTP to talk to the arduino. But if we can make it talk to KNX we have a DIY solution for people that have KNX devices. So we make the arduino like a gateway but cheaper. if this isn't possible we buy a gateway and make the physical connection so in the future we can add KNX devices and keep the old installation like it is. <br/>
Are there projects on arduino that receive the commands from openremote?  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hapmore at Mar 11, 2013 10:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858483"></a>
                                    <font class="smallfont"><p>Search our forums for arduino. I think something was posted already.<br/>
I don't recall any details at the moment.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 11, 2013 10:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414731"></a>
                                    <font class="smallfont"><p>Hi Marcus</p>

<p>adding to the KNX arduino question.  <br/>
Looking through some OR threads, lots of people want to connect an arduino to OR.  It looks to me that if we have an implementation on arduino for KNXnet/IP that would be great for a lot of people.  Hence to choice to use KNX as the protocol.  The knx info is spread out but google helps a lot.  I have a couple of questions:</p>

<p>Is it necessary to implement the ACK in KNX to use it with OR?  In other words: can you just set-up OR to use a certain IP address an port for KNX communication and listen (on de arduino) to incoming UDP connections without sending back an ACK (from the arduino)?  Can you simple sent a KNX message (containing the info from the arduino) to the OR controller which updates the states?  Without opening a connection first or managing ACK messages.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pspl at May 22, 2013 18:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414737"></a>
                                    <font class="smallfont"><p>Why would you want to implement the rather complex KNX IP stack on Arduino to control something else?<br/>
The KNX protocol was designed 30 years ago to send data between hardware devices connected to 2 wires.<br/>
Just define yourself a UDP based protocol to speak to Arduino with that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 22:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414745"></a>
                                    <font class="smallfont"><p>Hi Marcus </p>

<p>thanks for the reply.  I agree that creating a custom UDP would be faster for a one off project.   I want to create something reusable for different systems (OR, misterhouse, openhab, ...)  Although it is old KNX seems to be a dominating protocol.  Therefore I would like my system to be KNX compatible.  Figuring out the message is fine (info is scattered but google helps<img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> The info I'm missing is on the ACK part.  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pspl at May 23, 2013 07:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414750"></a>
                                    <font class="smallfont"><p>I don't know the details about the KNX protocol, but I would assume that you need to implement the complete stack to be compatible.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 23, 2013 07:52
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:30</font></td>
		    </tr>
	    </table>
    </body>
</html>