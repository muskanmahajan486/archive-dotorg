<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : EmonCMS Logger json error</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : EmonCMS Logger json error
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 09, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hello,</p>

<p>I try to install the EmonCMS logger on OpenRemote but when i start the controller i have this error :<br/>
The reference to entity "json" must end with the ';' delimiter.</p>

<p>I have follow this tutorial : <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Energy+Monitoring+with+EmonCMS" title="OpenRemote 2.0 How To - Energy Monitoring with EmonCMS">OpenRemote 2.0 How To &#45; Energy Monitoring with EmonCMS</a></p>

<p>Somebody has try this ?</p>

<p>Thanks</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21857345"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>Could you send your emonCMSLogger config. What is your JSON string in your application.xml file?<br/>
Have you tried this JSON strong with a dummy value in your browser? What the results?</p>

<p>Regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Feb 08, 2013 08:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857346"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>Here the config of the applicationContext.xml :</p>

<p>&lt;bean id = "emonCMSLogger" class = "org.openremote.controller.statuscache.emoncms.EmonDataLogger"&gt;<br/>
    &lt;property name = "emonURL"  value = "http://monitoring.objectifa.ch/api/post?apikey=96a2f43988ed7f31435233f6ff5ae572&amp;json="/&gt;<br/>
    &lt;property name = "sensors"&gt;<br/>
    &lt;list&gt;<br/>
      &lt;value&gt;Temperature Exterieure&lt;/value&gt;<br/>
    &lt;/list&gt;<br/>
    &lt;/property&gt;<br/>
&lt;/bean&gt;</p>

<p>And te Event processing chain :</p>

<p>&lt;bean id = "eventProcessorChain" class = "org.openremote.controller.statuscache.EventProcessorCha$<br/>
    &lt;property name = "eventProcessors"&gt;<br/>
    &lt;list&gt;<br/>
        &lt;bean class = "org.openremote.controller.statuscache.rules.RuleEngine" /&gt;<br/>
        &lt;ref bean = "emonCMSLogger"/&gt;<br/>
    &lt;/list&gt;<br/>
    &lt;/property&gt;<br/>
&lt;/bean&gt;</p>

<p>Yes the JSON url is working. I use it with a Zibase to have the power consumption.</p>

<p>Regards</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Feb 08, 2013 08:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857348"></a>
                                    <font class="smallfont"><p>Guillaume,</p>

<p>Please try to replace the '&amp;' carcter from your EmonURL value with '&amp;' to have an URL like this one:<br/>
"http://emoncms.org/api/post?apikey=47d18060923b1f84dcad19f0adc90645&amp;json="</p>

<p>Regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Feb 08, 2013 09:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857351"></a>
                                    <font class="smallfont"><p>Yann,</p>

<p>Not sure i understand you <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I need to replace '&amp;' with '&amp;' ?</p>

<p><img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Feb 08, 2013 09:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857353"></a>
                                    <font class="smallfont"><p>encoding issue in the editor ... sorry<br/>
I don't knwo how to avoid this encoding but, without the space, it shoudl be<br/>
'&amp; a m p ;'<br/>
the encoding for ampersand</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Feb 08, 2013 09:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857354"></a>
                                    <font class="smallfont"><p>You're my hero <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>It's working perfectly.</p>

<p>Thanks a lot.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Feb 08, 2013 09:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857380"></a>
                                    <font class="smallfont"><p>URL should be:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>http://emoncms.org/api/post?apikey=47d18060923b1f84dcad19f0adc90645&amp;amp;json=
</pre>
</div></div>

<p>?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 09, 2013 06:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857381"></a>
                                    <font class="smallfont"><p>Do we need to update the documentation?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 09, 2013 06:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415158"></a>
                                    <font class="smallfont"><p>Juha, </p>

<p>The above URL's didn't work for me for some reason. After looking at the input API's in emoncms, I came across the following :</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;property name = <span class="code-quote">"emonURL"</span> value = <span class="code-quote">"http:<span class="code-comment">//[EmonCMS Server URL]/emoncms/input/post.json?&amp;amp;apikey=[YourAPIKey]&amp;amp;json="</span>/&gt;</span>
</pre>
</div></div>

<p>I put a comment about this under the How-to. </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 29, 2013 08:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415163"></a>
                                    <font class="smallfont"><p>Thanks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 29, 2013 09:04
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:44</font></td>
		    </tr>
	    </table>
    </body>
</html>