<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Synology NAS (DS411)</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Synology NAS (DS411)
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 27, 2013 by <font color="#0050B2">reind</font>.
				    </div>

				    <p>My DS411 is running DSM 4.2. and I choose the Aeon Labs USB Adapter as controller. <br/>
Although I'm not very good in Linux, running OpenRemote on a (always-on) NAS would be great.<br/>
So I installed the OpenRemote package and followed the instructions as mentioned in the docs.<br/>
Result:<br/>
The Designer works, The Controller seems to work partly, it does sync with the designer( but Reload config and clear cache is not working!),<br/>
The Webcontroller does not work, the wheel keeps turning.....( it looks as if the controller is not found))<br/>
My android phone connects to the controller and does diplay my testPanel. (and does indeed work with my SamsungTV) </p>

<p>The hardware is Ok, SynoZwave does work.</p>

<p>I cant get the Zwave protocol working, there are no specific errors or warnings and the zwave.log is empty.<br/>
I can see that the Aeon USB in connected to /dev/ttyUSB0 (dmesg)</p>

<p>Does anyone have the same expierience ? is it DSM 4.2 or ? <br/>
Which log should I watch to determine the possible cause ?</p>

<p>thanks in advance,<br/>
Rein</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22873402"></a>
                                    <font class="smallfont"><ul class="alternate" type="square">
	<li>Do you still have SynoZwave installed but <b>stopped</b> on your NAS?</li>
	<li>What kind of Z-Wave devices are you using?</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 27, 2013 09:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873403"></a>
                                    <font class="smallfont"><p>No, both are running SynoWave and OpenRemote.<br/>
My Zwave devices: Aeon Labs USB Adapter as controller, TKB_TZ67-G as switch.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by reind at Jun 27, 2013 09:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873404"></a>
                                    <font class="smallfont"><p>Try to stop SynoZwave</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 27, 2013 09:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873405"></a>
                                    <font class="smallfont"><p>One more thing I just remembered: Did you install the rxtxSerial thing that is described in the Howto?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 27, 2013 09:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873406"></a>
                                    <font class="smallfont"><p>Yes I did install rxtxSerial thing.<br/>
The DS411 is has a Marvell Kirkwood mv6282 processor and according to the install the Synology NAS package contains Intel drivers ( = DS 411+ and up) so they should be replaced.<br/>
Tonight ( I'am at work now) I'll check what the result is of stopping SynoZwave, I'll let you know.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by reind at Jun 27, 2013 10:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873489"></a>
                                    <font class="smallfont"><p>Stopping SynoZwave did not resolve the problem.</p>

<p>I uninstalled all software and drivers, restarted the NAS.<br/>
I reinstalled but that it still didn't work as expected.<br/>
I believe the problem is not a OpenRemote problem.</p>

<p>I follwed the instuctions in : <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Synology+with+Z-Wave">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Synology+with+Z-Wave</a></p>


<p>1)- After installing SynoZwave the /lib/modules/... are in place, SynoZwave is not running, also the MODULES start sequence is correct.</p>

<p>2)- Executing "dmesg"does give the correct output. <br/>
[   94.510000] usbcore: registered new interface driver usbserial<br/>
[   94.510000] usbserial: USB Serial Driver core<br/>
[   94.600000] USB Serial support registered for FTDI USB Serial Device<br/>
[   94.600000] usbcore: registered new interface driver ftdi_sio<br/>
[   94.610000] ftdi_sio: v1.5.0:USB FTDI Serial Converters Driver<br/>
[   94.680000] USB Serial support registered for pl2303<br/>
[   94.690000] usbcore: registered new interface driver pl2303<br/>
[   94.690000] pl2303: Prolific PL2303 USB to serial adaptor driver<br/>
[   94.730000] USB Serial support registered for cp210x<br/>
[   94.730000] cp210x 1-1.1:1.0: cp210x converter detected<br/>
[   94.740000] usb 1-1.1: lock for hub EH<br/>
[   94.810000] hub is performing EH<br/>
[   94.840000] usb 1-1.1: reset full speed USB device using orion-ehci and address 3<br/>
[   94.950000] usb 1-1.1: unlock for hub EH<br/>
[   94.960000] usb 1-1.1: cp210x converter now attached to ttyUSB0<br/>
[   94.970000] usbcore: registered new interface driver cp210x<br/>
[   94.970000] cp210x: v0.09:Silicon Labs CP210x RS232 serial adaptor driver<br/>
[   96.780000] loop: module loaded<br/>
[   97.660000] Slow work thread pool: Starting up<br/>
[   98.230000] Slow work thread pool: Ready<br/>
[  100.940000] findhostd uses obsolete (PF_INET,SOCK_PACKET)<br/>
[  106.130000] usbcore: registered new interface driver snd-usb-audio</p>

<p>looking in /proc/bus/usb/devices ( point 6 second check thing ) does NOT give the output as mentioned.</p>

<p>dr-xr-xr-x    2 root     root             0 Jun 30 11:07 001<br/>
<del>r</del><del>r</del><del>r</del>-    1 root     root             0 Jun 30 11:08 devices</p>

<p>As you can see devices is empty.<br/>
This is crucial info, I need to be sure the Aeon Labs USB Adapter is correct installed.</p>

<p>But I think it is strange that SynoZwave software does work even without the devices output.<br/>
The usb registering is on the OS level, so probably the attachment did succeed, otherwise SynoZwave also would not work. correct ?<br/>
Could this be a wrong log property somewhere? </p>

<p>all help appreciated<br/>
regards,<br/>
 Rein</p>




</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by reind at Jun 30, 2013 14:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873490"></a>
                                    <font class="smallfont"><p>I am afraid I can't help you any further on this. I stopped using the OpenRemote native Z-Wave protocol several months ago, so I can not compare/try with my own installation.<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 30, 2013 14:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873617"></a>
                                    <font class="smallfont"><p>Did you configure ZWave in modeler and create ZWave devices?<br/>
The Zwave log should show that the controller is looking for the devices.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 04, 2013 09:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873627"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>I finally got it working:<br/>
I think there are 3 errors in <a href="http://www.openremote.org/display/docs/OpenRemote 2.0 How To - Synology with Z-Wave">http://www.openremote.org/display/docs/OpenRemote 2.0 How To - Synology with Z-Wave</a></p>

<p>== Installation of Linux Serial Drivers<br/>
point 6)<br/>
 second check: should be "cat /proc/bus/usb/devices"</p>

<p>==OpenRemote Software Install<br/>
point 4)<br/>
"chown -R root.uucp /var/lock" -&gt; "chown -R openremote.uucp /var/lock"<br/>
point 5)<br/>
"chown -R root.dialout /dev/ttyUSB0" -&gt; "chown -R openremote.dialout /dev/ttyUSB0"</p>

<p>I also changed the permssions on zwave.jar in rw\-r\-\-r\-\- but i can't determine if this was crucial.</p>

<p>mvg,<br/>
Rein </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by reind at Jul 04, 2013 21:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873633"></a>
                                    <font class="smallfont"><p>Great to hear that you got it working.<br/>
Thanks for pointing out the issue with right.<br/>
You need r/w access to the device and to the locks folder, that is true.<br/>
The zwave.jar only neads read permissions.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 04, 2013 22:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873687"></a>
                                    <font class="smallfont"><p>Just seeing this thread now.</p>

<p>Please note: Points (4) and (5) are correct in the documentation. You should leave root as owner of /var/lock and /dev/ttyUSB0. These are standard linux ownership conventions. I believe you missed the step of adding the openremote user to uucp and dialout groups.</p>

<p>ie.<br/>
cat /etc/group<br/>
should show:<br/>
uucp:x:65548:openremote<br/>
dialout:x:65549:openremote</p>


<p>I updated the document to clearly document that cat command in point (6).</p>

<p>Regards,<br/>
Joe</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by joefm1218 at Jul 06, 2013 21:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873737"></a>
                                    <font class="smallfont"><p>Hi Joe,</p>

<p>I agree  that root should be the owner of /var/lock and /dev/ttyUSB0.<br/>
I repeated the implementation partly, you are correct setting the owner of /dev/ttyUSB0  to root is no problem, my fault, the documentation is correct.</p>

<p>I did add the openremote user to both groups.</p>

<p>If I change the owner /var/lock to root I get the following error in catalina.out:</p>

<p>check_group_uucp(): error testing lock file creation Error details:Permission deniedcheck_lock_status: No permission to create lock file.<br/>
please see: How can I use Lock Files with rxtx? in INSTALL</p>

<p>thats why I changed the owner, it was in my case the solution to get the controller running.<br/>
I hope that some Synology/Openremote user can confirm (or correct) my settings.</p>

<p>PS.<br/>
I use DSM4.2 on a Synology 411 and OpenRemote-Controller-2.1.0_SNAPSHOT-2013-06-17.</p>

<p>mvg,<br/>
Rein</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by reind at Jul 08, 2013 21:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873747"></a>
                                    <font class="smallfont"><p>Thanks for the documentation update, Joe.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 09, 2013 06:15
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>