<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : New hardware protocol suggestions</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : New hardware protocol suggestions
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 03, 2013 by <font color="#0050B2">nwe</font>.
				    </div>

				    <p>Hi All,</p>

<p>I'm looking at changing over to OpenRemote from Misterhouse and as part of this, I'm looking at changing over my hardware as well.<br/>
I'm a Windows user and a hardware developer. I tend to write my own firmware for my Atmel AVR chips.<br/>
Instead of reinventing the wheel, I bought some panStamp modules with the intent of starting my OpenRemote journey using these modules.<br/>
However I'm struggling big time in trying to get the interface between openremote and panStamp modules working. Something like 12 different downloads, packages, building drivers etc etc etc and I'm still not there.</p>

<p>So instead of relying on all of this 100MB+ of downloads etc, I thought I would make my own interface between OpenRemote and any hardware I use ie panStamp or my own developed hardware.</p>

<p>A lot of my interfaces have Ethernet and I'm looking at using this for the connection to openremote. <br/>
I have used the xAP protocol and xPL in the past but there doesn't seem to be support for this in OpenRemote.</p>

<p>So now to the reason for this thread - What is a good existing Ethernet protocol that OpenRemote uses and I can write drivers for in my hardware?<br/>
Given that I have to write the firmware end, some good documentation of the protocol would be very handy.</p>

<p>Neil.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21858180"></a>
                                    <font class="smallfont"><p>If you're writing your own drivers, maybe defining something yourself for UDP makes sense?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 03, 2013 10:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858182"></a>
                                    <font class="smallfont"><p>Thanks for replying.<br/>
But the idea is to use something that already exists in the openremote area.<br/>
Not have to write.code for both ends.<br/>
Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at Mar 03, 2013 10:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858183"></a>
                                    <font class="smallfont"><p>Well the point with UDP was that there's no need to write code on the OpenRemote side if the protocol you define is simple connectionless UDP packet protocol.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 03, 2013 10:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21858184"></a>
                                    <font class="smallfont"><p>Here for example is how UDP is used to control LightwaveRF: <a href="http://openremote.org/display/forums/LightwaveRF%2C+UDP+and+UDP+Listener+help?focusedCommentId=21858096#comment-21858096">http://openremote.org/display/forums/LightwaveRF%2C+UDP+and+UDP+Listener+help?focusedCommentId=21858096#comment-21858096</a></p>

<p>While in general having a dedicated protocol support is far better user experience, you can start with the generic UDP integration.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 03, 2013 11:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414560"></a>
                                    <font class="smallfont"><p>Juha,<br/>
How do I decode a udp message and set a sensor based on this information?<br/>
Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 19, 2013 22:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414578"></a>
                                    <font class="smallfont"><p>Not possible. The UDPProtocol can only send commands and the UDPListenerProtocol is not made for this yet.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 20, 2013 18:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414603"></a>
                                    <font class="smallfont"><p>So what hardware AND/OR software protocol can I use to read back information from my hardware ans set Sensor status's?<br/>
Neil. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 21, 2013 00:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414614"></a>
                                    <font class="smallfont"><p>Panstamp should be supported quite well already. There is a compiled version of our controller available which includes the Panstamp code.<br/>
Otherwise I see it like Juha and it would make sense that you define yourself a protocol and implement that in OpenRemote.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 21, 2013 08:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414659"></a>
                                    <font class="smallfont"><p>Unfortunately, I'm having issues getting panstamp to work. 1) is a panstamp issue the other is <br/>
that panstamp and openremote will not communicate if they are on different o'Er but still on the same network.</p>

<p>For my other hardware I have a serial to UDP adapter that im trying to use the UDP interface with but OR only appears to support UDP TX, no TX.<br/>
I can make the packet structure anything I like, I just need receive capability.</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 22, 2013 00:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414740"></a>
                                    <font class="smallfont"><p>The UDP listener should definitely be improved to be more flexible in allowing different inputs. I want to do this but am too busy with other tasks right now, if anyone wants to take a stab at this, it's a fairly straight-forward contribution if you're looking to get started on developing in OR. Otherwise will take a bit longer for me to get to this.</p>

<p>Was trying to think of an alternative way for you to push your device data to OR sensors but couldn't think of anything right now. Brain fried, it's late. Maybe I'll figure out something later. Or someone else?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 22, 2013 23:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414741"></a>
                                    <font class="smallfont"><p>Re: the panstamp issue &#8211; haven't looked into it, I'd need to investigate, I'm not that intimate with the panstamps implementation. Don't know if Daniel's seen the thread yet or if he has an answer, I think he's been busy travelling the conference last week and maybe still on the road.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 22, 2013 23:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414809"></a>
                                    <font class="smallfont"><p>Ive done 100,000s of lines of code primarily in pascal but have done assembly, basic C and perl.<br/>
To ask a dum question but what is OR primarily written in?</p>

<p>If i was interested in going down this path and given that Im a windows user, what are the next steps?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 23, 2013 13:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414812"></a>
                                    <font class="smallfont"><p>Java.</p>

<p>Which is not that different from Pascal in a sense that Java is sort of a nice language to look at rather than obnoxious. But the syntax borrows a little more from C than Pascal, and adds the obvious OOP things like classes, inheritance, etc. which were not in original Pascal but if you've been doing Delphi Pascal then you already know.</p>

<p>For Windows, you can get a full blown integrated development environment if you want to go through all the fancy hoops. I prefer <a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> myself, it is easily the best Java IDE I've used. But for small tasks you will do just fine with an editor that gives you the sufficient syntax highlighting to make reading code easier. Emacs and all do this but if you want a little bit more then <a href="http://www.jedit.org/">jEdit</a> came on top of a quick google search (I'm sure there are plenty of others but jEdit has been around for more than a decade).</p>

<p>The other tool besides editor that will be needed is Subversion to check out the source code. For checking out you need simply a way to execute:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
svn co http:<span class="code-comment">//svn.code.sf.net/p/openremote/code/tags/snapshot/Controller_2_1_0_FM_SNAPSHOT-20130511/</span>
</pre>
</div></div>

<p>Which will pull down the source for you. If you prefer the CLI like shown above, <a href="http://www.cygwin.com/">Cygwin</a> is a great tool for having a very functional bash shell on Windows, especially if you're already familiar with it. It has nice pkg management which will allow you to pick and install subversion tools pretty easily.  If you prefer a GUI approach then many people use <a href="http://tortoisesvn.net/">TortoiseSVN</a>, or if you installed the full blown IDE then most of them has subversion functionality integrated in the IDE already. I only trust SVN from the command line so can't help with the other options much.</p>

<p>For the build itself, you'll need to download <a href="http://ant.apache.org">Apache Ant</a> which fills the role of 'make' in the project. If you manage to get this far, I can fill in the build details <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Would be happy to help with other questions too.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 23, 2013 13:47
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>