<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : How do you call a function in another rule file</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : How do you call a function in another rule file
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 15, 2013 by <font color="#0050B2">nwe</font>.
				    </div>

				    <p>Hi,</p>

<p>I have created another rule file called Debug.drl and have the following code in it</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>
package org.openremote.controller.protocol

import org.openremote.controller.utils.Logger;
import org.openremote.controller.Constants;


function void logit(String msg)
{
  Logger.getLogger(Constants.CONTROLLER_ROOT_LOG_CATEGORY + ".MyBogusRule").info(msg);
}

rule "loggingit" 
  timer (cron: 0/5 * * * * ?) when eval(true) 
  then logit("I'm Alive! XXX");
end
</pre>
</div></div>



<p>The questions is, how do I call the "logit" function from the modeler_rules.drl file?<br/>
ie Debug.logit("Value = 123");</p>

<p>Thanks Neil.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22872825"></a>
                                    <font class="smallfont"><p>I've never tried it. Searching didn't reveal any useful information about this either.</p>

<p>Trying to think through it, each rule file is compiled into a Java class. Since a function in any one rule file will use up the namespace (the function's name), I would assume each rule file gets compiled into its own Java class &#8211; if not, defining two functions with the same name in two separate rule files would result in a naming conflict.</p>

<p>The Java class compilation is transparent however, done by the rule engine, and we don't know what class names it will use (and they're likely not very readable either as they're not intended for use).</p>

<p>The Drools documentation is also silent about the function visibility across rule files.</p>

<p>What is possible however is to import Java helper classes into rules. The implementation of your log function is almost exactly the same, also instead of using the 'function' keyword, you would use 'public static' to indicate a public class method.</p>

<p>Then it should be possible to import the logit function into all of your rules:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>import my.package.name.ClassName.logit
</pre>
</div></div>

<p>And with that import you can use the logit class method across all your rule files.</p>

<p>This however assumes that you are comfortable in compiling a Java class into a JAR.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 15, 2013 14:00
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>