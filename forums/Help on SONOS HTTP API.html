<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Help on SONOS HTTP API</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Help on SONOS HTTP API
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 14, 2014 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hi All,</p>

<p>Very new to OR, but have my KNX install working.</p>

<p>I am now trying to incorporate the SONOS HTTP API.</p>

<p>I have installed everything according to the tutorial at <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Sonos">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Sonos</a></p>

<p>I am running ubuntu with nodejs version 0.10.25 and am receiving the below when running node server.js</p>

<p>am i missing something...?</p>

<p>Excuse me if this is simple as i am new to this.</p>

<p>-----------------------------------------------------------------------------------------</p>

<p>binding SSDP to port 2527<br/>
discovering all IPs from lo<br/>
discovering all IPs from eth0<br/>
relevant IPs { '172.16.0.41': null }<br/>
notification server listening on port 3500<br/>
no preset file, ignoring...<br/>
http server listening on port 5005<br/>
scanning for players in ip 172.16.0.41<br/>
subscribing to topology 172.16.0.32<br/>
using local endpoint 172.16.0.41</p>

<p>/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/lib/player.js:215<br/>
        _this.state.nextTrack.duration = attr().duration.parseTime();<br/>
                                                         ^<br/>
TypeError: Cannot call method 'parseTime' of undefined<br/>
    at /home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/lib/player.js:215:58<br/>
    at parse (/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/node_modules/easysax/easysax.js:671:10)<br/>
    at EasySAXParser.parse (/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/node_modules/easysax/easysax.js:142:4)<br/>
    at updateTransportState (/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/lib/player.js:238:17)<br/>
    at Discovery.handleNotification (/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/lib/player.js:151:9)<br/>
    at Discovery.EventEmitter.emit (events.js:117:20)<br/>
    at IncomingMessage.&lt;anonymous&gt; (/home/ubuntu32/Downloads/node-sonos-http-api-master/node_modules/sonos-discovery/lib/sonos.js:282:15)<br/>
    at IncomingMessage.EventEmitter.emit (events.js:92:17)<br/>
    at _stream_readable.js:920:16<br/>
    at process._tickCallback (node.js:415:13)</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22884475"></a>
                                    <font class="smallfont"><p>Sorry, but this is an issue on the Node.js side and I don't now how that part works.</p>

<p>Was there a recent update on the Sonos side ? Or on the other hand, is your Sonos device up to date ?<br/>
Maybe post on issue on the node-sonos-http library github page ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 18, 2014 15:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884487"></a>
                                    <font class="smallfont"><p>Thank you for your reply Eric.</p>

<p>My SONOS is update to date with Version 4.2 (build 24071060).</p>

<p>Thank you for pointing out this is a node.js issue.<br/>
I will pursue this on the github page.</p>

<p>Cheers.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hy8r1d at Feb 18, 2014 21:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884505"></a>
                                    <font class="smallfont"><p>All Fixed,</p>

<p>Thanks to jishi on GitHub.</p>

<p>This is an old bug.</p>

<p>Delete node_modules folder and run npm install again.</p>

<p>Thank you for your input Eric.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hy8r1d at Feb 19, 2014 07:01
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:36</font></td>
		    </tr>
	    </table>
    </body>
</html>