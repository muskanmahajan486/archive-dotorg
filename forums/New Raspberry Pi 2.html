<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : New Raspberry Pi 2</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : New Raspberry Pi 2
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 02, 2015 by <font color="#0050B2">mredeker</font>.
				    </div>

				    <p>All,</p>

<p>there is a new Raspberry Pi 2 out in the wild <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> <br/>
It comes with 900Mhz quad core and 1 GB of ram: <a href="http://www.raspberrypi.org/products/raspberry-pi-2-model-b/">http://www.raspberrypi.org/products/raspberry-pi-2-model-b/</a></p>

<p><a href="https://www.youtube.com/watch?x-yt-cl=85114404&amp;x-yt-ts=1422579428&amp;v=Xo8RT8Wpv6w#t=364">https://www.youtube.com/watch?x-yt-cl=85114404&amp;x-yt-ts=1422579428&amp;v=Xo8RT8Wpv6w#t=364</a></p>

<p>-Marcus</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596262/23789967.txt">Slackware Java SE1.6 install.txt</a> (text/plain)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596262/23789968.jpg">Naamloos8.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596262/23789969.jpg">Naamloos10.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23596270"></a>
                                    <font class="smallfont"><p>What an upgrade!  I am going to try one of these with XBMC and a IR blaster.  Make that dumb TV on the patio a little smarter..</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by sose at Feb 02, 2015 19:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596325"></a>
                                    <font class="smallfont"><p><a href="https://gigaom.com/2015/02/02/windows-10-and-ubuntu-prepare-for-iot-battle-on-raspberry-pi-2/">Windows 10 and Ubuntu prepare for IoT battle on Raspberry Pi 2</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 04, 2015 10:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596378"></a>
                                    <font class="smallfont"><p>Migrated my home controller (version 2.1.0) from a regular Raspberry Pi to the new Raspberry Pi 2. The unscientific observations I've made so far:</p>

<ul class="alternate" type="square">
	<li>Start-up time from a Pi restart to a functioning controller is reduced</li>
	<li>Starting the OpenRemote iOS app happens quicker (that is, time from clicking the app icon to having the interface on screen is reduced)</li>
	<li>Purely subjective, probably placebo and totally irrelevant, but maybe the responsiveness of switches is slightly improved. Since this is either an improvement of fractions of second or none at all, it really does no matter.</li>
</ul>


<p>However, there is some negative behavior as well. After rebooting the Pi a couple of times, the controller simply stopped working. The startup log of a successful process looked like this:</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2015-02-06 17:57:48,498 : Initialized event processor : Drools Rule Engine<br/>
INFO 2015-02-06 17:57:50,126 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2015-02-06 17:57:50,127 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2015-02-06 17:57:51,452 : Registered sensor : Sensor (Name = 'Z2000powersensor', ID = '1225587', State Mappings: {})<br/>
INFO 2015-02-06 17:57:51,465 : Registered sensor : Switch Sensor (Name = 'pump_sensor', ID = '1442322')<br/>
INFO 2015-02-06 17:57:51,468 : Registered sensor : Switch Sensor (Name = 'Clean_sensor', ID = '1218011')<br/>
INFO 2015-02-06 17:57:51,479 : Registered sensor : Switch Sensor (Name = 'kitchen_scene_status_sensor', ID = '1218911')<br/>
INFO 2015-02-06 17:57:51,481 : Registered sensor : Switch Sensor (Name = 'kitchen_spots_status_sensor', ID = '114348')<br/>
INFO 2015-02-06 17:57:51,483 : Registered sensor : Range Sensor (Name = 'livingroom_inner_status_sensor', ID = '114351', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,485 : Registered sensor : Sensor (Name = 'powersensor', ID = '1225116', State Mappings: {})<br/>
INFO 2015-02-06 17:57:51,488 : Registered sensor : Range Sensor (Name = 'livingroom_outer_status_sensor', ID = '114350', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,499 : Registered sensor : Range Sensor (Name = 'bedroom_inner_status_sensor', ID = '114579', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,500 : Registered sensor : Range Sensor (Name = 'bedroom_outer_status_sensor', ID = '114578', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,502 : Registered sensor : Range Sensor (Name = 'livingroom_back_status_sensor', ID = '114581', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,504 : Registered sensor : Range Sensor (Name = 'kitchen_ceiling_status_sensor', ID = '114580', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,505 : Registered sensor : Switch Sensor (Name = 'virtual_kitchen_sensor', ID = '1218983')<br/>
INFO 2015-02-06 17:57:51,507 : Registered sensor : Range Sensor (Name = 'livingroom_side_status_sensor', ID = '114582', Min: 1, Max: 100)<br/>
INFO 2015-02-06 17:57:51,510 : Registered sensor : Switch Sensor (Name = 'livingroom_scenes_status_sensor', ID = '1218984')<br/>
INFO 2015-02-06 17:57:51,541 : Startup complete.<br/>
INFO 2015-02-06 17:57:51,548 : Controller Definition File Watcher for Default Deployer started.<br/>
INFO 2015-02-06 17:59:06,816 : </p>


<p>Whereas after a Pi reboot it simply stops in the middle without an error:</p>


<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2015-02-06 17:59:28,958 : Initialized event processor : Drools Rule Engine<br/>
INFO 2015-02-06 17:59:29,673 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2015-02-06 17:59:29,674 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2015-02-06 17:59:31,018 : Registered sensor : Sensor (Name = 'Z2000powersensor', ID = '1225587', State Mappings: {})<br/>
INFO 2015-02-06 17:59:31,032 : Registered sensor : Switch Sensor (Name = 'pump_sensor', ID = '1442322')<br/>
INFO 2015-02-06 17:59:34,057 : Registered sensor : Switch Sensor (Name = 'Clean_sensor', ID = '1218011')<br/>
INFO 2015-02-06 17:59:34,066 : Registered sensor : Switch Sensor (Name = 'kitchen_scene_status_sensor', ID = '1218911')<br/>
INFO 2015-02-06 18:39:42,532 : </p>



<p>Digging into this, also having some concerns with Pi 2 being really eager to corrupt the memory card compared to the original one. First used a Transcend 16GB micro SD card, now swapped to Sandisk. Curiously, also the Transcend reports itself as a Sandisk card <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Feb 06, 2015 17:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596379"></a>
                                    <font class="smallfont"><p>KNX-debug.log has some curious errors:</p>

<p>INFO 2015-02-06 19:06:09,637 (KNX): KNX IP interface hostname set to 'null'<br/>
INFO 2015-02-06 19:06:09,639 (KNX): KNX IP interface port set to '3671'<br/>
INFO 2015-02-06 19:06:09,639 (KNX): KNX PhysicalBus clazz set to 'org.openremote.controller.protocol.port.DatagramSocketPort'<br/>
INFO 2015-02-06 19:06:09,646 (KNX): Scheduled reconnection task<br/>
WARN 2015-02-06 19:06:09,648 (KNX): Unknown KNX property '&lt;property name = "name" value = "pump(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:09,671 (KNX): Trying to create connection<br/>
INFO 2015-02-06 19:06:09,680 (KNX): Removing connection<br/>
INFO 2015-02-06 19:06:09,702 (KNX): KNX Connection manager resolving local host IP addresses...<br/>
INFO 2015-02-06 19:06:09,710 (KNX): Found candidate NIC: name:eth0 (eth0)<br/>
INFO 2015-02-06 19:06:09,717 (KNX): Added candidate IP address to set - /192.168.0.8<br/>
INFO 2015-02-06 19:06:09,718 (KNX): Skipping loopback interface: name:lo (lo)<br/>
DEBUG 2015-02-06 19:06:09,875 (KNX): Creating KNX bus with org.openremote.controller.protocol.port.DatagramSocketPort<br/>
INFO 2015-02-06 19:06:09,934 (KNX): Found a KNX IP interface at /192.168.0.10:3671<br/>
INFO 2015-02-06 19:06:09,999 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/1/1 Data: 0x00 for group address '0/1/1'<br/>
INFO 2015-02-06 19:06:10,018 (KNX): Connection created for KNX IP interface at /192.168.0.10:3671<br/>
DEBUG 2015-02-06 19:06:10,019 (KNX): Creating KNX bus with org.openremote.controller.protocol.port.DatagramSocketPort<br/>
INFO 2015-02-06 19:06:10,055 (KNX): Notified with KNX interface status = connected<br/>
INFO 2015-02-06 19:06:10,058 (KNX): Connected to KNX-IP interface /192.168.0.10:3671<br/>
INFO 2015-02-06 19:06:10,061 (KNX): KNX-IP socket listener IOException<br/>
java.net.SocketException: Socket closed<br/>
	at java.net.PlainDatagramSocketImpl.receive0(Native Method)<br/>
	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:143)<br/>
	at java.net.DatagramSocket.receive(DatagramSocket.java:781)<br/>
	at org.openremote.controller.protocol.port.DatagramSocketPort.receive(DatagramSocketPort.java:78)<br/>
	at org.openremote.controller.protocol.knx.ip.IpProcessor$PhysicalBusListener.run(IpProcessor.java:82)<br/>
WARN 2015-02-06 19:06:10,065 (KNX): KNX-IP socket listener stopped<br/>
INFO 2015-02-06 19:06:10,067 (KNX): Stopping connection timer<br/>
WARN 2015-02-06 19:06:10,134 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_back(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,136 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/17 Data: 0x00 for group address '0/4/17'<br/>
WARN 2015-02-06 19:06:10,180 (KNX): Unknown KNX property '&lt;property name = "name" value = "kitchen_ceiling(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,181 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/6 Data: 0x00 for group address '0/0/6'<br/>
WARN 2015-02-06 19:06:10,218 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_side(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,220 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/18 Data: 0x00 for group address '0/4/18'<br/>
WARN 2015-02-06 19:06:10,255 (KNX): Unknown KNX property '&lt;property name = "name" value = "bedroom_inner(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,257 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/6/10 Data: 0x00 for group address '0/6/10'<br/>
WARN 2015-02-06 19:06:10,294 (KNX): Unknown KNX property '&lt;property name = "name" value = "bedroom_outer(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,295 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/6/8 Data: 0x00 for group address '0/6/8'<br/>
WARN 2015-02-06 19:06:10,416 (KNX): Unknown KNX property '&lt;property name = "name" value = "kitchen_scenes(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,418 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/5 Data: 0x00 for group address '0/0/5'<br/>
WARN 2015-02-06 19:06:10,488 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_inner(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,489 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/16 Data: 0x00 for group address '0/4/16'<br/>
WARN 2015-02-06 19:06:10,522 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_outer(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,524 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/15 Data: 0x00 for group address '0/4/15'<br/>
WARN 2015-02-06 19:06:10,561 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_scenes(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,562 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/12 Data: 0x00 for group address '0/4/12'<br/>
WARN 2015-02-06 19:06:10,596 (KNX): Unknown KNX property '&lt;property name = "name" value = "kitchen_spots(STATUS)"/&gt;'.<br/>
INFO 2015-02-06 19:06:10,598 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/7 Data: 0x00 for group address '0/0/7'<br/>
WARN 2015-02-06 19:06:13,792 (KNX): Unknown KNX property '&lt;property name = "name" value = "kitchen_scenes(OFF)"/&gt;'.<br/>
INFO 2015-02-06 19:06:13,794 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/0/5 Data: 0x00 for group address '0/0/5'<br/>
WARN 2015-02-06 19:06:13,798 (KNX): Unknown KNX property '&lt;property name = "name" value = "bedroom_scenes(OFF)"/&gt;'.<br/>
INFO 2015-02-06 19:06:13,799 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/6/6 Data: 0x00 for group address '0/6/6'<br/>
WARN 2015-02-06 19:06:13,803 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_rings_scenes(OFF)"/&gt;'.<br/>
INFO 2015-02-06 19:06:13,804 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/12 Data: 0x00 for group address '0/4/12'<br/>
WARN 2015-02-06 19:06:13,808 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_back_scenes(OFF)"/&gt;'.<br/>
INFO 2015-02-06 19:06:13,809 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/13 Data: 0x00 for group address '0/4/13'<br/>
WARN 2015-02-06 19:06:13,812 (KNX): Unknown KNX property '&lt;property name = "name" value = "livingroom_side_scenes(ON)"/&gt;'.<br/>
INFO 2015-02-06 19:06:13,814 (KNX): Created KNX Command FRAME L_Data.req 0.0.0 -&gt; 0/4/14 Data: 0x01 for group address '0/4/14'<br/>
ERROR 2015-02-06 19:06:23,836 (KNX): Service failed<br/>
org.openremote.controller.protocol.knx.ip.KnxIpException: Service failed, no ACK<br/>
	at org.openremote.controller.protocol.knx.ip.IpTunnelClient.service(IpTunnelClient.java:84)<br/>
	at org.openremote.controller.protocol.knx.KNXIpConnectionManager$KNXConnectionImpl.service(KNXIpConnectionManager.java:850)<br/>
	at org.openremote.controller.protocol.knx.KNXIpConnectionManager$KNXConnectionImpl.send(KNXIpConnectionManager.java:670)<br/>
	at org.openremote.controller.protocol.knx.KNXCommand.write(KNXCommand.java:328)<br/>
	at org.openremote.controller.protocol.knx.GroupValueWrite.send(GroupValueWrite.java:117)<br/>
	at org.openremote.controller.model.Command.execute(Command.java:230)<br/>
	at org.openremote.controller.model.Command.execute(Command.java:199)<br/>
	at org.openremote.controller.statuscache.CommandFacade.command(CommandFacade.java:80)<br/>
	at org.openremote.controller.statuscache.CommandFacade.command(CommandFacade.java:57)<br/>
	at org.openremote.controller.model.event.Rule_Clean_Off_0.defaultConsequence(Rule_Clean_Off_0.java:14)<br/>
	at org.openremote.controller.model.event.Rule_Clean_Off_0DefaultConsequenceInvoker.evaluate(Rule_Clean_Off_0DefaultConsequenceInvoker.java:25)<br/>
	at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:917)<br/>
	at org.drools.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:856)<br/>
	at org.drools.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1071)<br/>
	at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:785)<br/>
	at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:751)<br/>
	at org.drools.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:218)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.push(RuleEngine.java:177)<br/>
	at org.openremote.controller.statuscache.EventProcessorChain.push(EventProcessorChain.java:188)<br/>
	at org.openremote.controller.statuscache.StatusCache.update(StatusCache.java:260)<br/>
	at org.openremote.controller.model.sensor.Sensor.update(Sensor.java:342)<br/>
	at org.openremote.controller.model.sensor.Sensor$DeviceReader.run(Sensor.java:608)<br/>
	at java.lang.Thread.run(Thread.java:744)</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Feb 06, 2015 17:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596399"></a>
                                    <font class="smallfont"><p>Hello Jani,</p>

<p>Are the KNX errors related to RPI 2 only, and not present in version 2.1.0 in general (on RPI 1) ?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 07, 2015 09:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596407"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Can't confirm. The problem only manifested together with the migration process to the RPi2 which involved a lot of system restarts. The original RPi has been running stable for well over a year and I did not encounter the issue there. I'd hesitate to subject the original installation to this kind of testing since it's my backup in case the RPi2 turns out unstable <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>However, this other thread on the forum seems to have the same issue on different hardware:
<a href="http://openremote.org/pages/viewpage.action?pageId=23596331">http://openremote.org/pages/viewpage.action?pageId=23596331</a></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Feb 07, 2015 10:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596408"></a>
                                    <font class="smallfont"><p>Yes, saw the other thread and yours that's why I was asking. Sounds like your issue resolved itself &#8211; frequent restarts may be a cause since there's a fairly lengthy timeout on KNX connections if they're not cleaned out properly and I'm not sure our KNX implementation cleans itself up correctly under all cases.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 07, 2015 13:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596423"></a>
                                    <font class="smallfont"><p>Yes, I re-installed the controller and synced from the designer a few hours later, and things have been back to normal for now, even scheduled rules fire normally. All the observations about snappier performance are still valid. The installation is running on the default Java that comes with Raspbian.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Feb 07, 2015 15:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601105"></a>
                                    <font class="smallfont"><p>Jani, which version of java did you install? </p>

<p>i have an rasppi 2 and did the installation according to this totorial: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi</a><br/>
but i believe this tutorial is for raspberry pi 1 boards right? <br/>
i tried java 1.8 but then drools will not work and the sync with the disigner is working, then i installed java 6 the icetea version and drool work but i cannot sync with the designer. when i enter the controller i will get a java  ErrorCode: 10061. im using:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
java version <span class="code-quote">"1.6.0_35"</span>
OpenJDK <span class="code-object">Runtime</span> Environment (IcedTea6 1.13.7) (6b35-1.13.7-1~deb7u1+rpi1)
OpenJDK Zero VM (build 23.25-b01, mixed mode)

</pre>
</div></div>

<p>rules will work but when i will sync my design with the controller it failes, this logfile will be created:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#
# A fatal error has been detected by the Java <span class="code-object">Runtime</span> Environment:
#
#  Internal Error (os_linux_zero.cpp:285), pid=2272, tid=1181217904
#  fatal error: caught unhandled signal 11
#
# JRE version: 6.0_35-b35
# Java VM: OpenJDK Zero VM (23.25-b01 mixed mode linux-arm )
# Derivative: IcedTea6 1.13.7
# Distribution: Debian GNU/Linux 7.8 (wheezy), <span class="code-keyword">package</span> 6b35-1.13.7-1~deb7u1+rpi1
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, <span class="code-keyword">try</span> <span class="code-quote">"ulimit -c unlimited"</span> before starting Java again
#
# If you would like to submit a bug report, please include
# instructions how to reproduce the bug and visit:
#   http:<span class="code-comment">//icedtea.classpath.org/bugzilla
</span>#

---------------  T H R E A D  ---------------

Current thread (0x01b94c10):  JavaThread <span class="code-quote">"HTTP-<span class="code-object">Thread</span>-2"</span> daemon [_thread_in_Java, id=2504, stack(0x46500000,0x46680000)]

Stack: [0x46500000,0x46680000],  sp=0x465c13d4,  free space=772k
Java frames:
 0x4667cfd0: stack_word[2]         = 0x00000001
 0x4667cfd4: stack_word[1]         = 0x000000c4
 0x4667cfd8: stack_word[0]         = 0x5dbf8788
 0x4667cfdc: istate-&gt;_thread       = 0x01b94c10
 0x4667cfe0: istate-&gt;_bcp          = 0x6fde8596 (bci 14)

</pre>
</div></div>
<p>the list is even longer than this.</p>

<p>could you help me out?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 07, 2015 01:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601114"></a>
                                    <font class="smallfont"><p>Just for my curiosity. <br/>
Do you use the Pro version or the free version?<br/>
I remember that it did work for me with the pre-installed jva 8 in a short experiment early 2014 using the free version of the controller. Don't have an image of that test unfortunately. Abandoned that because of the high cpu load on the Pi B  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 07, 2015 10:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601115"></a>
                                    <font class="smallfont"><p>i have the free version , i have also installed java 8:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
root@raspberrypi:/opt/ejre1.6.0_38# java -version
java version <span class="code-quote">"1.8.0_60"</span>
Java(TM) SE <span class="code-object">Runtime</span> Environment (build 1.8.0_60-b27)
Java HotSpot(TM) Client VM (build 25.60-b23, mixed mode)
root@raspberrypi:/opt/ejre1.6.0_38#
</pre>
</div></div>

<p>but drools wont work with that, syncing with the designer will work. should i try another java 8 version?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 07, 2015 11:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601116"></a>
                                    <font class="smallfont"><p>i tried with:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
root@raspberrypi:~# java -version
java version <span class="code-quote">"1.8.0"</span>
Java(TM) SE <span class="code-object">Runtime</span> Environment (build 1.8.0-b132)
Java HotSpot(TM) Client VM (build 25.0-b70, mixed mode)
root@raspberrypi:~#
</pre>
</div></div>

<p>but drools wont work either</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR 2015-09-07 12:17:49,908 : Error in rule definition 'modeler_rules.drl' : wrong class format
java.lang.RuntimeException: wrong class format
</pre>
</div></div>

<p>i have also tried java jre6 but it won't even load:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
root@raspberrypi:~# update-alternatives --config java
There are 4 choices <span class="code-keyword">for</span> the alternative java (providing /usr/bin/java).

  Selection    Path                                             Priority   Status
------------------------------------------------------------
  0            /opt/ejre1.6.0_38/bin/java                        1058      auto mode
  1            /opt/ejre1.6.0_38/bin/java                        1058      manual mode
  2            /opt/jdk1.8.0_60/bin/java                         1         manual mode
  3            /usr/lib/jvm/java-6-openjdk-armhf/jre/bin/java    1057      manual mode
* 4            /usr/lib/jvm/jdk-8-oracle-arm-vfp-hflt/bin/java   1         manual mode

Press enter to keep the current choice[*], or type selection number: 1
update-alternatives: using /opt/ejre1.6.0_38/bin/java to provide /usr/bin/java (java) in manual mode
root@raspberrypi:~# java -version
java: error <span class="code-keyword">while</span> loading shared libraries: libjli.so: cannot open shared object file: No such file or directory
root@raspberrypi:~#
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 07, 2015 11:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601117"></a>
                                    <font class="smallfont"><blockquote><p>should i try another java 8 version</p></blockquote>
<p>Sorry, I can't help you there since I  have no record of what I did use at the time</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 07, 2015 11:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601118"></a>
                                    <font class="smallfont"><p>tnx anyway maybe someone else has the same problem</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 07, 2015 11:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601122"></a>
                                    <font class="smallfont"><p>Hi Rob,<br/>
I had a similar problem with Raspbian. IcedTea6 works but is too slow on a RPI2. I installed Slackware Linux which is a soft float Linux.<br/>
For more details see <a href="http://www.openremote.org/display/forums/OpenRemote+Controller+crash+on+raspberry+pi+2?focusedCommentId=23599638#comment-23599638">http://www.openremote.org/display/forums/OpenRemote+Controller+crash+on+raspberry+pi+2?focusedCommentId=23599638#comment-23599638</a><br/>
I hope it helps.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 07, 2015 14:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601131"></a>
                                    <font class="smallfont"><p>Patrick,</p>

<p>i did install slackware onto my sdcard and ive copied openremote to it. i only need the java on to it, is version jre6 enough? as i used it before on a synology installation.</p>


<p>is this the correct way to install java?: <a href="http://www.unixmen.com/install-java-slackware-14-1/">http://www.unixmen.com/install-java-slackware-14-1/</a><br/>
it doesnt work with the ejre version: <a href="http://www.oracle.com/technetwork/java/embedded/downloads/javase/default-1934076.html">http://www.oracle.com/technetwork/java/embedded/downloads/javase/default-1934076.html</a><br/>
i tried ejre-1_6_0_38-fcs-b05-linux-arm-vfp-eabi-headless-13_nov_2012</p>

<p>or do i need a JDK?<br/>
like: <a href="http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html#jdk-6u45-oth-JPR">http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html#jdk-6u45-oth-JPR</a><br/>
only these a bin files like: jdk-6u45-linux-x64.bin  and nor a tar file</p>


<p>which version did you install and how?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 01:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601133"></a>
                                    <font class="smallfont"><p>Hi Rob,</p>

<p>The java install is indeed based on <a href="http://www.unixmen.com/install-java-slackware-14-1/">http://www.unixmen.com/install-java-slackware-14-1/</a></p>

<p>Download ejre-1_6_0_38-fcs-b05-linux-arm-vfp-eabi-headless-13_nov_2012.gz from Oracle<br/>
Download jdk.tar.gz from slackbuilds.org/repository/14.0/development/jdk/<br/>
I did the download on a Windows PC and transferred the files with FTP<br/>
Go to /root and create /root/java</p>

<p>Extract jdk from jdk.tar.gz and copy (tar -zxvf ...) it to /root/java/jdk<br/>
I did rename jdk to jre  /root/java/jre<br/>
Copy ejre-1_6_0_38-fcs-b05-linux-arm-vfp-eabi-headless-13_nov_2012.gz to /root/java/jre</p>

<p>You need to edit the file jdk.SlackBuild for this specific install (it was a bit of reverse engineering but it worked).<br/>
I would like to embed my adapted script here, but don't know how.<br/>
It would be easier if I could just post the script.</p>

<p>Edit jdk.sh :<br/>
(also this script needs to be embedded here)</p>

<p>Now make jdk.Slackbuild executable :<br/>
chmod +x jdk.Slackbuild<br/>
And execute it (because the .gz file is in the same folder we can just type :<br/>
./jdk.Slackbuild<br/>
This will take a while and generates a .txz file in /tmp<br/>
Now we are ready to install :<br/>
installpkg ejre-1_6_0_38-arm-1.txz</p>









<p>Add the java folder to your profile<br/>
nano /etc/profile<br/>
Add the line<br/>
export JAVA_HOME="usr/lib/java/"<br/>
Read again the profile setting<br/>
source /etc/profile<br/>
You can now check your java version </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 08, 2015 07:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601134"></a>
                                    <font class="smallfont"><p>im half way there, does jdk.sh needs to be edited?<br/>
this is the original:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"> 
#!/bin/sh
export JAVA_HOME=/usr/lib/java
export MANPATH=<span class="code-quote">"${MANPATH}:${JAVA_HOME}/man"</span>
export PATH=<span class="code-quote">"${PATH}:${JAVA_HOME}/bin:${JAVA_HOME}/jre/bin"</span>
</pre>
</div></div>

<p>first i edited jdk.Slackbuild:<br/>
to:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
tar xvf $CWD/ejre-1_6_0_38-fcs-b05-linux-arm-vfp-eabi-headless-13_nov_2012.gz
</pre>
</div></div>
<p>and when i run ./jdk.Slackbuild i got one 1 error:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">

tar: ejre1.6.0_38/COPYRIGHT: time stamp 2012-11-14 06:02:42 is 1352867433.022913601 s in the <span class="code-keyword">future</span>
ejre1.6.0_38/README
tar: ejre1.6.0_38/README: time stamp 2012-11-14 06:02:42 is 1352867433.022121257 s in the <span class="code-keyword">future</span>
ejre1.6.0_38/THIRDPARTYLICENSEREADME.txt
tar: ejre1.6.0_38/THIRDPARTYLICENSEREADME.txt: time stamp 2012-11-14 06:02:42 is 1352867433.021422611 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm/client/libjsig.so: time stamp 2012-11-14 05:17:36 is 1352864727.020565528 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm/client: time stamp 2012-11-14 05:17:23 is 1352864714.02019683 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm: time stamp 2012-11-14 05:17:36 is 1352864727.019798497 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib: time stamp 2012-11-14 05:17:36 is 1352864727.019472351 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38: time stamp 2012-11-14 06:02:42 is 1352867433.01917558 s in the <span class="code-keyword">future</span>
mv: cannot stat 'jdk1.7.0_45': No such file or directory
root@raspi-or:~/java/jre#

</pre>
</div></div>

<p>ive edited jdk.Slackbuild again and changed these lines:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
PRGNAM=ejre
VERSION=${VERSION:-6u38}
BUILD=${BUILD:-1}
TAG=${TAG:-_SBo}

DVER=1.6.0_$(printf $VERSION | cut -du -f2)
</pre>
</div></div>

<p>now this error occurs:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
 <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm/client/libjsig.so: time stamp 2012-11-14 05:17:36 is 1352864001.043342992 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm/client: time stamp 2012-11-14 05:17:23 is 1352863988.042288617 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib/arm: time stamp 2012-11-14 05:17:36 is 1352864001.041323253 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38/lib: time stamp 2012-11-14 05:17:36 is 1352864001.040366951 s in the <span class="code-keyword">future</span>
tar: ejre1.6.0_38: time stamp 2012-11-14 06:02:42 is 1352866707.039314138 s in the <span class="code-keyword">future</span>
ls: cannot access /root/java/jre/profile.d/ejre*: No such file or directory
chmod: cannot access '/tmp/SBo/<span class="code-keyword">package</span>-jdk/etc/profile.d/*': No such file or directory
root@raspi-or:~/java/jre#
</pre>
</div></div>

<p>do i miss something?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 09:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601139"></a>
                                    <font class="smallfont"><p>I would like to post the script in the files jdk.SlackBuild and jdk.sh. How can I publish the scripts like you did with jdk.sh?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 08, 2015 09:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601140"></a>
                                    <font class="smallfont"><p>put it here like this</p>

<p><img src="attachments/23596262/23789968.jpg" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 10:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601141"></a>
                                    <font class="smallfont"><p>This is the adapted jdk.SlackBuild</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh

# Copyright 2008, 2009, 2010, 2011  Patrick J. Volkerding, Sebeka, MN, USA
# All rights reserved.
#
# Redistribution and use of <span class="code-keyword">this</span> script, with or without modification, is
# permitted provided that the following conditions are met:
#
# 1. Redistributions of <span class="code-keyword">this</span> script must retain the above copyright
#    notice, <span class="code-keyword">this</span> list of conditions and the following disclaimer.
#
#  THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
#  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
#  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO
#  EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
#  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
#  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
#  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
#  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
#  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
#  ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


VERSION=1_6_0_38
DVER=1.6.0_38
ARCH=arm                  # only determines the lib path locations
JAVA_ARCH=${JAVA_ARCH:-arm}  # or i586 <span class="code-keyword">if</span> you want the 32bit version
BUILD=${BUILD:-1}


# <span class="code-keyword">if</span> [ <span class="code-quote">"$JAVA_ARCH"</span> = <span class="code-quote">"x64"</span> ]; then
#  LIB_ARCH=amd64
# <span class="code-keyword">else</span>
#  LIB_ARCH=i386
# fi

#<span class="code-keyword">if</span> [ <span class="code-quote">"$ARCH"</span> = <span class="code-quote">"x86_64"</span> ]; then
#  LIBDIRSUFFIX=<span class="code-quote">"64"</span>
#<span class="code-keyword">else</span>

LIBDIRSUFFIX=""
LIB_ARCH=<span class="code-quote">"arm"</span>

#fi

CWD=$(pwd)
TMP=${TMP:-/tmp}
PKG=$TMP/<span class="code-keyword">package</span>-ejre
rm -rf $PKG
mkdir -p $TMP $PKG

cd $PKG
mkdir -p usr/lib${LIBDIRSUFFIX}
cd usr/lib${LIBDIRSUFFIX}
tar xvf $CWD/ejre-1_6_0_38-fcs-b05-linux-arm-vfp-eabi-headless-13_nov_2012.gz
# chown -R root.root $PKG
# yes yes | sh $CWD/ejre-${VERSION}-linux-${JAVA_ARCH}.bin || exit 1
mkdir -p $PKG/etc/profile.d
<span class="code-keyword">for</span> file in $(ls $CWD/profile.d/*) ; <span class="code-keyword">do</span>
  cat $file | sed -e <span class="code-quote">"s#lib/java#lib${LIBDIRSUFFIX}/java#"</span> \
    &gt; $PKG/etc/profile.d/$(basename $file)
done
chown -R root.root $PKG
find $PKG \
  \( -perm 777 -o -perm 775 -o -perm 711 -o -perm 555 -o -perm 511 \) \
  -exec chmod 755 {} \; -o \
  \( -perm 666 -o -perm 664 -o -perm 600 -o -perm 444 -o -perm 440 -o -perm 400 
\) \
  -exec chmod 644 {} \;

chmod 755 $PKG/etc/profile.d/*
( cd $PKG/usr/lib${LIBDIRSUFFIX}
  mv ejre${DVER} java || exit 1
  ln -sf java ejre${DVER}
) || exit 1
# mkdir -p $PKG/usr/lib${LIBDIRSUFFIX}/mozilla/plugins
# ( cd $PKG/usr/lib${LIBDIRSUFFIX}/mozilla/plugins
#  ln -sf /usr/lib${LIBDIRSUFFIX}/java/jre/lib/${LIB_ARCH}/libnpjp2.so libnpjp2.so
#)
( cd $PKG/usr/lib${LIBDIRSUFFIX}
  ln -sf ./java/lib/${LIB_ARCH}/client/libjvm.so .
)

mkdir -p $PKG/install
cat $CWD/slack-desc &gt; $PKG/install/slack-desc
cat &lt;&lt; EOF &gt; $PKG/install/doinst.sh

# Clean up a potential upgrade mess caused by changing the
# installation directory to /usr/lib${LIBDIRSUFFIX}/java/:
<span class="code-keyword">if</span> [ -L usr/lib${LIBDIRSUFFIX}/java ]; then
  rm -rf usr/lib${LIBDIRSUFFIX}/java
 # mkdir -p usr/lib${LIBDIRSUFFIX}/java/man
 # mkdir -p usr/lib${LIBDIRSUFFIX}/java/jre/lib/${LIB_ARCH}/server
  mkdir -p usr/lib${LIBDIRSUFFIX}/java/lib/${LIB_ARCH}/client
 # mkdir -p usr/lib${LIBDIRSUFFIX}/java/jre/javaws
 # mkdir -p usr/lib${LIBDIRSUFFIX}/java/jre/bin
  mkdir -p usr/lib${LIBDIRSUFFIX}/java/bin
 # mkdir -p usr/lib${LIBDIRSUFFIX}/mozilla/plugins
fi
<span class="code-keyword">if</span> [ -L ControlPanel ]; then
  rm -f ControlPanel
fi
<span class="code-keyword">if</span> [ -L ja ]; then
  rm -f ja
fi
<span class="code-keyword">if</span> [ -L javaws ]; then
  rm -f javaws
fi
<span class="code-keyword">if</span> [ -L libjsig.so ]; then
  rm -f libjsig.so
fi
# End cleanup.
EOF

# Install the desktop/mime files:
#mkdir -p $PKG/usr/share/{applications,icons,mime}
#cp -a $PKG/usr/lib${LIBDIRSUFFIX}/java/jre/lib/desktop/applications/* \
#  $PKG/usr/share/applications/
#cp -a $PKG/usr/lib${LIBDIRSUFFIX}/java/jre/lib/desktop/icons/hicolor \
#  $PKG/usr/share/icons/
#cp -a $PKG/usr/lib${LIBDIRSUFFIX}/java/jre/lib/desktop/mime/packages \
#  $PKG/usr/share/mime/

# We ship the <span class="code-keyword">package</span> unmodified, so we <span class="code-keyword">do</span> not compress manpages.

cd $PKG
/sbin/makepkg -l y -c n $TMP/ejre-$(echo $VERSION | tr - _)-$ARCH-$BUILD.txz

</pre>
</div></div>

<p>and jdk.sh</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh
export JAVA_HOME=/usr/lib/java
export MANPATH=<span class="code-quote">"${MANPATH}:${JAVA_HOME}/man"</span>
export PATH=<span class="code-quote">"${PATH}:${JAVA_HOME}/bin:${JAVA_HOME}/ejre/bin"</span>
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 08, 2015 10:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601154"></a>
                                    <font class="smallfont"><p>yes that did the thick <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> thank you<br/>
now java is installed:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
root@raspi-or:/tmp# java -version
java version <span class="code-quote">"1.6.0_38"</span>
Java SE Embedded <span class="code-object">Runtime</span> Environment (build 1.6.0_38-b05, headless)
Java HotSpot(TM) Embedded Client VM (build 20.13-b02, mixed mode)
root@raspi-or:/tmp#
</pre>
</div></div>

<p>drools is working, syncing works also <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
this is the solution for openremote on the raspberry pi 2</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 14:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601155"></a>
                                    <font class="smallfont"><p>how about the startup script? i did:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh
#
# /etc/rc.d/rc.local:  Local system initialization script.
#
# Put any local startup commands in here.  Also, <span class="code-keyword">if</span> you have
# anything that needs to be run at shutdown time you can
# make an /etc/rc.d/rc.local_shutdown script and put those
# commands in there.

cd /openremote/bin
./openremote.sh start
</pre>
</div></div>

<p>in /etc/rc.d/rc.local  </p>

<p>i did a chmod +x openremote.sh but it does not autostart </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 14:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601158"></a>
                                    <font class="smallfont">
<p>I have no access to my RPI and cannot check this in datail right now, but you could try the following.</p>

<p>I copied the  Openremote folders in /opt and used the script as described at <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi</a></p>

<p>I called the script OpenRemoteStart and added the line JAVA_HOME=/usr/lib/java</p>



<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh
### BEGIN INIT INFO
# Provides:          openremote
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# <span class="code-object">Short</span>-Description: Start daemon at boot time
# Description:       Enable service provided by daemon.
### END INIT INFO

JAVA_HOME=/usr/lib/java

cd /opt/openremote/bin        # Modify <span class="code-keyword">this</span> line to your OpenRemote Controller installation path

<span class="code-keyword">case</span> <span class="code-quote">"$1"</span> in

stop)
        echo <span class="code-quote">"Stopping OpenRemote Controller..."</span>
        /opt/openremote/bin/openremote.sh stop &gt; /dev/<span class="code-keyword">null</span> 2&gt;&amp;1 &amp;
        ;;

start)
        # start OpenRemote in background mode
        /opt/openremote/bin/openremote.sh start &gt; /dev/<span class="code-keyword">null</span> 2&gt;&amp;1 &amp;
        echo <span class="code-quote">"OpenRemote Controller started..."</span>
        ;;

restart)
        $0 stop
        sleep 5
        $0 start
        ;;
*)
        echo <span class="code-quote">"usage: $0 { start | stop | restart}"</span> &gt;&amp;2
        exit 1
        ;;

esac

</pre>
</div></div>

<p>Put the OpenRemoteStart script into /etc/rc.d and chmod +x OpenRemoteStart</p>

<p>Edit rc.local in /etc/rc.d and add the line :<br/>
/etc/rc.d/OpenRemoteStart start</p>

<p>If it still does not start, you perhaps need to use chown to change ownership of a number of files?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 08, 2015 15:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601164"></a>
                                    <font class="smallfont"><p>in the end i got it working <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>on the first boot it says "OpenRemote Controller started..." on the startup but nothing happends untill i changed ownership of these files and directories:<br/>
chown root /etc/rc.d/openremotescript.sh<br/>
and<br/>
chown root /openremote<br/>
after that i did a reboot and openremote started on boot</p>


<p>after a few mins after reboot ive got this error:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
INIT: Id <span class="code-quote">"s0"</span> respawning too fast: disabled <span class="code-keyword">for</span> 5 minutes
</pre>
</div></div>
<p>this can be fixed by out this line in /etc/inittab  like:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#s0:12345:respawn:/sbin/agetty 115200 ttyS0 vt100
</pre>
</div></div>

<p>also i had the wrong homepath to java in /etc/profile :</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
export JAVA_HOME=<span class="code-quote">"usr/lib/java/"</span>
</pre>
</div></div>
<p>must be:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
export JAVA_HOME=/usr/lib/java
</pre>
</div></div>
<p>otherwise Openremote does not start</p>


<p>furthermore i have made a script for removing the catalina.out every 24hours.<br/>
because this log file can be very big, last time i checked it was over 10gigs on my previous installation on the synology.<br/>
its just a shell command which runs every 24h and runs this shell script:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rm /openremote/logs/catalina.out &gt; catalina-info.txt 2&gt;&amp;1 &amp;&amp; echo succes || echo fail
</pre>
</div></div>
<p>be sure your path to openremote is correctly, i placed my openremote folder directly into the root.<br/>
add a rule to your startup of the controller to execute the script:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"rules start"</span>
 salience 90
when eval(<span class="code-keyword">true</span>)
then
execute.command(<span class="code-quote">"remove.catalina.out"</span>);
end
</pre>
</div></div>
<p>you can bind a costum sensor to your command:<br/>
<img src="attachments/23596262/23789969.jpg" align="absmiddle" border="0"/><br/>
and add the rules for logging:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"remove catalina.out succes"</span>
when
CustomState(source == <span class="code-quote">"rm.catalina.out"</span>, value == <span class="code-quote">"on"</span>)
then
log(<span class="code-quote">"Logfile Catalina.out met succes verwijderd"</span>);
end

rule <span class="code-quote">"remove catalina.out fail"</span>
when
CustomState(source == <span class="code-quote">"rm.catalina.out"</span>, value == <span class="code-quote">"off"</span>)
then
log(<span class="code-quote">"Verwijderen mislukt: Logfile Catalina.out niet aanwezig"</span>);
end
</pre>
</div></div>



<p>i also had a clock issue, everytime after a reboot is been done the clock goes back to 1 Jan 1970.<br/>
for a solution see: <a href="http://pc-freak.net/blog/how-to-fix-clock-on-slackware-slackware-and-this-old-incorrect-bios-time-troubles/">http://pc-freak.net/blog/how-to-fix-clock-on-slackware-slackware-and-this-old-incorrect-bios-time-troubles/</a><br/>
unfortunatly something is wrong with my hardwareclock, when i run the command: hwclock --systohc<br/>
it says:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
hwclock: Cannot access the Hardware Clock via any known method.
hwclock: Use the --debug option to see the details of our search <span class="code-keyword">for</span> an access method.
root@raspi-or:~#
</pre>
</div></div>

<p>and on command hwclock --debug :</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
root@raspi-or:~# hwclock --debug
hwclock from util-linux 2.21.2
hwclock: Open of /dev/rtc failed: No such file or directory
No usable clock <span class="code-keyword">interface</span> found.
hwclock: Cannot access the Hardware Clock via any known method.
root@raspi-or:~#
</pre>
</div></div>

<p>i don't know how to fix this one, on google i can find some pages which say that the kernel is not compiled correctly? my temporary solution is to add an extra line to rc.local with:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ntpdate time.nist.gov
</pre>
</div></div>
<p>set this as the first line before openremote starts so that your log files will have the correct time.</p>

<p>if anyone knows how to fix the clock issue please let me know</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 18:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601172"></a>
                                    <font class="smallfont"><p>Rob, I haven't installed any additional java packages. The system is running stock java that comes with Raspbian:</p>

<p>java version "1.8.0"<br/>
Java(TM) SE Runtime Environment (build 1.8.0-b132)<br/>
Java HotSpot(TM) Client VM (build 25.0-b70, mixed mode)</p>


<p>And drools fire just fine, I have scheduled KNX light scenes and a watering cycle that have been running stable for months now.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Sep 08, 2015 20:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601173"></a>
                                    <font class="smallfont"><p>Jani,</p>

<p>maybe i have another openremote controller, which one are you using?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by robnas at Sep 08, 2015 20:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601176"></a>
                                    <font class="smallfont"><p>Jani, which version of drools do you have (in openremote/webapps/controller/WEB-INF/lib)?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by patrickvandenbergen at Sep 08, 2015 21:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23601223"></a>
                                    <font class="smallfont"><p>OpenRemote 2.1.1, Drools 5.1.1</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by frand at Sep 11, 2015 20:00
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:37</font></td>
		    </tr>
	    </table>
    </body>
</html>