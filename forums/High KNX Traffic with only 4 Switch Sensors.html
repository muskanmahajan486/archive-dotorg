<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : High KNX Traffic with only 4 Switch Sensors</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : High KNX Traffic with only 4 Switch Sensors
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 19, 2011 by <font color="#0050B2">ahbadie</font>.
				    </div>

				    <p>Hello Community,</p>

<p>at first, sorry for my english, i hope you all can unterstand what my problem is.</p>

<p>i´ve succesfully installed openremote controller und my setup works fine with my knx installation. But i have one Problem, the Controller sends Status requests on the KNX Bus every second. With one Switch Sensor everything is fine, but with three or four sensors the bus traffic is so high that i can´t switch any lights. the controller jams the whole knx installation, it is impossible to switch any actor with "normal" knx components.</p>

<p>is there a way to setup the delay for status requests, or even better, is there a way to make the openremote sensors "passive" (only listening for knx telegrams)?</p>

<p>any help would be wonderfull, i like the openremote software and i hope i can run it in future. im using the EIBMARKT IP Gateway.</p>

<p>thanks!</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-16023965"></a>
                                    <font class="smallfont"><p>Yes, the implementation is currently not throttling the requests (it is very dumb). Olivier is putting a patch together that relies on bus listener only. Should be coming this week.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 19, 2011 10:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023973"></a>
                                    <font class="smallfont"><p>Whow cool, thats perfect Timing <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> Where can i download patches and fixes like this one, or will it be implemented in the "normal" download version? Thank you!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ahbadie at Apr 19, 2011 12:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024095"></a>
                                    <font class="smallfont"><p>It will be included in the "normal" download eventually.</p>

<p>In the meantime you can test it using this checkout branch: <a href="https://openremote.svn.sourceforge.net/svnroot/openremote/branches/project/Controller_2_0_0_Alphas-KNXIP/">https://openremote.svn.sourceforge.net/svnroot/openremote/branches/project/Controller_2_0_0_Alphas-KNXIP/</a></p>

<p>Build instructions are here: <a href="http://www.openremote.org/display/docs/Building+OpenRemote+2.0+Developer+Releases" title="Building OpenRemote 2.0 Developer Releases">Building OpenRemote 2.0 Developer Releases</a> (adjust paths to dev branch as necessary)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Apr 25, 2011 08:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024189"></a>
                                    <font class="smallfont"><p>Ok Thx, i will give it a try. i think it will take some time. im posting my results in this thread.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ahbadie at Apr 28, 2011 14:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024263"></a>
                                    <font class="smallfont"><p>I´ve tried to get green with the non compiled version. my controller runs on a xp machine and i didnt know how to build an running version, i really try´d hard. can someone help me with an ready version of this release? otherwise i will try it on an virtual debian machine. im willing to learn. thx!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ahbadie at May 04, 2011 16:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024305"></a>
                                    <font class="smallfont"><p>Ok, I will prepare a binary.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 10, 2011 11:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024327"></a>
                                    <font class="smallfont"><p>Thank you very very much! I´ve tried the last days but i don´t get it. sorry for that. i have some cool ideas about my knx and ir devices. thx!!!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ahbadie at May 10, 2011 16:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024344"></a>
                                    <font class="smallfont"><p>You can download it here: <a href="http://download.openremote.org/2.0">http://download.openremote.org/2.0</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 11, 2011 23:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024366"></a>
                                    <font class="smallfont"><p>I have had the same issue. I have 6 switches now and it didn't work because of the high KNX traffic.<br/>
I have installed this version, but it works only with first switching command, than I can't change the light back. It looks like the Controller doesn't listen to the KNX at all. Still sending "Switch ON" command, even the light is already switched on.</p>

<p>I think it is better idea to check the status frequently, but with lower freqention...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by heczkis at May 13, 2011 11:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024368"></a>
                                    <font class="smallfont"><p>I've started with the first version of Controller requesting KNX status every second. Even if you reduce the frequency, it's not a good solution for large KNX installation. The BUS listener is the good way to do. It's exactly the philosophy of a KNX system. Each actors on KNX have to listen and react on event in the BUS.<br/>
But to used the listener controller, the BUS as to send update to the Controller. That means, you've to be sure, when you switch a light, that a status message come back in the same KNX Group.</p>

<p>In the ETS tool, for your KNX configuration, do you have a status command attached to your GROUP command?<br/>
If your light group is, by example, 1/0/1, you should have in this group, a link with the 2 KNX objects:</p>
<ul class="alternate" type="square">
	<li>switch actuator command</li>
	<li>status switch actuator</li>
</ul>


<p>Hope this can help</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at May 13, 2011 11:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16024370"></a>
                                    <font class="smallfont"><p>I'm sure, that switching the actuator also sends the status change for the same group. It works with panel with led indicators. And even I change the status with different controller, the led changes - as a result of status changed.</p>

<p>I agree, that listening is better solution. But using this version, it looks, like OR Controller changes the status, but doesn't listen to himself. When I switch the light with different controller, e.g. light switch, than I see on my Android panel changed status. So OR Controller listen to the BUS regullary.</p>

<p>But pushing switch on the Android panel sends still the same command - 01, 01, 01 etc. (in the case "he thinks" the light is switched off). It hasn't changed its status in the case Controller changed it, even I see on the BUS traffic the command runs correctly.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by heczkis at May 13, 2011 12:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16482385"></a>
                                    <font class="smallfont"><p>Thanks for this report Bogdan,</p>

<p>Will see if we can reproduce this behavior.</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 21, 2011 08:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17039381"></a>
                                    <font class="smallfont"><p>Hi Bogdan,</p>

<p>the new implementation of the KNX layer does not poll group addresses any longer.<br/>
As Yann said, this is the right way to do it, but this may imply changes in your ETS configuration and/or in your controller configuration.</p>

<p>Can you detail your KNX and controller configuration?<br/>
As well, an ETS telegram monitoring report would be appreciated to track this issue.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ogandit at Jun 07, 2011 20:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17039548"></a>
                                    <font class="smallfont"><p>Hi Olivier, no idea, how to detail my KNX and controller configuration. Controller has astandard configuration, I did not chnge anything in configuration. Here is telegram monitoring report:<br/>
1	13:23:34.689	to bus	 	S	1.0.254	IP Interface	0/6/6	Galerie	6		-	Read<br/>
2	13:23:34.696	from bus	 	L	1.0.9	4binar Galerie;A-;B-;C-;D-	0/6/6	Galerie	6	$00	1 bit	Response<br/>
3	13:23:34.833	from bus	 	S	1.0.22	Bezdrát	0/6/6	Galerie	6	$00	1 bit	Response<br/>
4	13:23:50.600	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$01	1 bit	Write<br/>
5	13:23:56.995	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$01	1 bit	Write<br/>
6	13:23:58.066	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$01	1 bit	Write<br/>
7	13:24:03.223	to bus	 	S	1.0.254	IP Interface	0/6/6	Galerie	6		-	Read<br/>
8	13:24:03.264	from bus	 	L	1.0.9	4binar Galerie;A-;B-;C-;D-	0/6/6	Galerie	6	$01	1 bit	Response<br/>
9	13:24:03.415	from bus	 	S	1.0.22	Bezdrát	0/6/6	Galerie	6	$01	1 bit	Response<br/>
11	13:24:13.533	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
12	13:24:14.955	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
13	13:24:15.679	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
14	13:24:16.638	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
18	13:24:26.008	from bus	 	L	1.0.9	4binar Galerie;A-;B-;C-;D-	0/6/6	Galerie	6	$01	1 bit	Write<br/>
19	13:24:40.114	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
20	13:24:44.100	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
21	13:25:05.650	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
22	13:25:10.202	from bus	 	L	1.0.9	4binar Galerie;A-;B-;C-;D-	0/6/6	Galerie	6	$01	1 bit	Write<br/>
23	13:25:15.612	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write<br/>
24	13:25:18.905	from bus	 	H	1.0.252	Not Found	0/6/6	Galerie	6	$00	1 bit	Write</p>

<p>1.0.9 is binar - I switch on/off by standard switch manually<br/>
1.0.252 is IP interface - Android panel switch<br/>
1.0.254 is another IP interface - ETS connection<br/>
you can see, that switching by IP interface/Android panel change the status but don't change again. After changing by standard switch, Android panel switches again, but again can't switch back.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by heczkis at Jun 17, 2011 09:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17039694"></a>
                                    <font class="smallfont"><p>Hi Bogdan, </p>

<p>I'm not sure but I understand from you that after receiving switch commands (write), your actuator changes its state but OR controller is not notified of this state update.</p>

<p>In this case, you should update your actuator configuration with ETS so that it sends feedback KNX write requests when its state changes. You should also update your OR controller configuration so that its sensors use the same group addresses as the new GAs you've added in the ETS configuration.</p>

<p>Best regards,</p>

<p>Olivier</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ogandit at Jun 28, 2011 11:08
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:47</font></td>
		    </tr>
	    </table>
    </body>
</html>