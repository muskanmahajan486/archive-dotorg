<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Error boot.log with rules</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Error boot.log with rules
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 08, 2012 by <font color="#0050B2">chirogocki</font>.
				    </div>

				    <p>Hi,</p>

<p>Since yesterday I experience error on controller startup.</p>

<p>My installation is :</p>

<p>Mochad + Openremote running on a Synology NAS DS1511+<br/>
I use these package :<br/>
<a href="http://pcloadletter.co.uk/2011/10/25/openremote-package-for-synology/">http://pcloadletter.co.uk/2011/10/25/openremote-package-for-synology/</a><br/>
<a href="http://pcloadletter.co.uk/2011/08/23/java-package-for-synology/">http://pcloadletter.co.uk/2011/08/23/java-package-for-synology/</a> (1.6.0_32-009)<br/>
And I have compiled mochad on my own</p>

<p>Everything works fine until I test rules...</p>

<p>Now Openremote is not working anymore, the boot.log show me error :<br/>
------------------------------<br/>
DEBUG 2012-08-08 08:13:17,917 : Initializing event processor: Drools Rule Engine<br/>
DEBUG 2012-08-08 08:13:17,918 : Adding Rule 'modeler_rules.drl'...<br/>
ERROR 2012-08-08 08:13:18,340 : Error in rule definition 'modeler_rules.drl' : null<br/>
java.lang.ArrayStoreException<br/>
.....</p>

<p>ERROR 2012-08-08 08:13:18,343 : Cannot start event processor 'Drools Rule Engine' : null<br/>
java.lang.ArrayStoreException<br/>
------------------------------<br/>
I don't understand this error because there is a file "modeler_rules.drl" in "/volume1/@appstore/OpenRemote/webapps/controller/rules"</p>

<p>I try to uninstall the package and reinstall it but no change....</p>

<p>Can you help me please ?</p>

<p>Best regards</p>

<p>Chirogocki</p>

<p>PS : I'm sorry for bad english (I'm french)</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20449679/20742168.txt">modeler_rules.txt</a> (text/plain)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20449682"></a>
                                    <font class="smallfont"><p>Can you post the stack trace (the part you now cut off) so we can see which line is causing the error?</p>

<p>thanks,</p>

<p>&#8211; Juha</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 08, 2012 10:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449684"></a>
                                    <font class="smallfont"><p>Thanks for the quick answer, here is the full part :</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

DEBUG 2012-08-08 08:13:17,905 : Created object model for Command( ID = 193, Type = datetime, Properties : {timezone=Europe/Bern, name=DateTime Jour, command=isDay, longitude=6.268, latitude=46.327}
DEBUG 2012-08-08 08:13:17,905 : Created object model for Command( ID = 194, Type = datetime, Properties : {timezone=Europe/Bern, name=DisplayDate, command=date, format=dd.MM.yyyy}).
DEBUG 2012-08-08 08:13:17,905 : Created object model for Command( ID = 195, Type = datetime, Properties : {name=Heure, command=date, format=H:mm}).
DEBUG 2012-08-08 08:13:17,905 : Created object model for Command( ID = 151, Type = socket, Properties : {port=1099, name=SetOffA8, command=pl A8 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,906 : Created object model for Command( ID = 152, Type = socket, Properties : {port=1099, name=SetOnA8, command=pl A8 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,906 : Created object model for Command( ID = 153, Type = socket, Properties : {port=1099, name=GetOnOffA8, command=getstatus A8, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,906 : Created object model for Command( ID = 154, Type = socket, Properties : {port=1099, name=GetOnOffC1, command=getstatus C1, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,907 : Created object model for Command( ID = 155, Type = socket, Properties : {port=1099, name=SetOnB11, command=pl B11 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,907 : Created object model for Command( ID = 156, Type = socket, Properties : {port=1099, name=GetOnOffB11, command=getstatus B11, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,907 : Created object model for Command( ID = 157, Type = socket, Properties : {port=1099, name=SetOffB11, command=pl B11 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,907 : Created object model for Command( ID = 158, Type = socket, Properties : {port=1099, name=SetIntensityA1, command=pl a1 xdim ${param}, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,908 : Created object model for Command( ID = 159, Type = socket, Properties : {port=1099, name=SetBrightA1, command=pl A1 bright, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,908 : Created object model for Command( ID = 160, Type = socket, Properties : {port=1099, name=SetDimA1, command=pl A1 dim, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,908 : Created object model for Command( ID = 161, Type = socket, Properties : {port=1099, name=SetOffA1, command=pl A1 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,908 : Created object model for Command( ID = 162, Type = socket, Properties : {port=1099, name=SetOnA1, command=pl A1 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,909 : Created object model for Command( ID = 163, Type = socket, Properties : {port=1099, name=GetIntensityA1, command=getstatus A1 xdim, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,909 : Created object model for Command( ID = 164, Type = socket, Properties : {port=1099, name=GetOnOffA1, command=getstatus A1, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,909 : Created object model for Command( ID = 165, Type = socket, Properties : {port=1099, name=SetOnA11, command=pl a11 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,909 : Created object model for Command( ID = 166, Type = socket, Properties : {port=1099, name=SetOffA11, command=pl a11 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,910 : Created object model for Command( ID = 167, Type = socket, Properties : {port=1099, name=GetOnOffA11, command=getstatus a11, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,910 : Created object model for Command( ID = 168, Type = socket, Properties : {port=1099, name=SetOnA2, command=pl A2 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,910 : Created object model for Command( ID = 169, Type = socket, Properties : {port=1099, name=SetOffA2, command=pl A2 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,910 : Created object model for Command( ID = 170, Type = socket, Properties : {port=1099, name=GetOnOffA2, command=getstatus A2, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,911 : Created object model for Command( ID = 171, Type = socket, Properties : {port=1099, name=SetOffA3, command=pl A3 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,911 : Created object model for Command( ID = 172, Type = socket, Properties : {port=1099, name=GetIntensityA3, command=getstatus A3 xdim, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,911 : Created object model for Command( ID = 173, Type = socket, Properties : {port=1099, name=GetOnOffA3, command=getstatus A3, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,912 : Created object model for Command( ID = 174, Type = socket, Properties : {port=1099, name=SetDimA3, command=pl A3 dim, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,912 : Created object model for Command( ID = 175, Type = socket, Properties : {port=1099, name=SetOnA3, command=pl A3 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,912 : Created object model for Command( ID = 176, Type = socket, Properties : {port=1099, name=SetBrightA3, command=pl A3 bright, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,912 : Created object model for Command( ID = 177, Type = socket, Properties : {port=1099, name=SetIntensityA3, command=pl A3 xdim ${param}, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,913 : Created object model for Command( ID = 178, Type = socket, Properties : {port=1099, name=SetOnB5, command=pl B5 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,913 : Created object model for Command( ID = 179, Type = socket, Properties : {port=1099, name=GetOnOffB5, command=getstatus B5, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,913 : Created object model for Command( ID = 180, Type = socket, Properties : {port=1099, name=SetOffB5, command=pl B5 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,913 : Created object model for Command( ID = 181, Type = socket, Properties : {port=1099, name=SetOnA10, command=pl A10 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,914 : Created object model for Command( ID = 182, Type = socket, Properties : {port=1099, name=SetOffA10, command=pl A10 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,914 : Created object model for Command( ID = 183, Type = socket, Properties : {port=1099, name=GetOnOffA10, command=getstatus A10, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,914 : Created object model for Command( ID = 184, Type = socket, Properties : {port=1099, name=SetOffA9, command=pl A9 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,914 : Created object model for Command( ID = 185, Type = socket, Properties : {port=1099, name=SetOnA9, command=pl A9 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,915 : Created object model for Command( ID = 186, Type = socket, Properties : {port=1099, name=GetOnOffA9, command=getstatus A9, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,915 : Created object model for Command( ID = 187, Type = socket, Properties : {port=1099, name=SetOffA7, command=pl A7 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,915 : Created object model for Command( ID = 188, Type = socket, Properties : {port=1099, name=GetOnOffA7, command=gestatus A7, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,915 : Created object model for Command( ID = 189, Type = socket, Properties : {port=1099, name=SetOnA7, command=pl A7 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,916 : Created object model for Command( ID = 190, Type = socket, Properties : {port=1099, name=GetOnOffA5, command=getstatus A5, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,916 : Created object model for Command( ID = 191, Type = socket, Properties : {port=1099, name=SetOnA5, command=pl A5 on, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,916 : Created object model for Command( ID = 192, Type = socket, Properties : {port=1099, name=SetOffA5, command=pl A5 off, ipAddress=192.168.20.6}).
DEBUG 2012-08-08 08:13:17,917 : Initializing event processor: Drools Rule Engine
DEBUG 2012-08-08 08:13:17,918 : Adding Rule 'modeler_rules.drl'...
ERROR 2012-08-08 08:13:18,340 : Error in rule definition 'modeler_rules.drl' : null
java.lang.ArrayStoreException
        at java.lang.System.arraycopy(Native Method)
        at java.util.ArrayList.toArray(ArrayList.java:306)
        at org.drools.compiler.PackageBuilder.getErrors(PackageBuilder.java:1274)
        at org.drools.builder.impl.KnowledgeBuilderImpl.getErrors(KnowledgeBuilderImpl.java:70)
        at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:508)
        at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)
        at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)
        at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:615)
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
        at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)
        at org.openremote.controller.action.ConfigManageController.refreshController(ConfigManageController.java:176)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:434)
        at org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:372)
        at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
        at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:45)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:806)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:736)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:396)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
ERROR 2012-08-08 08:13:18,343 : Cannot start event processor 'Drools Rule Engine' : null
java.lang.ArrayStoreException
        at java.lang.System.arraycopy(Native Method)
        at java.util.ArrayList.toArray(ArrayList.java:306)
        at org.drools.compiler.PackageBuilder.getErrors(PackageBuilder.java:1274)
        at org.drools.builder.impl.KnowledgeBuilderImpl.getErrors(KnowledgeBuilderImpl.java:70)
        at org.drools.builder.impl.KnowledgeBuilderImpl.newKnowledgeBase(KnowledgeBuilderImpl.java:53)
        at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:532)
        at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)
        at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)
        at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:615)
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
        at org.openremote.controller.service.Deployer.softRestart(Deployer.java:373)
        at org.openremote.controller.action.ConfigManageController.refreshController(ConfigManageController.java:176)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:434)
        at org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:372)
        at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
        at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:45)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:806)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:736)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:396)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
DEBUG 2012-08-08 08:13:18,358 : Created object model for sensor 'SenseOnOffA8' (ID = '196').
DEBUG 2012-08-08 08:13:18,367 : Created object model for sensor 'SenseOnOffA2' (ID = '197').
DEBUG 2012-08-08 08:13:18,374 : Created object model for sensor 'SenseOnOffA9' (ID = '198').
DEBUG 2012-08-08 08:13:18,381 : Created object model for sensor 'SenseOnOffA10' (ID = '199').
DEBUG 2012-08-08 08:13:18,387 : Created object model for sensor 'SenseOnOffB5' (ID = '200').
DEBUG 2012-08-08 08:13:18,393 : Created object model for sensor 'SenseIntensityA3' (ID = '201').
DEBUG 2012-08-08 08:13:18,400 : Created object model for sensor 'SenseOnOffA7' (ID = '202').
DEBUG 2012-08-08 08:13:18,406 : Created object model for sensor 'Heure Sensor' (ID = '203').
DEBUG 2012-08-08 08:13:18,412 : Created object model for sensor 'SenseIntensityA1' (ID = '204').
DEBUG 2012-08-08 08:13:18,418 : Created object model for sensor 'SenseOnOffA1' (ID = '205').
DEBUG 2012-08-08 08:13:18,425 : Created object model for sensor 'DateTime Jour Sensor' (ID = '206').
DEBUG 2012-08-08 08:13:18,432 : Created object model for sensor 'SenseOnOffA5' (ID = '207').
DEBUG 2012-08-08 08:13:18,440 : Created object model for sensor 'DisplayDate Sensor' (ID = '208').
DEBUG 2012-08-08 08:13:18,446 : Created object model for sensor 'SenseOnOffA3' (ID = '209').
DEBUG 2012-08-08 08:13:18,452 : Created object model for sensor 'SenseOnOffB11' (ID = '210').
DEBUG 2012-08-08 08:13:18,459 : Created object model for sensor 'SenseOnOffA11' (ID = '255').
DEBUG 2012-08-08 08:13:18,465 : Created object model for sensor 'SenseOnOffC1' (ID = '257').
INFO 2012-08-08 08:13:18,465 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA1', ID = '205')
INFO 2012-08-08 08:13:18,466 : Registered sensor : Switch Sensor (Name = 'SenseIntensityA1', ID = '204')
INFO 2012-08-08 08:13:18,467 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA5', ID = '207')
INFO 2012-08-08 08:13:18,468 : Registered sensor : Sensor (Name = 'DateTime Jour Sensor', ID = '206', State Mappings: {})
INFO 2012-08-08 08:13:18,472 : Registered sensor : Switch Sensor (Name = 'SenseIntensityA3', ID = '201')
INFO 2012-08-08 08:13:18,475 : Registered sensor : Switch Sensor (Name = 'SenseOnOffB5', ID = '200')
INFO 2012-08-08 08:13:18,478 : Registered sensor : Sensor (Name = 'Heure Sensor', ID = '203', State Mappings: {})
INFO 2012-08-08 08:13:18,482 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA7', ID = '202')
INFO 2012-08-08 08:13:18,487 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA2', ID = '197')
INFO 2012-08-08 08:13:18,488 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA8', ID = '196')
INFO 2012-08-08 08:13:18,489 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA10', ID = '199')
INFO 2012-08-08 08:13:18,490 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA9', ID = '198')
INFO 2012-08-08 08:13:18,495 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA11', ID = '255')
INFO 2012-08-08 08:13:18,499 : Registered sensor : Switch Sensor (Name = 'SenseOnOffC1', ID = '257')
INFO 2012-08-08 08:13:18,502 : Registered sensor : Sensor (Name = 'DisplayDate Sensor', ID = '208', State Mappings: {})
INFO 2012-08-08 08:13:18,503 : Registered sensor : Switch Sensor (Name = 'SenseOnOffA3', ID = '209')
INFO 2012-08-08 08:13:18,506 : Registered sensor : Switch Sensor (Name = 'SenseOnOffB11', ID = '210')
INFO 2012-08-08 08:13:18,516 : Startup complete.
</pre>
</div></div>

<p>Thanks,</p>

<p>Chirogocki</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by chirogocki at Aug 08, 2012 11:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449686"></a>
                                    <font class="smallfont"><p>This is likely caused by an error in the rule file.</p>

<p>Can you try and replace the modeler_rules.drl file with an empty file? (or maybe delete it altogether if the controller won't complain?)</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 08, 2012 11:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449687"></a>
                                    <font class="smallfont"><p>Thanks, this is it !<br/>
I've done this yesterday but I missed something...</p>

<p>I move the "modeler_rules.drl" in "modeler_rules.drl.old" and now I have no error I my boot.log and everything is good :<br/>
-----------------------------<br/>
DEBUG 2012-08-08 12:05:58,218 : Initializing event processor: Drools Rule Engine<br/>
INFO 2012-08-08 12:05:58,244 : No rule definitions found in '/volume1/@appstore/OpenRemote/webapps/controller/rules'.<br/>
INFO 2012-08-08 12:05:58,245 : Initialized event processor : Drools Rule Engine<br/>
-----------------------------</p>

<p>....except that my rules won't work....</p>

<p>Can I ask you to help me with my modeler_rules.drl ?</p>

<p>I read a lot of thread and documentation over drool but this is a little bit difficult... </p>

<p>I try to automate some actions depending on time and sensor state :<br/>
<a href="attachments/20449679/20742168.txt">modeler_rules</a></p>

<p>Thanks a lot</p>

<p>Chirogocki</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by chirogocki at Aug 08, 2012 12:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449688"></a>
                                    <font class="smallfont"><p>Drools expects a 6 field cron expression, so change your timers to something like this:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre> timer (cron: 0 9 * * * ?)
</pre>
</div></div>

<p>More info on the additional question mark character is on Wikipedia: <a href="http://en.wikipedia.org/wiki/Cron#Special_characters">http://en.wikipedia.org/wiki/Cron#Special_characters</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 08, 2012 12:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449689"></a>
                                    <font class="smallfont"><p>Thanks a lot !<br/>
It works, I have no error and my rules is running.<br/>
Unfortunately, it doesn't work as I exepected ...<br/>
My rule "VMC OFF de 8h00 a 21h00" is running continuously :</p>

<p>08/08 12:17:23 Tx PL House: B Func: Off<br/>
08/08 12:17:24 Tx PL HouseUnit: B5<br/>
08/08 12:17:24 Tx PL House: B Func: Off<br/>
08/08 12:17:25 Tx PL HouseUnit: B5<br/>
08/08 12:17:25 Tx PL House: B Func: Off<br/>
08/08 12:17:26 Tx PL HouseUnit: B5<br/>
08/08 12:17:26 Tx PL House: B Func: Off<br/>
08/08 12:17:27 Tx PL HouseUnit: B5<br/>
08/08 12:17:27 Tx PL House: B Func: Off<br/>
08/08 12:17:28 Tx PL HouseUnit: B5<br/>
08/08 12:17:28 Tx PL House: B Func: Off<br/>
.......</p>

<p>I think that the B5 Off command will be sent when two conditions are OK : time between 8am and 9pm + a change of state of C1 On-&gt;Off :</p>

<p>rule "VMC OFF de 8h00 a 21h00"<br/>
  timer (cron: * 8-21 * * * ?)<br/>
when<br/>
  eval(true)<br/>
  Switch( source == "SenseOnOffC1", value == "off")<br/>
then<br/>
  execute.command("SetOffB5");<br/>
end</p>

<p>But apparently not ...</p>

<p>I will try other way when I can think about it but anyway : Thanks a lot !</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by chirogocki at Aug 08, 2012 13:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449702"></a>
                                    <font class="smallfont"><p>You are correct. I discussed a similar problem here: <a href="http://www.openremote.org/display/forums/One+more+question+about+rules.?focusedCommentId=20449599#comment-20449599">http://www.openremote.org/display/forums/One+more+question+about+rules.?focusedCommentId=20449599#comment-20449599</a><br/>
Also the C1 On-&gt;Off triggers the rule.<br/>
I am not a rule expert either and don't have a solution yet.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 09, 2012 08:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449711"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>


<p>2 news, one good and one bad...</p>

<p>First the bad one : my AD10 module is dead....<br/>
I think a problem in my crontab for B5 as flooded the module with Off command every second (for approximatevely an hour)<br/>
Last night I saw the module not responding at any order (RF and PL, with openremote shutdown) the "ON" led in front of the module is always red... it's dead</p>


<p>Second the good one : I understand a lot of thing with these experiences <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
The "C1 on-&gt;off" is doing a : "getstatus C1" with the cron : every minute (now...before it was every second....), if it is ON it trigger B5 ON<br/>
I misunderstand the command. I don't want to have a state of a module every minute, I want to intercept a change of state...(C1 ON or OFF when it happens)<br/>
So now I think my command is wrong, I won't use "getstatus" but something else...</p>

<p>I will learn here  : <a href="http://sourceforge.net/apps/mediawiki/mochad/index.php?title=Mochad_Reference">http://sourceforge.net/apps/mediawiki/mochad/index.php?title=Mochad_Reference</a></p>

<p>If you have an idea, tell me <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by chirogocki at Aug 09, 2012 11:23
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:44</font></td>
		    </tr>
	    </table>
    </body>
</html>