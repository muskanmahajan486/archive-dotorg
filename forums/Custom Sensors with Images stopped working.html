<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Custom Sensors with Images stopped working</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Custom Sensors with Images stopped working
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Sep 15, 2014 by <font color="#0050B2">jacksmi</font>.
				    </div>

				    <p>I had several custom sensors that were linked to images. They were working just fine until a week ago. Now none of them work. The problem appears to be that the state information is not being set in the link tag for the images anymore. As a test I added these sensors to a label and what I get back is the "value" text not the "name" text. I created a new and simpler sensor to test this with a new image and still no luck. Below is the snippets from the controller and panel xml that is being generated.</p>

<p>from controller xml</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">
    <span class="code-tag">&lt;image id=<span class="code-quote">"3710"</span>&gt;</span>
      <span class="code-tag">&lt;include type=<span class="code-quote">"sensor"</span> ref=<span class="code-quote">"240653"</span> /&gt;</span>
    <span class="code-tag">&lt;/image&gt;</span>
    <span class="code-tag">&lt;sensor id=<span class="code-quote">"240653"</span> name=<span class="code-quote">"weatherIcon"</span> type=<span class="code-quote">"custom"</span>&gt;</span>
      <span class="code-tag">&lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"3716"</span> /&gt;</span>
      <span class="code-tag">&lt;state name=<span class="code-quote">"rainyIcon"</span> value=<span class="code-quote">"rainy"</span> /&gt;</span>
      <span class="code-tag">&lt;state name=<span class="code-quote">"cloudyIcon"</span> value=<span class="code-quote">"cloudy"</span> /&gt;</span>
    <span class="code-tag">&lt;/sensor&gt;</span>
    <span class="code-tag">&lt;command id=<span class="code-quote">"3716"</span> protocol=<span class="code-quote">"http"</span>&gt;</span>
      <span class="code-tag">&lt;property name=<span class="code-quote">"pollingInterval"</span> value=<span class="code-quote">"10m"</span> /&gt;</span>
      <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"http://127.0.0.1:18581/controller/wunder.xml"</span> /&gt;</span>
      <span class="code-tag">&lt;property name=<span class="code-quote">"xpath"</span> value=<span class="code-quote">"//response/current_observation/icon"</span> /&gt;</span>
      <span class="code-tag">&lt;property name=<span class="code-quote">"name"</span> value=<span class="code-quote">"weatherIcon"</span> /&gt;</span>
    <span class="code-tag">&lt;/command&gt;</span>
</pre>
</div></div>
<p>from panel xml</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">
      <span class="code-tag">&lt;absolute left=<span class="code-quote">"634"</span> top=<span class="code-quote">"1339"</span> width=<span class="code-quote">"28"</span> height=<span class="code-quote">"30"</span>&gt;</span>
        <span class="code-tag">&lt;image id=<span class="code-quote">"3710"</span> src=<span class="code-quote">"OpenRemote.Logo.30x32.png"</span>&gt;</span>
          <span class="code-tag">&lt;link type=<span class="code-quote">"sensor"</span> ref=<span class="code-quote">"240653"</span> /&gt;</span>
        <span class="code-tag">&lt;/image&gt;</span>                                                            &lt;-- NOTE no state information
      <span class="code-tag">&lt;/absolute&gt;</span>
</pre>
</div></div>
<p>NOTE: The image has a png attached to each state from the sensor but those images do not appear in a state list off of the image.</p>

<p><img src="attachments/22888764/23036623.png" align="absmiddle" border="0"/></p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888764/23036623.png">2014-09-15_13h17_33.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22888778"></a>
                                    <font class="smallfont"><p>Thank you for reporting.</p>

<p>You're using Pro 1.0.14 right ?<br/>
I'll take a look at it and try to reproduce with your sample and will let you know.</p>

<p>Eric</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Sep 16, 2014 07:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888794"></a>
                                    <font class="smallfont"><p>That is correct Pro 1.0.14</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jacksmi at Sep 16, 2014 13:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888848"></a>
                                    <font class="smallfont"><p>Just deployed 1.0.15 Pro Designer, this should fix the issue. No change on the controller side.</p>

<p>Please let you know if it works for you. Thanks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Sep 18, 2014 09:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888863"></a>
                                    <font class="smallfont"><p>That fixed it. Thank you!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jacksmi at Sep 18, 2014 22:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888936"></a>
                                    <font class="smallfont"><p>i seem to be having a similar but slightly different problem its with sensor text ive set like open and close and i get on and off. just updated to 1.0.14<br/>
and i checked my custom sensor images are broken too . any ideas?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jon.gillioz at Sep 22, 2014 13:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888960"></a>
                                    <font class="smallfont"><p>Yes, there is another issue with the switch sensor that I need to look into.<br/>
Close to the top of my list but been too busy to address for now. Will happen soon.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Sep 23, 2014 13:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593058"></a>
                                    <font class="smallfont"><p>Switch sensor issue should now be fixed with the Pro 1.0.16 release that has been deployed.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 13, 2014 12:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593398"></a>
                                    <font class="smallfont"><p>BTW. I did a controller sync on a fresh OpenRemote install and noticed that none of the custom sensor images were copied. I manually copied the images and all worked fine.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jacksmi at Oct 29, 2014 18:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593425"></a>
                                    <font class="smallfont"><p>Just wanted to double check when you did experience that.</p>

<p>There is a fix in Designer Pro 1.0.17 that solves this issue, fix went live 25/10.</p>

<p>If you still have the issue, could you describe exactly what you designed so I can try to reproduce.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 31, 2014 09:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593607"></a>
                                    <font class="smallfont"><p>Sorry for the late reply I was traveling. I did my test 2 days before your fix. Version 1.0.17 fixed this.  <br/>
Thanks Again</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by john.smith at Nov 09, 2014 15:22
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:35</font></td>
		    </tr>
	    </table>
    </body>
</html>