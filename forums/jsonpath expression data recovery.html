<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : jsonpath expression data recovery</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : jsonpath expression data recovery
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 12, 2016 by <font color="#0050B2">moltes</font>.
				    </div>

				    <p>Hello,</p>

<p>I created a sensor with a command:<br/>
Protocol             : HTTP <br/>
Url                  : <a href="http://MYIP:8080/json.htm?type=devices&amp;rid=41">http://MYIP:8080/json.htm?type=devices&amp;rid=41</a><br/>
Http Method          : GET<br/>
Polling interval     : 60s<br/>
jsonpath expression  : $.result\*.Data</p>

<p>IN IE Response:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">{ <span class="code-quote">"ActTime"</span> : 1455304067, <span class="code-quote">"ServerTime"</span> : <span class="code-quote">"2016-02-12 20:07:47"</span>, <span class="code-quote">"Sunrise"</span> : <span class="code-quote">"07:57"</span>, <span class="code-quote">"Sunset"</span> : <span class="code-quote">"17:48"</span>, <span class="code-quote">"result"</span> : [ { <span class="code-quote">"AddjMulti"</span> : 1.0, <span class="code-quote">"AddjMulti2"</span> : 1.0, <span class="code-quote">"AddjValue"</span> : 0.0, <span class="code-quote">"AddjValue2"</span> : 0.0, <span class="code-quote">"Barometer"</span> : 994, <span class="code-quote">"BatteryLevel"</span> : 255, <span class="code-quote">"CustomImage"</span> : 0, <span class="code-quote">"Data"</span> : <span class="code-quote">"0.4 C, 82 %, 994 hPa"</span>, <span class="code-quote">"Description"</span> : <span class="code-quote">"", "</span>DewPoint<span class="code-quote">" : "</span>-2.31<span class="code-quote">", "</span>Favorite<span class="code-quote">" : 0, "</span>Forecast<span class="code-quote">" : 4, "</span>ForecastStr<span class="code-quote">" : "</span>Rain<span class="code-quote">", "</span>HardwareID<span class="code-quote">" : 6, "</span>HardwareName<span class="code-quote">" : "</span>Météo<span class="code-quote">", "</span>HardwareType<span class="code-quote">" : "</span>Weather Underground<span class="code-quote">", "</span>HardwareTypeVal<span class="code-quote">" : 14, "</span>HaveTimeout<span class="code-quote">" : <span class="code-keyword">false</span>, "</span>Humidity<span class="code-quote">" : 82, "</span>HumidityStatus<span class="code-quote">" : "</span>Wet<span class="code-quote">", "</span>ID<span class="code-quote">" : "</span>0001<span class="code-quote">", "</span>LastUpdate<span class="code-quote">" : "</span>2016-02-12 20:01:14<span class="code-quote">", "</span>Name<span class="code-quote">" : "</span>Marchin<span class="code-quote">", "</span>Notifications<span class="code-quote">" : "</span><span class="code-keyword">false</span><span class="code-quote">", "</span>PlanID<span class="code-quote">" : "</span>0<span class="code-quote">", "</span>PlanIDs<span class="code-quote">" : [ 0 ], "</span>Protected<span class="code-quote">" : <span class="code-keyword">false</span>, "</span>ShowNotifications<span class="code-quote">" : <span class="code-keyword">true</span>, "</span>SignalLevel<span class="code-quote">" : "</span>-<span class="code-quote">", "</span>SubType<span class="code-quote">" : "</span>THB1 - BTHR918, BTHGN129<span class="code-quote">", "</span>Temp<span class="code-quote">" : 0.40, "</span>Timers<span class="code-quote">" : "</span><span class="code-keyword">false</span><span class="code-quote">", "</span>Type<span class="code-quote">" : "</span>Temp + Humidity + Baro<span class="code-quote">", "</span>TypeImg<span class="code-quote">" : "</span>temperature<span class="code-quote">", "</span>Unit<span class="code-quote">" : 1, "</span>Used<span class="code-quote">" : 1, "</span>XOffset<span class="code-quote">" : "</span>0<span class="code-quote">", "</span>YOffset<span class="code-quote">" : "</span>0<span class="code-quote">", "</span>forecast_url<span class="code-quote">" : "</span><span class="code-quote">", "</span>idx<span class="code-quote">" : "</span>41<span class="code-quote">" } ], "</span>status<span class="code-quote">" : "</span>OK<span class="code-quote">", "</span>title<span class="code-quote">" : "</span>Devices" } </pre>
</div></div>

<p>on my "Data" I have 3 data but I will recover only the first ... What I have to add to my jsonpath expression code ? but I do not want use $.result\*.Temp because I will miss so the C or The % </p>


<p>somebody for help me?</p>

<p>Thxxxxx</p>

<p>Dany</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23605644"></a>
                                    <font class="smallfont"><p>This is not correct json. Please surround the json in your post with {code}...{code} tags, so I can see it and help. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 12, 2016 17:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605648"></a>
                                    <font class="smallfont"><p>hi </p>

<p>thank you</p>

<p>my code is good now?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by moltes at Feb 12, 2016 19:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605649"></a>
                                    <font class="smallfont"><p>Well lets first layout the json a bit nicer (with Notepad++ JSFormat):</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">{
	<span class="code-quote">"ActTime"</span> : 1455304067,
	<span class="code-quote">"ServerTime"</span> : <span class="code-quote">"2016-02-12 20:07:47"</span>,
	<span class="code-quote">"Sunrise"</span> : <span class="code-quote">"07:57"</span>,
	<span class="code-quote">"Sunset"</span> : <span class="code-quote">"17:48"</span>,
	<span class="code-quote">"result"</span> : [{
			<span class="code-quote">"AddjMulti"</span> : 1.0,
			<span class="code-quote">"AddjMulti2"</span> : 1.0,
			<span class="code-quote">"AddjValue"</span> : 0.0,
			<span class="code-quote">"AddjValue2"</span> : 0.0,
			<span class="code-quote">"Barometer"</span> : 994,
			<span class="code-quote">"BatteryLevel"</span> : 255,
			<span class="code-quote">"CustomImage"</span> : 0,
			<span class="code-quote">"Data"</span> : <span class="code-quote">"0.4 C, 82 %, 994 hPa"</span>,
			<span class="code-quote">"Description"</span> : "",
			<span class="code-quote">"DewPoint"</span> : <span class="code-quote">"-2.31"</span>,
			<span class="code-quote">"Favorite"</span> : 0,
			<span class="code-quote">"Forecast"</span> : 4,
			<span class="code-quote">"ForecastStr"</span> : <span class="code-quote">"Rain"</span>,
			<span class="code-quote">"HardwareID"</span> : 6,
			<span class="code-quote">"HardwareName"</span> : <span class="code-quote">"Météo"</span>,
			<span class="code-quote">"HardwareType"</span> : <span class="code-quote">"Weather Underground"</span>,
			<span class="code-quote">"HardwareTypeVal"</span> : 14,
			<span class="code-quote">"HaveTimeout"</span> : <span class="code-keyword">false</span>,
			<span class="code-quote">"Humidity"</span> : 82,
			<span class="code-quote">"HumidityStatus"</span> : <span class="code-quote">"Wet"</span>,
			<span class="code-quote">"ID"</span> : <span class="code-quote">"0001"</span>,
			<span class="code-quote">"LastUpdate"</span> : <span class="code-quote">"2016-02-12 20:01:14"</span>,
			<span class="code-quote">"Name"</span> : <span class="code-quote">"Marchin"</span>,
			<span class="code-quote">"Notifications"</span> : <span class="code-quote">"<span class="code-keyword">false</span>"</span>,
			<span class="code-quote">"PlanID"</span> : <span class="code-quote">"0"</span>,
			<span class="code-quote">"PlanIDs"</span> : [0],
			<span class="code-quote">"Protected"</span> : <span class="code-keyword">false</span>,
			<span class="code-quote">"ShowNotifications"</span> : <span class="code-keyword">true</span>,
			<span class="code-quote">"SignalLevel"</span> : <span class="code-quote">"-"</span>,
			<span class="code-quote">"SubType"</span> : <span class="code-quote">"THB1 - BTHR918, BTHGN129"</span>,
			<span class="code-quote">"Temp"</span> : 0.40,
			<span class="code-quote">"Timers"</span> : <span class="code-quote">"<span class="code-keyword">false</span>"</span>,
			<span class="code-quote">"Type"</span> : <span class="code-quote">"Temp + Humidity + Baro"</span>,
			<span class="code-quote">"TypeImg"</span> : <span class="code-quote">"temperature"</span>,
			<span class="code-quote">"Unit"</span> : 1,
			<span class="code-quote">"Used"</span> : 1,
			<span class="code-quote">"XOffset"</span> : <span class="code-quote">"0"</span>,
			<span class="code-quote">"YOffset"</span> : <span class="code-quote">"0"</span>,
			<span class="code-quote">"forecast_url"</span> : "",
			<span class="code-quote">"idx"</span> : <span class="code-quote">"41"</span>
		}
	],
	<span class="code-quote">"status"</span> : <span class="code-quote">"OK"</span>,
	<span class="code-quote">"title"</span> : <span class="code-quote">"Devices"</span>
}
</pre>
</div></div>

<p>With JsonPath I can only retreive the full field value (0.4) like you have done for "Temp",<br/>
or with jsonpath:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">$.result..Data</pre>
</div></div>
<p>I can extract the complete Data field (mind the two dots between result and Data)</p>

<p><a href="http://jsonpath.com/">http://jsonpath.com/</a> is a good online tool to experiment with jsonpath experessions</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 12, 2016 22:18
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:33</font></td>
		    </tr>
	    </table>
    </body>
</html>