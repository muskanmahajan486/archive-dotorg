<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Problem Discovering Z-Wave Devices</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Problem Discovering Z-Wave Devices
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 19, 2013 by <font color="#0050B2">dgltx</font>.
				    </div>

				    <p>I have added a Yale Lock to my Aeon Z Stick and try to discover this device via the log File as described in 
<a href="http://www.openremote.org/display/docs/Discover+Controller+Z-Wave+Devices">http://www.openremote.org/display/docs/Discover+Controller+Z-Wave+Devices</a><br/>
I am running the controller on Ubuntu<br/>
As per instructions I have a completely empty panel in the designer, no devices are configured.<br/>
The Zwave controller is configured with RXTX and port /dev/ttyUSB0</p>

<p>The zwave.log reads:</p>

<p>INFO 2013-05-19 00:29:02,889 (1-WIRE): Reader thread asked to start<br/>
INFO 2013-05-19 00:29:02,891 (1-WIRE): Writer thread asked to start<br/>
INFO 2013-05-19 00:29:02,892 (1-WIRE): Writer thread starting<br/>
DEBUG 2013-05-19 00:29:02,893 (1-WIRE): sending: 01 08 00 54 00 01 01 01 01 a3 <br/>
DEBUG 2013-05-19 00:29:02,894 (1-WIRE): Message lock exists. Frame waiting: 01 03 00 02 fe <br/>
DEBUG 2013-05-19 00:29:02,898 (1-WIRE): received: 06 01 04 01 54 00 ae <br/>
DEBUG 2013-05-19 00:29:02,899 (1-WIRE): Controller registered as SUC/SIS<br/>
DEBUG 2013-05-19 00:29:02,944 (1-WIRE): sending: 06 <br/>
DEBUG 2013-05-19 00:29:02,945 (1-WIRE): sending: 01 03 00 02 fe <br/>
DEBUG 2013-05-19 00:29:02,949 (1-WIRE): received: 06 <br/>
DEBUG 2013-05-19 00:29:02,995 (1-WIRE): received: 01 25 01 02 05 08 1d 21 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 03 01 ea <br/>
DEBUG 2013-05-19 00:29:02,996 (1-WIRE): sending: 06 <br/>
DEBUG 2013-05-19 00:29:02,996 (1-WIRE): Node id: 1 discovered<br/>
DEBUG 2013-05-19 00:29:02,996 (1-WIRE): Node id: 6 discovered<br/>
DEBUG 2013-05-19 00:29:02,997 (1-WIRE): sending: 01 04 00 41 01 bb <br/>
DEBUG 2013-05-19 00:29:02,998 (1-WIRE): Message lock exists. Frame waiting: 01 04 00 41 06 bc <br/>
DEBUG 2013-05-19 00:29:03,001 (1-WIRE): received: 06 01 09 01 41 92 16 00 02 02 01 33 <br/>
DEBUG 2013-05-19 00:29:03,048 (1-WIRE): sending: 06 <br/>
DEBUG 2013-05-19 00:29:03,049 (1-WIRE): sending: 01 04 00 41 06 bc <br/>
DEBUG 2013-05-19 00:29:03,051 (1-WIRE): received: 06 <br/>
DEBUG 2013-05-19 00:29:03,055 (1-WIRE): received: 01 09 01 41 53 dc 00 04 40 03 7e <br/>
DEBUG 2013-05-19 00:29:03,056 (1-WIRE): sending: 06 <br/>
ERROR 2013-05-19 00:29:03,140 (1-WIRE): Could not create device class for node: 6<br/>
java.lang.InstantiationException<br/>
	at sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)<br/>
	at java.lang.reflect.Constructor.newInstance(Constructor.java:532)<br/>
	at org.openremote.controller.protocol.zwave.model.Controller.createDevice(Controller.java:149)<br/>
	at org.openremote.controller.protocol.zwave.model.Controller.handleResponseMessage(Controller.java:92)<br/>
	at org.openremote.controller.protocol.zwave.model.ZWaveNode.handleZWaveResponseEvent(ZWaveNode.java:155)<br/>
	at org.openremote.controller.protocol.zwave.ZWaveGateway.fireZWaveResponseEvent(ZWaveGateway.java:89)<br/>
	at org.openremote.controller.protocol.zwave.ZWaveGatewayRxtx$ZWaveReaderThread.run(ZWaveGatewayRxtx.java:266)</p>


<p>Questions:</p>
<ul class="alternate" type="square">
	<li>Why do (1-Wire) messages appear in the zwave log file?<br/>
The log4j.properties says regarding 1-wire logging:</li>
</ul>


<p>log4j.appender.onewire-file = org.apache.log4j.RollingFileAppender</p>
<ol>
	<li>Location of the log file<br/>
log4j.appender.onewire-file.File = ../logs/onewire/onewire.log<br/>
However the onewire.log is empty</li>
</ol>


<ul class="alternate" type="square">
	<li>Any ideas how to fix the error "Could not create device class for node: 6" ?</li>
</ul>


<p>I furthermore get the following warning when the controller starts:<br/>
WARNING:  RXTX Version mismatch<br/>
	Jar version = RXTX-2.2pre1<br/>
	native lib Version = RXTX-2.1-7</p>

<p>Any help is appreciated.</p>

<p>Thanks,<br/>
Dennis</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22414557"></a>
                                    <font class="smallfont"><p>Hi.</p>

<p>I am guessing that your log4j.properties is not quite right</p>

<p>You should have a line that says:</p>

<p>log4j.appender.zwave-file.layout.ConversionPattern = %p %d (Z-Wave): %m%n</p>

<p>I guess that yours says "1-WIRE" and not "Z-Wave"</p>

<p>However you have a more serious problem. OpenRemote currently only supports switches, dimmers and thermostats. There is no support for locks and I am not aware of anybody working on it at the moment.</p>


<p>Phil</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by philetaylor at May 19, 2013 21:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414576"></a>
                                    <font class="smallfont"><p>Regarding the log Phil is correct.<br/>
There was a copy paste error in log4j.properties. Just change the line how Phil printed it.</p>

<p>The RXTX warning can be ignored. It's just that the native .so has a different version the the .jar file.</p>

<p>Locks are not supported yet.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 20, 2013 18:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414604"></a>
                                    <font class="smallfont"><p>Thanks for the help.<br/>
Too bad that locks are not supported (yet?), I really like the OR approach.<br/>
As locks are an integral part of most home automation systems is anyone thinking of implementing it soon?<br/>
How difficult would it be to do, there is some command description of the Yale lock available at:
<a href="http://www.pepper1.net/zwavedb/uploads/resources/513c90984733a978c86885d00c0a99ef40dd8b72.pdf">http://www.pepper1.net/zwavedb/uploads/resources/513c90984733a978c86885d00c0a99ef40dd8b72.pdf</a><br/>
If I would only need status (locked/unlocked) and the functions (lock/unlock) could this be configured with the switches and sensors available now in OR? </p>

<p>Thanks,<br/>
Dennis</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dgltx at May 21, 2013 03:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414605"></a>
                                    <font class="smallfont"><blockquote><p>If I would only need status (locked/unlocked) and the functions (lock/unlock) could this be configured with the switches and sensors available now in OR? </p></blockquote>
<p>I don't think it will work. Locks are a separate Command class within Z-Wave.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 21, 2013 06:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414613"></a>
                                    <font class="smallfont"><p>This lock requires Z-Wave security (which makes sense for a lock <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> ) but this is not available in our Z-Wave stack at all.<br/>
Even if it would be easy to add a new CommandClass for the lock, adding the security related features is a huge effort.<br/>
So it would probably take a while until this is supported. Unless you are a Java developer and would like to give it a try <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 21, 2013 08:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414616"></a>
                                    <font class="smallfont"><p>Z-Wave doorlocks including security are supported now on <a href="http://razberry.zwave.me">Razberry</a> with their latest software of 17-5-2013. I don't know about the Vera. For both there are descriptions how to integrate with OR </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 21, 2013 08:54
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:42</font></td>
		    </tr>
	    </table>
    </body>
</html>