<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Regex Parsing & Rules question</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Regex Parsing & Rules question
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 22, 2012 by <font color="#0050B2">mbarne36</font>.
				    </div>

				    <p>Hi All</p>

<p>I wanted to check my understanding of something, and where better to go than to the noble community....?</p>

<p>I have built a security system with sensors, webcam, email and sms triggers and so forth. The engine behind this is a Raspberry Pi running my own Python code. The GUI for the system is an Android Tablet running OpenRemote.</p>

<p>My GUI has a virtual keypad for entering access codes, and also lots of status indicators for the zones and armed status, time, date, log and so forth.</p>

<p>Here's my question.... I have sensors on my OpenRemote panel to pick up the status of "stuff" on the Pi. Al works perfectly. I am sending TCP commands, and the Pi is programmed to respond with on/off as appropriate.</p>

<p>However, my worry is the amount of traffic on the network because I am sending about 50 queries to get updated zone status and these seem to be going out over TCP poll every second.</p>

<p>so my question is this... because I am in complete control over the protocol, can I have a single Status Query command, and then parse that through Regx (or something) to extract the many different conditions. Then I only need to send one query and get a full status string back containing the embedded status of each switch - i.e. can I use multiple Regx parsing on a single return string? Then, I would only need to send one Status Command and get one, say, 50 byte reply every second.</p>

<p>Make sense?</p>

<p>(is Rules the right way to do this?... I confess that whilst I can read the syntax requirements for Rules, I can;t find any documentation or forum threads that actually tell me how to set one up).</p>

<p>thanks in advance.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21037742"></a>
                                    <font class="smallfont"><p>Hi Martyn,</p>

<p>You really need protocol scripting to do what you want; this is on the to do list.</p>

<p>If you are using a custom protocol to communicate with your Pi then you could try using UDP broadcasts to transmit messages when status changes and then use UDP Listener protocol in OR to pickup the broadcasts. That would avoid the excessive polling.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 24, 2012 12:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037751"></a>
                                    <font class="smallfont"><p>Nice idea Richard, thanks. I didn't have much luck with the udp listener last time I tried it with lightwaverf, but perhaps as I am in full control of the protocol here I might have more luck.</p>

<p>Will try. Thanks for the suggestion.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mbarne36 at Nov 24, 2012 18:34
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:45</font></td>
		    </tr>
	    </table>
    </body>
</html>