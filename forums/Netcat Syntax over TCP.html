<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Netcat Syntax over TCP</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Netcat Syntax over TCP
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 28, 2011 by <font color="#0050B2">jammastercd</font>.
				    </div>

				    <p>I recently got the OR Controller installed and running on a MythTV backend in my basement (based on Ubuntu 11.04).  I also have the OpenRemote app installed on my Android phone, and I can sync a panel I created to the server and see it on my phone.</p>

<p>At this point I'm ready to begin basic control of some of my A/V equipment.  The first component I'm working with is a home-built MythTV frontend.  According to MythTV documentation, you can control it via a frontend control socket, which is basically netcat over TCP (<a href="http://www.mythtv.org/wiki/Frontend_control_socket">http://www.mythtv.org/wiki/Frontend_control_socket</a>).  Based on this information, I've tried adding commands to my MythTV device in the Boss Online Designer using the TCP/IP protocol.  For the attributes, I've used the IP address I assigned to the machine and the standard port for MythTV control (6546).  I also set MythTV to allow control over port 6546 and verified it is working via another Android app named MythMote.</p>

<p>What I'm having trouble with is the Command syntax in the Online Designer.  According to the MythTV documentation, an example of a command should look something like:<br/>
nc &lt;ip-address&gt; 6546 -i 1 key up</p>

<p>I also tried adding the "null |" to the beginning of the command:<br/>
null | nc &lt;ip-address&gt; 6546 -i 1 key up</p>

<p>Finally, I tried a simpler option (assuming the other text, such as IP address and port, would be added based on the attributes I added):<br/>
key up</p>

<p>None of these options caused an action on my MythTV frontend.  Any thoughts on the syntax I should be using in the Command box of Online Designer (including quotes, special characters, etc.)?</p>

<p>Thanks!</p>

<p>P.S.  I apologize if this is a noob question.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-17956937"></a>
                                    <font class="smallfont"><p>As an update on my issue, I am able to successfully control my MythTV frontend by opening a terminal in another computer and sending a netcat command, such as:<br/>
nc &lt;ip-address&gt; 6546 jump mythtvideo</p>

<p>It seems I should be able to enter a similar line of text into the Command line of the TCIP/IP protocol in Online Designer, but I haven't had any luck.  Any thoughts on syntax would be much appreciated!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jammastercd at Jul 01, 2011 22:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17957166"></a>
                                    <font class="smallfont"><p>Were you able to find a solution to this?</p>

<p>I think Marcus originally added the protocols because he wanted to use MythTV &#8211; but he may have been using telnet instead.</p>

<p>Anyway, we could use a howto with just MythTV specifics in it (the appropriate commands and where to enter them).</p>

<p>Any volunteers?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 11, 2011 13:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17957176"></a>
                                    <font class="smallfont"><p>I was using the OpenRemote telnet protocol to control my MythTV clients. Did you try that?<br/>
Right now I don't have my MythTV setup running, but let me know if you have any questions.<br/>
Just looked at the MythTV website and it looks like they dropped the telnet support.<br/>
How does your controller.xml look like?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 12, 2011 15:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17957178"></a>
                                    <font class="smallfont"><p>I took a look at it but didn't try the Telnet protocol yet.  As an example, do you know the syntax of the text I should put in the Command box for a jump to the main menu in MythTV?  If I sent the command in a terminal via netcat, it would be:<br/>
nc &lt;ip-address&gt; 6546 jump mainmenu</p>

<p>Do I enter this into the Command box, or just the jump mainmenu portion?  Also, I'm not familiar with the last four parameters (e.g. Read Timeout(s)).  Are they optional?</p>

<p>Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jammastercd at Jul 12, 2011 17:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17957189"></a>
                                    <font class="smallfont"><p>Timeout is optional. IP-Address, port and command should do it. The other parameter are for reading information from the device.<br/>
This is the parameter for mainmenu: "# |jump mainmenu|# "<br/>
It means, after opening telnet connection wait for "# " then send "jumo mainmenu" and wait for "# ".</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 13, 2011 08:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-17957205"></a>
                                    <font class="smallfont"><p>The syntax you suggested using the Telnet protocol works.  I'm now able to create commands to control my MythTV frontend.</p>

<p>Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jammastercd at Jul 14, 2011 03:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18251934"></a>
                                    <font class="smallfont"><p>Great to hear this worked.<br/>
Once I have my MythTV running again (I just changed from cable to sattelite), I will also look into the 'new' control socket.<br/>
Since the commands which can be provided are already predetermined it would make sense to provide a preconfigured MythTV protocol in the designer which already let's a user select the commands.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 18, 2011 09:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18251983"></a>
                                    <font class="smallfont"><p>That would be excellent.  It would save me a lot of time when adding new frontends.</p>

<p>By the way, do you know of a way to put a frontend to sleep and also wake it up via wake on lan using the TCP/IP protocol?  I would like to use this as an on/off capability.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jammastercd at Jul 19, 2011 03:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18251984"></a>
                                    <font class="smallfont"><p>Putting a frontend to sleep depends pretty much on the OS. On Linux you can just type "halt" as root to shutdown the computer. Sometimes Linux has to be told to put the network card into "Wake on Lan" mode. Google is your friend.</p>

<p>Starting a computer by sending a "Wake on Lan" package is pretty straigt forward with Java. This is actually a great idea and I will put this protocol into OpenRemote. Maybe the next snapshot will have it <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 19, 2011 08:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18252001"></a>
                                    <font class="smallfont"><p>Wake On Lan is integrated now and works great <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
The next snapshot release will probably include it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 20, 2011 10:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18252039"></a>
                                    <font class="smallfont"><p>That is awesome.  Thanks for such a quick turnaround!</p>

<p>Will this end up as a command submitted via the TCP protocol?</p>

<p>Also, I will let you know how adding the halt command works for me.  I know for many this is pretty straightforward, but I'm still a novice (but enjoying it) in the Linux world.</p>

<p>Thanks again.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jammastercd at Jul 20, 2011 14:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18252040"></a>
                                    <font class="smallfont"><p>It will be a seperate protocol where in the modeller you have to provide MAC address of PC to start and broadcast network address of the network the PC is attached to.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Jul 20, 2011 15:44
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:50</font></td>
		    </tr>
	    </table>
    </body>
</html>