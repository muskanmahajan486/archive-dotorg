<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Heating control - KNX</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Heating control - KNX
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 12, 2012 by <font color="#0050B2">simnet</font>.
				    </div>

				    <p>Hello all</p>

<p>I have designed some panels for my house and i search a solution to integrate the heating control. Heating mode it's easy, it's only an 1bit command. But the setpoint adjustement, i need to read the current setpoint and have a + and - button to increase and decrease this value.</p>

<p>How can i do this ?</p>

<p>Thanks for you help</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742308.png">Schermata del 2012-10-22 18:44:00.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742309.png">Schermata del 2012-10-22 18:46:37.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742310.jpg">Schermata del 2012-10-22 18:44:00.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742311.jpg">Schermata del 2012-10-22 18:46:37.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742312.jpg">a.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742313.jpg">b.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742314.png">c.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742315.png">1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742316.png">2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742317.png">3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742318.png">5.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742319.png">4.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742320.png">6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742321.png">log1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742322.png">log2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742323.png">log3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742324.jpg">ets.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20451754/20742325.jpg">ets2.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20451812"></a>
                                    <font class="smallfont"><p>Where do you store the setpoint? Just a slider value which will send the setpoint to a KNX actuator?<br/>
This can be done with a KNX command where command will be "temp" and DPT9.001.</p>

<p>If you want plus and minus things become more complecated since you need a rule to incread/decrease a virtual value and the result is sent to the KNX bus.<br/>
You also need a sensor to read the actual room temperature. Do you use KNX temp sensors or 1-wire or something else?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 13, 2012 08:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451814"></a>
                                    <font class="smallfont"><p>I have a KNX group address for the current setpoint and one for the setpoint adjustement. It's DPT9.001. I have try to do a slider with the 2 values into the design but i have an error "Make sure you have 1 Range-/Scale-Sensor and 1 command selected.".</p>

<p>Slider value it's a good solution but i want to have the feedback on the slider with the current setpoint .. </p>

<p>Have you a solution ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Oct 13, 2012 09:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451816"></a>
                                    <font class="smallfont"><p>The slider needs a sensor. That sensor can also be used with a label to display the current setpoint temp.<br/>
How exactly is your architecture?</p>

<p>One GA to set setpoint which is read/write ?<br/>
Another GA to read current room temp which is only read?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 13, 2012 10:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451852"></a>
                                    <font class="smallfont"><p>I have use the labels to show my current setpoint and it's working well. But find no way to adjust it .. <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>My architecture is like this :</p>

<p>One GA to read current setpoint<br/>
One GA to send adjustement on the setpoint<br/>
One GA to read current temperature<br/>
One GA to read valve status in percent</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Oct 13, 2012 19:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452006"></a>
                                    <font class="smallfont"><p>Ok, so you need the following objects in OpenRemote:</p>

<ul class="alternate" type="square">
	<li>Command "ReadCurrentSetpoint" with command 'status' and PDT9.001</li>
	<li>Sensor "CurrentSetpointSensor" for this command (range maybe 10-30)</li>
	<li>Command "WriteCurrentSetpoint" with command 'temp' and DPT9.001</li>
	<li>Slider "SetpointSlider" using "CurrentSetpointSensor" and "WriteSetpointCommand"</li>
	<li>Command "ReadCurrentTemperature" with command 'status' and DPT9.001</li>
	<li>Sensor "CurrentTemperatureSensor" for this command (custom sensor)</li>
	<li>Command "ReadValveStatus" with command 'status' and DPT5.001</li>
	<li>Sensor "CurrentValveStatusSensor" for this command (level sensor)</li>
</ul>


<p>To see the current setpoint just put a label besides the slider and link the sensor</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 14, 2012 20:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452170"></a>
                                    <font class="smallfont"><p>Yes perfect.</p>

<p>Thanks a lot.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Oct 15, 2012 19:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452617"></a>
                                    <font class="smallfont"><p>Hi <br/>
I'm trying to read KNX temperature but nothing for moment.<br/>
In particolar one "ReadCurrentTemperature" command with "status" and DPT 9.001<br/>
and one sensor "CurrentTemperatureSensor" for this command (custom sensor).<br/>
To see current value I use a text label.<br/>
If I read temperature with a REST command from browser is it ok<br/>
<img src="attachments/20451754/20742314.png" align="absmiddle" border="0"/><br/>
I've trying to see value with a REST sensor but also does not work<br/>
<img src="attachments/20451754/20742312.jpg" align="absmiddle" border="0"/><br/>
Anyone have an idea ?<br/>
Many thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 22, 2012 17:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452622"></a>
                                    <font class="smallfont"><p>I don't know about polling out REST service with our own HTTP protocol. Interesting idea though.<br/>
But the answer from your GET with the browser looks ok.<br/>
If you connect the command to a custom sensor it should work.</p>

<p>Did you attacht he custom sensor to the label?<br/>
Which version of controller and which console are you using?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 22, 2012 20:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452625"></a>
                                    <font class="smallfont"><p>In your XPATH expression you have the id in single quotes. Have you tried with double quotes?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 22, 2012 22:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452626"></a>
                                    <font class="smallfont"><p>deleted; double post</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 22, 2012 22:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452633"></a>
                                    <font class="smallfont"><p>Thanks for reply<br/>
   my controller is 2.0.0 version ; I've tried also 2.0.1, is it the same.<br/>
I'm using 2.1 version Ipad console.<br/>
Double quotes it make no difference.<br/>
Sensor was attacched to a label.<br/>
The strange thing is that I can't read 2bytes value in knx but I can write it (ex. for set setpoint temperature).<br/>
For REST command :<br/>
<img src="attachments/20451754/20742315.png" align="absmiddle" border="0"/><br/>
<img src="attachments/20451754/20742316.png" align="absmiddle" border="0"/></p>

<p>For KNX command :<br/>
<img src="attachments/20451754/20742317.png" align="absmiddle" border="0"/><br/>
<img src="attachments/20451754/20742318.png" align="absmiddle" border="0"/><br/>
<img src="attachments/20451754/20742319.png" align="absmiddle" border="0"/><br/>
<img src="attachments/20451754/20742320.png" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 08:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452634"></a>
                                    <font class="smallfont"><p>Looks good to me. <br/>
Do you see any erros in the log files of the controller?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 23, 2012 08:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452636"></a>
                                    <font class="smallfont"><p>Thanks Marcus<br/>
  in knx-debug.log<br/>
<img src="attachments/20451754/20742321.png" align="absmiddle" border="0"/></p>

<p>in knx.log<br/>
<img src="attachments/20451754/20742322.png" align="absmiddle" border="0"/><br/>
<img src="attachments/20451754/20742323.png" align="absmiddle" border="0"/><br/>
Do you need other log that I unknow?<br/>
Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 08:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452638"></a>
                                    <font class="smallfont"><p>This also seems to be ok, weird.<br/>
It seems that your group address 2/3/84 is only returning 0x00 which does not look right.<br/>
Do you have an ETS and can check if the address has the 'read' flag set?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 23, 2012 09:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452640"></a>
                                    <font class="smallfont"><p>Yes "read flag is ok<br/>
<img src="attachments/20451754/20742324.jpg" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 09:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452641"></a>
                                    <font class="smallfont"><p>I've tryed to specified 9.001 Data Type in ETS but nothing<br/>
<img src="attachments/20451754/20742325.jpg" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 09:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452642"></a>
                                    <font class="smallfont"><p>I am running out of ideas. Since the REST call worked everything should be fine.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 23, 2012 09:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452643"></a>
                                    <font class="smallfont"><p>Hi Marcus<br/>
   now works fine !!!!<br/>
Why? What is succeded? Mystery <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
log file is it the same...<br/>
Thanks a lot !!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 09:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20452647"></a>
                                    <font class="smallfont"><p>Hi<br/>
 html/rest command now work fine but only with 2.0.1 controller version <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bibi at Oct 23, 2012 13:28
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:30</font></td>
		    </tr>
	    </table>
    </body>
</html>