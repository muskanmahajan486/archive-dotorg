<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : X10 and Windows</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : X10 and Windows
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 25, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>This is killing me.<br/>
I want to use OR but everything I try doesn't work.</p>

<p>I want to get a basic OR system working so that I understand all of the interfaces before I try and do more advanced things.</p>

<p>I have some X10 equipment that I use with Misterhouse and I thought this would make a simple configuration. Nope.</p>

<p>In the C:\OpenRemote\webapps\controller\WEB-INF\classes\config.properties file, I have set the following X10 parameter - com.port=COM1 </p>

<p>I created a Device but here I'm not sure what is required so I put the following -<br/>
<img src="attachments/22414908/22708317.png" align="absmiddle" border="0"/><br/>
Name = X10 CM12<br/>
Vendor = X10<br/>
Model = CM11A</p>

<p>I created a new Command -<br/>
<img src="attachments/22414908/22708316.png" align="absmiddle" border="0"/><br/>
Name = WallLightOFF<br/>
Protocol = X10<br/>
Address = B4<br/>
Command = OFF</p>

<p>In the panel I assigned this to a button.</p>


<p>In boot.log I see the following -<br/>
DEBUG 2013-05-25 15:03:01,250 : Created object model for Command( ID = 63, Type = x10, Properties : {address=B4, name=WallLightOFF, command=OFF}).</p>



<p>In the dev.Log file, when I press the button on my phone, I get the following entry -</p>

<p>2013-05-25 15:14:57,015 WARN [HTTP-Thread-1]: Unknown X10 property '&lt;property name = "name" value = "WallLightOFF"/&gt;'.</p>



<p>I can't see in any of the logs where the X10 device is being configured/opened.</p>

<p>Neil.</p>


				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22414908/22708316.png">X10 Command.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22414908/22708317.png">X10 Device.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22414915"></a>
                                    <font class="smallfont"><p>The warning is a red herring. It is a side effect of changes made in Designer and the XML files it generates, and the extra name property (which triggers it) should be handled silently without logging the warning. The warning however has no impact in the code.</p>

<p>The configuration itself looks correct.</p>

<p>It's been a really long time since I've looked at X10 &#8211; the most likely cause for an issue would be access to the serial port, port locking, or something going wrong with the serial port communication. IIRC these would show up in the console output.</p>

<p>PS. only have used X10 with Linux, so your mileage may vary.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 06:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414916"></a>
                                    <font class="smallfont"><p>Misterhouse uses the same serial port for the X10 connection.<br/>
I have stopped the Misterhouse program and fired up the OR, so there is no issues with the serial port or being locked by alternate programs.</p>

<p>How do I know if the port is even attempting to be setup/talked to. In the original config.properties file, it was set to a Linux port, wouldn't it always be trying to open the port on YOUR system as well?<br/>
Is there something that actually turns the OR X10 interface On/Off?<br/>
Should I be able to see this somewhere in the logs?</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 25, 2013 07:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414917"></a>
                                    <font class="smallfont"><p>The console output.<br/>
Note the last few lines after I have pressed a button.</p>


<div style="max-width: 800px;"><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>Using CATALINA_BASE:   C:\OpenRemote
Using CATALINA_HOME:   C:\OpenRemote
Using CATALINA_TMPDIR: C:\OpenRemote\temp
Using JRE_HOME:        C:\Program Files\Java\jdk1.6.0_37
25/05/2013 4:06:59 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\OpenRemote\webapps\controller\WEB-INF\lib\native
25/05/2013 4:06:59 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
25/05/2013 4:06:59 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 293 ms
25/05/2013 4:06:59 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
25/05/2013 4:06:59 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
25/05/2013 4:06:59 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive webconsole.war
25/05/2013 4:06:59 PM org.openremote.controller.bootstrap.Startup redirectJULtoLog4j
INFO: Initialized JUL to LOG4J Redirector.
INFO 2013-05-25 16:07:00,250 :

--------------------------------------------------------------------

  DEPLOYING NEW CONTROLLER RUNTIME...

--------------------------------------------------------------------

INFO 2013-05-25 16:07:00,375 : No rule definitions found in 'C:\OpenRemote\webap
ps\controller\rules'.
INFO 2013-05-25 16:07:00,375 : Initialized event processor : Drools Rule Engine
ERROR 2013-05-25 16:07:00,406 : Creating sensor failed. Error : No device protoc
ol builders registered with protocol type 'udpListener'.
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="85" name="Sw1" type="switch"&gt;
      &lt;include type="command" ref="68" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.ConfigurationException: No device protocol builders registered with protocol type 'udpListener'.
        at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:88)
        at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
        at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:148)
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
        at org.openremote.controller.service.Deployer.startController(Deployer.java:271)
        at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
        at org.openremote.controller.service.ServiceContext.init(ServiceContext.
java:364)
        at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
        at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
        at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start(StandardService.java:516)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
ERROR [main]: Creating sensor failed. Error : No device protocol builders registered with protocol type 'udpListener'.
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="85" name="Sw1" type="switch"&gt;
      &lt;include type="command" ref="68" /&gt;
      &lt;state name="on" /&gt;
      &lt;state name="off" /&gt;
    &lt;/sensor&gt;
org.openremote.controller.exception.ConfigurationException: No device protocol builders registered with protocol type 'udpListener'.
        at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:88)
        at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:419)
        at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:286)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:773)
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:619)
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:537)
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(Ab
stractModelBuilder.java:148)
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)
        at org.openremote.controller.service.Deployer.startController(Deployer.java:271)
        at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)
        at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:364)
        at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)
        at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)
        at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start(StandardService.java:516)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
INFO 2013-05-25 16:07:00,421 : Registered sensor : Switch Sensor (Name = 'IP0_ON', ID = '103')
INFO 2013-05-25 16:07:00,437 : Startup complete.
INFO 2013-05-25 16:07:00,437 : Controller Definition File Watcher for Default Deployer started.
ERROR [Polling Sensor Thread ID = 103, Name ='IP0_ON']: could not perform UDP Event
java.net.SocketTimeoutException: Receive timed out
        at java.net.PlainDatagramSocketImpl.receive0(Native Method)
        at java.net.PlainDatagramSocketImpl.receive(PlainDatagramSocketImpl.java:145)
        at java.net.DatagramSocket.receive(DatagramSocket.java:725)
        at org.openremote.controller.protocol.socket.UDPSocketCommand.send(UDPSocketCommand.java:271)
        at org.openremote.controller.protocol.socket.UDPSocketCommand.read(UDPSocketCommand.java:287)
        at org.openremote.controller.model.sensor.Sensor$DeviceReader.read(Sensor.java:682)
        at org.openremote.controller.model.sensor.Sensor$DeviceReader.run(Sensor.java:608)
        at java.lang.Thread.run(Thread.java:662)
Exception in thread "Polling Sensor Thread ID = 103, Name ='IP0_ON'" java.lang.NullPointerException
        at org.openremote.controller.model.sensor.Sensor.isUnknownSensorValue(Sensor.java:161)
        at org.openremote.controller.model.sensor.StateSensor.processEvent(StateSensor.java:231)
        at org.openremote.controller.model.sensor.Sensor.update(Sensor.java:338)
        at org.openremote.controller.model.sensor.Sensor$DeviceReader.run(Sensor.java:608)
        at java.lang.Thread.run(Thread.java:662)
25/05/2013 4:07:00 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
25/05/2013 4:07:00 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1483 ms






WARNING:  RXTX Version mismatch
        Jar version = RXTX-2.2pre1
        native lib Version = RXTX-2.1-7
Exception in thread "Thread-8" java.lang.NullPointerException
        at com.jpeterson.x10.module.CM11A.processPendingRequests(CM11A.java:1631)
        at com.jpeterson.x10.module.CM11A.run(CM11A.java:1483)
        at java.lang.Thread.run(Thread.java:662)

</pre>
</div></div></div>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 25, 2013 07:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414918"></a>
                                    <font class="smallfont"><p>Was looking at the implementation and it does not log anything (on the OR side) unless there's an error. I can look at adding some extra log statements there while getting rid of the misleading warning message you saw.</p>

<p>The lower level X10 implementation however is a third party implementation (which has gone over few patch rounds from various authors since it was written by the original person quite some years ago), so I will need to see if anything can be done there.</p>

<p>Not sure I follow the last question about X10 interface being turned on/off? The assumption is that the CM11A is connected to the serial port and opening the serial port will relay the X10 commands to the powerline by CM.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 07:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414920"></a>
                                    <font class="smallfont"><p>I meant being turned On/Off within OR. Or does YOUR system always open the serial port that is defined in YOUR config.properties file?</p>

<p>Any clues in the last few lines of the console output?</p>

<p>WARNING: RXTX Version mismatch<br/>
 Jar version = RXTX-2.2pre1<br/>
 native lib Version = RXTX-2.1-7<br/>
 Exception in thread "Thread-8" java.lang.NullPointerException<br/>
 at com.jpeterson.x10.module.CM11A.processPendingRequests(CM11A.java:1631<br/>
 )<br/>
 at com.jpeterson.x10.module.CM11A.run(CM11A.java:1483)<br/>
 at java.lang.Thread.run(Thread.java:662)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 25, 2013 07:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414922"></a>
                                    <font class="smallfont"><p>Thanks, the NPE at the end is probably relevant. I'll take a peek. It's coming from the X10 library we use for serial comms.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 07:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414923"></a>
                                    <font class="smallfont"><p>It would seem to come from a null inputstream on the serial port. Which is slightly odd itself looking at some code deeper in the RXTX library.</p>

<p>But could indicate an issue with the port access.</p>

<p>I could add a null guard where it is failing at the moment but unless the NPE is frivolous (caused by out-of-order initialization for example) and is indeed port access issue then the null guard will just push the explosion further down the line.</p>

<p>It is a nasty debugging, neither the X10 lib or RXTX (for serial port access) feel particularly solid. I can try the null guard unless you can find any other reason why the physical serial port would end up giving a null inputstream back.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 07:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414924"></a>
                                    <font class="smallfont"><p>The hardware port and Misterhouse software has been working perfectly for &gt; 10 years, so I doubt there are any issues on this side.</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 25, 2013 07:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414927"></a>
                                    <font class="smallfont"><p>Well in that case there isn't much more to do.</p>

<p>Try setting the JAVA_OPTS system variable to</p>

<p>set JAVA_OPTS="-Dgnu.io.log.mode=PRINT_MODE"</p>

<p>(adjust appropriately for Windows, I don't recall exact syntax)</p>

<p>And see if that increases the log output from the RXTX library to reveal what might be the cause of a null inputstream from the serial port and the NPE in X10 (if that is indeed impacting your command send).</p>

<p>The extra log would go to standard output, so usually on the console.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 08:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414929"></a>
                                    <font class="smallfont"><p>As an extra, -DDEBUG=true should increase console output from X10 lib which might reveal some extra steps it is taking:</p>

<p>&gt; set JAVA_OPTS="-Dgnu.io.log.mode=PRINT_MODE -DDEBUG=true"</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 25, 2013 08:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414968"></a>
                                    <font class="smallfont"><p>INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
26/05/2013 10:47:17 AM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 1502 ms</p>

<p>=====================================================================================<br/>
X10 Stuff follows -</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>DEBUG: Starting interface
WARNING:  RXTX Version mismatch
        Jar version = RXTX-2.2pre1
        native lib Version = RXTX-2.2pre2
RXTXPort:setSerialPortParams(4800 8 1 0) returning
DEBUG: Interface started
DEBUG: process thread awakened
DEBUG: Transmitting CM11AStatusTransmission
Sending CM11AStatusTransmission
PC-&gt;CM11A: 0x8b
DEBUG: Received data
DEBUG: Received data
DEBUG: Received data
DEBUG: Received data
DEBUG: Received data
Bytes available: 14
Reading...
Checking number of bytes read...
Calling method to decode status...
Battery usage: 0 minutes
Interface Time: 10:47:26
Julian Day: -111
Current Day of Week: 1
Monitored House Code: A
Last Addressed Device: {3}
On/Off Status: {}
Dim Status: {}
DEBUG: Transmission of CM11AStatusTransmission complete.
DEBUG: Transmitting CM11AX10EventTransmission - X10 Address Event: house code&lt;B&gt;
 device code&lt;4&gt;
Sending CM11AStandardTransmission
PC-&gt;CM11A: 0x04,0xea
Received checksum: ee
Expected checksum: ee
PC&lt;-CM11A: 0xee
PC-&gt;CM11A: 0x00
DEBUG: Received data
PC&lt;-CM11A: 0x55
DEBUG: Transmission of CM11AX10EventTransmission - X10 Address Event: house code
&lt;B&gt; device code&lt;4&gt; complete.
DEBUG: Transmitting CM11AX10EventTransmission - X10 Off Event: house code&lt;B&gt; fun
ction code&lt;3&gt;
Sending CM11AStandardTransmission
PC-&gt;CM11A: 0x06,0xe3
Received checksum: e9
Expected checksum: e9
PC&lt;-CM11A: 0xe9
PC-&gt;CM11A: 0x00
PC&lt;-CM11A: 0x55
DEBUG: Transmission of CM11AX10EventTransmission - X10 Off Event: house code&lt;B&gt;
function code&lt;3&gt; complete.
RXTXPort:removeEventListener() returning
DEBUG: Interface stopped
Exception in thread "Thread-4" java.lang.NullPointerException
        at com.jpeterson.x10.module.CM11A.processPendingRequests(CM11A.java:1631
)
        at com.jpeterson.x10.module.CM11A.run(CM11A.java:1483)
        at java.lang.Thread.run(Thread.java:662)
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 26, 2013 01:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414973"></a>
                                    <font class="smallfont"><p>Thanks,</p>

<p>The logs look quite good, and it would seem the serial port communication is ok? From this I would expect the OFF to B3 at least to go through?</p>

<p>The null at the end looks like a receiver thread still trying to read after the interface is stopped, could be a race, I'll have to look. It can potentially mess things up when the exception goes unhandled and propagates up the call stack in a way that doesn't allow the X10 implementation to recover.</p>

<p>But beyond that it would look like something should go through before the NPE explodes?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 26, 2013 08:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414988"></a>
                                    <font class="smallfont"><p>I've made one patch in an attempt to clean up the null pointer error you are seeing &#8211; it does look like it is potentially caused by a race condition between the threads.</p>

<p>Can you give it a try: <a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.0%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_ORCJAVA-350.zip/download">OpenRemote-Controller-2.1.0_ORCJAVA-350.zip</a></p>

<p>And see if you get further with the log output?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 26, 2013 10:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414997"></a>
                                    <font class="smallfont"><p>Terrific, thanks for looking into this for me.<br/>
Do I just copy all of this on top of my existing C:\OpenRemote folder and overwrite all files?</p>

<p>On a separate note, I cannot get the web interface "http://10.0.0.10:8080/webconsole/#main" working when I run Openremote on my XP (HA Server) box. Wether it be opening from the local machine or via another machine on the network.<br/>
When I copy the Openremote onto my Win7 box and run from the Win7 box, I can open the above interface. Ie "http://10.0.0.56:8080/webconsole/#main" or "http://localhost:8080/webconsole/#main"<br/>
What happens is that I get the green box up, I san and find OpenRemote at 10.0.0.10 and when I click in the centre, the wheels just turn but never come back with the panel selection etc, it just stays on Loading Controller.</p>

<p>Any ideas why the XP box web interface stalls?</p>

<p>Thanks again for your time.</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 26, 2013 10:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415001"></a>
                                    <font class="smallfont"><p>Webconsole loading screen stuck: there is a proposed patch described in <a href="http://jira.openremote.org/browse/WEBCONSOLE-56">WEBCONSOLE-56</a> and <a href="http://jira.openremote.org/browse/ORCJAVA-345">ORCJAVA-345</a>. These patches should be included in the ORCJAVA-350 binary I linked above. So give it a try and see if the issue persists.</p>

<p>Copy over and overwrite existing files will work.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 26, 2013 11:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415113"></a>
                                    <font class="smallfont"><p>Hi,<br/>
Well that fixed the XP webconsole issue but now the X10 does not work at all.<br/>
Ahh, my com port configuration was also overwritten.<br/>
Ahh, my new rxtxSerial.dll was also overwritten.</p>

<p>All good now, Thanks heaps Juha. I now have a system that does something.<br/>
Time to create some rules and macro's.</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 28, 2013 11:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415116"></a>
                                    <font class="smallfont"><p>Ok... so I gather the X10 patch is useful and should be pushed towards release branches then?</p>

<p>Why was updating the rxtxSerial.dll needed?</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 28, 2013 11:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415117"></a>
                                    <font class="smallfont"><p>Yes to question 1.</p>

<p>In the display log it was showing<br/>
WARNING:  RXTX Version mismatch<br/>
        Jar version = RXTX-2.2pre1<br/>
        native lib Version = RXTX-2.1-7</p>

<p>I hunted down a later version which allowed the serial comms to start working. Your fix also got rid of the -<br/>
Exception in thread "Thread-4" java.lang.NullPointerException<br/>
        at com.jpeterson.x10.module.CM11A.processPendingRequests(CM11A.java:1631<br/>
)<br/>
Which were causing timeouts on the com port, so some messages were being blocked due to the com port alreay being open.</p>

<p>I downloaded the latest version from <a href="http://rxtx.qbang.org/wiki/index.php/Download">http://rxtx.qbang.org/wiki/index.php/Download</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 28, 2013 11:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872636"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>In the above version you have made changes to the X10 to get it working but now Daniel is directing me to two (2) different versions that support the panStamp Largato-SWAP and Largarto-MAX. The issue is that these do not have the X10 fix you did.</p>

<p>How do I get a combined copy of these? Is there a few files that just look after the X10 changes that I can copy into either of the versions that Daniel has?</p>

<p>Neil. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at Jun 13, 2013 01:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872637"></a>
                                    <font class="smallfont"><p>Which versions is Daniel mentioning?</p>

<p>The 350 binary includes the lagarto integration, from <a href="http://svn.code.sf.net/p/openremote/code/workspace/juha/Controller_2_1_0_FM_ORCJAVA-350/CHANGES.txt">CHANGES.txt</a>:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>- Lagarto server (panStamps) integration (Daniel Berenguer)
</pre>
</div></div>

<p>So unless there were changes/patches I've missed (in which case they should go into the 2.1 tree) then the basic lagarto integration should be in place in the 350 binary.</p>

<p>Let me know if there are versions/changes/patches I've missed.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 13, 2013 01:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872676"></a>
                                    <font class="smallfont"><p>Juha,<br/>
Have to get back to you on that one, they were two svn links (zip files) he gave me whilst in a Skype conversation. One that had OR talking to the Lagarto-Swap interface and one that had OR talking to the Lagarto-Max interfcae.</p>

<p>Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at Jun 13, 2013 13:38
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>