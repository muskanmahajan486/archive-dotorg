<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Help, error starting Drools Rules Engine</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Help, error starting Drools Rules Engine
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 17, 2013 by <font color="#0050B2">skogen75</font>.
				    </div>

				    <p>Hi everyone,</p>

<p>This is my first time trying to use rules in OpenRemote.  It seems anything I write in the rules editor results in this start up error, see below.  My rule is the following:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">package</span> org.openremote.controller.protocol

global org.openremote.controller.statuscache.CommandFacade execute;
global org.openremote.controller.statuscache.SwitchFacade switches;

rule <span class="code-quote">"<span class="code-object">System</span> start"</span>
when eval(<span class="code-keyword">true</span>)
then
  command.execute(<span class="code-quote">"cSqueezebox_NextTrack"</span>, <span class="code-quote">"Drools start OK"</span>);
end
</pre>
</div></div>

<p>I have an in memory virtual command called cSqueezebox_NextTrack and have it liked to a sensor called sSqueezebox_NextTrack and linked that to a label in my UI.  But, it seems the problem is more fundamental, once I get this error none of my sensors work (they all return N/A).  I have tried a couple different rules, but no joy.  Am I forgetting something?</p>

<p>Thanks,<br/>
Erik</p>

<p>INFO 2013-12-16 21:22:29,118 : </p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>ERROR 2013-12-16 21:22:29,158 : Cannot start event processor 'Drools Rule Engine' : Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:283)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigurationMap(PackageBuilderConfiguration.java:268)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderConfiguration.java:181)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.&lt;init&gt;(PackageBuilderConfiguration.java:159)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:210)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:143)<br/>
	at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowledgeBuilder(KnowledgeBuilderFactoryServiceImpl.java:34)<br/>
	at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilder(KnowledgeBuilderFactory.java:47)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:484)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)<br/>
	at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)<br/>
	at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:659)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)<br/>
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)<br/>
	at java.lang.Thread.run(Thread.java:744)<br/>
Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid language level<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefaultLanguageLevel(JavaDialectConfiguration.java:162)<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.init(JavaDialectConfiguration.java:57)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:279)<br/>
	... 18 more<br/>
INFO 2013-12-16 21:22:29,161 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2013-12-16 21:22:29,161 : Initialized event processor : EmonCMS Data Logger<br/>
INFO 2013-12-16 21:22:29,190 : Registered sensor : Sensor (Name = 'DirecTV_GetShow', ID = '3604599', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,191 : Registered sensor : Sensor (Name = 'sSqueezebox_Index', ID = '3671334', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,191 : Registered sensor : Sensor (Name = 'sSqueezebox_NextTrack', ID = '3671335', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,191 : Registered sensor : Level Sensor (Name = 'LightLevel_Status', ID = '3608852', Min: 0, Max: 100)<br/>
INFO 2013-12-16 21:22:29,197 : Registered sensor : Switch Sensor (Name = 'LightOnOff_Status', ID = '3608854')<br/>
INFO 2013-12-16 21:22:29,202 : Registered sensor : Sensor (Name = 'Squeezebox_Exp_Artist', ID = '3608810', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,202 : Registered sensor : Sensor (Name = 'Squeezebox_ArtistSong', ID = '3607125', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,202 : Registered sensor : Sensor (Name = 'sSqueezebox_Tracks', ID = '3608811', State Mappings: {})<br/>
INFO 2013-12-16 21:22:29,204 : Startup complete.</p>


				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22881326"></a>
                                    <font class="smallfont"><p>The line</p>

<p>Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid language level</p>

<p>is trying to tell you that Java 7 is not supported. You need to run it on Java 6.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Dec 17, 2013 08:56
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:36</font></td>
		    </tr>
	    </table>
    </body>
</html>