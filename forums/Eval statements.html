<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Eval statements</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Eval statements
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Sep 12, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hey folks! I'm posting some threads of discussion I had with Juhan in case anyone is interested or would like to chime in. I'm pasting them in here, but please feel free to respond below as if this were a normal thread!</p>

<blockquote>
<p>Isaac wrote:<br/>
You didn't mention these but I saw some when I clicked through your cron link. For example:<br/>
when eval(true)<br/>
This example isn't heinous, but eval statements should really be avoided at all costs. They are actually deprecated in drools 5.5, if I recall correctly. Their use breaks the rete algorithm by preventing caching of the results. This statement should probably just be written as "when then". I'm pretty sure an empty "when" is implicitly true.</p></blockquote>

<blockquote>
<p>Juhan wrote:<br/>
You are right, an empty when condition evaluates true. This is just one of those small things.  A programmer may appreciate the brevity of implicit logic. To your regular user it just causes additional confusion. While you can say:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Foo"</span>
  timer (cron: 0 0 17 MON-FRI * ?) when then doSomething();
end
</pre>
</div></div>


<p>The above just creates more questions when you read it out loud ("when then" ?). But you are probably well aware, since you work in NLP <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> So I've chosen to be more explicit in the example to reduce questions about cryptic implicit syntax and say:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Foo"</span>
  timer (cron: 0 0 17 MON-FRI * ?) when eval (<span class="code-keyword">true</span>) then doSomething();
end
</pre>
</div></div>

<p>It just reads better in English. And makes the point that the timer execution can still be conditional on facts in the working memory, not strictly only based on clock.</p>

<p>I'm not sure if Drools allows dropping the 'when' keyword altogether so we'd get a more appropriate:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Foo"</span>
  timer (cron: 0 0 17 MON-FRI * ?) then doSomething();
end
</pre>
</div></div>

<p>But thinking through the templating I guess we could modify it to something like:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Foo"</span>
  Timer on MON-FRI at 17 hours 00 minutes <span class="code-keyword">do</span> something();
end
</pre>
</div></div>


<p>I'll need to go back and look at templating. I had completely forgotten about using it as an option. </p></blockquote>

<blockquote>
<p>Isaac wrote:<br/>
I think that working with drools templating is a great idea. I've only read about it myself, never implemented. I'll go refresh my memory about it once some of the more pressing issues are dealt with.</p></blockquote>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:30</font></td>
		    </tr>
	    </table>
    </body>
</html>