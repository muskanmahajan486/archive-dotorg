<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : WakeUp weekdays vs. weekends via Rules (Crons)</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : WakeUp weekdays vs. weekends via Rules (Crons)
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 29, 2013 by <font color="#0050B2">dclaeys</font>.
				    </div>

				    <p>Hi, </p>

<p>I am currently experimenting with Rules (Crons,etc...)and<br/>
The Idea is to switch a light on for 10seconds:</p>
<ul class="alternate" type="square">
	<li>from Monday to Friday at 07:00</li>
	<li>from Saturday to Sunday at 09:00</li>
</ul>


<p>I made 2 rules for it, with 2 times almost the exact code.<br/>
My question is if I can make it any shorter (in 1 rule) since its only the time (09:00 i.o 07:00) that is different.</p>

<p>This is my code below:</p>

<p>package org.openremote.controller.protocol</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;<br/>
global org.openremote.controller.statuscache.LevelFacade levels;</p>

<p>import org.openremote.controller.protocol.*;<br/>
import org.openremote.controller.model.event.*;<br/>
import java.lang.Float;<br/>
import java.sql.Timestamp;<br/>
import java.util.Date;</p>

<p>rule "WakeUp_2-6"<br/>
  timer (cron: 0 0 7 ? * 2-6)<br/>
when <br/>
  eval(true) <br/>
then  <br/>
  execute.command("On");<br/>
  try<br/>
  <div class="error"><span class="error">Unknown macro: {
    Thread.sleep(10000);
  }</span> 
<p>  catch(InterruptedException ex)</p>
  <div class="error"><span class="error">Unknown macro: {
    Thread.currentThread().interrupt();
  }</span> </div>
<p>  execute.command("Off");<br/>
end</p>

<p>rule "WakeUp_7-1"<br/>
  timer (cron: 0 0 9 ? * 7-1)<br/>
when <br/>
  eval(true) <br/>
then  <br/>
  execute.command("On");<br/>
  try</p>
</div> }<br/>
  catch(InterruptedException ex)</p>
  <div class="error"><span class="error">Unknown macro: {
    Thread.currentThread().interrupt();
  }</span> </div>
<p>  execute.command("Off");<br/>
end<br/>
/******/</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881834/23036354.gif">Rule2-6.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881834/23036355.gif">Rule7-1.GIF</a> (image/gif)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22881847"></a>
                                    <font class="smallfont"><p>Sorry, something went wrong with the copying of my code:<br/>
<img src="attachments/22881834/23036354.gif" align="absmiddle" border="0"/><img src="attachments/22881834/23036355.gif" align="absmiddle" border="0"/><br/>
Are my codes</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dclaeys at Dec 29, 2013 07:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881850"></a>
                                    <font class="smallfont"><blockquote><p>Sorry, something went wrong with the copying of my code</p></blockquote>

<p>For better readability you could enclose your code within {code}..{code} tags <a href="http://www.openremote.org/display/website/Wiki+Markup+Quick+Start">(see markup instructions)</a>. Do not place a / inside the end tag.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 29, 2013 08:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881851"></a>
                                    <font class="smallfont"><p>Pieter,</p>

<p>Ok, Thanks, I will use it next time.<br/>
Any Idea if I can reduce/shorten it into 1 rule?</p>

<p>Regards,<br/>
Dieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dclaeys at Dec 29, 2013 08:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881853"></a>
                                    <font class="smallfont"><p>Sorry I am only a beginner with rules. I know very little about Java. I remember I've seen somewhere that the use of <em>sleep</em> can be dangerous, because it puts the execution of all rules on hold. (I am using Z-Wave switches that allow to program the delay before it switches off)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 29, 2013 08:59
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:39</font></td>
		    </tr>
	    </table>
    </body>
</html>