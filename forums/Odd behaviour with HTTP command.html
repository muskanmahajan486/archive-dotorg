<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Odd behaviour with HTTP command</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Odd behaviour with HTTP command
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 06, 2012 by <font color="#0050B2">loneferret</font>.
				    </div>

				    <p>Hello,<br/>
Well doing the "getting weather info" from an RSS feed, which is not Google by the way, and something odd happens.<br/>
I had 2 commands/sensors getting various information sur XPath, which worked. Added a third command/sensor/label and for some reason<br/>
all the other labels were no longer showing the information previously displayed. Deleted and recreated a few, would work but <br/>
would stop displaying the information after adding another label. So rinse and repeat. <br/>
Url I'm using: <a href="http://www.weatheroffice.gc.ca/rss/city/qc-d2_e.xml">http://www.weatheroffice.gc.ca/rss/city/qc-d2_e.xml</a><br/>
Just getting the titles really.<br/>
Event tried entering a local URL to a text and html file containing some static value. That lone label still doesn't show anything.<br/>
After doing this, added a fourth label. This one works as well as the third one, but the second label added stopped displaying info.<br/>
Guess too many labels confuses something perhaps?</p>

<p>Getting this error, which isn't constant.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
﻿﻿ERROR [HTTP-<span class="code-object">Thread</span>-1]: CommandException occurs
org.openremote.controller.config.ControllerXMLChangedException: The content of controller.xml had changed.
	at org.openremote.controller.service.impl.StatusPollingServiceImpl.queryChangedState(StatusPollingServiceImpl.java:113)
	at org.openremote.controller.<span class="code-keyword">rest</span>.StatusPollingRESTServlet.handleRequest(StatusPollingRESTServlet.java:76)
	at org.openremote.controller.<span class="code-keyword">rest</span>.RESTAPI.doPost(RESTAPI.java:125)
	at org.openremote.controller.<span class="code-keyword">rest</span>.RESTAPI.doGet(RESTAPI.java:81)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.openremote.controller.<span class="code-keyword">rest</span>.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.<span class="code-object">Thread</span>.run(<span class="code-object">Thread</span>.java:679)
</pre>
</div></div>

<p>So after several tries, I'm getting a bit frustrated in re-creating all these commands/sensors/labels never knowing if my next addition will stop the rest from working.<br/>
It comes and goes. Sometimes all 3 will work, sometimes 1 or just 2.<br/>
BUT At least I got my rules to work <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20451437"></a>
                                    <font class="smallfont"><ul class="alternate" type="square">
	<li>It would be helpful if you mentioned which variables you want to read and the XPATH expressions you used to get those.</li>
	<li>The semantics of RSS are rather weak. It does allow for leaving certain lines out. Are you sure that the messages always have the same content elements? You might have a look at a more structured weather source e.g. <a href="http://www.wunderground.com/weather/api/">http://www.wunderground.com/weather/api/</a>. Some more have been mentioned in the past (The Google thing stopped working).</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 07, 2012 09:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451476"></a>
                                    <font class="smallfont"><p>The info from the link I use does change, but as far as Xpath is concerned </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">//rss/channel/item[5]/title</span></pre>
</div></div>
<p>Should always be valid, but I'll see about using the link you suggest.</p>

<p>For now I have bigger problems, for some reason when I restarted the server today many more things went wrong:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
ERROR [Controller Definition File Watcher <span class="code-keyword">for</span> Default Deployer]: Creating sensor failed. Error : No component found with id '204'. 
 XML Element : &lt;sensor xmlns=<span class="code-quote">"http:<span class="code-comment">//www.openremote.org"</span> id=<span class="code-quote">"193"</span> name=<span class="code-quote">"Office Ceilling Sensor -on/off-"</span> type=<span class="code-quote">"<span class="code-keyword">switch</span>"</span>&gt;
</span>      &lt;include type=<span class="code-quote">"command"</span> ref=<span class="code-quote">"204"</span> /&gt;
      &lt;state name=<span class="code-quote">"on"</span> /&gt;
      &lt;state name=<span class="code-quote">"off"</span> /&gt;
    &lt;/sensor&gt;
</pre>
</div></div>

<p>I haven't touched that (and others) seeing I was satisfied with the results on the iPhone.</p>

<p>And the zwave protocol doesn't seem to be in the designer anymore o_O</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by loneferret at Oct 07, 2012 16:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451501"></a>
                                    <font class="smallfont"><p>I made three HTTP calls and corresponding sensors with respectively items 1, 2 and 3. I did that in the default designer 2.0.0 (Rosemary), and ran it also on default controller 2.0.0 (I downloaded that this afternoon from the site to install on a Win7 test machine. It is running for a couple of hours now, and the display seems stable with these three sensors. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 07, 2012 21:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451505"></a>
                                    <font class="smallfont"><p>Hmm odd..<br/>
For me it was almost random. I'd have to place another label or two and then everything started working.<br/>
Oh well, thanks for that weather link you provided I actually prefer that one and it seems to work with that.</p>

<p>Thanks again.<br/>
Now I have to just redo everything.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by loneferret at Oct 07, 2012 21:45
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>