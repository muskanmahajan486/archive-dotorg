<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : version 1.1.0 of my image generator for switches and buttons</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : version 1.1.0 of my image generator for switches and buttons
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 19, 2013 by <font color="#0050B2">emster</font>.
				    </div>

				    <p>Hi,</p>

<p>I wrote a perl script to generate images for on-/off-/pressed/unpressed-states of switches and buttons.</p>

<p>From a text file with names </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
S;Switch 1
B;Button 1
</pre>
</div></div>

<p>these images are generated</p>

<p><img src="attachments/21859967/22053000.png" align="absmiddle" border="0"/> <img src="attachments/21859967/22053001.png" align="absmiddle" border="0"/> <img src="attachments/21859967/22053002.png" align="absmiddle" border="0"/> <img src="attachments/21859967/22053003.png" align="absmiddle" border="0"/></p>

<p>Most of sizes, colours and effekts are customizable with config file.</p>

<p>If someone is interested feel free to test:</p>

<p><a href="https://www.box.com/s/on0q82oaslqxtkxbeelc">https://www.box.com/s/on0q82oaslqxtkxbeelc</a></p>

<p>I look forward to your feedback.</p>

<p>Daniel</p>


<p>readme.txt</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
This is a perl script to generate images <span class="code-keyword">for</span> switches and buttons in OpenRemote
(http:<span class="code-comment">//www.openremote.org)
</span>
Tools you need:

- ImageMagick (http:<span class="code-comment">//www.imagemagick.org)
</span>  provides low level commands <span class="code-keyword">for</span> image generation. Just unzip to a folder and 
  put <span class="code-keyword">this</span> folder in config.pl. Pay attention to the <span class="code-object">double</span>-backslash-perl-syntax.

- perl (http:<span class="code-comment">//www.perl.org)
</span>  pre-installed on most linux-systems. For windows you can download from 
  http:<span class="code-comment">//www.activestate.com
</span>
Put your switches and buttons to elements.txt one per line. The first character followed by a <span class="code-quote">";"</span> 
stands <span class="code-keyword">for</span> the type of the element. <span class="code-quote">"S"</span> <span class="code-keyword">for</span> <span class="code-keyword">switch</span> and <span class="code-quote">"B"</span> <span class="code-keyword">for</span> button.

Run generator.pl to generate your images.

Edit config.pl to change details of the template. Use the on-values <span class="code-keyword">for</span> a pressed button and 
the off-values <span class="code-keyword">for</span> an unpressed button.

Most variables are self-explanatory, I hope ;-)

The $led_type{'*.*'}=1 generates 2 auxiliary images (led*.png) <span class="code-keyword">for</span> every device type and state. 
These are stacked to your <span class="code-keyword">switch</span> images. led1 and led2 are generated as radial gradients with 
the led*_colour. led1 is stacked to the <span class="code-keyword">switch</span> image and led2 is stacked on led1. For the led 
effect led2 should be brighter and smaller than led1.

You can simple add more element types in config.pl. Maybe you need buttons in different sizes 
or <span class="code-keyword">switch</span> types with different colours. Just put the <span class="code-keyword">new</span> type to the %type-hash and copy the 
config block <span class="code-keyword">for</span> <span class="code-quote">"### Switch ###"</span> and change all {'S.on'} and {'S.off'} 
to {'newname.on'} and {'newname.off'}.

You can use generate-font-list.pl to write available fonts of your system to font-list.txt.
</pre>
</div></div>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859967/22053000.png">S.Switch_1.off.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859967/22053001.png">S.Switch_1.on.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859967/22053002.png">B.Button_1.off.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859967/22053003.png">B.Button_1.on.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21859968"></a>
                                    <font class="smallfont"><p>Will check it. Good idea. Does it support RTL langauges like Hebrew?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by niraviry at Apr 09, 2013 14:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859969"></a>
                                    <font class="smallfont"><p>I don't know. The image generation is based on ImageMagick. Maybe you can test and let us know.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by emster at Apr 09, 2013 14:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859978"></a>
                                    <font class="smallfont"><p>This is a very very nice idea. Thank you for posting it. I've been thinking about a similar feature integrated directly into the designer. But so far this is still pretty far down in the priority list. Still a mountain to climb before getting there...</p>

<p>But this is a very useful way to bridge that gap. Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 09, 2013 18:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860578"></a>
                                    <font class="smallfont"><p>New in version 1.1.0:</p>

<p>sizes in pixels caused unpredictable small images on devices with high density screens.<br/>
Now sizes are defined in "mm" instead of pixel.<br/>
you have to specify the screen density of your device in ppi to render the images in appropriate pixel size.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by emster at Apr 19, 2013 16:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596107"></a>
                                    <font class="smallfont"><p>Hi Daniel,</p>

<p>Installed ImageMagick on Ubuntu following the directions on their website. It is in folder "/opt/ImageMagick-6.9.0-4"</p>

<p>In your script's config.pl how should I enter the location? You mentioned double back slashes, do you mean "\\opt\ \ImageMagick-6.9.0-4"?</p>

<p>I also noticed that you are referencing "$sys_im_path\ \convert" in the script, but the convert file is actually under /opt/ImageMagick-6.9.0-4/utilities<br/>
Is this a change due to different version?</p>

<p>I tried all combinations of these and I keep getting the following error when I run "perl ./generator.pl":</p>

<p>generating leds... S.onsh: 1: Syntax error: "(" unexpected<br/>
sh: 1: Syntax error: "(" unexpected<br/>
 S.offsh: 1: Syntax error: "(" unexpected<br/>
sh: 1: Syntax error: "(" unexpected</p>

<p>generating elements...<br/>
:S.onh 1<br/>
sh: 1: Syntax error: "(" unexpected<br/>
:S.off 1<br/>
sh: 1: Syntax error: "(" unexpected<br/>
:S.onh 2<br/>
sh: 1: Syntax error: "(" unexpected<br/>
:S.off 2<br/>
sh: 1: Syntax error: "(" unexpected<br/>
:B.onn 1<br/>
sh: 1: Syntax error: "(" unexpected<br/>
:B.off 1<br/>
sh: 1: Syntax error: "(" unexpected<br/>
Button 2:B.on<br/>
sh: 1: Syntax error: "(" unexpected<br/>
Button 2:B.off<br/>
sh: 1: Syntax error: "(" unexpected</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aptalca at Jan 30, 2015 04:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596114"></a>
                                    <font class="smallfont"><p>Hi X,</p>

<p>the backslashes are used for windows. They have to be doubled in perl because the single backslash is a meta-character. In Unix please try just single slashes. e. g. </p>

<p>$sys_im_path				= "/opt/ImageMagick-6.9.0-4"</p>

<p>Maybe you have to change more "<br clear="all" />" to "/" in paths in config.pl and generator.pl to port this script from windows tu linux.</p>

<p>If the location of the convert-tool has changed, you have to change the path in the script.</p>

<p>Best regards<br/>
Daniel</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by emster at Jan 30, 2015 11:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23596121"></a>
                                    <font class="smallfont"><p>I ended up installing in Windows as I could not get it to work in Linux (I don't know the first thing in perl)</p>

<p>It works great <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> Now I gotta figure out all the options</p>

<p>Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aptalca at Jan 30, 2015 18:21
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>