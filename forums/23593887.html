<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Controlling dimmers with OR & Razberry</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Controlling dimmers with OR & Razberry
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 20, 2014 by <font color="#0050B2">subnetmask</font>.
				    </div>

				    <p>I've been playing with OR and my Razberry and have made some pretty good progress (for me), even though my UI looks like it was designed by a 2 year old. I'm running Z-Way 2.0.0rc20 on Raspbian Wheezy. Except for two Aeon Labs Smart switches, all my Z-Way switches are Leviton - I've got one binary wall switch, one dimming wall switch and one plug in dimming switch.</p>

<p>I've gotten simple 'on' and 'off' buttons working, and I've managed to get simple switches working, but I'm lost with my dimmers.</p>

<p>I'm trying to set up sliders and I can't get them to work.</p>


<p>I've got a 'level' command that uses 'http://RPi-IP:8083/OpenRemote/SwitchMultilevelLevel/5/0' for the URL.<br/>
I've got a 'Set' command that uses 'http://RPi-IP:8083/OpenRemote/SwitchMultilevelSet/5/$(param)' for the URL (Those parentheses are actually braces in the code).<br/>
I've set up a 'Level' sensor (I've tried 'Switch', 'Level' and 'Range' types).<br/>
Then I set up a slider using the 'Level' sensor (Again, trying all three of the types of level sensor), and the 'Set' command.</p>

<p>The slider doesn't even seem to be sending the commands (or at least the Razberry isn't liking what OR is sending it and is ignoring it) as when I operate the slider, there is no activity from the Razberry.</p>

<p>I've been told that sliders aren't a good idea to use due to lag - my setup seems really responsive (I'm running OR on a Ubuntu virtual server and have the RPi just running Z-Way on Wheezy), so I'd like to try them - even if I find that the sliders are laggy and choose not to use them, I'd still like to know how to set them up.</p>

<p>Does anyone have any tips to getting them working?</p>


				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789652.jpg">level.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789653.jpg">levelSensor.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789654.jpg">off.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789655.jpg">Plug-In1.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789656.jpg">set.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789657.jpg">Slider.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789658.jpg">status.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789659.jpg">StatusSensor.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23593887/23789660.jpg">Switch.JPG</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23593898"></a>
                                    <font class="smallfont"><p>Trivial question: Did you define a polling interval for status (level) command?<br/>
Can you please post (little mountain icon) here screenshots of the commands you have made in Designer. Please do select the <b>thumbnail</b> field to avoid huge posts.<br/>
If you add some code here please do include in {code}...{code} tags</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 20, 2014 08:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593909"></a>
                                    <font class="smallfont"><p>Yes, I set it to 1s (Probably a long time for slider response, but it should provide <b>some</b> reaction).</p>

<p><a class="confluence-thumbnail-link 380x214" href='http://www.openremote.org/download/attachments/23593887/Switch.JPG'><img src="attachments/thumbnails/23593887/23789660" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 364x278" href='http://www.openremote.org/download/attachments/23593887/StatusSensor.JPG'><img src="attachments/thumbnails/23593887/23789659" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 384x457" href='http://www.openremote.org/download/attachments/23593887/status.JPG'><img src="attachments/thumbnails/23593887/23789658" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 386x452" href='http://www.openremote.org/download/attachments/23593887/off.JPG'><img src="attachments/thumbnails/23593887/23789654" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 356x278" href='http://www.openremote.org/download/attachments/23593887/levelSensor.JPG'><img src="attachments/thumbnails/23593887/23789653" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 384x442" href='http://www.openremote.org/download/attachments/23593887/level.JPG'><img src="attachments/thumbnails/23593887/23789652" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 377x451" href='http://www.openremote.org/download/attachments/23593887/set.JPG'><img src="attachments/thumbnails/23593887/23789656" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 202x275" href='http://www.openremote.org/download/attachments/23593887/Plug-In1.JPG'><img src="attachments/thumbnails/23593887/23789655" align="absmiddle" border="0"/></a> <a class="confluence-thumbnail-link 384x184" href='http://www.openremote.org/download/attachments/23593887/Slider.JPG'><img src="attachments/thumbnails/23593887/23789657" align="absmiddle" border="0"/></a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by subnetmask at Nov 20, 2014 20:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593912"></a>
                                    <font class="smallfont"><p>Your 5.set command should have</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">${param}</pre>
</div></div>
<p>as the final parameter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 21, 2014 09:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593914"></a>
                                    <font class="smallfont"><p>What the heck? Now it's working for the most part - not 100% perfect, I don't think (If I run the slider all the way to the top or all the way to the bottom in one motion, it doesn't change the lights state, but starting off down low it does), but it functions now (and not horribly laggy, or at least it doesn't seem to be)...</p>

<p>The thing is I had originally used 'param' as you have it posted above based off the thermostat example found here: (<a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry</a>) and it wasn't working before - I jhad tried every sensor type, etc and it wasn't working for anything...</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by subnetmask at Nov 21, 2014 14:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593915"></a>
                                    <font class="smallfont"><blockquote><p>The thing is I had originally used 'param' as you have it posted above based off the thermostat example found here: (<a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry</a>)</p></blockquote>
<p>I do not uderstand what you mean with this statement. The examples since v1.3 have always mentioned ${param}. So did I in my posts here as well. The examples have only changed recently from:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
from (v1.3 - v1.7.2)
http:<span class="code-comment">//raspberry_IP:8083/JS/Run/ThermostatSet(N,${param})
</span>to (v2.0.0-rc8)
http:<span class="code-comment">//raspberry_IP:8083/ZAutomation/OpenRemote/ThermostatSet/N/${param}
</span>and recently (v2.0.0-rc20)
http:<span class="code-comment">//raspberry_IP:8083/OpenRemote/ThermostatSet/N/${param}</span>
</pre>
</div></div>
<p>Zway stack versions in between ()</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 21, 2014 16:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593931"></a>
                                    <font class="smallfont"><p>What I mean is I tried it with <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">${param}</pre>
</div></div> before, and it didn't work.... But now it's working... I have no clue why it didn't work before... I had also tried <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">(N,${param})</pre>
</div></div> and out of desperation, just param as you saw in the screen clips, neither of which worked, obviously.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by subnetmask at Nov 22, 2014 02:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593933"></a>
                                    <font class="smallfont"><blockquote><p>(N,${param})</p></blockquote>
<p>That would have been correct in the pre-v1.7 versions. After that, parameters are separated by slashes</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">path/command/N/${param}</pre>
</div></div>
<p>So I understand you were confused</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 22, 2014 08:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23594421"></a>
                                    <font class="smallfont"><blockquote><p>even if I find that the sliders are laggy and choose not to use them, I'd still like to know how to set them up</p></blockquote>

<p>There now is a additional method to update sensors. Instead of polling at high frequency, you can make use of a mechanism on the Raspberry to push the status changes to the OpenRemoteController. I would expect that method to be more responsive. As I don't have dimmers I can't tell if that is true. So if there is someone voluntering to give it a try.<br/>
See recipes at <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-wave+with+Razberry+via+UDP" title="OpenRemote 2.0 How To - Z-wave with Razberry via UDP">OpenRemote 2.0 How To &#45; Z&#45;wave with Razberry via UDP</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 05, 2014 13:01
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:35</font></td>
		    </tr>
	    </table>
    </body>
</html>