<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Sending generic TCPIP events to Eventghost</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Sending generic TCPIP events to Eventghost
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 11, 2012 by <font color="#0050B2">marbieskarb</font>.
				    </div>

				    <p>Hello,</p>

<p>I'm trying to figure out how to send generic TCP/IP commands from the Openremote Designer to Eventghost so I can set up Macros with them.  I already have the event receiver plugin active in Eventghost and I can confirm that its working because I can send successful events to Eventghost using a couple Android clients (TerRemote and Eventghost by Tim Hoeck.)</p>

<p>This is how my command is setup so far:</p>

<p>Name: TV Power<br/>
Protocol: TCP/IP</p>

<p>TCP/IP attributes:</p>

<p>IP Address: 192.168.10.102 (Machine where Openremote and Eventghost are installed)<br/>
Port: 1024 (Same port as the Eventghost Receiver plugin)<br/>
Command: Unsure what needs to go here.</p>


<p>Any help would be greatly appreciated.</p>

<p>Thanks</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21037370"></a>
                                    <font class="smallfont"><p>When you use TerRemote what exactly do you enter there?<br/>
Maybe that will help to figure out howto enter the same in OpenRemote designer.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Nov 11, 2012 21:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037385"></a>
                                    <font class="smallfont"><p>I send commands to Eventghost via the UDP.</p>

<p>In eventghost you have to apply the udp plugin and activate "revieve from self"</p>

<p>In Openremote</p>

<p>IP of the eventghost server<br/>
port: the one on evenghost standard: 33333<br/>
command: what ever you want. it apears in eventhost and you drag and drop to apply to a macro.</p>


<p>I have that problem, that I cant make a sensor,  recive commands from eventghost, I dont know how!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dalhoj at Nov 12, 2012 16:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037391"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>It's not clear if you are having trouble sending commands from OpenRemote to Eventghost or from Eventghost to OpenRemote.</p>

<p>If Eventghost uses UDP then you will have to use the UDP Protocol to send commands to Eventghost and UDPListener Protocol to listen to UDP messages from Eventghost. You can then use rules to react to any messages received from Eventghost.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Nov 12, 2012 20:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21037395"></a>
                                    <font class="smallfont"><p>its from eventghost to openremote i have problems.</p>

<p>In Eventghost i have a action that makes a udp broadcast on port 33333 command "udp_send" and payload "on"</p>

<p>In openremote I have a command using the udplistener protocol, port: 33333 and RegularExpression: "udp_send"</p>

<p>I have made a switch sensor witch uses the created command.</p>

<p>In UI Designer i have made a Lable and used the created sensor, but after I sync the controller it just says "Lable Text" and nothing happends!!</p>

<p>I have tryed to broadcast the command from eventghost many times.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dalhoj at Nov 13, 2012 16:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038080"></a>
                                    <font class="smallfont"><p>Hi.</p>

<p>Did you ever manage to get it working?<br/>
I can also send commands to EG but still haven't found a way to do the opposite.<br/>
I have Openremote and Eventghost installed on the same machine, which can be good or bad  <img class="emoticon" src="images/icons/emoticons/tongue.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 04, 2012 14:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038081"></a>
                                    <font class="smallfont"><p>The UDPListener does not display or return anything which is received.<br/>
If you have a UDP server that sends out "hello world" and you use the regex "hello world" in the UDPListener it will match.<br/>
This means the current timestamp is taken to create an event.</p>

<p>In other words: If you would use a custom sensor and link to your UDPListener command each time your UDP server sends "hello world" the custom sensor receives a timestamp.<br/>
You can use a label and link that to the sensor which produces a new timestamp each time the UDP packet is received.</p>

<p>I use this to determine if a button was pressed on my IR remote since IRtrans is sending a UDP packet with the button name each time it receives the IR code.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Dec 04, 2012 14:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038087"></a>
                                    <font class="smallfont"><p>Well....I created the command and sensor.<br/>
I've added this rule (which I don't know if it is ok):</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"FromEG"</span>
when
  $evt:Event(source == <span class="code-quote">"EGS_UDP"</span>)   <span class="code-comment">// EGS_UDP is the UDPListener sensor
</span>then
  <span class="code-object">System</span>.out.println(<span class="code-quote">"Got it!!"</span>);
end
</pre>
</div></div>

<p>But the controller throws the following error:</p>

<p>INFO 2012-12-04 16:53:59,660 : Initialized event processor : Drools Rule Engine<br/>
ERROR 2012-12-04 16:53:59,666 : Creating sensor failed. Error : No device protoc<br/>
ol builders registered with protocol type 'udpListener'.</p>


<p>Any ideas?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 04, 2012 17:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038088"></a>
                                    <font class="smallfont"><p>Looks like your controller doesn't have the UDPListener protocol included; controller 2.0.1 onwards has it I believe; please check which version of the controller you are using.</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Dec 04, 2012 17:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038090"></a>
                                    <font class="smallfont"><p>Richard Turner,</p>

<p>Thanks.<br/>
I am using 2.0.1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 04, 2012 17:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038091"></a>
                                    <font class="smallfont"><p>Apologies it seems it's not in the 2.0.1 available in the download section; you'll have to compile from source, Marcus has a branch with it in here: -</p>

<p><a href="https://openremote.svn.sourceforge.net/svnroot/openremote/workspace/mredeker/Controller_2_0_1">https://openremote.svn.sourceforge.net/svnroot/openremote/workspace/mredeker/Controller_2_0_1</a></p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Dec 04, 2012 17:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038106"></a>
                                    <font class="smallfont"><p>It's in the 2.1-DeveloperSnapshot from sourceforge.<br/>
That one is based on my 2.0.1.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Dec 04, 2012 18:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038144"></a>
                                    <font class="smallfont"><p>Thanks but this is where I draw the line  <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I can mess with rules.<br/>
I can learn the commands by trial and error.</p>

<p>but</p>

<p>compiling from source... that's way ahead for me  <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I'll wait till someone compiles a new version so I can simply replace my files <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Thanks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 05, 2012 11:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038145"></a>
                                    <font class="smallfont"><p>I mean the compiled version <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>
<a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.0%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_Developer-Snapshot-20120920.zip/download">http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.0%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_Developer-Snapshot-20120920.zip/download</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Dec 05, 2012 12:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038149"></a>
                                    <font class="smallfont"><p>Marcus,</p>

<p>Thanks! I will try it <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 05, 2012 16:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038151"></a>
                                    <font class="smallfont"><p>Ok.</p>

<p>Updated OR to 2.1.0 and the first thing I notice is a ZWave error:</p>

<p>ERROR 2012-12-05 16:46:57,078 : Could not load commandBuilder class: org.openrem<br/>
ote.controller.protocol.zwave.ZWaveCommandBuilder</p>

<p>I don't have any ZWave hardware. How do I disable it?</p>

<p>Also, the config.properties file in web-inf/classes has already setup some hardware like russound devices and others. Should I just blank the IP or comment the whole line?  <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 05, 2012 17:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038154"></a>
                                    <font class="smallfont"><p>Looks like you have the "protocol.zwave.classname" property set, either through the designer or in  the config.properties maybe.<br/>
If you don't have ZWave the error can be ignored.<br/>
The other config entries don't hurt either if you don't use the devices.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Dec 05, 2012 19:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038170"></a>
                                    <font class="smallfont"><p>Marcus,</p>

<p>Thanks.</p>

<p>Now... I've tried the UDPListener and could not get it to work. With Eventghost I send the command it is expecting but... it doesn't get there.<br/>
I used an UDP test tool to monitor the ports. EG sends the correct data but OR doesn't react at all.<br/>
If OR will trigger an event when receiving the set regular expression... it should react to this rule:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"FromEG"</span>
when
  $evt:Event(source == <span class="code-quote">"EGS_UDP"</span>)
then
  <span class="code-object">System</span>.out.println(<span class="code-quote">"Got it!!"</span>);
end
</pre>
</div></div>

<p>No?</p>

<p>I never see the "Got it"  <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Did anyone got the UDPListener to work?</p>

<p>Is there any other way I can communicate with OR?</p>

<p>Thanks </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 06, 2012 11:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038172"></a>
                                    <font class="smallfont"><p>My rule which works with UDPListener looks like this:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Turn Light on via IR remote"</span>
when
  CustomState( source == <span class="code-quote">"AppleRemoteLeft"</span> )
then
  execute.command(<span class="code-quote">"OfficeLight_On"</span>);
end
</pre>
</div></div>
<p>I have a UDPListener command and that is assigned to a custom sensor which is named "AppleRemoteLeft".</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Dec 06, 2012 11:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038177"></a>
                                    <font class="smallfont"><p>Marcus,</p>

<p>Worked like a charm! Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Dec 06, 2012 15:04
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:45</font></td>
		    </tr>
	    </table>
    </body>
</html>