<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Z-wave on new Raspberry pi 2 help</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Z-wave on new Raspberry pi 2 help
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 28, 2015 by <font color="#0050B2">mattbianconi</font>.
				    </div>

				    <p>I have OpenRemote working well with an Aeon Z-stick 2 on Windows 8.1.  Multiple door sensor, switches, etc.  I got a raspberry pi 2 kit post-tax-return and am trying to get z-wave working.  Following the instructions on this website I've gotten OpenRemote running on the RPI with some virtual datetime sensors. Can login, refresh controller from web, access controllers from android and webconsole.  <br/>
I then updated the zwave.jar to the new 2.0 version, ran the <br/>
"sudo apt-get install librxtx-java<br/>
$ cp /usr/lib/jni/librxtxSerial.so [path to OpenRemote Controller]/\OpenRemote-Controller-2.0.2/webapps/controller/WEB-INF/lib/native/librxtxSerial.so" <br/>
as instructed.</p>

<p>However on launching "./openremote.sh run" z-wave is throwing "java.lan.NoClassDefFoundError."</p>

<p>I've tried a completely clean rpi image, updated java to 8u33 for arm, checked permissions on every file and directory I can think of.  Made sure z-wave is set to /dev/ttyUSB0 in composer.  I am completely stumped since others have it up and running with no issues. </p>

<p>Thanks for any help.</p>


<p>ERROR main: Creating sensor failed. Error : org/openremote/controller/ZWaveConfiguration<br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="106904608" name="ExclusionStatusSensor" type="switch"&gt;<br/>
      &lt;include type="command" ref="165" /&gt;<br/>
      &lt;state name="on" /&gt;<br/>
      &lt;state name="off" /&gt;<br/>
    &lt;/sensor&gt;<br/>
java.lang.NoClassDefFoundError: org/openremote/controller/ZWaveConfiguration<br/>
        at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.createZWavePortConfiguration(DefaultZWaveConfigurationManager.java:74)<br/>
        at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.getPortConfiguration(DefaultZWaveConfigurationManager.java:47)<br/>
        at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.initZWaveController(ZWaveCommandBuilder.java:245)<br/>
        at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:145)<br/>
        at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)<br/>
        at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)<br/>
        at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
        at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
        at org.openremote.controller.service.Deployer.startController(Deployer.java:336)<br/>
        at org.openremote.controller.spring.SpringContext.initializeController(SpringContext.java:109)<br/>
        at org.openremote.controller.service.ServiceContext.init(ServiceContext.java:383)<br/>
        at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startup.java:85)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.initializeServiceContext(ServletStartup.java:190)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.contextInitialized(ServletStartup.java:109)<br/>
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)<br/>
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)<br/>
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)<br/>
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)<br/>
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)<br/>
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)<br/>
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)<br/>
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)<br/>
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)<br/>
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)<br/>
        at org.apache.catalina.core.StandardService.start(StandardService.java:516)<br/>
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)<br/>
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br/>
        at java.lang.reflect.Method.invoke(Method.java:483)<br/>
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)</p>





				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23597273"></a>
                                    <font class="smallfont"><p>You need a newer version of the controller (at least 2.1) to support the new Z-Wave stack.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Mar 30, 2015 11:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23597275"></a>
                                    <font class="smallfont"><p>I am using the OpenRemote-Controller-2.1.0 build from January.  No idea why 1 didn't get the 2.1.1 version from sourceforge, perhaps the link on this website is still pointing to 2.1.0 in whichever document I used (razpberry vs windows install etc)?  I'll try the newer version now.  Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mattbianconi at Mar 30, 2015 11:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599397"></a>
                                    <font class="smallfont"><p>Did you get it work, as I am struggling with the same error, but on a QNAP NAS:</p>


<p>ERROR 2015-05-31 18:36:44,347 : Creating sensor failed. Error : org/openremote/controller/ZWaveConfiguration<br/>
 XML Element : &lt;sensor xmlns="http://www.openremote.org" id="7076529" name="INCLUSION ON/OFF" type="switch"&gt;<br/>
      &lt;include type="command" ref="396" /&gt;<br/>
      &lt;state name="on" /&gt;<br/>
      &lt;state name="off" /&gt;<br/>
    &lt;/sensor&gt;<br/>
java.lang.NoClassDefFoundError: org/openremote/controller/ZWaveConfiguration<br/>
        at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.createZWavePortConfiguration(DefaultZWaveConfigurationManager.java:74)<br/>
        at org.openremote.controller.protocol.zwave.DefaultZWaveConfigurationManager.getPortConfiguration(DefaultZWaveConfigurationManager.java:47)<br/>
        at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.initZWaveController(ZWaveCommandBuilder.java:245)<br/>
        at org.openremote.controller.protocol.zwave.ZWaveCommandBuilder.build(ZWaveCommandBuilder.java:145)<br/>
        at org.openremote.controller.command.CommandFactory.getCommand(CommandFactory.java:164)<br/>
        at org.openremote.controller.model.xml.Version20SensorBuilder.parseSensorEventProducer(Version20SensorBuilder.java:420)<br/>
        at org.openremote.controller.model.xml.Version20SensorBuilder.build(Version20SensorBuilder.java:287)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorObjectModelFromXML(Version20ModelBuilder.java:817)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:663)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
        at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
        at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)<br/>
        at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)<br/>
        at java.lang.Thread.run(Thread.java:745)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stevemichels at May 31, 2015 20:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599407"></a>
                                    <font class="smallfont"><p>For me it was the wrong controller version.  I had to use the 2.1.1 download from here <a href="http://sourceforge.net/projects/openremote/files/">http://sourceforge.net/projects/openremote/files/</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mattbianconi at Jun 01, 2015 04:55
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>