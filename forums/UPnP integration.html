<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : UPnP integration</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : UPnP integration
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 14, 2010 by <font color="#0050B2">mredeker</font>.
				    </div>

				    <p>Thanks to Mathieu, I was able to configure iphone.xml and controller.xml to control my Musicpal MP3 player which is hooked up to my Russound multiroom amp.<br/>
Now I am able to use OpenRemote to control the player and the multiroom amp <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>


<p>All we need now is to implement a more complete control point so that we can transfer a list of available songs from a UPnP server to the iPhone and select a song which should be played. In the moment this is hard coded into the controller.xml file.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-9601102"></a>
                                    <font class="smallfont"><p>Glad to hear you were able to use the UPnP integration.</p>

<p>There are many ways to select song to play. As you may have noticed, an UPnP server serves medias (pictures, videos, songs). A UPnP renderer is able to play medias, but these media can be shared by another way that an UPnP server (streaming, local files, network share...).</p>

<p>The goal of a UPnP Control Point, in this multimedia field, is to browse available source on servers to render to a particular point (the UPnP way...). This is very dynamic, as devices can appear and disapprear. Worst, there are quite often differences in implementations from a manufacturer to another.</p>

<p>Maybe this can be done in OR with the status feedback, having as both status and commands the available medias, but I guess it will require some more work.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mgallissot at Feb 17, 2010 13:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-9601105"></a>
                                    <font class="smallfont"><p>Some extra work is required, for sure. It would be nice to use the status concept to display songs from a UPnP server as a list on the iPhone.<br/>
Once a song is selected we would send the command to the renderer to play that song.</p>

<p>So we need a getAvailableMedia method in the UPnP event to transfer a list to the iPhone and a playSong method that takes a given media URI (from the iPhone) and triggers the play on the selected renderer.</p>

<p>I don't have the 2.0 codebase (status stuff) working yet but I will take a look at this once this is running.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 17, 2010 14:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877379"></a>
                                    <font class="smallfont"><p>Hi all,</p>

<p>Sorry to pull this post out but I'm trying to use OR UPnP Integration to launch some WebRadio to my AV Amplifier or on a Raspberry UPnP Renderer.</p>

<p>While I'm trying to adapt exemple below to new xml format, I figured out that in the file openremote/webapps/controller/WEB-INF/classes/applicationContext.xml, the UPnp Protocol is in comment.<br/>
(&lt;!--        &lt;entry key = "upnp"             value-ref = "upnpCommandBuilder"/&gt;     --&gt;)</p>

<p>I tried to uncomment this, but My OR Controller doesn't work anymore. Process normally started but unreachable with webconsole or android app.</p>

<p>But I'm sure I do something wrong <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Is uncomment this line not the only thing to do to activate upnp or upnp doesn't work anymore in this release ?</p>

<p>I'm using OpenRemote-Controller-2.1.0_FM_SNAPSHOT-2013-07-18 on a Ubuntu server.</p>

<p>Thank you.</p>

<p>EDIT : Same in OR 2.1.0 Snapshot 2013-06-17, upnp protocol is in comment.</p>

<p>EDIT 2 : No connexion between the subject, but I would to say Vera Integration work very well and much more responsive than the old method. Thanks you for this new feature !</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 03, 2013 07:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877469"></a>
                                    <font class="smallfont"><p>Or maybe someone know if exist a HTML REST Upnp Controller somewhere on the Internet that run on linux ?</p>

<p>With this I must be able to do a workaround, but any of my search doesn't give any good result ....</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 04, 2013 12:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877471"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>The Upnp work was done for an old version of controller and hasn't been maintained since then. Just uncommenting the configuration is unlikely to fix things. It needs a deeper code-level review and work to add UPnP back into OpenRemote.</p>

<p>To speed this along, needs someone with a bit of development skills and interest in UPnP to take the lead.</p>

<p>Best regards,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 04, 2013 12:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877476"></a>
                                    <font class="smallfont"><p>Hi Juha, Thanks you very much for the answer.</p>

<p>I have a little skill in Java development but I'm not mastering the art of coding right <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Anyway, maybe I can have a look, can you just tell me in two word where to start ?</p>

<p>For sure, If I do something working, be sure i'll reporting that on the forum.</p>


<p>Best regards and thanks again for OR <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 04, 2013 12:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877538"></a>
                                    <font class="smallfont"><p>Hi Juha, MacFly,</p>

<p>I'll take a look into this. </p>

<p>Mathieu</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mgallissot at Oct 05, 2013 05:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877580"></a>
                                    <font class="smallfont"><p>Yeah, that's a great news Mathieu !</p>

<p>uPnP, as is a standard, can be worth it, even if it just for using basic operation like play webradio directly from OR.</p>

<p>If I can provide any help.... please ask !</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 06, 2013 09:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878274"></a>
                                    <font class="smallfont"><p>Hi Mathieu, </p>

<p>Long time no talk.</p>


<p>Let me know if you need any help getting oriented again. Email me at juha at openremote dot org if needed.</p>

<p>Thanks,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 16, 2013 00:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878416"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>Just one little question, between Upnp and Vera protocol implementation, so I'm not sure if I post it in the right place...</p>

<p>About the the vera procotol integration in OR, how did you managed to get vera status without intrusive polling ?</p>

<p>Did you use a UPnP stack to subscribe to the device's events to receive notifications automatically when a device's state changes ?</p>

<p>Or did you use REST API and played with the Poll Timing Timeout to use few ressources with a responsive UI ?</p>

<p>I'm trying to understand how did you managed vera in a so cool way like this ...</p>

<p>Thanks you !</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 18, 2013 15:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878436"></a>
                                    <font class="smallfont"><p>Vera supports HTTP server push which is used in the native Vera protocol.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 18, 2013 20:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878454"></a>
                                    <font class="smallfont"><p>Thanks you very much for the reply Marcus !</p>

<p>Maybe you could just help me a little more ...</p>

<p>I've read the whole wiki page : <a href="http://wiki.micasaverde.com/index.php/UI_Notes">http://wiki.micasaverde.com/index.php/UI_Notes</a>, found that I can poll with http request, maybe cool with Poll Timing trick, I've also found that I can receive status from vera with the upnp notifying but i can't find anywhere a way to configure Vera to throw me HTTP Server push when a status is update ...</p>

<p>I know sometime, finding good infos for Vera maybe tricky, so if you can throw me a little link, or even some keyword, I would very much appreciate !</p>

<p>Sorry for this question, I know it is not fully OR oriented, but I wish to try to improve interaction between OR and Vera for some things, but I must understand how it work before ...</p>

<p>EDIT : Ok, after having a look to the source of VeraClient.java in OR, I understand that you use Http request with timeout and dataversion, so don't need to bother you anymore !</p>

<p>Thanks !</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by macfly92 at Oct 19, 2013 10:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878476"></a>
                                    <font class="smallfont"><p>You can look at the source of VeraCommand:</p>

<p><a href="http://sourceforge.net/p/openremote/code/HEAD/tree/workspace/mredeker/Controller_2_1_0-ORCJAVA-330/src/org/openremote/controller/protocol/vera/">http://sourceforge.net/p/openremote/code/HEAD/tree/workspace/mredeker/Controller_2_1_0-ORCJAVA-330/src/org/openremote/controller/protocol/vera/</a></p>

<p>and also check this: <a href="http://en.wikipedia.org/wiki/Push_technology">http://en.wikipedia.org/wiki/Push_technology</a><br/>
Vera is using the long polling.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Oct 19, 2013 20:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884285"></a>
                                    <font class="smallfont"><p>I was investigating integrating my Sonos into my open remote, and I have a question.  It seems there is code implementing upnp right within the controller.  How complete is this upnp implementation?  I ask because there also seems to be other upnp libraries which are seemingly currently maintained(eg Cling).  Is there merit in utilizing a library such as Cling instead of creating an implementation specifically for open remote?</p>

<p>Any insight would be appreciated.</p>

<p>thanks,<br/>
craig</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by craigham at Feb 13, 2014 02:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884286"></a>
                                    <font class="smallfont"><p>There's an update to UPnP being worked on by Mathieu Gallissot in <a href="http://svn.code.sf.net/p/openremote/code/workspace/mgallissot/Controller_2_1_0_FM_20130617_UPnP/">http://svn.code.sf.net/p/openremote/code/workspace/mgallissot/Controller_2_1_0_FM_20130617_UPnP/</a></p>

<p>You should discuss details with him. AFAIR he decided to use the cyberlink instead of cling. There's different trade-offs between the libs. I personally know the Cling developer so I've affinity to Cling but I don't have the time to do the implementation at the moment so we'll leave it to you guys to decide which way to go.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 13, 2014 06:33
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 11:02</font></td>
		    </tr>
	    </table>
    </body>
</html>