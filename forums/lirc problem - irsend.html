<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : lirc problem - irsend</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : lirc problem - irsend
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 07, 2012 by <font color="#0050B2">mgolisch</font>.
				    </div>

				    <p>It seems like irsend is called using wrong parameters:<br/>
its called like irsend SEND_ONCE BUTTON BUTTON instead of irsend SEND_ONCE REMOTE BUTTON.<br/>
So none of my IR commands work using the official 2.0 controller download.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19440113"></a>
                                    <font class="smallfont"><p>After further investigation it seems like the online designer generates wrong commands in the controller.xml.<br/>
All ir commands have the name attribute 2 times, one time using the remote name (which is correct) and a second time using the button name.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mgolisch at Apr 08, 2012 13:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440121"></a>
                                    <font class="smallfont"><p>Hi Michael,</p>

<p>thanks for finding this. We added the "name" attribute based on the command in tha last version since this is needed for the rules engine. <br/>
You can execute the command based on a rule and use the command name inside the rules.<br/>
We oversaw that the "name" attribute is also an explicit attribute used by the ir protocol.</p>

<p>I have to look into that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 09, 2012 09:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20451744"></a>
                                    <font class="smallfont"><p>Hi Guys</p>

<p>Was this ever resolved?</p>

<p>I added a remote to my local database which worked fine but Designer does this in controller.xml</p>

<p>    &lt;command id="1420" protocol="ir"&gt;<br/>
      &lt;property name="name" value="stereo" /&gt;<br/>
      &lt;property name="command" value="Power" /&gt;<br/>
      &lt;property name="name" value="Power" /&gt;<br/>
    &lt;/command&gt;</p>

<p>and when the IR command is fired from OR I get this,</p>

<p>/usr/bin/irsend SEND_ONCE Power Power</p>

<p>which should be,</p>

<p>/usr/bin/irsend SEND_ONCE stereo Power</p>

<p>Regards,</p>

<p>Garry</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by doucga at Oct 12, 2012 00:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038748"></a>
                                    <font class="smallfont"><p>I'm running the Designer-2.13.6-2012-09-20-Rosemary and this still seems to be a problem. Has a fix been integrated anywhere?</p>

<p>Thanks,<br/>
stefan</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by sbraab at Dec 18, 2012 15:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038790"></a>
                                    <font class="smallfont"><p>Still on my list to-do. I might wipe out half the database while I'm at it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Dec 18, 2012 19:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038791"></a>
                                    <font class="smallfont"><p>Only kidding on the last part.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Dec 18, 2012 19:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859419"></a>
                                    <font class="smallfont"><p>Any news on this...I have been editing the controller.xml file every time I resync...which is great fun I admit <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Apr 01, 2013 00:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859426"></a>
                                    <font class="smallfont"><p>Will see if I manage to not wipe out everyone's data and update the schema this weekend.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Apr 01, 2013 04:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859459"></a>
                                    <font class="smallfont"><p>Now i think you may not be kidding so much <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Apr 01, 2013 09:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860000"></a>
                                    <font class="smallfont"><p>Is it also possible to specify the lirc device to send the IR command on? <br/>
I have several IR blasters so have several instances of lirc running.<br/>
e.g.<br/>
irsend -d /dev/lircd0 SEND_ONCE DENON_RC1120_1 VOL_UP<br/>
irsend -d /dev/lircd SEND_ONCE MCE_USB POWER_ON</p>

<p>Is there anyway to specify with the command the -d part?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by smee204 at Apr 09, 2013 21:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860631"></a>
                                    <font class="smallfont"><p>Hi everybody,</p>

<p>I noticed that imported IR commands still have the "name" tag defined twice, which is a pain to correct manually after every update. I know this problem has already been mentioned here in the forum, but would it be possible to fix that in the short term?</p>

<p>Any action is greatly appreciated and would bring the IR feature back to business.</p>

<p>Thanks, </p>

<p>Alex</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aschwith at Apr 23, 2013 17:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414527"></a>
                                    <font class="smallfont"><p>Bump</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at May 19, 2013 15:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873461"></a>
                                    <font class="smallfont"><p>Are there any news on this one? It is a really annoying bug. I'd really appreaciate if someone could have a look at this. <br/>
Thanks.<br/>
Alex</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aschwith at Jun 29, 2013 11:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873592"></a>
                                    <font class="smallfont"><p>Alex, Kal, Simon,</p>

<p>Let me know the account name you are using in Designer and I will see if I can test the fix on your account before applying it in general.</p>

<p>Thanks,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 03, 2013 13:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873603"></a>
                                    <font class="smallfont"><p>Thanks Juha for trying. My account name is "aschwith". <br/>
Cheers, <br/>
Alex</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aschwith at Jul 03, 2013 17:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873884"></a>
                                    <font class="smallfont"><p>Hi Juha.</p>

<p>Been away sorry.</p>

<p>Account name is kalross</p>

<p>Regards.</p>

<p>K</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Jul 13, 2013 16:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873886"></a>
                                    <font class="smallfont"><p>Temp workaround using sed and a regex to remove the offending line.</p>

<p>Copy script to file and make executable.</p>

<p>Alter path (/opt/openremote/webapps/controller/) in the script to that of your controller.xml file and saves you manually editing the bugga!</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
#!/bin/sh

cp /opt/openremote/webapps/controller/controller.xml /opt/openremote/webapps/controller/controller.xml.temp
sed 'N;/.*&lt;property name=<span class="code-quote">"name"</span> value=<span class="code-quote">".*\n.*&lt;property name="</span>command<span class="code-quote">" value="</span>.*/{n;d;}' /opt/openremote/webapps/controller/controller.xml.temp &gt; /opt/openremote/webapps/controller/controller.xml

</pre>
</div></div>

<p>Resync to reset to original and just run again on new design</p>

<p>Welcome.</p>

<p>K</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Jul 13, 2013 22:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874070"></a>
                                    <font class="smallfont"><p>Just reporting back that test fix has been applied to my account.  Unfortunately this not working and broke my sed fix too <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>  Maybe I'm missing something?</p>

<p>controller.xml has the following now:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
    &lt;command id=<span class="code-quote">"2363"</span> protocol=<span class="code-quote">"ir"</span>&gt;
      &lt;property name=<span class="code-quote">"command"</span> value=<span class="code-quote">"VOL-"</span> /&gt;
      &lt;property name=<span class="code-quote">"remotename"</span> value=<span class="code-quote">"RM-U305_volume"</span> /&gt;
      &lt;property name=<span class="code-quote">"name"</span> value=<span class="code-quote">"VOL-"</span> /&gt;
    &lt;/command&gt;
</pre>
</div></div>
<p>I think this is the format we are looking for (using the above example):</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
    &lt;command id=<span class="code-quote">"2363"</span> protocol=<span class="code-quote">"ir"</span>&gt;
      &lt;property name=<span class="code-quote">"name"</span> value=<span class="code-quote">"RM-U305_volume"</span> /&gt;
      &lt;property name=<span class="code-quote">"command"</span> value=<span class="code-quote">"VOL-"</span> /&gt;
    &lt;/command&gt;
</pre>
</div></div>

<p>Cheers.</p>

<p>Kal</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Jul 22, 2013 23:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874072"></a>
                                    <font class="smallfont"><p>Yes, you will need the updated controller binary from <a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.1%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_FM_ORCJAVA-380.zip/download">OpenRemote-Controller-2.1.0_FM_ORCJAVA-380.zip</a></p>

<p>Both the name and the remotename properties will remain in the controller.xml &#8211; this allows the LIRC commands to be executed from the rules (the rules look for the default 'name' attribute).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 22, 2013 23:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874074"></a>
                                    <font class="smallfont"><p>Working perfectly.</p>

<p>Thanks so much for taking the time to fix.  Much appreciated.</p>

<p>Kal <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kalross at Jul 23, 2013 01:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874080"></a>
                                    <font class="smallfont"><p>Alex, your account has been updated as well. </p>

<p>You will also need to update to patched binary <a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.1%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_FM_ORCJAVA-380.zip/download">OpenRemote-Controller-2.1.0_FM_ORCJAVA-380.zip</a> for the changes to work correctly.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 23, 2013 09:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874145"></a>
                                    <font class="smallfont"><p>Would welcome patches in this area if you're interested. I'd like to add these myself too but currently need to take care of other tasks with higher priority.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 25, 2013 17:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874166"></a>
                                    <font class="smallfont"><p>i think you can specify the path to the irsend binary, just swap it with a shellscript that calls into different lircd sockets based on the remote name. thats how i did it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mgolisch at Jul 27, 2013 00:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874198"></a>
                                    <font class="smallfont"><p>Hi Juha, <br/>
thanks a lot for the fix. It did it. Only thing is that the suggested version does not support zwave. Could you indicate what files I have to replace in order to use OpenRemote-Controller-2.1.0_Developer-Snapshot-20120920 with that fix? Or is there any newer zwave version that would do it, too?</p>

<p>Thanks again, <br/>
Alex</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aschwith at Jul 29, 2013 18:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874215"></a>
                                    <font class="smallfont"><p>You can download Z-wave from <a href="http://download.openremote.org/free/zwave">http://download.openremote.org/free/zwave</a></p>

<p>Save the jar file to your controller's /webapps/controller/WEB-INF/lib directory.</p>

<p>Let us know if there are any issues.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jul 30, 2013 22:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883891"></a>
                                    <font class="smallfont"><p>Hello,<br/>
I've recently begun working to integrate Openremote with my home automation and entertainment.  I'm having a similar problem to the one described above.  I tried downloading the binary linked in the above post but it is returns a controller error.  Is there a change that needs to be made on the backend to make this function properly?  my account name is mtbboyz.  Thank you for your time and an excellent product.</p>

<p>Chris</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mtbboyz at Feb 03, 2014 20:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884021"></a>
                                    <font class="smallfont"><p>Yes, needs a tweak on your account... now if I could only remember what it was that I did... sigh...</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 06, 2014 14:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884252"></a>
                                    <font class="smallfont"><p>I'd be very grateful if you have time to apply the fix.  Manually editing the controller.xml is very tedious</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mtbboyz at Feb 11, 2014 17:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884254"></a>
                                    <font class="smallfont"><p>Will take care of it. Just give me some time. Busy, busy, busy.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 11, 2014 17:36
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>