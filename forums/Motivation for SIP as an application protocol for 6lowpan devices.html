<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Motivation for SIP as an application protocol for 6lowpan devices</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Motivation for SIP as an application protocol for 6lowpan devices
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 20, 2009 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Found this interesting for couple of reasons &#8211; it proposes open protocols via IETF in contrast to the state of much of the existing HA industry and it proposes SIP (&#33;) as an application protocol over 6lowpan. </p>

<p>The latter is curious as SIP is more commonly known from VoIP applications. SIP of course is another open protocol which is a big benefit. The other advantage is that there's a lot of OSS SIP code to reuse, one of which are SIP servlets on Tomcat (see for example <a href="http://en.wikipedia.org/wiki/Mobicents">http://en.wikipedia.org/wiki/Mobicents</a>).</p>

<p>Anyone with more comments on the work going around in the 6lowpan area?</p>


<p><a href="http://www.ietf.org/id/draft-roychowdhury-6lowappsip-00.txt">http://www.ietf.org/id/draft-roychowdhury-6lowappsip-00.txt</a></p>


<blockquote>
<p>Abstract.</p>

<p>   The Smart Grid initiative is an effort in modernization of the <br/>
   electricity grid using communication technology with the primary <br/>
   goals of reducing energy consumption, reducing cost (utilities and <br/>
   consumers), increasing reliability and the creation of new services <br/>
   for all participants in the value chain. The core focus of this <br/>
   initiative is the specification of a 'Communications Overlay' network <br/>
   which can help facilitate intelligent communication (discovery, <br/>
   session establishment, routing, addressing to name a few)  between <br/>
   various nodes of the heterogeneous Smart Grid network. </p>

<p>   One of the 'network segments' of the Smart Grid network is the Home <br/>
   Area Network (HAN) and how residential and/or commercial devices <br/>
   (such as TV, washing machine, surveillance camera, etc.) interact <br/>
   with the smart meter/energy management system and vice-versa. </p>

<p>   This draft is an initial input for consideration of SIP as an <br/>
   appropriate application protocol for use inside devices that operate <br/>
   over low powered IP networks.  </p>

<p>   The authors do NOT propose the use of SIP for all HAN devices. <br/>
   Rather, the authors believe that SIP is an appropriate protocol for <br/>
   certain categories of devices and therefore, the 6lowapp group should <br/>
   consider SIP as an appropriate protocol for the same. The final <br/>
   protocol that is ideal for a particular device communication will <br/>
   always be determined by the use-case(s) that are envisioned for the <br/>
   same. </p>

<p>   This draft does NOT discuss the use of SIP inside the smart meter <br/>
   (while the authors believe that the smart meter would also benefit <br/>
   from SIP, that is the scope of another draft and does not apply to <br/>
   the 6lowapp work). Therefore, in all diagrams and references, the <br/>
   authors have used the term 'Energy Management System (EMS)' to refer <br/>
   to the customer premise EMS that may or may not be the smart meter <br/>
   itself. </p>

<p>   ...</p>

<p>1.  Introduction</p>

<p>   A 'smart home' is a modern day home in which a significant portion of <br/>
   physical objects have built-in intelligence and communications <br/>
   capability. Naturally, different devices in the home will require <br/>
   different levels of intelligence. Furthermore as devices get more <br/>
   intelligent, the mechanisms used to interact with them will also get <br/>
   more complex.  </p>

<p>   Furthermore, home area network applications will not be about <br/>
   limiting and relating objects to specific homes, but rather need to <br/>
   be capable and open to much more complex relationships. For example, <br/>
   if a guest is charging their electric car at a friends house, we <br/>
   should consider applications that will understand that the charge <br/>
   should appear on the guests electric bill and not that of the the <br/>
   friend.  </p>

<p>   As another example, it is entirely possible that your home IPTV <br/>
   interacts with the EMS and monitors the current price of electricity <br/>
   and when it reaches a particular threshold, automatically negotiates <br/>
   a lower bit rate codec as well as steps down brightness a few <br/>
   notches. </p>

<p>   Continuing this line of thought, your thermostat could be more than <br/>
   just a programmable 'time-of-day' device. Consider for example, your <br/>
   cell phone being the 'location updater' for your thermostat and when <br/>
   the owner is a few miles away from home, the heating automatically <br/>
   starts. Much better than you arriving early one evening and freezing <br/>
   for 15 minutes before your thermostat warms up, isn't it? </p>

<p>   The examples above all show why the authors feel that the future home <br/>
   services will not just be limited to traditional home appliances but <br/>
   which will also involve other communication devices such as your <br/>
   3G/GSM/CDMA phone, your electric car and others. </p>

<p>   SIP is an excellent choice for middleware in building out these sort <br/>
   of applications as this I-D will describe. </p>


<p>   ...</p>


<p>2.1     Advantages of SIP </p>

<p>   SIP brings in a lot of advantages for HAN devices, only some of which <br/>
   are described below: </p>

<p>   o Addressing: SIP devices are addressed by a URI scheme (example <br/>
     sip:mycar@myhome.net) and are independent of their current IP <br/>
     address. This means that the device can be reached anywhere as <br/>
     long as it is connected and the IP address will be resolved as <br/>
     part of routing at that instance of communication </p>

<p>   o Groups and Forking: The architecture of SIP allows for multiple <br/>
     devices to be addressable (grouped) using a single id (example: <br/>
     clocks@myhome.net). This makes it simple to issue one command that <br/>
     gets "forked" (i.e. sent in parallel) to multiple devices (example <br/>
     an IM "set dst on" to clocks@myhome.net, or, say "set max heating <br/>
     72F" to thermostats@myhome.net) </p>

<p>   o Events - Subscriptions and Notifications: SIP allows for any <br/>
     device to subscribe and be notified of any event that is triggered <br/>
     on that device. For example, your thermostat could subscribe to <br/>
     the "EnergyRate" event of the smart meter and if the rate/kwh were <br/>
     to increase beyond a point, the thermostat would be notified and <br/>
     may choose to adjust its setting of heating automatically. </p>

<p>   o Mobility: SIP supports mobility at the application layer, <br/>
     primarily due to its use of URIs for addressing. A device can 're-<br/>
     register' its current location dynamically with its home proxy and <br/>
     can be reached even if its real address is different from the <br/>
     known address. </p>

<p>   o Security: SIP integrates well with security. It supports a variety <br/>
     of security mechanisms such as TLS, MD5-Auth, AKA, PKI etc. <br/>
     Furthermore, different devices can use different security <br/>
     protocols (or none) depending on their need with SIP which serves <br/>
     very well for limited capability devices/networks </p>

<p>   o Offer-Answer: SIP is modeled around an offer-answer model which <br/>
     ensures that a session is established using capabilities that both <br/>
     endpoints support. For example, if a homeowner were to monitor his <br/>
     home nanny cam using his desk phone, it would automatically detect <br/>
     the phone does not support video and would only provide an audio <br/>
     stream </p>

<p>   o Discovery: SIP natively supports both device and capability <br/>
     discovery. For example, clocks@myhome.net may result in the <br/>
     initial communication reaching all the clocks of the house (alarm <br/>
     clock, radio clock, oven clock). Similarly, the SIP OPTIONS method <br/>
     can be used to discover the capabilities of multiple devices <br/>
     before initiating a communication with a selected device. As <br/>
     another  specific example, even though UPnP is the consumer <br/>
     electronics industries' de-facto standard for discovery and <br/>
     control, the architecture does not meet the requirements for use <br/>
     on a pervasive network or lend to mobility. In addition, there is <br/>
     general consensus that its SOA architecture is unnecessarily <br/>
     complex. For this reason, the industry is in the process of <br/>
     standardizing the concept of a UPnP to SIP interface11 as the <br/>
     preferred mechanism for pervasive device control and discovery. </p>

<p>   o Presence: SIP, specifically the work done in SIMPLE 10 brings in <br/>
     a strong concept of presence to SIP. A SIP device can advertise <br/>
     its current presence state (busy, online, offline, DND, lowpower-<br/>
     sleep etc.) which can both help communicating entities know the <br/>
     current state of the device before reaching out to it, as well as <br/>
     open up a lot of innovative service creation possibilities <br/>
     (example: if my house TV is in 'transmitting' state for 3 hours, <br/>
     and I am on travel, I may decide to switch it off, not just to <br/>
     save power, but to ensure my kids are not taking advantage of <br/>
     their parent-free-time) </p>

<p>   o Converged communication: SIP has the ability to interwork multiple <br/>
     devices to execute a single service. Consider for example, a  <br/>
     situation where your EMS has detected a sudden rise in power usage <br/>
     that is not the norm based on your past trends. It may choose to <br/>
     alert you of this situation both by email, as well as a digital <br/>
     signage overlay on your TV that gives you more information and <br/>
     then allow you to rectify the situation appropriately. </p>

<p>   o Extensible: The architecture of SIP easily enables new methods and <br/>
     extensions as applicable. This means that if SIP needs to be <br/>
     modified to fit into a particular network/device characteristic it <br/>
     can easily be done. </p>

<p>   ...</p>


<p>3.1     SIP has VoIP baggage and is therefore complicated </p>

<p>   SIP can be used completely independent of VoIP. For example, one can <br/>
   just use SIP IM messages to communicate between devices which does <br/>
   not need a session to be established  </p>
</blockquote>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-4948242"></a>
                                    <font class="smallfont"><p>Hello Juha,</p>

<p>Have a look at <a href="http://www.enseirb.fr/cosynux/HomeSIP/">http://www.enseirb.fr/cosynux/HomeSIP/</a></p>

<p>but you also have to consider xmpp as an alternative way to talk to smart objects.</p>

<p>Look at <a href="http://portal.etsi.org/docbox/Workshop/2008/2008_06_M2MWORKSHOP/ISMB_FORNO_M2MWORKSHOP.pdf">http://portal.etsi.org/docbox/Workshop/2008/2008_06_M2MWORKSHOP/ISMB_FORNO_M2MWORKSHOP.pdf</a></p>

<p>Best regards</p>

<p>David Menga</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by cybion at Oct 21, 2009 14:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948250"></a>
                                    <font class="smallfont"><p>XMPP would be a good choice too. I think anything that gets us out of the current proprietary sillyness will do. Good thing about protocols is there are so many to choose from. </p>

<p>I haven't looked at IPv6 over 802.15.4 long enough to say if one protocol has benefits over the other. Akiba was making a point in his <a href="http://freaklabs.org/index.php/Blog/Zigbee/Outline-Summary-of-IETF-Draft-Smart-Energy-Requirements-for-6LowAPP.html">earlier IETF draft summary</a> on 6LoWAPP about avoiding message fragmentation but I don't know what is the technical reasoning driving this consideration.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 21, 2009 19:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948256"></a>
                                    <font class="smallfont"><p>If you're interested in XMPP, might want to check this out. Someone wrote an XMPP implementation for Contiki so they could control devices via IM and Pidgin <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p><a href="http://freaklabs.org/index.php/Blog/News/XMPP-for-Contiki.html">Link</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by freaklabs at Oct 22, 2009 00:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948265"></a>
                                    <font class="smallfont"><p>Hi. I'm one of the authors of this ID and have a few comments. First, just to let everyone know, the idea for this grew out of work we are doing which involves SIP in smart meters and neighborhood area networks. For obvious reasons, many carriers and their partner utilities have become interested in our work and so a number of members of the SIP industries main association have decided to explore this space through a special interest group  <a href="http://www.sipforum.org/content/view/351/266/">http://www.sipforum.org/content/view/351/266/</a>. </p>

<p>Now, for the most part, our partner companies are not particularly interested in what happens behind the meter, but as individuals,  myself (I recently started a venture in the A/V &amp; media management space), Arjun Roychowdhury (who actually implemented a SIP home control system when he worked at Telcordia), Henning Schulzrinne (who did research in domotics using SIP) and Jeff Dionne (who originally wrote uCLinux for building  control applications) are  people in this group who are very excited about the possibilities for home control.</p>

<p>If the owners of the SIP stack allow us, we will distribute it under LGPL. The thing is, it will take years for even ZigBee SE, which has clear industry and device manufacturer backing, to actually move towards 6LoWPAN/IP, let alone a concept as new as ours.  That's why I'm not sure if any of this will be relevant to your project in the near term. One thing which is clear, the whole HAN area will remain a mess for a long time to come so a middleware layer like OpenRemote will be the winning solution.</p>

<p>Having said that, I think the concept of a very light and cheap  XMPP or SIP gateway to for example all HANs you  guys support and a new 'Boss' component called the "cloud controller" is a great idea and I've been thinking about this idea for a few months now.</p>

<p>The very high level concept is a $40 gateway that abstracts everything to XMPP and a controller on the cloud that only speaks to the gateway using XMPP/SIP. This would allow anyone to create a home control app using an application container similar in idea to OpenSocial without interfacing with the home directly. With the concept of federation this can grow to be pretty impressive and internetworked system. I would prefer to use XMPP for the gateway to controller communications in this project and I plan on throwing up a description of the system architecture and device ontologies, not just for OpenRemote in mind, but any group interested in exploring this idea, on a I site I'm putting up,  <a href="http://socialhardware.org">http://socialhardware.org</a>, in the coming weeks. I haven't played with your system but I imagine your REST and view's models can be a base for the application container concept.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by shidan at Oct 22, 2009 04:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948288"></a>
                                    <font class="smallfont"><p>Hey Shidan,</p>

<p>Thanks for dropping by. Completely agree on the need of the middleware here, and while the road ahead points towards better things with open standards on 6LoWPan, 802.15.4, et al. the industry is moving slowly. So we will do our best to integrate the legacy while working on something better.</p>

<p>If we can do anything to help to convince on the benefits of open sourcing stack implementation, let us know.</p>

<p>Both XMPP and SIP are popping up as almost interchangeable protocols, any insight on the trade-offs between the two?</p>

<p>&#8211; Juha</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 22, 2009 20:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948290"></a>
                                    <font class="smallfont"><p>They're somewhat intercheangable. Both bring routability to the application layer and can carry a lot of arbitrary information. SIP really outshines anything, I think, for discovery of capabilities between devices &amp; services and negotiating session parameters, XMPP on the other hand, lends itself to much simpler presence/IM application development and, because of this, where you are limited to only a few class of devices, it would be easier for M2M applications.  There is nothing 'simple' about SIMPLE.</p>

<p>A few other points to consider is that SIP is already designed for unreliable networks and has a better security model.<br/>
So I think for a true pervasive 'Web of Things'  or a global network with many devices and, more importantly, class of devices, or even systems on a path towards that, like the Grid and mobile networks, SIP is a better choice.</p>

<p>Truthfully though, for higher level protocols anything will be better as a general middleware layer than the very limited and awkward UPnP &amp;WS-D standards. Specially for breaking down the walls of what we define the home as with respect to these technologies.</p>

<p>I think for the purposes of OpenRemote , and thinking practically for today and not tomorrow,  if you want to build something thats much better than what the CEDIA marketplace has to offer, ease of development and larger developer participation becomes a bigger factor.  Having said that, let me go back to my idea because no one commented on it, I just want to gauge if you guys think its a bad idea or maybe its something you have already considered.</p>

<p>Together with someone else, I've been discussing for some time, that it would be interesting if we  implement an idea I had by putting out an opensource spec for a device similar in concept to your 'ORB' except that we want it to be really cheap, in quantity a BOM of $40. This is entirely possible. Looking at your project, I think having  a simple device like this in the home which is part of an XMPP/SIP network on the Internet side and speaks all these different control standards in the home and where applications for controlling the box become just web apps in the cloud would be really interesting.</p>

<p>You can think of the possibility of many small security VARs, ISPs, consumer and small business VoIP providers adopting this as a managed home control service, and who knows, maybe even community driven, federated networks could pop up. So if we designed a box for  this and defined the interface to the box and for federation as a part of our project, would you guys be interested in developing the application server side of it as an addition to your project?</p>

<p>Probably this partially entails a multi-tenanted system for panel software and user interface composer? Maybe its too early even for an idea like this. I don't know, but maybe this can grow into something a lot more innovative than what the CEDIA industry currently offers. your opinions are appreciated.</p>

<p>One more point, if OpenRemote plans on supporting any of DLNA, ONVIF or PSIA as part of a whole CEDIA solution, even today, SIP would make more sense as the gateways interface.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by shidan at Oct 23, 2009 03:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-4948301"></a>
                                    <font class="smallfont"><blockquote>
<p>Together with someone else, I've been discussing for some time, that it would be interesting if we implement an idea I had by putting out an opensource spec for a device similar in concept to your 'ORB' except that we want it to be really cheap, in quantity a BOM of $40. This is entirely possible. Looking at your project, I think having a simple device like this in the home which is part of an XMPP/SIP network on the Internet side and speaks all these different control standards in the home and where applications for controlling the box become just web apps in the cloud would be really interesting.</p></blockquote>

<p>Definitely interested in discussing a $40 BOM.</p>

<p>Our current dependency on a full (standard) Java runtime is keeping the BOM price higher. On retail level, the Plug computer (<a href="http://openremote.org/display/forums/Plug+Computer">discussed in another forum thread</a>) comes down to $100 and which may be able to run Java runtime sufficiently (remains to be seen) on ARM architecture.</p>

<p>At $40 level <b>today</b> (assuming low or pay-as-you-go manufacturing volumes) I could foresee something that acts purely as a protocol translator (which is what our first iteration of OR Boss software stack is doing as well) but longer term a more accessible software platform for developers to create higher level apps, including temporal rules and software that interacts within the scenarios you've described in the IETF motivational draft, I believe benefits from fully featured Java SE. I think by the time we get to wide-spread adoption of open protocols and specs the current $100 retail price level have gone down quite a bit too.</p>

<p>Please share what details you can about the BOM you were thinking of.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 24, 2009 21:41
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 11:02</font></td>
		    </tr>
	    </table>
    </body>
</html>