<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : error listenerStart on startup Controller</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : error listenerStart on startup Controller
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 13, 2011 by <font color="#0050B2">dlowet</font>.
				    </div>

				    <p>Hello,</p>

<p>I'm new here.<br/>
I have a Synology DS110j with <br/>
./java -version<br/>
java version "1.6.0_21"<br/>
Java(TM) 2 Runtime Environment, Standard Edition for Embedded (build 1.6.0_21-b09, headless)<br/>
Java HotSpot(TM) Client VM (build 19.0-b02, mixed mode)</p>

<p>When I run OpenRemote I get this output:</p>

<p>RECORD&gt; ./openremote.sh run<br/>
Using CATALINA_BASE:   /usr/local/OpenRemote<br/>
Using CATALINA_HOME:   /usr/local/OpenRemote<br/>
Using CATALINA_TMPDIR: /usr/local/OpenRemote/temp<br/>
Using JRE_HOME:       /usr/local/java<br/>
Mar 13, 2011 7:44:39 PM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/local/OpenRemote/webapps/controller/WEB-INF/lib/native<br/>
Mar 13, 2011 7:44:40 PM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8080<br/>
Mar 13, 2011 7:44:40 PM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 4248 ms<br/>
Mar 13, 2011 7:44:40 PM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Mar 13, 2011 7:44:40 PM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Mar 13, 2011 7:44:43 PM org.apache.catalina.core.StandardContext start<br/>
SEVERE: Error listenerStart<br/>
Mar 13, 2011 7:44:43 PM org.apache.catalina.core.StandardContext start<br/>
SEVERE: Context <span class="error">&#91;/controller&#93;</span> startup failed due to previous errors<br/>
Mar 13, 2011 7:44:46 PM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
Mar 13, 2011 7:44:46 PM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 6226 ms</p>


<p>When I go with my browser to <a href="http://192.168.0.5:8080/controller">http://192.168.0.5:8080/controller</a> I get an error of Apache Tomcat/6.0.18, so there is something working.</p>

<p>How can I solve my problem? It would be very nice to have OpenRemote working!</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-15532956"></a>
                                    <font class="smallfont"><p>It doesn't show the "previous errors" on the console but these should be visibile (long) stack traces in the /logs/catalina.out file.</p>

<p>Can you send that output please? You may want to delete the log file first, and the restart the controller to minimize the log file size.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 14, 2011 06:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-15532972"></a>
                                    <font class="smallfont"><p>I copied all the files again and now it is fully working on my synology.</p>

<p>At this moment I don't have an android device or iphone, but I will test it with an emulator.</p>

<p>I'm already happy that it's working.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dlowet at Mar 15, 2011 06:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-15533023"></a>
                                    <font class="smallfont"><p>The test with the emulator was successfull.</p>

<p>The problem is that I need to delete openremote everytime I reboot the synology and copy the files again to get it working again.<br/>
Here is the /logs/catalina.2011-03-17.log<br/>
What can I do about it?</p>


<p>Mar 17, 2011 7:19:12 AM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/local/OpenRemote/webapps/controller/WEB-INF/lib/nativ<br/>
Mar 17, 2011 7:19:12 AM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8080<br/>
Mar 17, 2011 7:19:12 AM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 4197 ms<br/>
Mar 17, 2011 7:19:13 AM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Mar 17, 2011 7:19:13 AM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Mar 17, 2011 7:19:29 AM org.apache.catalina.core.StandardContext start<br/>
SEVERE: Error listenerStart<br/>
Mar 17, 2011 7:19:29 AM org.apache.catalina.core.StandardContext start<br/>
SEVERE: Context <span class="error">&#91;/controller&#93;</span> startup failed due to previous errors<br/>
Mar 17, 2011 7:19:30 AM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8080<br/>
Mar 17, 2011 7:19:31 AM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 18160 ms</p>


<p>if I stop the controller with telenet I got this output on the screen:</p>

<p>INFO: Pausing Coyote HTTP/1.1 on http-8080<br/>
Mar 17, 2011 8:10:43 AM org.apache.catalina.core.StandardService stop<br/>
INFO: Stopping service Catalina<br/>
log4j:WARN No appenders could be found for logger (org.quartz.core.QuartzScheduler).<br/>
log4j:WARN Please initialize the log4j system properly.<br/>
Mar 17, 2011 8:10:44 AM org.apache.coyote.http11.Http11Protocol destroy<br/>
INFO: Stopping Coyote HTTP/1.1 on http-8080</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dlowet at Mar 17, 2011 06:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-15533031"></a>
                                    <font class="smallfont"><p>Hello Davy,</p>

<p>Sorry I gave you the wrong log file &#8211; can you delete the log files and send what is logged at the localhost*.log files instead? (should have long error traces).</p>

<p>Thanks,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 17, 2011 12:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-15533032"></a>
                                    <font class="smallfont"><p>Hello Juha,</p>

<p>It's no problem!</p>

<p>here is the log of the localhost file</p>

<p>Mar 17, 2011 2:21:26 PM org.apache.catalina.core.ApplicationContext log<br/>
INFO: Loading Spring root WebApplicationContext<br/>
Mar 17, 2011 2:21:29 PM org.apache.catalina.core.ApplicationContext log<br/>
INFO: Initializing Log4J from <span class="error">&#91;/usr/local/OpenRemote/webapps/controller/WEB-INF/classes/log4j.properties&#93;</span><br/>
Mar 17, 2011 2:21:33 PM org.apache.catalina.core.StandardContext listenerStart<br/>
SEVERE: Exception sending context initialized event to listener instance of class org.openremote.controller.statuscache.InitCachedStatusDBListener<br/>
java.lang.ClassCastException: org.openremote.controller.protocol.knx.GroupValueWrite cannot be cast to org.openremote.controller.command.StatusCommand<br/>
        at org.openremote.controller.service.impl.PollingMachinesServiceImpl.getStatusCommand(PollingMachinesServiceImpl.java:165)<br/>
        at org.openremote.controller.service.impl.PollingMachinesServiceImpl.initStatusCacheWithControllerXML(PollingMachinesServiceImpl.java:88)<br/>
        at org.openremote.controller.statuscache.InitCachedStatusDBListener.contextInitialized(InitCachedStatusDBListener.java:53)<br/>
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)<br/>
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)<br/>
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)<br/>
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)<br/>
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:926)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:889)<br/>
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)<br/>
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)<br/>
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)<br/>
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)<br/>
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)<br/>
        at org.apache.catalina.core.StandardService.start(StandardService.java:516)<br/>
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)<br/>
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
        at java.lang.reflect.Method.invoke(Method.java:597)<br/>
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)<br/>
Mar 17, 2011 2:21:33 PM org.apache.catalina.core.ApplicationContext log<br/>
INFO: Shutting down Log4J<br/>
Mar 17, 2011 2:21:33 PM org.apache.catalina.core.ApplicationContext log<br/>
INFO: Closing Spring root WebApplicationContext</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dlowet at Mar 17, 2011 13:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-16023633"></a>
                                    <font class="smallfont"><p>Sorry for the delay,</p>

<p>Looks like a possible config problem:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>SEVERE: Exception sending context initialized event to listener instance of class org.openremote.controller.statuscache.InitCachedStatusDBListener
java.lang.ClassCastException: org.openremote.controller.protocol.knx.GroupValueWrite cannot be cast to org.openremote.controller.command.StatusCommand
</pre>
</div></div>

<p>StatusCommand expects a KNX Group Value <b>READ</b> (which you configure in your designer by using 'STATUS' in the command name).</p>

<p>Right now the sensor is configured with a Group Value <b>Write</b> which causes a stack trace dump.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 31, 2011 15:27
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:47</font></td>
		    </tr>
	    </table>
    </body>
</html>