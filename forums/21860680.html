<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Any CBUS updates?</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Any CBUS updates?
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 28, 2013 by <font color="#0050B2">nwe</font>.
				    </div>

				    <p>Hi,<br/>
I have a friend with a CBus driven house and he would love to drive it using openremote.<br/>
He is primarily a Apple fan with the usual Mac's, Ipads, Iphones.</p>

<p>Are there any updates on OR working with CBus?</p>

<p>I came across this discussion else where in the forums.
<a href="http://www.openremote.org/display/forums/OpenRemote+Controller+-+IP+and+Serial+questions.?focusedCommentId=2424991#comment-2424991">http://www.openremote.org/display/forums/OpenRemote+Controller+-+IP+and+Serial+questions.?focusedCommentId=2424991#comment-2424991</a></p>

<p>Neil </p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21860680/22708250.png">Screenshot from 2013-05-07 23:15:00.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21860680/22708249.png">Screenshot from 2013-05-07 23:15:00.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21860680/23036174.png">cbus_commands.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21860701"></a>
                                    <font class="smallfont"><p>Hi Neil,</p>

<p>No update on c-bus I'm afraid. The status is still the same &#8211; we will need someone from the community with C-bus equipment to add the integration to OpenRemote.</p>

<p>If you or your friend knows someone, might be good idea to make a contact.</p>

<p>Best regards,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 29, 2013 05:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860736"></a>
                                    <font class="smallfont"><p>Thanks, <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at Apr 30, 2013 22:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413773"></a>
                                    <font class="smallfont"><p>Hi Neil - I have just started using open remote a couple of days ago. I have managed to get it to control a C-BUS system over IP. Its not that difficult (Control anyways, Feedback is a different story...). If you have a network CNI unit on the C-BUS, you can just send it some TCP/IP commands. You just need the IP address of the CNI, the port (almost always 10001) and the command string to send. As an example string, to turn on my sitting room lamps I send the following command:</p>

<p>\053800791436g&lt;cr&gt;</p>

<p>Enter the code exactly as shown, including the initial backslash and the &lt;cr&gt; bit at the end. For lighting, the only values that will change are "14" which is the group address of the light you need to turn on/off and the "36" which is a checksum and will vary if you change any of the preceding numbers.I read somewhere else on the forum someone was struggling with how exactly to enter the string to be sent, but the above works fine for me.The breakdown of the command string is explained in the help documents on the Clipsal website. 
<a href="http://training.clipsal.com/downloads/OpenCBus/C-Bus%20Quick%20Start%20Guide.pdf">http://training.clipsal.com/downloads/OpenCBus/C-Bus%20Quick%20Start%20Guide.pdf</a></p>

<p>Once you get your head around calculating the check sum byte (36 in my example) for your particular command, its easy enough.<br/>
As I mentioned earlier, i'm still struggling with the feedback aspect. C-BUS replies instantly by more or less returning the same command you sent it. So far I have not been able to figure out how to configure open remote to receive this message correctly... There does not appear to be a C-BUS 'read-only' command you can send to simply retrieve the current state of a specific lighting group. I'll keep trying...</p>

<p>I've only been using it for two days, but so far i seems rock solid, no issues observed at this stage.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by holeymoley at May 07, 2013 23:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413777"></a>
                                    <font class="smallfont"><p>Folks,</p>

<p>I've built a prototype 2-way C-Bus control on old code-base of OpenRemote. The code's patterns are based on the KNX protocol. It uses C-Gate, which has to be running on the network somewhere (usually the same box as OpenRemote Controller since both are written in Java). I also wrote an importer for the Designer tool that imports C-Bus projects and creates all the commands and sensors from the project XML file.</p>

<p>I don't like using the CNI interface because the CNI can only handle one connection at a time and if the connection gets screwed up at the CNI end you have to restart the CNI. My protocol is being used to control the lights in my home theatre and so far I haven't found a problem with it.</p>

<p>The code is a bit rough at the moment (and no tests written) because it was just a prototype for me and needs to be modified to work with the latest version of the OpenRemote code-base (especially the importer for the Designer). The not-so-good news is that I don't have a lot of time at the moment (baby on the way) so it may be a few weeks before I can contribute the code (but happy to contribute where I can).</p>

<p>I also have 2-way prototype protocols for Ness/ELK M1 alarm panels, Advantage Air/Intelligent Life GENIII HVAC, Oppo Blu-ray players, Integra pre-amps/receivers and a JVC projector if anyone is interested.</p>

<p>Cheers,<br/>
Jamie</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jst01 at May 08, 2013 02:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413914"></a>
                                    <font class="smallfont"><p>Hi Jamie, that sounds really promising, I'm willing to help out where ever I can. I'm new to open remote but there's nothing like going in at the deep end! If nothing else I can help out with the testing end of things. I have a pretty large c-bus install and love tinkering with it. Keep in touch anyway.</p>

<p>Good luck with the baby also, my only advice on that front is to do all the tinkering and hobby stuff you can now! You will notice your available free time for that kind of thing will steadily decrease <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>  It's all good though, just really different...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by holeymoley at May 08, 2013 20:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413934"></a>
                                    <font class="smallfont"><p>Would definitely be interested in both the C-bus and the other protocols you mentioned.</p>

<p>Let us know if we can help, or if there's anything that can already be shared on the version control for others to test or develop on.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 09, 2013 09:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413939"></a>
                                    <font class="smallfont"><p>Hi Juha,</p>

<p>How do I become a contributor? That way I can help get all the code I've done into your code-base and then everyone else can use it. Which code-base/projects should I use as the base for the Controller and Designer code?</p>

<p>Cheers,<br/>
Jamie</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jst01 at May 09, 2013 09:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413940"></a>
                                    <font class="smallfont"><p>I'll send you an email with details.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 09, 2013 09:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413955"></a>
                                    <font class="smallfont"><p>Thanks Paddy,<br/>
Much appreciated.<br/>
Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 09, 2013 10:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22413956"></a>
                                    <font class="smallfont"><p>Thanks Jamie,<br/>
Much appreciated.<br/>
Neil.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nwe at May 09, 2013 10:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877785"></a>
                                    <font class="smallfont"><p>Any updates on this? I am happy to test if needed. I will have an attempt at the same method Jamie described above if not. CGate reference guide is included in the Cbus Toolkit which can be downloaded here: <a href="http://www2.clipsal.com/cis/technical/downloads/c-bus_toolkit">http://www2.clipsal.com/cis/technical/downloads/c-bus_toolkit</a> </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nick8888 at Oct 08, 2013 12:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877786"></a>
                                    <font class="smallfont"><p>Still working on it Nick. I haven't had much time lately but I have done most of the Designer import code so you can import all your group addresses and create dimmer sliders automatically. There's a few minor issues I'm trying to sort out because some of the CBus tags by default include special characters like &lt; and &gt; eg. &lt;Unused&gt; and the JSON interpreters don't like those characters.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jst01 at Oct 08, 2013 13:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877804"></a>
                                    <font class="smallfont"><p>Great to hear. I look forward to testing it out!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nick8888 at Oct 08, 2013 20:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877806"></a>
                                    <font class="smallfont"><p>Hi guys - I'm still also available to help out with testing - let me know if needed. Since my original post, I also abandoned the CNI connection method as I did eventually run into the lockup problem mentioned by Jamie. For the past few months I have also been using the C-gate method. I installed the c-gate java program on my raspberry pi, and set it up as an auto-starting service with some 'init' scripts. I got the c-gate server software to communicate successfully with the CNI. C-gate is able to handle the CNI much more gracefully than trying to speak to it directly. No lockups and its been in use for months now. Then  its just a matter of setting up some of the inbuilt OpenRemote TCP/IP or Telnet commands which are sent to the c-gate instance for control of lighting groups.<br/>
Example basic TCP/IP 'command':</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">on <span class="code-comment">//MY_HOUSE/254/56/20</span></pre>
</div></div>
<p>This will turn 'on' the lighting group 20, for lighting application 56, network 254. MY_House is the name of my cbus network...yours will differ obviously..</p>

<p>Example of a Telnet command to Read back the level of any particular group:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">null</span>|get <span class="code-comment">//MY_HOUSE/254/56/20 level</span></pre>
</div></div>
<p>And the regex to strip out the actual level from the string returned by the command above is:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">^(?s).*level=(\d+).*$</pre>
</div></div>
<p>This will return a number ranging from 0 to 255. You can use this to provide the param variable to the normal slider commands in open remote.</p>

<p>My method is nowhere near as useful as Jamie's will be when its finished, but in the meantime it will allow you to get up and running, all using methods that already exist in the current version of open remote. It took me a long time to configure all the commands and sliders I needed for 3 rooms, but I'm glad I did it now, it works very well.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by holeymoley at Oct 08, 2013 21:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877811"></a>
                                    <font class="smallfont"><p>Thanks for the info Paddy. I am thinking about doing the same ie CGate on Raspberry Pi.</p>

<p>Alternatively I am interested whether CGate on a Synology NAS is possible.</p>

<p>My main goal is to control CBus and XBMC but would be nice to run TVHeadend, Sickbeard, Couchpotato, Sabnzbd all from the same server.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nick8888 at Oct 08, 2013 22:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885543"></a>
                                    <font class="smallfont"><p>HI Jamie.<br/>
Sorry to ressurrect an old thread but I am trying to control my M1 Gold with open remote. Do you still have a copy of the M1 protocol? and if so could I possibly get a copy. I have managed to do some basic functions Toggle lights etc with the Telnet commands but I am very interested to see what you have done.<br/>
No harm if you dont still have it. Thanks.<br/>
Peadar Donnellan.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by peadard at Mar 26, 2014 23:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23605499"></a>
                                    <font class="smallfont"><p>Hi Jamie,</p>

<p>Sorry to dig up an old thread like this... I have a GenIII HVAC system, and I would be very interested to talk to you about your two way protocol that you have developed?</p>

<p>Can you please drop me a mail - rossy_k <a href="at.html" title="at">at</a> Hotmail dot Com. and just make a post here letting me know you have?</p>

<p>It would be MUCH appreciated.</p>

<p>Thanks,<br/>
Ross</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rossyk at Feb 02, 2016 03:08
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:40</font></td>
		    </tr>
	    </table>
    </body>
</html>