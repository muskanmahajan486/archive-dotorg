<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Developer snapshot Controller-2.0.1</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Developer snapshot Controller-2.0.1
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 09, 2012 by <font color="#0050B2">mredeker</font>.
				    </div>

				    <p>All,<br/>
I just uploaded a developer snapshot of the controller to my webpage.<br/>
You can find the file here: <a href="http://www.redeker-consulting.de/openremote/OpenRemote-Controller-2.0.1.zip">http://www.redeker-consulting.de/openremote/OpenRemote-Controller-2.0.1.zip</a></p>

<p>This includes the new UDPListener (can already be configured with the designer) and other protocol improvements which were in my earlier 2.0.0 version.<br/>
I tested the UDPListener with an IRtrans device which sends a string to a UDP port when an IR signal is detectd.<br/>
Together with the rule engine I am able to turn on my lights using any IR remote which was learned into the IRtrans.</p>

<p>Feel free to test it and report any problems in this forum thread.</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-20449728"></a>
                                    <font class="smallfont"><p>Hi Markus,</p>

<p>Is the RRD4J also integrated?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Aug 10, 2012 17:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449729"></a>
                                    <font class="smallfont"><p>Not yet, but it will probably make it into the final.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 10, 2012 22:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449921"></a>
                                    <font class="smallfont"><p>I just updated the 2.0.1 controller on my webserver. <br/>
This version includes now the RRD4J stuff (Yann, please have a look) and also it is the basis for participating in the Z-Wave beta test.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 15, 2012 15:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449944"></a>
                                    <font class="smallfont"><p>thank you marcus.<br/>
i'll have a try before the end of the week.<br/>
i'll est it wirh the developper deployment tool from eric's branche.<br/>
regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Aug 15, 2012 20:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20449947"></a>
                                    <font class="smallfont"><p>Ok. I just updated the version again because the logging was still at debug level for a few files.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 15, 2012 21:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450605"></a>
                                    <font class="smallfont"><p>Thanks Marcus, great job again - I am really excited <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> </p>

<p>We started a small project where we try to use OpenRemote with new controllers that can send status via UDP and this sounds very promising. Well, actually they broadcast status via UDP in a binary form (so I assume regular expressions are not so useful at this stage) - but we can convert it into a pure text and then forward to controller.</p>

<p>So I will try to test UDPListener within next days. I just have one general question: how these RegExp work with sensors? I assume they filter UDP packets to be qualified (or rejected) for a particular sensor - but then, once the received string is accepted - how is it converted into sensor value/state? </p>

<p>Could you please provide a simple example? I would really appreciate it...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mlab at Sep 14, 2012 20:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450607"></a>
                                    <font class="smallfont"><p>The regex is only to match the command. My irtrans eg. is sending "apple,enter" when i press the center button on my apple remote.<br/>
I use the regex "apple,enter" to match the command. The sensor (has to be a custom sensor) is just updated with a timestamp.<br/>
The actual UDP packet does not make it into the sensor, sorry.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Sep 14, 2012 20:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450609"></a>
                                    <font class="smallfont"><p>I see... okay, then we probably need to look at other options, maybe via http requests - just those are not as fast as UDP. I'm still wondering if it would make sense to extend UDPListener class to be actually able to receive the packet and extract value. We could work on Java Controller code, just I do not know if that would require some changes in Designer too?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mlab at Sep 14, 2012 21:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450610"></a>
                                    <font class="smallfont"><p>Protocol attributes are just configured via a xml file. If you create another UDP listener protocol which needs other attributes, that can easily be organized.<br/>
I designed it this ways, becaus the irtrans always sends the same command when a remote button is pressed. If I would use that data to update the sensor, the sensor is always updated with the same data which means for  the event processor "no change". Thats why I update with a timestamp.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Sep 14, 2012 21:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450612"></a>
                                    <font class="smallfont"><p>Yes, this makes perfect sense for your case. Let me talk about creating extended UDP listener class with my colleague - who knows both Java and those controllers internals.</p>

<p>Have a great weekend.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mlab at Sep 14, 2012 22:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450635"></a>
                                    <font class="smallfont"><p>In your case to get something to work in a few days, implementing your own specialized UDP handler may indeed be the way to go.</p>

<p>However, do specify your requirements for UDP packet access in more detail (if necessary) and pass them on to Richard Turner who will be looking at extending the generic functionality (so further similar ad-hoc integrations can be handled with scripting instead of Java code &#8211; although doing the latter will make the implementation more consumable to other users with the current Designer model).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 15, 2012 22:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450644"></a>
                                    <font class="smallfont"><p>Thanks for a hint - indeed, it could be useful for others too. I will describe it here and send a link for this place to Richard.</p>

<p>In our case ethernet controllers broadcast UDP messages both periodically and upon every state change. <br/>
These 200-bytes UDP messages contain information for device outputs and sensors (temperature, light etc. - so logical outputs and typical 0-5V ADCs). Messages are broadcasted in a binary form - however, we can create simple proxy server to "translate" into ASCII strings with hexadecimal representation.  </p>

<p>Given above, an ideal situation would be if OpenRemote UDP listener (connected to OpenRemote sensor) allowed two-stage processing:</p>

<p>1 - qualify the UDP message for a OpenRemote sensor(s).  In our case, first two bytes of UDP message always contain unique controller ID, so if we'd converted it into hexadecimal string - RegEx processing would be just fine.</p>

<p>2 - extract status/value from the message. Since bytes at a given position (or characters if converted to hex string) would uniquely represent a particular output or ADC within ethernet controller, for a particular OpenRemote sensor we would need to extract status from a static position within the message and then match it against allowed statuses (on,off) or convert into a number (for a range sensor). Here I am not sure about optimal approach from Java perspective. Under Linux - I would probably use sed or awk syntax.</p>

<p>@edit:<br/>
I could not find a method to notify Richard... I found his profile, but there was no option to send email. Would you be able to help?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mlab at Sep 16, 2012 15:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450811"></a>
                                    <font class="smallfont"><p>Yes will pass the message to him.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Sep 21, 2012 23:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-20450823"></a>
                                    <font class="smallfont"><p>This same developer snapshot is available for testers at <a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.0%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_Developer-Snapshot-20120920.zip/download">http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote%202.0%20%28Developer%20Releases%29/OpenRemote-Controller-2.1.0_Developer-Snapshot-20120920.zip/download</a></p>

<p>Note that the version number has been adjusted to 2.1 developer snapshot to more accurately reflect the current release schedule planning.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 22, 2012 13:55
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:44</font></td>
		    </tr>
	    </table>
    </body>
</html>