<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Newbie - Problem with rules</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Newbie - Problem with rules
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 29, 2012 by <font color="#0050B2">mikemelga</font>.
				    </div>

				    <p>Hi everyone.</p>

<p>I am very new to openremote.<br/>
I installed OR in a Windows 7 32bits workstation to control my KNX installation and several other equipment.</p>

<p>The problem I have is with the rules.<br/>
When the modeler_rules.drl file is blank (0 bytes) everything works ok and the server starts like this:</p>


<p>___________________________________________________________________________________________________________</p>

<p>C:\OpenRemote\bin&gt;openremote.bat run<br/>
Using CATALINA_BASE:   C:\OpenRemote<br/>
Using CATALINA_HOME:   C:\OpenRemote<br/>
Using CATALINA_TMPDIR: C:\OpenRemote\temp<br/>
Using JRE_HOME:        C:\Program Files\Java\jdk1.7.0_09\<br/>
Nov 29, 2012 12:22:54 PM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performanc<br/>
e in production environments was not found on the java.library.path: C:\OpenRemo<br/>
te\webapps\controller\WEB-INF\lib\native<br/>
Nov 29, 2012 12:22:54 PM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8081<br/>
Nov 29, 2012 12:22:54 PM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 1372 ms<br/>
Nov 29, 2012 12:22:54 PM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Nov 29, 2012 12:22:55 PM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Nov 29, 2012 12:22:55 PM org.apache.catalina.startup.HostConfig deployWAR<br/>
INFO: Deploying web application archive webconsole.war<br/>
Nov 29, 2012 12:22:57 PM org.openremote.controller.bootstrap.Startup redirectJUL<br/>
toLog4j<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
INFO 2012-11-29 12:23:01,452 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>INFO 2012-11-29 12:23:02,098 : No rule definitions found in 'C:\OpenRemote\webap<br/>
ps\controller\rules'.<br/>
INFO 2012-11-29 12:23:02,104 : Initialized event processor : Drools Rule Engine<br/>
INFO 2012-11-29 12:23:02,457 : Registered sensor : Switch Sensor (Name = 'Sala J<br/>
antar - Sanca', ID = '113')<br/>
INFO 2012-11-29 12:23:02,478 : Registered sensor : Switch Sensor (Name = 'Hall E<br/>
ntrada', ID = '111')<br/>
INFO 2012-11-29 12:23:02,494 : Startup complete.<br/>
INFO 2012-11-29 12:23:02,500 : Controller Definition File Watcher for Default De<br/>
ployer started.<br/>
Nov 29, 2012 12:23:03 PM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8081<br/>
Nov 29, 2012 12:23:03 PM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 9084 ms<br/>
_____________________________________________________________________________________________________________</p>




<p>However, as soon as I write something in the rules section and sync the controller I start getting these:</p>




<p>C:\OpenRemote\bin&gt;openremote.bat run<br/>
Using CATALINA_BASE:   C:\OpenRemote<br/>
Using CATALINA_HOME:   C:\OpenRemote<br/>
Using CATALINA_TMPDIR: C:\OpenRemote\temp<br/>
Using JRE_HOME:        C:\Program Files\Java\jdk1.7.0_09\<br/>
Nov 29, 2012 12:19:49 PM org.apache.catalina.core.AprLifecycleListener init<br/>
INFO: The APR based Apache Tomcat Native library which allows optimal performanc<br/>
e in production environments was not found on the java.library.path: C:\OpenRemo<br/>
te\webapps\controller\WEB-INF\lib\native<br/>
Nov 29, 2012 12:19:49 PM org.apache.coyote.http11.Http11Protocol init<br/>
INFO: Initializing Coyote HTTP/1.1 on http-8081<br/>
Nov 29, 2012 12:19:49 PM org.apache.catalina.startup.Catalina load<br/>
INFO: Initialization processed in 1367 ms<br/>
Nov 29, 2012 12:19:49 PM org.apache.catalina.core.StandardService start<br/>
INFO: Starting service Catalina<br/>
Nov 29, 2012 12:19:49 PM org.apache.catalina.core.StandardEngine start<br/>
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18<br/>
Nov 29, 2012 12:19:50 PM org.apache.catalina.startup.HostConfig deployWAR<br/>
INFO: Deploying web application archive webconsole.war<br/>
Nov 29, 2012 12:19:52 PM org.openremote.controller.bootstrap.Startup redirectJUL<br/>
toLog4j<br/>
INFO: Initialized JUL to LOG4J Redirector.<br/>
INFO 2012-11-29 12:19:56,389 :</p>

<p>--------------------------------------------------------------------</p>

<p>  DEPLOYING NEW CONTROLLER RUNTIME...</p>

<p>--------------------------------------------------------------------</p>

<p>ERROR 2012-11-29 12:19:57,949 : Cannot start event processor 'Drools Rule Engine<br/>
' : Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConf<br/>
iguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.build<br/>
er.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.ja<br/>
va.JavaDialectConfiguration'<br/>
        at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBui<br/>
lderConfiguration.java:283)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigura<br/>
tionMap(PackageBuilderConfiguration.java:268)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderCo<br/>
nfiguration.java:181)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.&lt;init&gt;(PackageBuilder<br/>
Configuration.java:159)<br/>
        at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:210)<br/>
        at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:143)<br/>
        at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowled<br/>
geBuilder(KnowledgeBuilderFactoryServiceImpl.java:34)<br/>
        at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilder(Knowle<br/>
dgeBuilderFactory.java:47)<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowle<br/>
dgePackages(RuleEngine.java:484)<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngi<br/>
ne.java:253)<br/>
        at org.openremote.controller.statuscache.EventProcessorChain.start(Event<br/>
ProcessorChain.java:112)<br/>
        at org.openremote.controller.statuscache.StatusCache.start(StatusCache.j<br/>
ava:120)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorM<br/>
odel(Version20ModelBuilder.java:615)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Versio<br/>
n20ModelBuilder.java:537)<br/>
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(Ab<br/>
stractModelBuilder.java:148)<br/>
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)</p>

<p>        at org.openremote.controller.service.Deployer.startController(Deployer.j<br/>
ava:271)<br/>
        at org.openremote.controller.spring.SpringContext.initializeController(S<br/>
pringContext.java:109)<br/>
        at org.openremote.controller.service.ServiceContext.init(ServiceContext.<br/>
java:364)<br/>
        at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startu<br/>
p.java:85)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.initialize<br/>
ServiceContext(ServletStartup.java:190)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.contextIni<br/>
tialized(ServletStartup.java:109)<br/>
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContex<br/>
t.java:3843)<br/>
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4<br/>
342)<br/>
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase<br/>
.java:791)<br/>
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77<br/>
1)<br/>
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)</p>

<p>        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.jav<br/>
a:926)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.j<br/>
ava:889)<br/>
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492<br/>
)<br/>
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java<br/>
:311)<br/>
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl<br/>
eSupport.java:117)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)</p>

<p>        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)</p>

<p>        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443<br/>
)<br/>
        at org.apache.catalina.core.StandardService.start(StandardService.java:5<br/>
16)<br/>
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710<br/>
)<br/>
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.<br/>
java:57)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces<br/>
sorImpl.java:43)<br/>
        at java.lang.reflect.Method.invoke(Method.java:601)<br/>
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)<br/>
Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid languag<br/>
e level<br/>
        at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefa<br/>
ultLanguageLevel(JavaDialectConfiguration.java:162)<br/>
        at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.init(Ja<br/>
vaDialectConfiguration.java:57)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBui<br/>
lderConfiguration.java:279)<br/>
        ... 45 more<br/>
ERROR main: Cannot start event processor 'Drools Rule Engine' : Unable to load<br/>
 dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org<br/>
.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.build<br/>
er.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.ja<br/>
va.JavaDialectConfiguration'<br/>
        at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBui<br/>
lderConfiguration.java:283)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigura<br/>
tionMap(PackageBuilderConfiguration.java:268)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderCo<br/>
nfiguration.java:181)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.&lt;init&gt;(PackageBuilder<br/>
Configuration.java:159)<br/>
        at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:210)<br/>
        at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:143)<br/>
        at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowled<br/>
geBuilder(KnowledgeBuilderFactoryServiceImpl.java:34)<br/>
        at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilder(Knowle<br/>
dgeBuilderFactory.java:47)<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowle<br/>
dgePackages(RuleEngine.java:484)<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngi<br/>
ne.java:253)<br/>
        at org.openremote.controller.statuscache.EventProcessorChain.start(Event<br/>
ProcessorChain.java:112)<br/>
        at org.openremote.controller.statuscache.StatusCache.start(StatusCache.j<br/>
ava:120)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorM<br/>
odel(Version20ModelBuilder.java:615)<br/>
        at org.openremote.controller.deployer.Version20ModelBuilder.build(Versio<br/>
n20ModelBuilder.java:537)<br/>
        at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(Ab<br/>
stractModelBuilder.java:148)<br/>
        at org.openremote.controller.service.Deployer.startup(Deployer.java:760)</p>

<p>        at org.openremote.controller.service.Deployer.startController(Deployer.j<br/>
ava:271)<br/>
        at org.openremote.controller.spring.SpringContext.initializeController(S<br/>
pringContext.java:109)<br/>
        at org.openremote.controller.service.ServiceContext.init(ServiceContext.<br/>
java:364)<br/>
        at org.openremote.controller.bootstrap.Startup.loadServiceContext(Startu<br/>
p.java:85)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.initialize<br/>
ServiceContext(ServletStartup.java:190)<br/>
        at org.openremote.controller.bootstrap.servlet.ServletStartup.contextIni<br/>
tialized(ServletStartup.java:109)<br/>
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContex<br/>
t.java:3843)<br/>
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4<br/>
342)<br/>
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase<br/>
.java:791)<br/>
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77<br/>
1)<br/>
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)</p>

<p>        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.jav<br/>
a:926)<br/>
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.j<br/>
ava:889)<br/>
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492<br/>
)<br/>
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)<br/>
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java<br/>
:311)<br/>
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl<br/>
eSupport.java:117)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)</p>

<p>        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)<br/>
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)</p>

<p>        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443<br/>
)<br/>
        at org.apache.catalina.core.StandardService.start(StandardService.java:5<br/>
16)<br/>
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710<br/>
)<br/>
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.<br/>
java:57)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces<br/>
sorImpl.java:43)<br/>
        at java.lang.reflect.Method.invoke(Method.java:601)<br/>
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)<br/>
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)<br/>
Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid languag<br/>
e level<br/>
        at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefa<br/>
ultLanguageLevel(JavaDialectConfiguration.java:162)<br/>
        at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.init(Ja<br/>
vaDialectConfiguration.java:57)<br/>
        at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBui<br/>
lderConfiguration.java:279)<br/>
        ... 45 more<br/>
INFO 2012-11-29 12:19:58,790 : Registered sensor : Switch Sensor (Name = 'Sala J<br/>
antar - Sanca', ID = '113')<br/>
INFO 2012-11-29 12:19:58,811 : Registered sensor : Switch Sensor (Name = 'Hall E<br/>
ntrada', ID = '111')<br/>
INFO 2012-11-29 12:19:58,840 : Startup complete.<br/>
Exception in thread "Polling Sensor Thread ID = 111, Name ='Hall Entrada'" Excep<br/>
tion in thread "Polling Sensor Thread ID = 113, Name ='Sala Jantar - Sanca'" jav<br/>
a.lang.NullPointerException<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.push(RuleEngin<br/>
e.java:145)<br/>
        at org.openremote.controller.statuscache.EventProcessorChain.push(EventP<br/>
rocessorChain.java:188)<br/>
        at org.openremote.controller.statuscache.StatusCache.update(StatusCache.<br/>
java:260)<br/>
        at org.openremote.controller.model.sensor.Sensor.update(Sensor.java:342)</p>

<p>        at org.openremote.controller.model.sensor.Sensor$DeviceReader.run(Sensor<br/>
.java:608)<br/>
INFO 2012-11-29 12:19:58,873 : Controller Definition File Watcher for Default De<br/>
ployer started.<br/>
        at java.lang.Thread.run(Thread.java:722)<br/>
java.lang.NullPointerException<br/>
        at org.openremote.controller.statuscache.rules.RuleEngine.push(RuleEngin<br/>
e.java:145)<br/>
        at org.openremote.controller.statuscache.EventProcessorChain.push(EventP<br/>
rocessorChain.java:188)<br/>
        at org.openremote.controller.statuscache.StatusCache.update(StatusCache.<br/>
java:260)<br/>
        at org.openremote.controller.model.sensor.Sensor.update(Sensor.java:342)</p>

<p>        at org.openremote.controller.model.sensor.Sensor$DeviceReader.run(Sensor<br/>
.java:608)<br/>
        at java.lang.Thread.run(Thread.java:722)<br/>
Nov 29, 2012 12:20:00 PM org.apache.coyote.http11.Http11Protocol start<br/>
INFO: Starting Coyote HTTP/1.1 on http-8081<br/>
Nov 29, 2012 12:20:00 PM org.apache.catalina.startup.Catalina start<br/>
INFO: Server startup in 10331 ms</p>

<p>________________________________________________________________________________________________________________</p>



<p>What am I doing wrong?<br/>
Also...I've noticed that if I clean the rules in the designer and press submit... it gives me a 500 Server Error. I now need to manually clean the rules files.</p>


<p>Any help?<br/>
Thanks.</p>

<p>Regards,<br/>
Mike</p>




				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21037933"></a>
                                    <font class="smallfont"><p>Ok. </p>

<p>Found out what the problem was: it seems Java 7 is not supported. Downgraded to 6 and it seems to work.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mikemelga at Nov 29, 2012 14:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883256"></a>
                                    <font class="smallfont"><p>Yes it is true!</p>

<p>With Java 7 i had the same problem.<br/>
i spend a lot of time in the troubleshooting!!<br/>
With Java 6 it seems to work.</p>

<p>regards Günther</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by landlingerg at Jan 23, 2014 13:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885308"></a>
                                    <font class="smallfont"><p>Thanks a lot. </p>

<p>I also had the same problem.</p>

<p>On a raspberry pi, with Java 1.7.0, nothing works when a rule is added.</p>

<p>I solved the problem by downgrading to java 6 (sudo apt-get install openjdk-6-jdk) and rebooting</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by alexroche at Mar 16, 2014 19:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885309"></a>
                                    <font class="smallfont"><p>There is this <a href="http://www.openremote.org/pages/viewpage.action?pageId=22877075&amp;focusedCommentId=22878077#comment-22878077">patch for Java 7 on Pi</a> that seems to fix the Drools 5.1.1 problems. I don't know if it works on other platforms.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 17, 2014 06:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885312"></a>
                                    <font class="smallfont"><p>I´ll try it. Thanks a lot.</p>

<p>With Java 6, the controller on rPi was running much much slower (also using more CPU and Memory) and I in order to have acceptable performance I had decided to go back to java 7 and give up on rules development by now. </p>

<p>With this fix I´ll be able to resume my learning and development on rules.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by alexroche at Mar 17, 2014 08:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885645"></a>
                                    <font class="smallfont"><p>Hi. Hoping to resurect this issue. I have openremote running on a 32bit linux box (FitPC). Running current debian testing. I am getting the same problem as above when I try to set up rules. I should note that I am running configs from the preview version of composer in order to get native integration to my MiCasa Veralite zwave controller. I installed the openjdk-6-jdk package when installing openremote per linux install instructions, so not running java 7. I have been trying to set up a switch that will turn on multiple lights. My current rules file is as follows:</p>

<p>package org.openremote.controller.protocol</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;<br/>
global org.openremote.controller.statuscache.LevelFacade levels;</p>


<p>import org.openremote.controller.protocol.*;</p>



<p>// *********************<br/>
//    Living Room Scenes <br/>
// *********************<br/>
rule "Livingroom Lights On"<br/>
when<br/>
    Event(source == "LR-Lights-Sensor", value == "on" )<br/>
then<br/>
    execute.command("LR-FloorLamp Full On", 1);<br/>
    System.out.println("Living room lights on"); <br/>
end</p>


<p>rule "Livingroom Lights On"<br/>
when<br/>
    Event(source == "LR-Lights-Sensor", value == "off" )<br/>
then<br/>
    execute.command("LR-FloorLamp Full Off", 1);<br/>
    System.out.println("Living room lights off"); <br/>
end</p>

<p>but regardless of whether I remove the code or all of the content I now still get the errors when starting up the controller.  Note that I have several in-memory virtual commands set up in order to create and track my "virtual switch" and my intent was to have all of the lights in a given room come on when the switch was triggered, but the rules engine is not running. Specifically, I get the following:</p>


<p>ERROR 2014-04-02 23:04:25,968 : Cannot start event processor 'Drools Rule Engine' : Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:283)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigurationMap(PackageBuilderConfiguration.java:268)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderConfiguration.java:181)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.&lt;init&gt;(PackageBuilderConfiguration.java:159)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:210)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:143)<br/>
	at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowledgeBuilder(KnowledgeBuilderFactoryServiceImpl.java:34)<br/>
	at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilder(KnowledgeBuilderFactory.java:47)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:484)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)<br/>
	at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)<br/>
	at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:659)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)<br/>
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)<br/>
	at java.lang.Thread.run(Thread.java:722)<br/>
Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid language level<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefaultLanguageLevel(JavaDialectConfiguration.java:162)<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.init(JavaDialectConfiguration.java:57)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:279)<br/>
	... 18 more<br/>
ERROR Controller Definition File Watcher for Default Deployer: Cannot start event processor 'Drools Rule Engine' : Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:283)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigurationMap(PackageBuilderConfiguration.java:268)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderConfiguration.java:181)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.&lt;init&gt;(PackageBuilderConfiguration.java:159)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:210)<br/>
	at org.drools.compiler.PackageBuilder.&lt;init&gt;(PackageBuilder.java:143)<br/>
	at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowledgeBuilder(KnowledgeBuilderFactoryServiceImpl.java:34)<br/>
	at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilder(KnowledgeBuilderFactory.java:47)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.getValidKnowledgePackages(RuleEngine.java:484)<br/>
	at org.openremote.controller.statuscache.rules.RuleEngine.start(RuleEngine.java:253)<br/>
	at org.openremote.controller.statuscache.EventProcessorChain.start(EventProcessorChain.java:112)<br/>
	at org.openremote.controller.statuscache.StatusCache.start(StatusCache.java:120)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.buildSensorModel(Version20ModelBuilder.java:659)<br/>
	at org.openremote.controller.deployer.Version20ModelBuilder.build(Version20ModelBuilder.java:557)<br/>
	at org.openremote.controller.deployer.AbstractModelBuilder.buildModel(AbstractModelBuilder.java:154)<br/>
	at org.openremote.controller.service.Deployer.startup(Deployer.java:858)<br/>
	at org.openremote.controller.service.Deployer.softRestart(Deployer.java:440)<br/>
	at org.openremote.controller.service.Deployer$ControllerDefinitionWatch.run(Deployer.java:1324)<br/>
	at java.lang.Thread.run(Thread.java:722)<br/>
Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid language level<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefaultLanguageLevel(JavaDialectConfiguration.java:162)<br/>
	at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.init(JavaDialectConfiguration.java:57)<br/>
	at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:279)<br/>
	... 18 more<br/>
INFO 2014-04-02 23:04:26,119 : Initialized event processor : RRD4J Data Logger<br/>
INFO 2014-04-02 23:04:26,120 : Initialized event processor : EmonCMS Data Logger</p>

<p>......</p>



<p>It also looks like my virtual sensors are generating state parsing errors.</p>

<p>Any thoughts or ideas would be greatly appreciated!!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abkrishna at Apr 03, 2014 04:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885649"></a>
                                    <font class="smallfont"><p>Which version of java do you use?</p>

<p>There are problems With java 7 and drools! Try java 6.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by landlingerg at Apr 03, 2014 07:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885659"></a>
                                    <font class="smallfont"><p>I think I have java 6. I installed openjdk-6-jdk per the instructions at <a href="http://www.openremote.org/display/forums/Linux+install+instructions">http://www.openremote.org/display/forums/Linux+install+instructions</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by abkrishna at Apr 03, 2014 12:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885859"></a>
                                    <font class="smallfont"><p>You have multiple versions of Java in your path as indicated by following log:</p>
<blockquote><p>Caused by: org.drools.RuntimeDroolsException: value '1.7' is not a valid language level<br/>
at org.drools.rule.builder.dialect.java.JavaDialectConfiguration.getDefaultLanguageLevel(JavaDialectConfiguration.java:162)</p></blockquote>

<p>Make sure you remove Java 1.7.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by atamariya at Apr 13, 2014 10:26
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>