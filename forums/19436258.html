<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Temperature below 0° celsius</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Temperature below 0° celsius
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 15, 2012 by <font color="#0050B2">mb</font>.
				    </div>

				    <p>Hi all.</p>

<p>I created a KNX command with DPT 9.001 and command "status".<br/>
Then used a custom sensor with the value eg. "21.1" as string.</p>

<p>It works fine if temperature is over 0° but when  the temp goes down <br/>
it write me a wrong value.</p>

<p>From the ETS3, reading the BUS, the value is correct -2.0</p>

<p>we live in Italian riviera... rarely the temp goes down under 0° <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Thanks. </p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/19436258/19398800.class">TwoOctetFloat.class</a> (application/octet-stream)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19436272"></a>
                                    <font class="smallfont"><p>So just wait for a few days, and the nature will solve your issue <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by yannph at Feb 15, 2012 10:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436281"></a>
                                    <font class="smallfont"><p>Hi Yann...<br/>
already solved today is 11° C <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mb at Feb 15, 2012 11:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436398"></a>
                                    <font class="smallfont"><p>When the real value in ETS was "-2.0" what did OR say?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 16, 2012 08:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436559"></a>
                                    <font class="smallfont"><p>Hi.</p>

<p>I have the same problem (Sweden is also cold this time of the year <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>)</p>

<p>Here are some values ​​that I got out of OR.</p>

<p>ETS     OR.<br/>
-0.01  -20.47<br/>
-0.1   -20.38<br/>
-1.0   -19.48<br/>
-2.0   -18.48<br/>
-10.0  -10.48<br/>
-20.0  -0.48<br/>
-20.4  -0.08<br/>
-20.48 -0.0<br/>
-21.0  -19.96<br/>
-30.0  -10.96<br/>
-40.96 -0.0<br/>
-41.0  -40.92<br/>
-50.0  -31.92<br/>
-60.0  -21.92<br/>
-61.44 -20.48<br/>
-70.0  -11.92<br/>
-81.92 -0.0</p>

<p>/Kenneth</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Feb 17, 2012 15:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436602"></a>
                                    <font class="smallfont"><p>Please try the latest dev snapshot: <a href="http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote-Controller-2.0.0_SNAPSHOT_20120103.zip/download">http://sourceforge.net/projects/openremote/files/For%20Developers/OpenRemote-Controller-2.0.0_SNAPSHOT_20120103.zip/download</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 17, 2012 21:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436615"></a>
                                    <font class="smallfont"><p>Thank you Marcus.<br/>
I've already tried that version. Unfortunately, no difference except that I get rounding to single digit decimals, (which is good).</p>

<p>/Kenneth</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Feb 17, 2012 23:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436662"></a>
                                    <font class="smallfont"><p>Thanks, that's helpful.</p>

<p>Looks like it might be a two's complement issue on negative values in mantissa (the values are basically running in reverse).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Feb 18, 2012 07:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436663"></a>
                                    <font class="smallfont"><p>Hi again Marcus,</p>

<p>I'm not any programmer, but to me it looks like you have missed to perform "two's complement notation" (invert the M-bits and add 1).</p>

<p>I also have a question / wish, the Data Point Type 13.xxx is that anything you will introduce in the near future? My energy meters and actuators with current measurement are using the DPT. 13.xxx and it would be really nice to be able to monitor the house energy and power consumption through OR.</p>

<p>The PDF "03_07_02 Datapoint Types v1.5.00 AS.PDF" says.</p>

<p>-&gt; 3.10 Datapoint Types "2-Octet Float Value"<br/>
-&gt; Format: 2 octets: F16<br/>
-&gt; octet nr 2 MSB 1 LSB<br/>
-&gt;          FloatValue<br/>
-&gt;       MEEEEMMM MMMMMMMMM<br/>
-&gt;Encoding: FloatValue = (0,01*M)*2(E)<br/>
-&gt;E = 0 ... 15<br/>
-&gt;M = \-2 048 ... 2 047, two's complement notation<br/>
-&gt;For all Datapoint Types 9.xxx, the encoded value 7FFFh shall always be used to denote invalid data.<br/>
-&gt;Range: \-671 088,64 ... 670 760,96<br/>
-&gt;PDT: PDT_KNX_FLOAT</p>

<p>I hope you understand my English</p>

<p>/Kenneth</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Feb 18, 2012 07:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436664"></a>
                                    <font class="smallfont"><p>I was too slow<img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Feb 18, 2012 07:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436756"></a>
                                    <font class="smallfont"><p>Sorry, my question / wish was not regarding DPT 13.xxx, I meant DPT 14.xxx</p>

<p>/Kenneth</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Feb 18, 2012 22:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436888"></a>
                                    <font class="smallfont"><p>slightly off topic, how can i get the temp value displayed in decimals? (I am using dtp 9.001)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by bassie01 at Feb 19, 2012 22:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19436893"></a>
                                    <font class="smallfont"><p>Create a KNX command "status" with dpt 9.001 and the group address of your temp device.<br/>
That command you bind to a custom sensor and you can use a label which will display the value of that sensor.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 19, 2012 23:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19439574"></a>
                                    <font class="smallfont">
<p>Can you please try the attached patch to see how it impacts the output?</p>

<p>It's a drop in replacement to OpenRemote-Controller/webapps/controller/WEB-INF/org/openremote/controller/protocol/knx/datatype/TwoOctetFloat.class</p>

<p><a href="attachments/19436258/19398800.class">TwoOctetFloat.class</a></p>

<p>Thanks for reporting this bug,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 06, 2012 20:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19439613"></a>
                                    <font class="smallfont"><p>YES, Perfect!</p>

<p>I've tried (almost) all values ​​between -273 and 670 760 and all work perfectly.</p>

<p>Thank you very much Juha!</p>

<p>/ Kenneth</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Mar 07, 2012 07:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19439765"></a>
                                    <font class="smallfont"><p>I'll add DPT 14.xxx on the to-do list next time I touch controller/KNX code.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Mar 16, 2012 17:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19439794"></a>
                                    <font class="smallfont"><p>Thanks Juha!</p>

<p>I really appreciate it.</p>

<p>/Kenneth</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kenta at Mar 19, 2012 08:53
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:32</font></td>
		    </tr>
	    </table>
    </body>
</html>