<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : QNAP and OR</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : QNAP and OR
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 13, 2011 by <font color="#0050B2">damirvk</font>.
				    </div>

				    <p>Hi</p>

<p>First of all congratulations on excellent project. I am planing to install some of HA equipment in my house and I will definitely control it with openremote.</p>

<p>Decision is to go with z-wave and I would like to know what is the recomended interface for usage with OR?</p>

<p>One more question for experienced users. Can OR controller run on comercial NAS with support for java and tomcat like QNAP? ( <a href="http://www.qnap.com">http://www.qnap.com</a> )<br/>
More info here: <a href="http://www.qnap.com/QPKG_detail.asp?qp_id=13">http://www.qnap.com/QPKG_detail.asp?qp_id=13</a></p>

<p>BR<br/>
Damir</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-18972916"></a>
                                    <font class="smallfont">
<p>Re: Z-wave &#8211; we're currently testing one gateway product to see how it will integrate with OpenRemote. Will let you know as soon as we have some more info.</p>

<p>Re: QNAP &#8211; the devil's always in the details and have not heard anyone reporting yet on this product. If people have Tomcat running on already, then that sounds very promising.</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 13, 2011 01:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972921"></a>
                                    <font class="smallfont"><p>Tnx for quick replay.</p>

<p>OK, I am waiting until you finish testing. Can you tell what z-wave interface is under testing?</p>

<p>QNAP sounds very promising, because I sow on their forum that people run tomcat with no problem. Actually manufacturer released some kind of plugin for NAS which install already prepared tomcat for their hardware. </p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Aug 13, 2011 08:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972932"></a>
                                    <font class="smallfont"><p>The Z-wave interface we will be testing is HSC-40 from HomeScenario: <a href="http://www.cocoontech.com/portal/articles/news/18-z-wave/221-homescenario-z-wave-hardware">http://www.cocoontech.com/portal/articles/news/18-z-wave/221-homescenario-z-wave-hardware</a></p>

<p>QNAP sounds promising. There's probably some configuration changes required to install the OR controller on a pre-installed Tomcat but these should be manageable.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Aug 15, 2011 10:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972946"></a>
                                    <font class="smallfont"><p>Excellent device, just what I need IR + z-wave. Found more info here: <a href="http://evotomasyonu.biz/wp-content/uploads/2011/07/urunlistesix.pdf">http://evotomasyonu.biz/wp-content/uploads/2011/07/urunlistesix.pdf</a><br/>
I cant find price anywhere.</p>

<p>Used Qnap NAS can be bought on eBay for decent price. I will tray to get one for testing. One more thing i like is their power consumption. Home versions usually have 10-15W, what is very important because it is ON 24/7. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Aug 16, 2011 08:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972954"></a>
                                    <font class="smallfont"><p>There is another thread regarding OpenRemote on a commercial NAS: <a href="http://www.openremote.org/display/forums/Running+the+ORB+on+Netgear+ReadyNAS">http://www.openremote.org/display/forums/Running+the+ORB+on+Netgear+ReadyNAS</a><br/>
The HSC-40 is pretty new. Maybe you can contact HomeScenario and ask if online shops or distributors are available already?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Aug 17, 2011 08:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972959"></a>
                                    <font class="smallfont"><p>Tnx for info but I already watching that thread. That guy did excellent job, but I am looking for cheaper solution. Netgear don't have low cost single slot NAS like QNAP which is way cheaper. <br/>
At the end looks like the best solution is Alix 3d3 box.</p>

<p>I have send mail to HomeScenario with suggested question but still no replay. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Aug 17, 2011 21:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-18972964"></a>
                                    <font class="smallfont"><p>Update</p>

<p>Received answer from HomeScenario.<br/>
Products can be buy here: <a href="http://www.green-step.net/produits/domotique">http://www.green-step.net/produits/domotique</a><br/>
Looks like English translation on site is not working.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Aug 18, 2011 12:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19432761"></a>
                                    <font class="smallfont"><p>Count me in on trying it out on QNAP. If you have some suggestions where to start, let me know and I can try it on my QNAP TS-219P.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jbremote at Oct 07, 2011 05:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19432797"></a>
                                    <font class="smallfont"><p>If you guys can get things working fine on QNAP, would appreciate a short tutorial / installation instructions that we can host on the documentation part of the website.</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 09, 2011 15:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433041"></a>
                                    <font class="smallfont"><p>We've created an <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Controller+on+Synology+NAS" title="OpenRemote 2.0 How To - Controller on Synology NAS">installation page for Synology</a> based on the information on this thread: <a href="Success with installing Controller on Synology NAS.html" title="Success with installing Controller on Synology NAS">Success with installing Controller on Synology NAS</a>.</p>

<p>If anyone can produce similar info for QNAP, would be happy to create a page for same purpose.</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 15, 2011 20:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433352"></a>
                                    <font class="smallfont"><p>In my memory, QNAP is based on embedded debian so that you can install debian package on it. Actually, most NAS vendors, such as Synology, Thecus, QNAP are all support external modules which allow us to install extra components on it. Most hardwares are actually based on ATOM or higher intel CPU. It won't be difficult to install OR on it.</p>

<p>Unfortunate, those machines are not as cheap as we expect.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by wycc at Oct 30, 2011 06:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433692"></a>
                                    <font class="smallfont"><p>All,</p>

<p>I spent some time on getting OR running on the QNAP, and with success. Actually getting it running wasn't really all that hard, even with limited knowledge of Linux and shell commands. Getting it to automatically run on startup was a bigger challenge, but managed to get that fixed as well. Below, I will post the steps I took in order to get everything up and running.</p>


<p>Java<br/>
Note: Java is only available as ready-made installable for the x86-based NAS systems (TS-x39/ x59/ 509/ 809/ 809U-RP/ SS-x39/ x59 Pro+/ x59 ProII/ TS-x79 Series). For ARM-based systems, look at <a href="http://forum.qnap.com/viewtopic.php?f=163&amp;t=15689">http://forum.qnap.com/viewtopic.php?f=163&amp;t=15689</a> </p>

<p>Login to the Administration console and navigate to Application Servers -&gt; QPKG Plugins<br/>
Click on the Get QPKG button, a new window will be opened with all the currently available QPKGs.<br/>
Scroll down to Java Runtime Environment, click on it and download the zip-file. Extract the zip-file somewhere locally.<br/>
Go back to the Administration console, move to the INSTALLATION-tab on the QPKG Plugins page and upload the previously extracted .qpkg file.</p>

<p>The successful installation could be verified by setting up a SSH connection to the NAS and running "java".</p>

<p>Controller<br/>
Using the Administrator console or a tool like WinSCP to create a new share folder, for example "openremote".<br/>
Download the OpenRemote Controller and extract the files locally.<br/>
Browse to the "conf"-folder. Open "server.xml" and change the default port 8080 to another free port, for example 8081. </p>

<p>Use WinSCP to log on to the server and navigate to the created folder (i.e., /share/MD0_DATA/openremote)<br/>
Copy all the previously extracted files and folders to the server.<br/>
Navigate to the "bin"-folder, right click on "openremote.sh" and choose Properties. Make sure the shell script has Execute rights (all the checkboxes underneath the X are checked).</p>

<p>WinSCP has a built-in terminal window, but the openremote shell script cannot be ran from it (it will display an error message that JRE_HOME or JAVA_HOME are not set). The install can be validated by setting up a SSH connection using for example Putty, navigating to the "openremote/bin/"-folder and running "./openremote.sh run" from there. You should see the controller starting, after which the controller can be accessed using a web browser at the IP-address or hostname of the NAS and specified port-number (i.e., <a href="http://192.168.1.100:8081/controller/">http://192.168.1.100:8081/controller/</a> or <a href="http://servername:8081/controller/">http://servername:8081/controller/</a> )</p>

<p>Autorun<br/>
In order to make sure that the Openremote Controller is started every time the NAS is booted, the openremote shell script needs to be added to the autorun script of the NAS . Details on this procedure can be found at <a href="http://wiki.qnap.com/wiki/Running_Your_Own_Application_at_Startup">http://wiki.qnap.com/wiki/Running_Your_Own_Application_at_Startup</a> </p>

<p>In WinSCP, browse to "/tmp/config/". There is probably no file or folder there, this is because the config ramblock hasn't been mounted yet.<br/>
Open the terminal window and execute "mount -t ext2 /dev/sdx6 /tmp/config"<br/>
Close the terminal and hit the refresh button. Now, a number of files should be visible. <br/>
If "autorun.sh" doesn't exist yet, create a new file with that name, and have it start with the following line: "#!/bin/sh"<br/>
Add to the end of the file the lines that load Java, set the JAVA_HOME parameter and then start Openremote: </p>

<p>#Start JAVA<br/>
/share/MD0_DATA/.qpkg/JRE/jre.sh start</p>

<p>#Export JAVA PATH<br/>
export JAVA_HOME=/usr/local/jre</p>

<p>#Start OpenRemote<br/>
cd /share/MD0_DATA/openremote/bin<br/>
./openremote.sh run &gt;&gt; /share/MD0_DATA/openremote/startupautorun.log &amp;</p>

<p>Save and close the file<br/>
Move up two folders, back to the root.<br/>
Open the terminal window and execute "umount /tmp/config". If the "device is busy" error message is returned, disconnect, reconnect and run the command again.<br/>
Reboot the NAS.</p>

<p>Now the OpenRemote Controller should be up and running. Since the port number has been changed, the auto discovery function in the app will not work, but the server can easily be added manually.</p>

<p>@Juha: Just let me know if and how I can help to set up a tutorial page for this, I'd be happy to contribute!</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by fuijtdewilligen at Nov 16, 2011 21:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433693"></a>
                                    <font class="smallfont"><p>Excellent job and great explanation.<br/>
Now I will buy QNAP definitely.<br/>
tnx</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by damirvk at Nov 16, 2011 22:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433697"></a>
                                    <font class="smallfont"><p>Excellent, thank you!</p>

<p>I've set up a placeholder page here: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Controller+on+QNAP+NAS" title="OpenRemote 2.0 How To - Controller on QNAP NAS">OpenRemote 2.0 How To &#45; Controller on QNAP NAS</a></p>

<p>You should be able to edit the content.</p>

<p>You can look at similar pages for template:</p>

<ol>
	<li><a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Controller+on+Netgear+ReadyNAS" title="OpenRemote 2.0 How To - Controller on Netgear ReadyNAS">OpenRemote 2.0 How To &#45; Controller on Netgear ReadyNAS</a></li>
	<li><a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Controller+on+Synology+NAS" title="OpenRemote 2.0 How To - Controller on Synology NAS">OpenRemote 2.0 How To &#45; Controller on Synology NAS</a></li>
</ol>


<p>For help with the markup, you can view the page sources:</p>

<ol>
	<li><a href="http://www.openremote.org/pages/viewpagesrc.action?pageId=19433044">http://www.openremote.org/pages/viewpagesrc.action?pageId=19433044</a></li>
	<li><a href="http://www.openremote.org/pages/viewpagesrc.action?pageId=19432921">http://www.openremote.org/pages/viewpagesrc.action?pageId=19432921</a></li>
</ol>



<p>Or the wiki notation guide: <a href="http://confluence.atlassian.com/display/CONF210/Confluence+Notation+Guide+Overview">http://confluence.atlassian.com/display/CONF210/Confluence+Notation+Guide+Overview</a></p>

<p>If necessary, we can edit/fix layout issues later once you've structured the content so don't worry about it too much.</p>

<p>Thank you for putting this information together.</p>




</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by admin at Nov 17, 2011 04:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19433706"></a>
                                    <font class="smallfont"><p>Not a problem, I already put all the information on the <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Controller+on+QNAP+NAS">page</a> including the markup. </p>

<p>Feel free to edit it if you feel something is inconsistent!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by fuijtdewilligen at Nov 17, 2011 17:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19434213"></a>
                                    <font class="smallfont"><p>*<b>EDIT</b>*</p>

<p>Got it working at last. Had to add a "sleep 60" in the top of autorun.sh. I suspect that it tries to run the autorun.sh before all the drives are mounted at startup. Now it works perfectly!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jbremote at Dec 10, 2011 23:25
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 11:01</font></td>
		    </tr>
	    </table>
    </body>
</html>