<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : OpenRemote Pro Release 1.4.0</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : OpenRemote Pro Release 1.4.0
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 11, 2015 by <font color="#0050B2">ebariaux</font>.
				    </div>

				    <p>A new Pro release is now available for Pro Users.<br/>
Version 1.4.0 adds support for the Domintell protocol, includes some reworks on the server side to prepare for future upgrades and brings an updated image for eBox users.</p>

<h4><a name="OpenRemoteProRelease1.4.0-Controller1.4.0"></a>Controller 1.4.0</h4>

<h6><a name="OpenRemoteProRelease1.4.0-Newfeatures%3A"></a>New features:</h6>
<ul>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-253">ORCJAVA-253</a> - Add Domintell protocol support</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-443">ORCJAVA-443</a> - Parameterize common Beehive connection parameters in config.properties</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-495">ORCJAVA-495</a> - Do not encode password in communication with CCS/DDS</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-498">ORCJAVA-498</a> - Upgrade flexjson library to version 3.2</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-499">ORCJAVA-499</a> - Remove warnings when compiling under JDK7/8</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-501">ORCJAVA-501</a> - Support remote command to trigger online sync</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-503">ORCJAVA-503</a> - Never send md5 encoded password to backend</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-504">ORCJAVA-504</a> - Start the BeehiveCommandCheckService thread even if no configuration is loaded</li>
</ul>


<h6><a name="OpenRemoteProRelease1.4.0-Bugfixes%3A"></a>Bug fixes:</h6>
<ul>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-456">ORCJAVA-456</a> - Re-connection issues with AMX protocol</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-496">ORCJAVA-496</a> - BeehiveCommandCheckService does not properly decode response received from Ack</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-497">ORCJAVA-497</a> - Multiple issues in BeehiveCommandCheckServiceTest</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-505">ORCJAVA-505</a> - Potential NPE in BeehiveCommandCheckService</li>
</ul>


<h4><a name="OpenRemoteProRelease1.4.0-eBoximage1.4.0"></a>eBox image 1.4.0</h4>

<ul>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-412">ORCJAVA-412</a> - Upgrade YAJSW</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-457">ORCJAVA-457</a> - Update owfs components on eBox image</li>
	<li><a href="http://jira.openremote.org/browse/ORCJAVA-413">ORCJAVA-413</a> - Fixed: yajsw stop does not stop controller on eBox</li>
</ul>


				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23602600"></a>
                                    <font class="smallfont"><p>It looks linke openremote.sh has an error in line 226: echo "  $1 = $<div class="error"><span class="error">Unknown macro: {!1}</span> </div>"<br/>
<img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jever1966 at Dec 12, 2015 07:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602609"></a>
                                    <font class="smallfont"><p>I copied the image through the OR designer to the sd card of my ebox.<br/>
Ip number is the same, webmin has been upgraded<br/>
I saved my latest design through designer, open de webi'face for upload to the controller, logged in but the 'hourglass' or whatever you called it doesn't stop turning when I synchronise.<br/>
My mobile app's do not find the controller (although ip number is right)<br/>
I suspect there is something wrong with the image, maybe the controller is not started at launch or something like that.<br/>
trouble is I do not have the forelast version of the img, and cannot restore it.<br/>
So my installation is broken...<br/>
Can someone look into this?</p>

<p>Best regards,</p>

<p>Olivier</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by oliviertoebosch at Dec 13, 2015 10:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602611"></a>
                                    <font class="smallfont"><p>There seems to be an issue when OR controller is run from yasjw, which is the default setup on the eBox.<br/>
We'll look into it in more details.<br/>
For now, you could log into the eBox and stop yajsw, then restart OR manually</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
/etc/init.d/yajsw stop
cd /opt/OpenRemote-Controller/bin
sudo -u tomcat ./openremote.sh start
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Dec 13, 2015 11:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602613"></a>
                                    <font class="smallfont"><p>Thank you Eric. did extactly what is written here, and indeed no errors at startup anymore.<br/>
Next issue: zwave does not function. 'send request error, command not found' on the clients (android in my case) when commanding a zwave device</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by oliviertoebosch at Dec 13, 2015 12:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602617"></a>
                                    <font class="smallfont"><p>You need to replace the zwave.jar with the version that can be found on the Z-Wave 2.0 forums thread.<br/>
We don't bundle it with the Controller (zip or eBox image) distribution (I think there are some licensing implications behind, don't remember exactly).</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Dec 13, 2015 14:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602619"></a>
                                    <font class="smallfont"><p>Eric, again I did exactly what you said. Searched througout the forum and found this link <a href="http://download.openremote.org/free/zwave">http://download.openremote.org/free/zwave</a> (easy for the other readers <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>), found on this page: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave</a><br/>
uploaded it to the controller (used the new file manager interface from webmin), restarted the openremote with the same command but still have an error (command not found).<br/>
Is there another zwave.jar?</p>

<p>best regards,</p>

<p>Olivier</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by oliviertoebosch at Dec 13, 2015 19:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602652"></a>
                                    <font class="smallfont"><p>still stuck here...is there anyone who could share a link to the old ebox image? If I cannot fix this issue, I prefer to downgrade. It's against my principles, but my system is down, which is worser!<br/>
thx<br/>
Olivier</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by oliviertoebosch at Dec 16, 2015 11:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602657"></a>
                                    <font class="smallfont"><p>I'll send you the link, on the other hand Z-Wave has not changed to I'm curious why this is failing. Do you have any logs you could send me ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Dec 17, 2015 07:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602658"></a>
                                    <font class="smallfont"><p>Took a quick look, script is working fine on a Mac (dev machine) but not on the eBox. I'll do some tests there and on other linux flavors.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Dec 17, 2015 07:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602716"></a>
                                    <font class="smallfont"><p>I do have problems with Pro 1.4 on Synology DS212+. I did have to upgrade from 1.3 because after I synchronised a small change in the UI, My display was totaly messed up i.e. they were no longer updated even though it were similar devices. <br/>
So I stopped the OR service and copied the Zip as usual to my machine. The service did not start from the Synology plugin manager. Nothing in the logs either. I tried the following two manual starts:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">DS212&gt; ./openremote.sh run
openremote.sh: line 226: syntax error: bad substitution</pre>
</div></div>

<p>Line 226 is the last in the following code block:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">##
# Prints a variable name and its value. Mostly used <span class="code-keyword">for</span> printing external environment
# values to communicate settings on the standard output stream.
#
# $1 is expected to contain the variable name to print.
##
printVariable()
{
  <span class="code-keyword">if</span> [ -z <span class="code-quote">"${PRINTING_VARIABLES}"</span> ] ; then
    PRINTING_VARIABLES=<span class="code-quote">"<span class="code-keyword">true</span>"</span>

    echo ""
    echo <span class="code-quote">"Configured Variable Values:"</span>
  fi

  echo <span class="code-quote">"  $1 = ${!1}"</span></pre>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">DS212&gt; ./openremote.sh debug
The JAVA_HOME environment variable is not defined correctly
This environment variable is needed to run <span class="code-keyword">this</span> program
NB: JAVA_HOME should point to a JDK not a JRE</pre>
</div></div>
<p>env command result:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">SSH_CLIENT=xxx.xxx.xxx.xxx 52989 22
MAIL=/<span class="code-keyword">var</span>/mail/root
USER=root
OLDPWD=/volume1/l_apps/OpenRemote
HOME=/root
SSH_TTY=/dev/pts/1
PAGER=more
LOGNAME=root
TERM=xterm
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/syno/sbin:/usr/syno/bin:/usr/local/sbin:/usr/local/bin:/volume1/@appstore/java7/jre/bin
LANG=en_US.utf8
SHELL=/bin/ash
CLASSPATH=.:/volume1/@appstore/java7/jre/lib
JAVA_HOME=/volume1/@appstore/java7/jre
PWD=/volume1/l_apps/OpenRemote/bin
SSH_CONNECTION=192.168.1.23 52989 xxx.xxx.xxx.xxx 22
PGDATA=/<span class="code-keyword">var</span>/service/pgsql
TZ=CET-1CEST,M3.5.0,M10.5.0/3</pre>
</div></div>
<p>All previous versions since 1.x did work well with these settings</p>

<p><b>Update 14:19</b> On windows 7 PC this 1.4 runs as expected.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 20, 2015 11:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602739"></a>
                                    <font class="smallfont"><p>I'm not running the newest pro controller on my Synology yet, as this is against my life motto "If it does not break, don't fix it", but a small difference which I have is</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
CLASSPATH=.:/<span class="code-keyword">var</span>/packages/JavaManager/target/Java/jre/lib
JAVA_HOME=/<span class="code-keyword">var</span>/packages/JavaManager/target/Java/jre
</pre>
</div></div>
<p>However, it should not make the difference IMHO.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aktur at Dec 21, 2015 12:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602741"></a>
                                    <font class="smallfont"><p>Thanks for looking into this. I only changed, because my system seemed to be mixed up.<br/>
So since the online designer is 1.4 now, I decided to upgrade the controller to 1.4 as well.</p>

<p><b>update 20151211:</b> Did a complete re-install; first free version with "Patters" installer, which worked fine. Next stopped service and copied all Pro 1.4 files over the free version. Result the same errors.</p>

<p><b>update 20151211-2:</b> Got Pro 1.1.0 running, but lots of errors because of JRE7. </p>

<p><b>update 20151230:</b> Got Pro 1.3 running. Initially I got the same erors, but these were cleared after I removed a http command to the TTN LoraWan server. For me 1.3 controller seems to work well with designer 1.4.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 21, 2015 14:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23602943"></a>
                                    <font class="smallfont"><p>Controller 1.4 still fails on Synology DS212+</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 01, 2016 14:16
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:33</font></td>
		    </tr>
	    </table>
    </body>
</html>