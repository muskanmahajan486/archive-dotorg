<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : (VERA) Multiple custom sensors using same command, only one sensor is updated</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : (VERA) Multiple custom sensors using same command, only one sensor is updated
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 02, 2015 by <font color="#0050B2">aptalca</font>.
				    </div>

				    <p>TL;DR version:</p>

<p>I have a command that polls the Mi Casa Verde Vera for a device status (Vera protocol, generic_status), and returns one of 5 numbers. I created one custom sensor that spits out the exact number to be used with labels or images. I also created another custom sensor that spits out binary off/on for a switch. When both sensors are set to use the same command, only one updates. Is this a bug or by design? I'd rather not create separate status commands for each sensor, then I multiply the polling by a lot, putting extra stress on the Vera.</p>



<p>LONG Version:</p>

<p>I have several zwave devices controlled by the vera and I am setting up openremote with those.</p>

<p>I have one device in Vera, it is actually a Logitech Harmony Smart Hub plugin, which controls my harmony hub.</p>

<p>There are 5 activities: Off, XBMC, Chromecast, PS3 and OTA TV</p>

<p>I created a command that retrieves the current activity id number (Vera protocol, generic_status and status attribute= caid) and the options are: -1, 7692158, 7692160, 7692159, 7692157, each corresponding to a different activity. I created a sensor that uses the command and I have a label in the UI that converts the numbers to activity names like XBMC, PS3, etc. and displays the current activity. Works great.</p>

<p>Now, I wanted to create separate switches for these activities. If I create a switch for XBMC, I have easy on and off commands that send http to the plugin, but I cannot use the same sensor as above as it doesn't have binary return. So I create a new sensor for XBMC, where I map the numbers to on and off and assign the same status command as above.</p>

<p>The result is that only one of the sensors get updated with the status command, not both. Is this by design?</p>

<p>In order to get around this issue, I created buttons instead of switches for each activity, but assigned a transparent picture to each button so they are invisible. Then I put images on top of each invisible button, images that change to on/off images based on the above sensor's number output. So if the sensor returns the number for XBMC, the picture for XBMC switches to an XBMC On picture with an LED and such, and the other picture remain as the off versions. It feels hacky, but it works for now.</p>

<p>Thanks</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>