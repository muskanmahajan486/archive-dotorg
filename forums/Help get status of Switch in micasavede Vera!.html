<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Help get status of Switch in micasavede Vera!</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Help get status of Switch in micasavede Vera!
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 06, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>I follow the guide link to setup OR for vera user: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Micasaverde+Vera" title="OpenRemote 2.0 How To - Micasaverde Vera">OpenRemote 2.0 How To &#45; Micasaverde Vera</a>. Now,  I can use OR to send http command to control On/OFf switch , Dimmer , However  i can not get any status of them. </p>

<p>I use rules in " config for controller" to poll and copy status of vera to /webapps/controler/vera.xml. It work well because i see the vera.xml update each second. ( Ip of my vera is: 192.168.2.101)<br/>
<img src="attachments/21859601/22052982.png" align="absmiddle" border="0"/></p>

<p>Make command for status<img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> Ip of my pc( running controler) is: 192.168.2.116, use URL: <a href="http://192.168.2.116:8688/controller/vera.xml">http://192.168.2.116:8688/controller/vera.xml</a> AND XPath Expression://devices/device<span class="error">&#91;@id=&#39;15&#39;&#93;</span>/@status</p>

<p><img src="attachments/21859601/22052983.png" align="absmiddle" border="0"/></p>

<p>Make sensor from above command for status:<br/>
<img src="attachments/21859601/22052984.png" align="absmiddle" border="0"/></p>

<p>and make switch: id of Z-wave switch is 15.</p>

<p><img src="attachments/21859601/22052985.png" align="absmiddle" border="0"/></p>

<p>I also try to use browser to open :<a href="http://192.168.2.116:8688/controller/vera.xml">http://192.168.2.116:8688/controller/vera.xml</a>, but can not connect.</p>

<p>Could you please give me a help.</p>


				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859601/22052982.png">RULES.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859601/22052983.png">Status Command.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859601/22052984.png">Sensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859601/22052985.png">Switch.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21859692"></a>
                                    <font class="smallfont"><p>Any help Please. I am running  OR controller on Win7. </p>

<p>Best regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aqt at Apr 05, 2013 19:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859766"></a>
                                    <font class="smallfont"><p>Can you send a copy of the vera xml?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Apr 06, 2013 17:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859769"></a>
                                    <font class="smallfont"><p>Thanks Mr. Juha<br/>
It seam that it is a problem with OR controller run on my Win 7 laptop. I try poll directly to vera by sensor( replace ip server+port 8688 by vera IP address+ port 3480) but it also not update status of switch. Attach is my vera.xml( i copy from webapps/controller/vera.xml)</p>

<div style="max-width: 800px;"><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">
  <span class="code-tag">&lt;?xml version=<span class="code-quote">"1.0"</span> ?&gt;</span> 
  <span class="code-tag">&lt;root full=<span class="code-quote">"1"</span> version=<span class="code-quote">"*1.5.408*"</span> model=<span class="code-quote">"MiCasaVerde VeraLite"</span> zwave_heal=<span class="code-quote">"1"</span> temperature=<span class="code-quote">"F"</span> serial_number=<span class="code-quote">"35106681"</span> fwd1=<span class="code-quote">"fwd7.mios.com"</span> fwd2=<span class="code-quote">"fwd6.mios.com"</span> ir=<span class="code-quote">"0"</span> irtx=<span class="code-quote">"" loadtime="</span>1365261173<span class="code-quote">" dataversion="</span>261174670<span class="code-quote">" state="</span>1<span class="code-quote">" comment="</span>Push Notification[28]: Running Lua Startup"&gt;</span>
  <span class="code-tag">&lt;sections&gt;</span>
    <span class="code-tag">&lt;section name=<span class="code-quote">"My Home"</span> id=<span class="code-quote">"1"</span> /&gt;</span> 
  <span class="code-tag">&lt;/sections&gt;</span>
  <span class="code-tag">&lt;rooms&gt;</span>
   <span class="code-tag">&lt;room name=<span class="code-quote">"Phòng khách"</span> id=<span class="code-quote">"1"</span> section=<span class="code-quote">"1"</span> /&gt;</span> 
   <span class="code-tag">&lt;room name=<span class="code-quote">"Phòng ngủ"</span> id=<span class="code-quote">"3"</span> section=<span class="code-quote">"1"</span> /&gt;</span> 
   <span class="code-tag">&lt;room name=<span class="code-quote">"Phòng xem phim"</span> id=<span class="code-quote">"2"</span> section=<span class="code-quote">"1"</span> /&gt;</span> 
  <span class="code-tag">&lt;/rooms&gt;</span>
  <span class="code-tag">&lt;scenes&gt;</span>
   <span class="code-tag">&lt;scene name=<span class="code-quote">"ARM AWAY"</span> id=<span class="code-quote">"4"</span> room=<span class="code-quote">"0"</span> active=<span class="code-quote">"1"</span> /&gt;</span> 
   <span class="code-tag">&lt;scene active=<span class="code-quote">"0"</span> name=<span class="code-quote">"An Ninh Tầng 5"</span> id=<span class="code-quote">"2"</span> room=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;scene name=<span class="code-quote">"Báo động"</span> id=<span class="code-quote">"1"</span> room=<span class="code-quote">"0"</span> active=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;scene active=<span class="code-quote">"0"</span> name=<span class="code-quote">"Hủy Báo Động"</span> id=<span class="code-quote">"3"</span> room=<span class="code-quote">"0"</span> /&gt;</span> 
  <span class="code-tag">&lt;/scenes&gt;</span>
  <span class="code-tag">&lt;devices&gt;</span>
   <span class="code-tag">&lt;device name=<span class="code-quote">"Caddx NX584 Security System"</span> altid=<span class="code-quote">"" id="</span>16<span class="code-quote">" category="</span>22<span class="code-quote">" subcategory="</span>-1<span class="code-quote">" room="</span>0<span class="code-quote">" parent="</span>0<span class="code-quote">" batterylevel="</span>100" /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"dvd"</span> altid=<span class="code-quote">"" id="</span>12<span class="code-quote">" category="</span>15<span class="code-quote">" subcategory="</span>0<span class="code-quote">" room="</span>0<span class="code-quote">" parent="</span>0<span class="code-quote">" codesets="</span>428,429,430,431,432,433,434,435,436,437,438,439<span class="code-quote">" codeset="</span>428<span class="code-quote">" remote="</span>1" /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Partition 1"</span> altid=<span class="code-quote">"Partition-1bis"</span> id=<span class="code-quote">"19"</span> category=<span class="code-quote">"23"</span> subcategory=<span class="code-quote">"-1"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> chimeenabled=<span class="code-quote">"0"</span> alarm=<span class="code-quote">"None"</span> state=<span class="code-quote">"-1"</span> comment=<span class="code-quote">"" armmode="</span>Armed<span class="code-quote">" detailedarmmode="</span>Armed<span class="code-quote">" lastuser="</span>User 98<span class="code-quote">" alarmmemory="</span>0" /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Push Notification"</span> altid=<span class="code-quote">"" id="</span>28<span class="code-quote">" category="</span>1<span class="code-quote">" subcategory="</span>0<span class="code-quote">" room="</span>0<span class="code-quote">" parent="</span>0<span class="code-quote">" status="</span>0" /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 1"</span> altid=<span class="code-quote">"Zone-1"</span> id=<span class="code-quote">"20"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"4"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 2"</span> altid=<span class="code-quote">"Zone-2"</span> id=<span class="code-quote">"21"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"4"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 3"</span> altid=<span class="code-quote">"Zone-3"</span> id=<span class="code-quote">"22"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"4"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 4"</span> altid=<span class="code-quote">"Zone-4"</span> id=<span class="code-quote">"23"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"4"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 5"</span> altid=<span class="code-quote">"Zone-5"</span> id=<span class="code-quote">"24"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"3"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> batterylevel=<span class="code-quote">"100"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 6"</span> altid=<span class="code-quote">"Zone-6"</span> id=<span class="code-quote">"25"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"3"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> batterylevel=<span class="code-quote">"100"</span> tripped=<span class="code-quote">"1"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 7"</span> altid=<span class="code-quote">"Zone-7"</span> id=<span class="code-quote">"26"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"3"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Zone 8"</span> altid=<span class="code-quote">"Zone-8"</span> id=<span class="code-quote">"27"</span> category=<span class="code-quote">"4"</span> subcategory=<span class="code-quote">"3"</span> room=<span class="code-quote">"0"</span> parent=<span class="code-quote">"16"</span> armed=<span class="code-quote">"1"</span> tripped=<span class="code-quote">"0"</span> /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"ĐÈN A"</span> altid=<span class="code-quote">"2"</span> id=<span class="code-quote">"14"</span> category=<span class="code-quote">"3"</span> subcategory=<span class="code-quote">"0"</span> room=<span class="code-quote">"1"</span> parent=<span class="code-quote">"1"</span> status=<span class="code-quote">"0"</span> state=<span class="code-quote">"-1"</span> comment="" /&gt;</span> 
   <span class="code-tag">&lt;device name=<span class="code-quote">"Đèn B"</span> altid=<span class="code-quote">"3"</span> id=<span class="code-quote">"15"</span> category=<span class="code-quote">"2"</span> subcategory=<span class="code-quote">"0"</span> room=<span class="code-quote">"2"</span> parent=<span class="code-quote">"1"</span> level=<span class="code-quote">"0"</span> status=<span class="code-quote">"0"</span> state=<span class="code-quote">"-1"</span> comment="" /&gt;</span> 
   <span class="code-tag">&lt;/devices&gt;</span>
  <span class="code-tag">&lt;categories&gt;</span>
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Interface"</span> id=<span class="code-quote">"1"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Dimmable Light"</span> id=<span class="code-quote">"2"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Switch"</span> id=<span class="code-quote">"3"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Sensor"</span> id=<span class="code-quote">"4"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"A/V"</span> id=<span class="code-quote">"15"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Alarm Panel"</span> id=<span class="code-quote">"22"</span> /&gt;</span> 
   <span class="code-tag">&lt;categorie name=<span class="code-quote">"Alarm Partition"</span> id=<span class="code-quote">"23"</span> /&gt;</span> 
  <span class="code-tag">&lt;/categories&gt;</span>
 <span class="code-tag">&lt;/root&gt;</span>
</pre>
</div></div></div>

<p>Thanks &amp; best regards,</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aqt at Apr 06, 2013 17:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21859821"></a>
                                    <font class="smallfont"><p>It looks like the copy process which takes the vera.xml and put's it into the controller's webapp folder did not work.<br/>
Do you see something in the log files?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 07, 2013 20:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860015"></a>
                                    <font class="smallfont"><p>Thanks, i try with Raspberry Pi, it is working( feedback status ok). But using rule is not good, it run and stop after a hour. So i build a server to run php cript on a Pc--&gt; WORKING OK.</p>

<p> I have a queries that Can i install controller and a php server on a same Raspberry?, i try some hours but it still does not work.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aqt at Apr 10, 2013 07:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860019"></a>
                                    <font class="smallfont"><p>I don't knwo about PHP but controller runs on Pi. There are plenty of forum entries about it and a How-To: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Install+Controller+on+Raspberry+Pi</a><br/>
We have a new version of the vera protocol which is coming out soon. Then you don't need to copy the very file anymore.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 10, 2013 08:39
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>