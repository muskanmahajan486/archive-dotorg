<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Commands for Philips AW9000 Wifi speakers</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Commands for Philips AW9000 Wifi speakers
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 15, 2013 by <font color="#0050B2">rich.sperrin</font>.
				    </div>

				    <p>I have a pair of these Philips speakers which sound wonderful and even come with a suitable app for connecting to music on my network, internet radio and a raft of source types. The only thing it doesn't do is allow me to integrate with OpenRemote. As far as I understand I would need an API or a developers pack to achieve this which Philips don't do. </p>

<p>Is there another way of detecting what commands the speakers are responding to? For instance, I have iLearner for the iTach IP2IR - it would be great if I could run some other software that detect commands by listening on the relevant IP address. </p>

<p>I've emailed Philips on the subject but not expecting too much from them on the software side of things.</p>

<p>Thoughts?</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036464.png">CurrentVolumeCommand.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036465.jpg">CurrentVolumeCommand.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036466.jpg">VolumeSensor.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036467.jpg">SetVolume.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036468.jpg">VolumeSlider.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036469.jpg">VolumeControl.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036470.jpg">VolumeControl2.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036471.jpg">IMG_20140209_154956.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22881228/23036486.png">OpenRemoteRadio.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22881268"></a>
                                    <font class="smallfont"><p>When the vendor doesn't give you the details there isn't much you can do but to attempt to reverse engineer their protocol. If you're not already familiar with it, <a href="http://www.wireshark.org/">Wireshark</a> is a very popular tool to monitor network traffic. It takes a little learning to get started but there's plenty of resources and help available on the Internet, it being very widely used tool.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Dec 16, 2013 06:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881296"></a>
                                    <font class="smallfont"><p>Recieved polite reply from Philips....</p>

<p>Dear Mr Sperrin,</p>

<p>I am sorry but we are unable to provide you with the information you asked for. It is patented trademark and we do not share it with our customers.</p>

<p>Ultimately as we are constantly working towards improving our customer service experience, you may receive a short survey about your customer experience pertaining to my specific response. I would greatly appreciate your thoughts and feedback as I am always looking to improve the service that I provide to my customers.</p>

<p>Kind regards,<br/>
Michael Miller</p>

<p>Philips Customer Care</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 16, 2013 19:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881297"></a>
                                    <font class="smallfont"><p>I gave Wireshark a try - crikey! I'll have to give it another go when I'm feeling brave. It seemed to attack my poor old desktop and the HD was struggling to cope. I'll think about putting it on my fast lappy but a little concerned about what Wirshark actually does. I get the impression I can filter by the IP of the speakers which should reduce the flood of data. I'm guessing streaming data to the speakers is a bad idea whilst monitoring!!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 16, 2013 19:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881324"></a>
                                    <font class="smallfont"><p>Sadly, some companies never learn...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Dec 17, 2013 08:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22881699"></a>
                                    <font class="smallfont"><p>This is more of a blog style update more than anything today - helps me remember where I'm at but any thoughts and ideas welcome.</p>

<p>Wireshark is up and running on my laptop and capturing 100% of LAN traffic. The secret is going to be how to open a windows7 streaming ("play to") window without actually streaming music. When it is streaming an MP3 there are 80k packets per minute so wont stand a chance of filtering out any pause/play/vol+- commands. I'm hoping I can do something similar with a different app called Philips Media Manager where I dont have to stream any data. Meanwhile there are a couple of interesting comments on the Philips sound AWxxxx forum about IP commands and URL calls.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Dec 24, 2013 13:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883019"></a>
                                    <font class="smallfont"><p>I'm not getting anywhere with wireshark - facinating subject but think i'm out of my depth <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>However the controls for Philips AW9000 speakers are encapsulated in their app called AirStudio and when I run this in IE I can view the source code. I'm thinking I could use the source code in my own set of OpenRemote commands - is this a path worth persuing?</p>

<p>Here is an example for the code from the volume control page....</p>

<p>PS apologies for macro messages - something to do with '{'  ???</p>

<p>-----------------------------------------------------------------------------------------------------------------------------------</p>

<p>&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'&gt;<br/>
&lt;html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'&gt;<br/>
	&lt;head&gt;<br/>
&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;<br/>
&lt;meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=0" /&gt;<br/>
&lt;meta name='apple-mobile-web-app-capable' content='yes' /&gt;<br/>
&lt;meta http-equiv="expires" content="Fri, 31 Dec 2021 18:18:18 GMT" /&gt; <br/>
&lt;meta http-equiv="cache-control" content="max-age=86400, must-revalidate" /&gt; <br/>
&lt;meta http-equiv="last-modified" content="Tue, 13 Jan 2012 13:58:59 GMT" /&gt;<br/>
			&lt;script src="res/jquery.min.js"&gt;&lt;/script&gt;<br/>
			&lt;link rel="stylesheet" href="res/WKSlider.css"/&gt;<br/>
			&lt;script type="text/javascript" src="res/WKSlider.js"&gt;&lt;/script&gt;<br/>
		&lt;link href="res/now_playing.css" rel="stylesheet" type="text/css" /&gt;<br/>
		&lt;script type="text/javascript" src="res/iscroll.min.js"&gt;&lt;/script&gt;<br/>
		&lt;script src='res/jquery.alerts.js'&gt;&lt;/script&gt;<br/>
		&lt;link href='res/jquery.alerts.css' rel='stylesheet' type='text/css' /&gt;<br/>
		&lt;script language='javascript'&gt;<br/>
	$(document).bind('touchstart', function preventZoom(e) {<br/>
        var t2 = e.timeStamp;<br/>
        var t1 = $(document).data('lastTouch') || t2;<br/>
        var dt = t2 - t1;<br/>
        var fingers = e.originalEvent.touches.length;<br/>
	$(document).data('lastTouch', t2);<br/>
        if (!dt || dt &gt; 500 || fingers &gt; 1)<div class="error"><span class="error">Unknown macro: {
	return;}</span> </div><br/>
	e.preventDefault();<br/>
        $(document).trigger('click').trigger('click');<br/>
      });&lt;/script&gt;</p>

<p>		&lt;script type="text/javascript"&gt;<br/>
		var isWaitforResponse = 0;<br/>
		var progressSelected = 0 ;<br/>
http = new XMLHttpRequest();<br/>
        t=setInterval("timedCount()",5000);<br/>
		function timedCount()<br/>
		{<br/>
		    http.open("GET", "/ELAPSE", true);<br/>
		    http.onreadystatechange=function() {<br/>
			    if(http.readyState == 4) {<br/>
			    	if( http.responseText != "")<br/>
					{<br/>
				    	var obj= eval('(' + http.responseText + ')');</p>

<p>				    	if(obj.command == 'HOME' ||obj.command == 'STOP' || obj.command == 'NOWPLAY')<div class="error"><span class="error">Unknown macro: {
				    		clearInterval(t);
					    	CalculateAmountOnClick();
							window.location = &#39;/nowplay&#39;;
				    	}</span> </div><br/>
else if(obj.command == 'ELAPSE'){<br/>
                                            if(obj.mute != playItem.muteStatus)<br/>
                                            {<br/>
                                                if(obj.mute == 0)<div class="error"><span class="error">Unknown macro: {
                                                document.getElementById(&#39;id-img-mute&#39;).src = &#39;res/Btn_Mute.png&#39;;
                                                playItem.muteStatus = 0;}</span> </div><br/>
                                            else if(obj.mute == 1)<div class="error"><span class="error">Unknown macro: {
                                                document.getElementById(&#39;id-img-mute&#39;).src = &#39;res/Btn_Mute_on.png&#39;;
                                                playItem.muteStatus = 1;}</span> </div><br/>
                                            }<br/>
                                            if(obj.volume != playItem.volume){<br/>
						if(gVolumebarChanged)<div class="error"><span class="error">Unknown macro: {
		                                gVolumebarChanged=0;}</span> </div>else<div class="error"><span class="error">Unknown macro: {
						playItem.volume = obj.volume;
                                                changepos_X(obj.volume);}</span> </div><br/>
                                            }<br/>
                                        }<br/>
					}<br/>
				}<br/>
			}<br/>
				http.send();<br/>
		}</p>

<p>		function begin()</p>
		<div class="error"><span class="error">Unknown macro: {
		progressSelected = 1;
		}</span> </div>
<p>  		var myScroll;<br/>
                function loaded() {<br/>
                   myScroll = new iScroll('album_art_table', <div class="error"><span class="error">Unknown macro: {desktopCompatibility}</span> </div>);<br/>
                    }<br/>
                if(!document.addEventListener) {<br/>
                	document.attachEvent('touchmove,', function (e) <div class="error"><span class="error">Unknown macro: {e.preventDefault();}</span> </div>, false);<br/>
                        document.attachEvent('DOMContentLoaded',function(){ setTimeout(function()<div class="error"><span class="error">Unknown macro: { loaded(); }</span> <p>,100);},false);<br/>
                      }<br/>
                else {<br/>
                       document.addEventListener('touchmove', function (e) <div class="error"><span class="error">Unknown macro: { e.preventDefault(); }</span> </div>,false);<br/>
                       document.addEventListener('DOMContentLoaded',function(){ setTimeout(function()</p></div>,100);},false);<br/>
                    }<br/>
		function animatePG()<br/>
		{<br/>
			if(progressSelected == 0)<br/>
			{<br/>
				$('#progress_panel').animate(<div class="error"><span class="error">Unknown macro: {
					  marginTop}</span> </div>);<br/>
			}<br/>
			progressSelected = 0;<br/>
		}<br/>
		&lt;/script&gt; <br/>
		&lt;title&gt;Play screen&lt;/title&gt;<br/>
		&lt;script type='text/javascript'&gt;<br/>
   var playItem = <div class="error"><span class="error">Unknown macro: {
                     &#39;defaultAlbum&#39;}</span> </div>;      var previousPage = <div class="error"><span class="error">Unknown macro: {&#39;url&#39;}</span> </div>;</p>

<p>                        function gotoDevice()<div class="error"><span class="error">Unknown macro: {clearInterval(t);
                        window.location = &#39;philips}</span> </div><br/>
                        function gotoHome()<div class="error"><span class="error">Unknown macro: {
                        		gotoPage(&#39;/index&#39;);
                        }</span> </div></p>

<p>        function gotoNowPlaying(){}</p>

<p>function gotoSettings()<div class="error"><span class="error">Unknown macro: {
	gotoPage(&#39;/settings$01$01$01$0&#39;);
}</span> </div><br/>
        function goback()<div class="error"><span class="error">Unknown macro: {
        	gotoPage(previousPage.url);
		}</span> </div>function toggleMute(){<br/>
			if(playItem.muteStatus==1)<div class="error"><span class="error">Unknown macro: {
				document.getElementById(&#39;id-img-mute&#39;).src = &#39;res/Btn_Mute.png&#39;;
				playItem.muteStatus = 0;
                submitPost(&#39;nowplay&#39;,&#39;/VOLUME$UNMUTE&#39;);
			}</span> </div><br/>
			else<div class="error"><span class="error">Unknown macro: {
				document.getElementById(&#39;id-img-mute&#39;).src = &#39;res/Btn_Mute_on.png&#39;;
				playItem.muteStatus = 1;
                submitPost(&#39;nowplay&#39;,&#39;/VOLUME$MUTE&#39;);
			}</span> </div><br/>
		}</p>

<p>		function goHome()<div class="error"><span class="error">Unknown macro: {
			gotoPage(&#39;/index&#39;);
		}</span> </div>		function CalculateAmountOnClick () {<br/>
			var curtain = document.body.appendChild( document.createElement('div') );<br/>
			curtain.id = 'curtain';<br/>
			curtain.style.height = window.outerHeight + 'px';<br/>
			curtain.onkeypress = curtain.onclick = function()<div class="error"><span class="error">Unknown macro: { return false; }</span> </div><br/>
		}</p>

<p>		function submitPost(url,val)<br/>
		{<br/>
			var xmlhttp;<br/>
			if(window.XMLHttpRequest)<div class="error"><span class="error">Unknown macro: {
			xmlhttp = new XMLHttpRequest();
			}</span> </div><br/>
			else <div class="error"><span class="error">Unknown macro: {
			xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
			}</span> </div><br/>
			xmlhttp.onreadystatechange=function()<br/>
			{<br/>
				if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br/>
				{</p>

<p>				}<br/>
			}<br/>
            xmlhttp.open("GET",val,true);<br/>
            xmlhttp.send();<br/>
		}</p>

<p>		function Right(str, n){<br/>
		    if (n &lt;= 0)<br/>
		       return "";<br/>
		    else if (n &gt; String(str).length)<br/>
		       return str;<br/>
		    else <div class="error"><span class="error">Unknown macro: {
		       var iLen = String(str).length;
		       return String(str).substring(iLen, iLen - n);
				}</span> </div><br/>
				}function gotoPage(url)<div class="error"><span class="error">Unknown macro: {
				clearInterval(t);
				CalculateAmountOnClick();
				checkAndClearPrevRequest();
				window.location = url;
			}</span> </div><br/>
			function checkAndClearPrevRequest(){<br/>
				return;<br/>
				if(http.readyState != 4 &amp;&amp; http.readyState != 0)</p>
				<div class="error"><span class="error">Unknown macro: {
					http.abort();
					//sleep(500);
				}</span> </div>
<p>			}<br/>
	&lt;/script&gt;	&lt;style type='text/css' media='all'&gt;<br/>
		#scroller<div class="error"><span class="error">float: Please specify which side the content will be floating on (left or right).</span> </div><br/>
			#td_2<div class="error"><span class="error">Unknown macro: {border-right}</span> </div><br/>
		&lt;/style&gt;</p>

<p>	&lt;/head&gt;&lt;body&gt;<br/>
	&lt;div  id="outer_panel" &gt;<br/>
	  &lt;div  id="top_panel" style="border-bottom:1px solid #4d4d4d;"&gt;<br/>
	  &lt;table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0"&gt;<br/>
	      &lt;tr&gt;<br/>
	         &lt;td width="20%" align='left' style="padding-left:6px;"&gt;&lt;/td&gt;<br/>
         &lt;td width="60%"&gt;&lt;div align="center"&gt;Aux-in&lt;/div&gt;&lt;/td&gt;<br/>
         &lt;td width="20%" align='right' style="padding-right:6px;"&gt;<br/>
         &lt;/td&gt;<br/>
	 &lt;/tr&gt;<br/>
	 &lt;/table&gt;<br/>
  	&lt;/div&gt;<br/>
	&lt;div id="middle_panel_aux"&gt;<br/>
	&lt;table id="album_art_table" border="0" cellspacing="0" cellpadding="0" width="100%%"&gt;<br/>
		      &lt;tr align="center"&gt;<br/>
			  &lt;script type='text/javascript'&gt;<br/>
				if(playItem.defaultAlbum == 0)<br/>
				document.write('&lt;td&gt;&lt;img src="'<ins>playItem.albumArt</ins>'"/&gt;&lt;/td&gt;');<br/>
				else<br/>
				document.write('&lt;td&gt;&lt;img src="'<ins>playItem.defaultAlbumArt</ins>'"/&gt;&lt;/td&gt;');<br/>
		       &lt;/script&gt; <br/>
		      &lt;/tr&gt;<br/>
&lt;/table&gt;<br/>
&lt;/div&gt;<br/>
&lt;div id='bottom_panel_1'&gt;<br/>
				&lt;table width="100%"align="center"&gt;&lt;tr&gt;&lt;td width="15%" align='right'&gt;<br/>
				&lt;script type='text/javascript'&gt;<br/>
                                if(playItem.muteStatus == 0)<br/>
                                    document.write('&lt;img id="id-img-mute" width="40px" height="32px" onclick="toggleMute()" src="res/Btn_Mute.png"/&gt;');<br/>
                                else<br/>
                                        document.write('&lt;img id="id-img-mute" width="40px" height="32px" onclick="toggleMute()" src="res/Btn_Mute_on.png"/&gt;');<br/>
                                &lt;/script&gt;<br/>
				&lt;/td&gt;<br/>
				&lt;td width="70%" align='center'&gt;<br/>
&lt;div id="slidercontainer"&gt;<br/>
										&lt;div id="mySlider1" class="slider"&gt;<br/>
					                        &lt;div class="track"&gt;&lt;/div&gt;<br/>
					                        &lt;div class="knob" role="slider" aria-valuemin="0" aria-valuemax="100"&gt;&lt;/div&gt;<br/>
					                    &lt;/div&gt;<br/>
						&lt;/div&gt;<br/>
&lt;/td&gt;&lt;td width="15%" align='left'&gt;&lt;img src='res/Button_EQ.png' height=32px width=40px onclick="gotoPage('/settings$15$02$01$0');"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;&lt;br&gt;<br/>
                &lt;table id="table_new" height='100%%' width="100%%" style="border-top:1px solid #4d4d4d;"&gt;<br/>
&lt;tr align='center'&gt;&lt;td id='td_2' class='bottom_td' onclick='javascript:gotoDevice()'&gt;&lt;div&gt;&lt;img src="res/Tab_Home.png" height=48px width=72px style="-o-transform: scale(1);-moz-transform: scale(1);padding-right:4px;" /&gt;&lt;/div&gt;&lt;/td&gt;<br/>
&lt;td id='td_3' class='bottom_td' onclick='javascript:gotoNowPlaying()'&gt;&lt;div&gt;&lt;img src="res/Tab_NowPlaying_hl.png" height=48px width=72px style="-o-transform: scale(1);-moz-transform: scale(1);padding-right:4px;" /&gt;&lt;/div&gt;&lt;/td&gt;<br/>
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;<br/>
&lt;/div&gt;<br/>
		&lt;script type='text/javascript'&gt;<br/>
				var perc = (playItem.volume*100)/playItem.maxvolume;<br/>
				var volSlider = new WKSlider('mySlider1',perc);<br/>
				var gVolumebarChanged=0;<br/>
				volSlider.callback = function (percentage) <div class="error"><span class="error">Unknown macro: {
					  var vol = Math.round((playItem.maxvolume * percentage)/100);
					  playItem.volume = vol;
					  gVolumebarChanged = 1;
					  submitPost(&#39;nowplay&#39;,&#39;/VOLUME$VAL$&#39;+vol);
				}</span> </div><br/>
                                function changepos_X(vol)</p>
                 		<div class="error"><span class="error">Unknown macro: {
		    	                  var perc = (vol*100)/playItem.maxvolume;
                    			  volSlider.changePos(perc);
                 		}</span> </div>
<p>	&lt;/script&gt;<br/>
	&lt;/body&gt;<br/>
&lt;/html&gt;</p>

<p>----------------------------------------------------------------------------------------------------------------------------</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Jan 18, 2014 18:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883104"></a>
                                    <font class="smallfont"><p>Looking at the source code might indeed be the easiest way to find out the URLs used and their parameters.<br/>
You could then document the protocol and use HTTP commands in OR to control your device.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Jan 20, 2014 08:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883943"></a>
                                    <font class="smallfont"><p>Hi Eric</p>

<p>The home page for speakers is <a href="http://192.168.1.82:8889/index">http://192.168.1.82:8889/index</a>.</p>

<p>Then using firefox dev tools it exposes subsequent context commands. So for instance:-</p>

<p><a href="http://192.168.1.82:8889/aux">http://192.168.1.82:8889/aux</a> ; this connects speakers to auxillary and shows volume control ( where TV is plugged in)</p>

<p><a href="http://192.168.1.82:8889/settings$15$02$01$0">http://192.168.1.82:8889/settings$15$02$01$0</a> ; from volume control this shows equaliser (although cant do much in there)</p>

<p><a href="http://192.168.1.82:8889/VOLUME$VAL$35">http://192.168.1.82:8889/VOLUME$VAL$35</a> ; this acts a bit differently and successfully changes the volume but just returns a command success message</p>

<p>So the question is how to use these in OR. I'm guessing the AUX command is straightforward HTTP command?</p>

<p>Volume: Can I build a slider that will generate the URLs for the volume? I see the slider requires a sensor but would rather it uses the min/max index to send the URL - is this possible?</p>

<p>Feels like progress!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Feb 04, 2014 21:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884078"></a>
                                    <font class="smallfont"><p>Aux would be straightforward HTTP command that would do the "source switching" and you would just ignore the return value.</p>

<p>For volume, not sure what the question is?</p>

<p>You can use a slider and use ${param} instead of 35 in your example URL to use the slider value as the volume value.<br/>
The slider does require a sensor so that it can update itself based on the value change, e.g. if volume is change from outside of OR. So you will need an HTTP command that can query the volume.</p>

<p>Not sure what you mean with min/max index ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Feb 07, 2014 13:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884130"></a>
                                    <font class="smallfont"><p>The following returns volume info:-</p>

<p><a href="http://192.168.1.82:8889/ELAPSE">http://192.168.1.82:8889/ELAPSE</a></p>

<p>and returns the result:-</p>

<p>{'command':'ELAPSE',<br/>
                            'value':66,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':30,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}</p>

<p>how would I capture the volume value for the sensor? It looks like JSon but havent figured the syntax. Currently have tried using JSONPath Expressions:-</p>

<p>$.Volume <br/>
/Volume</p>

<p>and getting:-</p>

<p>INFO 2014-02-08 18:27:03,024 (HTTP): received message: {'command':'ELAPSE',<br/>
                            'value':9900,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':30,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
ERROR 2014-02-08 18:27:03,024 (HTTP): Could not perform jsonpath evaluation<br/>
com.jayway.jsonpath.InvalidPathException: invalid path<br/>
	at com.jayway.jsonpath.internal.filter.FieldFilter.filter(FieldFilter.java:59)<br/>
	at com.jayway.jsonpath.JsonPath.read(JsonPath.java:182)<br/>
	at com.jayway.jsonpath.JsonPath.read(JsonPath.java:202)<br/>
	at com.jayway.jsonpath.JsonPath.read(JsonPath.java:307)<br/>
	at org.openremote.controller.protocol.http.HttpGetCommand.run(HttpGetCommand.java:282)<br/>
	at java.lang.Thread.run(Thread.java:744)'</p>

<p>(Also, by min/max i meant was there a way i could set a min and max value for the slider control and use the sensor position to set the volume. but as you point out its important to use a sensor to read the volume as well as set it.)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Feb 08, 2014 15:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884170"></a>
                                    <font class="smallfont"><p>Had a fresh look this morning - must be case sensitive?</p>

<p>I used $.volume - sorted <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Also here are HTTP commands and sensors figured (so far) for Philips AWxxxx range of Fidelio Wireless Speakers:-</p>

<p>Commands<br/>
--------</p>

<p>Volume<br/>
GET,<a href="http://192.168.1.82:8889/VOLUME$VAL$0">http://192.168.1.82:8889/VOLUME$VAL$0</a><br/>
to<br/>
GET,<a href="http://192.168.1.82:8889/VOLUME$VAL$64">http://192.168.1.82:8889/VOLUME$VAL$64</a></p>

<p>Bass<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$01$1$B0">http://192.168.1.82:8889/settings$04$03$01$1$B0</a><br/>
to<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$04$1$B20">http://192.168.1.82:8889/settings$04$03$04$1$B20</a></p>

<p>Treble<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$01$1$T0">http://192.168.1.82:8889/settings$04$03$01$1$T0</a><br/>
to<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$01$1$T20">http://192.168.1.82:8889/settings$04$03$01$1$T20</a></p>

<p>Balance<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$04$1$L0">http://192.168.1.82:8889/settings$04$03$04$1$L0</a><br/>
to<br/>
GET,<a href="http://192.168.1.82:8889/settings$04$03$04$1$L20">http://192.168.1.82:8889/settings$04$03$04$1$L20</a></p>

<p>Connect to Auxillary
<a href="http://192.168.1.82:8889/aux">http://192.168.1.82:8889/aux</a></p>

<p>Radio Mode:-<br/>
GET,<a href="http://192.168.1.82:8889/index">http://192.168.1.82:8889/index</a><br/>
GET,<a href="http://192.168.1.82:8889/nav$03$01$001$0">http://192.168.1.82:8889/nav$03$01$001$0</a></p>

<p>Play Radio Presets (1 to 5)<br/>
GET,<a href="http://192.168.1.82:8889/nav$03$03$001$1">http://192.168.1.82:8889/nav$03$03$001$1</a><br/>
GET,<a href="http://192.168.1.82:8889/nav$03$03$002$1">http://192.168.1.82:8889/nav$03$03$002$1</a><br/>
GET,<a href="http://192.168.1.82:8889/nav$03$03$003$1">http://192.168.1.82:8889/nav$03$03$003$1</a><br/>
GET,<a href="http://192.168.1.82:8889/nav$03$03$004$1">http://192.168.1.82:8889/nav$03$03$004$1</a><br/>
GET,<a href="http://192.168.1.82:8889/nav$03$03$005$1">http://192.168.1.82:8889/nav$03$03$005$1</a></p>

<p>Play Radio Faves (1 to n)<br/>
Same as Presets except from different context:-<br/>
This takes you to Radio Favourites:-<br/>
GET,<a href="http://192.168.1.82:8889/nav$03$02$002$0">http://192.168.1.82:8889/nav$03$02$002$0</a><br/>
This takes you to Radio Presets:-<br/>
GET,<a href="http://192.168.1.82:8889/nav$03$02$001$0">http://192.168.1.82:8889/nav$03$02$001$0</a></p>

<p>NB Favourites is better because Presets is limited to 5 <br/>
whereas Favourites is unlimited (so far)</p>


<p>Standby/Wake<br/>
GET,<a href="http://192.168.1.82:8889/CTRL$STANDBY">http://192.168.1.82:8889/CTRL$STANDBY</a></p>

<p>For example to play Radio Favourite No 5 create a macro that runs a sequence of commands from a known starting point:-<br/>
Startscreen - GET,<a href="http://192.168.1.82:8889/index">http://192.168.1.82:8889/index</a><br/>
Delay 1000ms (this gives speakers time to respond)<br/>
Internet Radio - GET,<a href="http://192.168.1.82:8889/nav$03$01$001$0">http://192.168.1.82:8889/nav$03$01$001$0</a><br/>
Delay 1000ms<br/>
Radio Favourites - GET,<a href="http://192.168.1.82:8889/nav$03$02$002$0">http://192.168.1.82:8889/nav$03$02$002$0</a><br/>
Delay 1000ms<br/>
Radio Index 5 - GET,<a href="http://192.168.1.82:8889/nav$03$03$005$1">http://192.168.1.82:8889/nav$03$03$005$1</a><br/>
(note use of index rather than specifically Radio Favourite as this is the same command as Preset except in Favourites context and not Presets context)</p>

<p>Mute/Unmute<br/>
GET,<a href="http://192.168.1.82:8889/VOLUME$MUTE">http://192.168.1.82:8889/VOLUME$MUTE</a><br/>
GET,<a href="http://192.168.1.82:8889/VOLUME$UNMUTE">http://192.168.1.82:8889/VOLUME$UNMUTE</a></p>

<p>Sensors<br/>
-------<br/>
COMMAND:-<br/>
GET,<a href="http://192.168.1.82:8889/ELAPSE">http://192.168.1.82:8889/ELAPSE</a></p>

<p>JSON:-<br/>
{'command':'ELAPSE',<br/>
'value':66,		(tbc)<br/>
'mute':0,		(mute boolean)<br/>
'shuffle':0,		(shuffle boolean)<br/>
'repeat':0,		(repeat boolean<br/>
'play':1,		(tbc)<br/>
'volume':30,		(volume 0-64)<br/>
'TotalTime':0,		(tbc)<br/>
'favstatus':0}		(tbc)</p>

<p>VOLUME SENSOR (case sensitive):-<br/>
$.volume</p>

<p>COMMAND:-<br/>
GET,<a href="http://192.168.1.82:8889/HOMESTATUS">http://192.168.1.82:8889/HOMESTATUS</a></p>

<p>JSON:-<br/>
{'command':'STANDBY',<br/>
'value':0,              (1=standby, 0=on)<br/>
playstate:1}</p>

<p>STANDBY SENSOR:-<br/>
$.value</p>


<p>I've now got a working radio player on OpenRemote that looks [somewhat] like this - very pleased (all very fine radio stations!)</p>

<p><img src="attachments/22881228/23036486.png" align="absmiddle" border="0"/></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Feb 09, 2014 12:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884172"></a>
                                    <font class="smallfont"><p>Ok - so my Speaker volume control is essentially working albeit a little unpredictable.</p>

<p>Sensor and Slider is looking good - I can change the volume from a browser after which volume label and volume slider update shortly after using the 2 second interval - happy with that.</p>

<p>The problem seems to be the slider control command. Whichever position I set it to the results always seem to be somewhere between 0-9. I think I've set it up correctly:-</p>

<p>I started with a command to grab the current volume;</p>

<p><img src="attachments/22881228/23036465.jpg" align="absmiddle" border="0"/></p>

<p>Then created a Slider Sensor;</p>

<p><img src="attachments/22881228/23036466.jpg" align="absmiddle" border="0"/></p>

<p>I tested this with a label that successfully returns the current volume when changed externally.</p>

<p>So next I created a command to set the volume;</p>

<p><img src="attachments/22881228/23036467.jpg" align="absmiddle" border="0"/></p>

<p>and create a new Slider Command;</p>

<p><img src="attachments/22881228/23036468.jpg" align="absmiddle" border="0"/></p>

<p>and topped it off with a Slider Control;</p>

<p><img src="attachments/22881228/23036469.jpg" align="absmiddle" border="0"/></p>

<p>I think I've got everything in place OK.</p>

<p>Anybody spot a any errors? I think the next step is to figure what the controller is sending - heres the HTTP log with the last 4 entries (1 set &amp; 3 gets) :-</p>

<p>INFO 2014-02-09 13:24:46,992 (HTTP): received message: {'command':'ELAPSE',<br/>
                            'value':6308,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':6,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
INFO 2014-02-09 13:24:49,644 (HTTP): received message: {'command':'ELAPSE',<br/>
                            'value':6311,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':6,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
INFO 2014-02-09 13:24:50,034 (HTTP): received message: {'command':'SUCCESS',<br/>
'value':0}<br/>
INFO 2014-02-09 13:24:51,703 (HTTP): received message: {'command':'ELAPSE',<br/>
                            'value':6313,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':7,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
INFO 2014-02-09 13:24:53,871 (HTTP): received message: {'command':'ELAPSE',<br/>
                            'value':6315,</p>


<p>And here is the DEV log following a volume change:-</p>

<p>2014-02-09 13:29:22,956 TRACE [Polling thread for sensor: VolumeSensor]: Processed '7', received '7'<br/>
2014-02-09 13:29:24,267 DEBUG [HTTP-Thread-30]: Building HttGetCommand<br/>
2014-02-09 13:29:24,267 DEBUG [HTTP-Thread-30]: HttpGetCommand: method = GET<br/>
2014-02-09 13:29:24,267 DEBUG [HTTP-Thread-30]: HttpGetCommand: url = <a href="http://192.168.1.82:8889/VOLUME$VAL28">http://192.168.1.82:8889/VOLUME$VAL28</a><br/>
2014-02-09 13:29:24,298 INFO [HTTP-Thread-30]: received message: {'command':'SUCCESS',<br/>
'value':0}<br/>
2014-02-09 13:29:25,093 INFO [Polling thread for sensor: VolumeSensor]: received message: {'command':'ELAPSE',<br/>
                            'value':6587,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':8,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
2014-02-09 13:29:25,093 TRACE [Polling thread for sensor: VolumeSensor]: Processed '8', received '8'<br/>
2014-02-09 13:29:25,093 INFO [HTTP-Thread-49]: Had waited the skipped sensor ids of statuses in ChangedStatusRecord:861229014155033-[1196] sensorID:[1196] statusChangedSensorID:[1196]<br/>
2014-02-09 13:29:25,093 INFO [HTTP-Thread-49]: Querying changed data from StatusCache...<br/>
2014-02-09 13:29:25,093 INFO [HTTP-Thread-49]: Have queried changed data from StatusCache.<br/>
2014-02-09 13:29:25,093 INFO [HTTP-Thread-49]: Return the polling status.<br/>
2014-02-09 13:29:25,093 INFO [HTTP-Thread-49]: Finished polling at 2014-02-09 13:29:25</p>

<p>2014-02-09 13:29:25,515 INFO [HTTP-Thread-49]: Querying changed state from ChangedStatus table...<br/>
2014-02-09 13:29:25,515 INFO [HTTP-Thread-49]: Found: [device =&gt; 861229014155033, sensorIDs =&gt; [1196]] in ChangedStatus table.<br/>
2014-02-09 13:29:25,515 INFO [HTTP-Thread-49]: ChangedStatusRecord:861229014155033-[1196] sensorID:[1196] statusChangedSensorID:[]Waiting...<br/>
2014-02-09 13:29:27,199 INFO [Polling thread for sensor: VolumeSensor]: received message: {'command':'ELAPSE',<br/>
                            'value':6589,<br/>
                            'mute':0,<br/>
                            'shuffle':0,<br/>
                            'repeat':0,<br/>
                            'play':1,<br/>
                            'volume':8,<br/>
                            'TotalTime':0,<br/>
                            'favstatus':0}<br/>
2014-02-09 13:29:27,199 TRACE [Polling thread for sensor: VolumeSensor]: Processed '8', received '8'</p>

<p>The error looks consistant; When I 'click' the middle of the slider I always get a value of 3 to 5 depending on how close I am to the centre - just below produces 3, slightly highter produces 4, bit higher produces 5 - almost as if it is only processing the left most value of 33,34,35. Thoughts?</p>

<p>I tried using $$.volume in the JSON parse command on the basis that it represents 2 chars but no luck.</p>

<p>Is $ the correct symbol for retrieving an integer?</p>

<p>Not a solution but demonstrates that everything works apart from the step between sending the new volume value and getting it back - the following uses buttons to set the volume and then successfully updates the sensor and slider:-</p>

<p><img src="attachments/22881228/23036470.jpg" align="absmiddle" border="0"/></p>

<p>Ok - got something here; I've set the command/param to send; <a href="http://192.168.1.82:8889/VOLUME$VAL$\">http://192.168.1.82:8889/VOLUME$VAL$\</a>{param}</p>

<p>In the log it looks like this; <a href="http://192.168.1.82:8889/VOLUME$VAL28">http://192.168.1.82:8889/VOLUME$VAL28</a></p>

<p>I'm losing the '$' symbol which is problem.</p>

<p>Whew - Got there! The param requires packing and requires '$$' for the param - it was only passing one character. Now looks like this and works;  \<a href="http://192.168.1.82:8889/VOLUME$VAL$$\">http://192.168.1.82:8889/VOLUME$VAL$$\</a>{param}</p>

<p>Result!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rich.sperrin at Feb 09, 2014 13:22
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:34</font></td>
		    </tr>
	    </table>
    </body>
</html>