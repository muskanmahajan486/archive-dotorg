<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : KNX-DEBUG.LOG spitting out a lot of data</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : KNX-DEBUG.LOG spitting out a lot of data
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 15, 2013 by <font color="#0050B2">juha</font>.
				    </div>

				    <p>Hey everyone,<br/>
I'm having a handful of problems all minor but all annoying <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>.<br/>
And I'm trying to find out if they are linked together or not.<br/>
Anyway I have noticed the knx-debug.log is spitting out a lot of Polling device status logs and I'm trying to understand what it all means.</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>DEBUG 2013-10-11 11:22:05,027 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/20 Data: 0x00
DEBUG 2013-10-11 11:22:05,028 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 0/0/2 Data: 0x00
DEBUG 2013-10-11 11:22:05,028 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,032 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,032 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 3/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,033 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/1/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,033 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,034 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/31 Data: 0x00
DEBUG 2013-10-11 11:22:05,036 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/14 Data: 0x00
DEBUG 2013-10-11 11:22:05,037 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,037 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/16 Data: 0x00
DEBUG 2013-10-11 11:22:05,123 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/21 Data: 0x00
DEBUG 2013-10-11 11:22:05,123 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,125 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/43 Data: 0x00
DEBUG 2013-10-11 11:22:05,127 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,127 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,127 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/13 Data: 0x00
DEBUG 2013-10-11 11:22:05,128 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,128 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,128 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/16 Data: 0x00
DEBUG 2013-10-11 11:22:05,134 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/7 Data: 0x00
DEBUG 2013-10-11 11:22:05,134 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/36 Data: 0x00
DEBUG 2013-10-11 11:22:05,135 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 5/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,136 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/6/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,143 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,253 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/45 Data: 0x00
DEBUG 2013-10-11 11:22:05,253 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,375 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/15 Data: 0x00
DEBUG 2013-10-11 11:22:05,376 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/8 Data: 0x00
DEBUG 2013-10-11 11:22:05,376 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,378 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,379 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,474 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/15 Data: 0x00
DEBUG 2013-10-11 11:22:05,475 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/11 Data: 0x00
DEBUG 2013-10-11 11:22:05,476 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,476 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,477 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/47 Data: 0x00
DEBUG 2013-10-11 11:22:05,477 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/35 Data: 0x00
DEBUG 2013-10-11 11:22:05,478 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 5/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,478 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/9 Data: 0x00
DEBUG 2013-10-11 11:22:05,479 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/30 Data: 0x00
DEBUG 2013-10-11 11:22:05,479 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,480 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,481 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,480 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,528 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/20 Data: 0x00
DEBUG 2013-10-11 11:22:05,528 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 0/0/2 Data: 0x00
DEBUG 2013-10-11 11:22:05,529 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,532 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,533 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 3/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,534 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/1/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,534 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,535 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/31 Data: 0x00
DEBUG 2013-10-11 11:22:05,537 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/14 Data: 0x00
DEBUG 2013-10-11 11:22:05,538 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,538 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/16 Data: 0x00
DEBUG 2013-10-11 11:22:05,618 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 5/0/7 Data: 0x00
DEBUG 2013-10-11 11:22:05,624 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/21 Data: 0x00
DEBUG 2013-10-11 11:22:05,624 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,626 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/43 Data: 0x00
DEBUG 2013-10-11 11:22:05,627 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,629 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,629 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/13 Data: 0x00
DEBUG 2013-10-11 11:22:05,629 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/5/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,630 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/16 Data: 0x00
DEBUG 2013-10-11 11:22:05,631 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/6 Data: 0x00
DEBUG 2013-10-11 11:22:05,635 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/7 Data: 0x00
DEBUG 2013-10-11 11:22:05,635 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/36 Data: 0x00
DEBUG 2013-10-11 11:22:05,636 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 5/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,636 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/6/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,644 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,730 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/40 Data: 0x00
DEBUG 2013-10-11 11:22:05,753 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/45 Data: 0x00
DEBUG 2013-10-11 11:22:05,754 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,863 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/25 Data: 0x00
DEBUG 2013-10-11 11:22:05,876 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/2/15 Data: 0x00
DEBUG 2013-10-11 11:22:05,878 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/8 Data: 0x00
DEBUG 2013-10-11 11:22:05,879 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 9/1/0 Data: 0x00
DEBUG 2013-10-11 11:22:05,879 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,881 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/5 Data: 0x00
DEBUG 2013-10-11 11:22:05,974 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/15 Data: 0x00
DEBUG 2013-10-11 11:22:05,976 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/11 Data: 0x00
DEBUG 2013-10-11 11:22:05,977 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,977 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 4/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,977 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/47 Data: 0x00
DEBUG 2013-10-11 11:22:05,978 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/35 Data: 0x00
DEBUG 2013-10-11 11:22:05,978 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 5/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,979 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/9 Data: 0x00
DEBUG 2013-10-11 11:22:05,980 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/30 Data: 0x00
DEBUG 2013-10-11 11:22:05,980 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 2/0/1 Data: 0x00
DEBUG 2013-10-11 11:22:05,980 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 7/0/4 Data: 0x00
DEBUG 2013-10-11 11:22:05,981 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 1/0/3 Data: 0x00
DEBUG 2013-10-11 11:22:05,983 (KNX): Polling device status for [FRAME] L_Data.req 0.0.0 -&gt; 6/0/3 Data: 0x00
</pre>
</div></div>

<p>All these logs are generated in the same second. This worries me a bit as I assume that polling a status generates traffic on the bus. Taking into account the limited speed available on the bus this would not be good. Why is Openremote doing all this polling? Can anyone clarify?</p>

<p>Seeing this output I start to wonder if the following is related:<br/>
First of all the quite high CPU usage, I have a 1.2 Ghz dual core atom processor on my ubuntu machine and Openremote is running 5 java threads at about 50% which seems high for software like Openremote.<br/>
Could the two be linked?</p>

<p>Then I have a much bigger and much more worrying issue. I have ABB touchsensors, lately I have noticed they have been getting unresponsive.<br/>
When I push a button the switch doesn't react. However if I push the button a second time it'll react and if I push it again for another 10 times it will work fine. It's like the switch has gone in sleep mode and pushing it once wakes it up again and from there it works fine again.</p>

<p>Any thoughts?<br/>
Thanks guys, as always any support much appreciated.<br/>
Stijn</p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22878032"></a>
                                    <font class="smallfont"><p>Ok small update from my side.<br/>
I have found the issue with high memory consumption. I wanted to see if my touchsensors still have the same issue as described above without OR running. So I decided to take OR down.<br/>
After logging in on Ubuntu today I noticed it wasn't displaying the upgrades etc because of a high load.<br/>
I checked the running processes and all the java processes I mentioned above were still there but my OR was turned off yesterday.<br/>
After killing these old java processes and starting OR again I noticed only 1 java process.<br/>
I tried to stop the process by issuing ./openremote.sh stop and ./openremote.sh stop -force but both didn't stop the java process. I had to kill it manually.<br/>
The normal stop command didn't spit out an error however when running the stop command with the -force addition I got:</p>

<p>root@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ./openremote.sh stop -force<br/>
Kill failed: $CATALINA_PID not set<br/>
Root@Server:~/OpenRemote-Controller-Pro1.0.10/bin$</p>

<p>It seems the "old" OR processes which were still running were also trying to connect to the KNX bus because when I started OR when all other old processes were killed it immediately connected to the bus where previous days it could take 10 to 15 minutes before it could connect. I tried it now twice in a row without any "old" processes and it connected instantly.</p>

<p>So I checked on the high amount of debug output and that's still the same so it seems the high cpu usage described in my first post is not related to this, hence can be scratched of the list.<br/>
Cheers<br/>
Stijn</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 13, 2013 00:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878206"></a>
                                    <font class="smallfont"><p>The debug statement is a bit misleading (it may have been removed since, I don't recall exactly though). Anyhow, it's not a request sent on the bus, it's just moving the KNX device state from the protocol implementation to the controller's status cache. So no bus traffic is generated.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 15, 2013 13:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878208"></a>
                                    <font class="smallfont"><p>Ok great,<br/>
Thanks Juha, any way I can disable this clutter?<br/>
It makes it difficult to debug.<br/>
Is it normal it constantly is generating these messages?<br/>
Thanks<br/>
Stijn</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 15, 2013 13:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878209"></a>
                                    <font class="smallfont"><p>The knx.log is the normal log at info level or above, without the debug statements.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 15, 2013 13:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878210"></a>
                                    <font class="smallfont"><p>Ok thanks.<br/>
Any idea on the java processes not stopping?<br/>
Anything I can do to prevent that besides killing them manually?<br/>
Stijn</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 15, 2013 13:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878213"></a>
                                    <font class="smallfont"><p>IIRC, you need to set the CATALINA_PID env variable to point to a file handle that is used to store the process ID. The shutdown command will look for the PID from the location pointed by the CATALINA_PID variable.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 15, 2013 13:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878215"></a>
                                    <font class="smallfont"><p>Ok have absolutely no clue what that means <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>.<br/>
I will try and google it later <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Stijn</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 15, 2013 13:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878601"></a>
                                    <font class="smallfont"><p>Sorry didn't mean to make it sound complicated.</p>

<p>If running linux or mac osx, you can do:</p>

<p>&gt; export CATALINA_PID=/path/to/pid.file<br/>
&gt; sh openremote.sh start<br/>
&gt; sh openremote.sh stop -force</p>

<p>If you check the pid.file content, you'll see it will store the process id number there which is what the 'stop' picks up when it looks for which process to kill (note you <b>will</b> need to use to force for now for immediate shutdown, the plain stop won't stop immediately due to running threads, which we are not managing, and the container will not stop them for some very long time period &#8211; maybe 5 minutes &#8211; or maybe wait for them indefinitely to stop working &#8211; which they wont, so only -force will work).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 22, 2013 00:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878623"></a>
                                    <font class="smallfont"><p>Hey Juha,<br/>
No problem, I had my Linux savvy colleague have a look at it <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> and in the mean time I've been able to figure it out.<br/>
For the non linux experts here's how I did it, might not be the cleanest way of doing it so any tips from people with more Linux experience is always welcome:</p>

<p>Step 1: Understanding the problem<br/>
------</p>

<p>Start openremote by going to the bin folder in your OR folder:</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ./openremote.sh start</p>

<p>You have started openremote, now lets stop it</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ./openremote.sh stop -force</p>

<p>We are using the -force option for the reason Juha mentioned in the post above and we're getting the following error</p>

<p>Kill failed: $CATALINA_PID not set</p>

<p>Ok so what does this mean. The force option uses a kill command to stop the java process which is associated to OR however you need to set this environment variable in your system.<br/>
Otherwise OR won't be able to find the java process and kill it.</p>

<p>Now issue the top command</p>

<p>user@Server:~/top</p>

<p>this will show you the processes which are using most of the CPU power. On my server the java thread for OR is right at the top of top (yes pun intended)</p>

<p>top - 11:14:44 up 22 days, 17:39,  1 user,  load average: 0.20, 0.24, 0.20<br/>
Tasks: 101 total,   1 running, 100 sleeping,   0 stopped,   0 zombie<br/>
Cpu(s):  1.3%us,  0.7%sy,  0.0%ni, 98.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st<br/>
Mem:   2050912k total,  1958740k used,    92172k free,   316352k buffers<br/>
Swap:   376828k total,    72548k used,   304280k free,   854096k cached</p>

<p>  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND            <br/>
28849 user     20   0 3054m 338m  11m S    5 16.9   2:32.89 java             </p>

<p>The PID for the java thread here is 28849, now press 'k' and you'll be able to kill it by issuing the PID number</p>

<p>top - 11:16:30 up 22 days, 17:40,  1 user,  load average: 0.03, 0.17, 0.18<br/>
Tasks: 101 total,   1 running, 100 sleeping,   0 stopped,   0 zombie<br/>
Cpu(s):  1.5%us,  0.6%sy,  0.0%ni, 97.8%id,  0.0%wa,  0.0%hi,  0.1%si,  0.0%st<br/>
Mem:   2050912k total,  1956640k used,    94272k free,   316428k buffers<br/>
Swap:   376828k total,    72548k used,   304280k free,   854116k cached<br/>
PID to kill: 28849<br/>
  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND            <br/>
28849 user     20   0 3054m 335m  11m S    5 16.8   2:38.60 java               </p>

<p>Ok so the java process has been killed, lets do the config to link the PID so it can be killed by OR.</p>

<p>Step 2: Create the file to store the PID.<br/>
-------</p>

<p>What I have done is just create an empty file in the OR bin folder where the openremote.sh file resides.</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ nano CATALINA.PID<br/>
Save and Exit</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ls<br/>
CATALINA.PID  openremote.bat  openremote.sh  tomcat</p>

<p>As you can see we now have a file where we can store the PID in.<br/>
Now we just need the full path for later when we adjust our .bashrc file.</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ pwd<br/>
/home/user/OpenRemote-Controller-Pro1.0.10/bin</p>

<p>Step3:Adjust your .bashrc file to export the PID<br/>
------</p>

<p>&lt; insert Linux expert comment why this is the best way to do this and what the .bashrc actually is&gt;</p>

<p>Go to your home directory</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ cd ~</p>

<p>user@Server:~$ nano .bashrc</p>

<p>Now completely scroll down and add the following</p>

<p>export CATALINA_PID="/home/user/OpenRemote-Controller-Pro1.0.10/bin/CATALINA.PID</p>

<p>Note that this is the full path to the file you have created above.</p>

<p>save and close</p>

<p>Step 4: Test<br/>
------<br/>
First log out of your ssh session, assuming you have used SSH, alternatively close your terminal.<br/>
Now log back in again, this should activate your new .bashrc commands.<br/>
Now start openremote</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ./openremote.sh start<br/>
Using CATALINA_BASE:   /home/user/OpenRemote-Controller-Pro1.0.10<br/>
Using CATALINA_HOME:   /home/user/OpenRemote-Controller-Pro1.0.10<br/>
Using CATALINA_TMPDIR: /home/user/OpenRemote-Controller-Pro1.0.10/temp<br/>
Using JRE_HOME: </p>


<p>And now try to stop it with the -force option</p>

<p>user@Server:~/OpenRemote-Controller-Pro1.0.10/bin$ ./openremote.sh stop -force<br/>
Killing: 28849</p>

<p>As you can see OR is now able to kill the java thread. You can double-check by using the top command as in step1</p>

<p>I hope this is a clear explanation.</p>

<p>Disclaimer: above tutorial by a non Linux expert, if anyone has any comments or remarks please let me know and I'll adjust.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 22, 2013 10:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878684"></a>
                                    <font class="smallfont"><p>Thanks for posting the detailed instructions.</p>

<p>The step 2 should be unnecessary. As long as the CATALINA_PID is defined, the file should be created by the OpenRemote process. It shouldn't be necessary to create an empty file. The only exception I can think of is if there's some permissions issues for the OR process to create the file (but then I suspect that writing to the file would fail as well).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 22, 2013 22:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878690"></a>
                                    <font class="smallfont"><p>Hey Juha,<br/>
I tried it first without creating the blank file and it didn't work for me.<br/>
However I tested it again and you are right it does work without creating the blank file, I must have done something wrong the first time around.<br/>
Stijn</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by garfield.arbuckle at Oct 22, 2013 23:35
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:41</font></td>
		    </tr>
	    </table>
    </body>
</html>