<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : QNAP TS 439 Pro with Merten Z-Wave</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : QNAP TS 439 Pro with Merten Z-Wave
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 14, 2015 by <font color="#0050B2">mr.zwave</font>.
				    </div>

				    <p>Hi,</p>

<p>I try to run my NAS as a Server for a Z-Wave Network with Merten components. I have followed the instructions so far.</p>

<p>The Merten USB Z-Wave Stick is connected to the nas.</p>

<p>My controller-config looks like this:<br/>
<img src="attachments/23596561/23789786.png" align="absmiddle" border="0"/></p>

<p>I guess that I have not selected the right port. I have changed the file log4j.properties to DEBUG for logging. But the logging file stays empty (I have saved everything and restarted the Software after syncing).</p>

<p>cat /proc/bus/usb/devices </p>

<p>gives the following result:</p>

<p><img src="attachments/23596561/23789788.png" align="absmiddle" border="0"/></p>

<p>As you might guess I'm a newbie to OpenRemote and I'm not experienced with Linux. I would be very happy, if you could provide any advice how I could set this up and get it running.</p>


				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789787.png">controller-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789786.png">controller-config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789788.png">merten-usb.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789864.png">openremote.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789865.png">proc merten.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/23596561/23789866.png">lsusb.png</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-23596570"></a>
                                    <font class="smallfont"><p>Do you use the new Z-Wave implementation : <a href="http://www.openremote.org/display/forums/New+Z-Wave+2.0.0+Release">New Z-Wave 2.0.0 Release</a> ?</p>

<p>If yes take a look at 'Known Issues' in the link above - you have to create at least one Z-Wave command and a sensor in the OpenRemote Designer, otherwise the Z-Wave network is not scanned. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by rhitz at Feb 14, 2015 18:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23598998"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>I gave it another try today. I am running java version </p>

<p>java version "1.8.0_06"<br/>
Java(TM) SE Embedded Runtime Environment (build 1.8.0_06-b23, headless)<br/>
Java HotSpot(TM) Embedded Client VM (build 25.6-b23, mixed mode)</p>

<p>I have installed the zwave.jar in the 2.0 version :</p>

<p>And Q-Nap says the following:<br/>
<img src="attachments/23596561/23789864.png" align="absmiddle" border="0"/></p>

<p>I have plugged the merten z-wave usb stick to the q-nap and I find the following in the proc folder:</p>

<p><img src="attachments/23596561/23789865.png" align="absmiddle" border="0"/></p>

<p>I have no idea which of the devices it is in my dev folder so i decided to go with /dev/ttyUSB01 but this might be wrong!</p>

<p>I have googled and found the lsusb -t command which listed the following:</p>

<p><img src="attachments/23596561/23789866.png" align="absmiddle" border="0"/></p>

<p>I assume that the merten usb stick is connect to BUS#6 but that does not help me.<br/>
According to the specs my NAS has 5 USB Ports. <br/>
but in the folder /dev/ there are only ttyUSB0, ttyUSB1 and ttyUSB2!</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mr.zwave at May 17, 2015 13:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599353"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>you can run dmesg command, you will find something like:</p>

<p><span class="error">&#91;~&#93;</span> # dmesg<br/>
...<br/>
250365.954079 usb 7-1: USB disconnect, device number 2<br/>
250365.959789 cp210x ttyUSB0: cp210x converter now disconnected from ttyUSB0<br/>
250365.965046 cp210x 7-1:1.0: device disconnected<br/>
250372.213055 usb 6-2: new full-speed USB device number 2 using uhci_hcd<br/>
250372.378435 cp210x 6-2:1.0: cp210x converter detected<br/>
250372.485085 usb 6-2: reset full-speed USB device number 2 using uhci_hcd<br/>
250372.628976 usb 6-2: cp210x converter now attached to ttyUSB0</p>

<p>Regards,<br/>
Steve.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stevemichels at May 28, 2015 17:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599392"></a>
                                    <font class="smallfont"><p>Hm</p>

<p>I've entered it and I have no idea what I'm seeing here <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
...</p>

<p>[   159.141444] warning: `proftpd' uses 32-bit capabilities (legacy support in use)<br/>
[   197.593230] rule type=1, num=1<br/>
[   197.806161] Loading iSCSI transport class v2.0-871.<br/>
[   197.861606] iscsi: registered transport (tcp)<br/>
[   197.897891] iscsid (9714): /proc/9714/oom_adj is deprecated, please use /proc/9714/oom_score_adj instead.<br/>
[   201.651206] PPP generic driver version 2.4.2<br/>
[   201.811497] PPP MPPE Compression module registered<br/>
[   201.837893] PPP BSD Compression module registered<br/>
[   201.868199] PPP Deflate Compression module registered<br/>
[   201.976794] nf_conntrack version 0.5.0 (7911 buckets, 31644 max)<br/>
[   202.142209] ip_tables: (C) 2000-2006 Netfilter Core Team<br/>
[   204.426636] tun: Universal TUN/TAP device driver, 1.6<br/>
[   204.432146] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br/>
[   205.323972] Set msys_nodify as 31743<br/>
[   266.950121] usbcore: registered new interface driver usbserial<br/>
[   266.956344] usbserial: USB Serial Driver core<br/>
[   267.013731] usbcore: registered new interface driver cp210x<br/>
[   267.026253] USB Serial support registered for cp210x<br/>
[ 15500.704074] usb 6-2: USB disconnect, device number 2<br/>
[ 15502.160045] usb 6-2: new full-speed USB device number 3 using uhci_hcd</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mr.zwave at May 31, 2015 16:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599394"></a>
                                    <font class="smallfont"><p>I am myself as well struggling getting openremote to work with the zwave stick on a QNAP 459 Pro, so far no luck.</p>

<p>But I have no problem to see on which USB port it gets connected, did you try to stop openremote, unplug the stick, replug, check dmesg and then start openremote.</p>

<p>Also note that you should leave the PAD (host + port) fields empty in the designer as RXTX is used instead (read it somewhere in installation guide).</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stevemichels at May 31, 2015 19:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23599417"></a>
                                    <font class="smallfont"><p>I:* If#= 0 Alt= 0 #EPs=14 Cls-ff(vend.) Sub-00 Prot=00 Driver=(none)</p>

<p>Not driver for The Merten USB Z-Wave Stick.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aleksey_z at Jun 02, 2015 09:50
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:38</font></td>
		    </tr>
	    </table>
    </body>
</html>