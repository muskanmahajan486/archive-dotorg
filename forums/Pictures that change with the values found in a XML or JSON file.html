<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Pictures that change with the values found in a XML or JSON file</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Pictures that change with the values found in a XML or JSON file
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Aug 21, 2014 by <font color="#0050B2">dswinnen</font>.
				    </div>

				    <p>Dear all,</p>

<p>I am trying to incorporate pictures that are changing in function of the data found in XML files.<br/>
For example, reading the weather forecast from available feeds (e.g. WUnderground or Yahoo Weather) is great and give all the relevant information that are easily parsed by OpenRemote and displayed as text.</p>

<p>I am sure it is possible to have pictures representing some values from the XML file, such as replacing the data "Partly cloudy" by a nice icon representing this.</p>

<p>Can someone guide me in the steps that are needed for this or to any discussions about related topic?<br/>
So far I could not find the solution.</p>

<p>Any help would be greatly appreciated!</p>

<p>Kind Regards,</p>

<p>Domi.</p>

<p><img src="attachments/22888132/23036608.gif" align="absmiddle" border="0"/><img src="attachments/22888132/23036607.gif" align="absmiddle" border="0"/></p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036607.gif">30.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036608.gif">1.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036610.png">Webview.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036609.png">Webview.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036611.png">Sensor WU icon.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/22888132/23036612.png">Command WU Icon url.PNG</a> (image/png)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-22888138"></a>
                                    <font class="smallfont"><p>I have not done this, but somthing simmilar. I think this should work.</p>

<ul class="alternate" type="square">
	<li>Collect all the relevant pictures in your local directory under /webbapps/controller (There is a collection somewhere on the Wunderground site)<br/>
In Building Modeler create new Device with the following:</li>
	<li>Create a http command that extracts the weather type from wunderground XML source</li>
	<li>Create sensor of type:<b>custom</b>, where you enumerate all possible weather types. You may use the same name for <em>Name</em> and <em>Value</em></li>
</ul>


<p>In the UI designer add:</p>
<ul class="alternate" type="square">
	<li>Add Image where you do select the sensor you just created in Building Modeler.</li>
	<li>Now under <b>Sensor State</b> you will see the names of the weather types you mentioned followed by a <em>select</em> button. Click those and select the appropriate images.</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 21, 2014 09:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888161"></a>
                                    <font class="smallfont"><p>Dear Pieter,</p>

<p>Thank you very much for the clear and prompt answer!<br/>
This works like a charm (and it much more easy than I thought it would be).</p>

<p>Cheers,<br/>
Domi.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dswinnen at Aug 21, 2014 20:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888165"></a>
                                    <font class="smallfont"><p>I did not collect all the pictures but with a XPath Expression (//response/current_observation/icon_url) I call the icon url from the Weatherunderground XML that I store on my Synology. <br/>
Than you do not need to type in all the weathertypes.<br/>
Works perfect as well.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by placemaster at Aug 21, 2014 21:21
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888166"></a>
                                    <font class="smallfont"><p>Not sure I am following you... I understand that you have created a new http command such as "http://api.wunderground.com/api/e5z6zz4z3z3zz3/conditions/q/Mauricius/CurePipe.xml" with the XPath Expression (//response/current_observation/icon_url), but after I do not see how you got the pictures from the http address in OpenRemote and how you succeeded in not typing all the weather types.</p>

<p>Thanks for this interesting alternative that I like to try.<br/>
Cheers,<br/>
D.-</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dswinnen at Aug 21, 2014 22:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888173"></a>
                                    <font class="smallfont"><p>I just made on the panel a webview component and linked my sensor to that.<br/>
<a class="confluence-thumbnail-link 284x331" href='http://www.openremote.org/download/attachments/22888132/Webview.PNG'><img src="attachments/thumbnails/22888132/23036609" align="left" border="0"/></a></p>

<p>The sensor looks like this<br/>
<a class="confluence-thumbnail-link 362x437" href='http://www.openremote.org/download/attachments/22888132/Sensor WU icon.PNG'><img src="attachments/thumbnails/22888132/23036611" align="left" border="0"/></a></p>

<p>In the command I used your link: <a href="http://api.wunderground.com/api/e5z6zz4z3z3zz3/conditions/q/Mauricius/CurePipe.xml">http://api.wunderground.com/api/e5z6zz4z3z3zz3/conditions/q/Mauricius/CurePipe.xml</a><br/>
<a class="confluence-thumbnail-link 379x485" href='http://www.openremote.org/download/attachments/22888132/Command WU Icon url.PNG'><img src="attachments/thumbnails/22888132/23036612" align="left" border="0"/></a></p>

<p>It is necesary that in your XML is an path to : icon_url<br/>
Otherwise it will not work.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by placemaster at Aug 22, 2014 11:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888175"></a>
                                    <font class="smallfont"><p>This is a good way to do it. <br/>
The reason I did choose against the WEBview element at the time is that they can't be packed as closely on a screen as the images. In addition my solution gives freedom of choice for kind ans size of icons. That being said, yours is easier to set up <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 22, 2014 12:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888244"></a>
                                    <font class="smallfont"><p>Thanks Erwin for the clarification and for the screenshots!</p>

<p>This is indeed a very easy set up.<br/>
One needs to balance the convenience of your setup with the fixed picture format available from WUnderground (including no transparent background).</p>

<p>All the best!<br/>
D.-</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dswinnen at Aug 26, 2014 20:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593354"></a>
                                    <font class="smallfont"><p>Erwin Bouwman says: I just made on the panel a webview component and linked my sensor to that...</p>


<p>Did in your example, the picture is, but only in Google Chrome (PC Win7 x64). On iPad mini no, I see a white square. How to fix?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aleksey_z at Oct 26, 2014 17:13
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:37</font></td>
		    </tr>
	    </table>
    </body>
</html>