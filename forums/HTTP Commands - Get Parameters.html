<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : HTTP Commands - Get Parameters</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : HTTP Commands - Get Parameters
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 29, 2012 by <font color="#0050B2">simnet</font>.
				    </div>

				    <p>Hello</p>

<p>Thanks for your project. It's a very good job and i want to test it with my home automation installation.</p>

<p>I try to send HTTP commands on my Zwave Box to pilot lights. But when i add "?" in my url, i receive from the controller an error that the character is invalid.</p>

<p>What's wrong ?</p>

<p>Thanks in advance</p>

<p>Guillaume</p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/19439997/19398811.class">HttpGetCommand.class</a> (application/octet-stream)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/19439997/19398812.class">HttpGetCommandBuilder.class</a> (application/octet-stream)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19440022"></a>
                                    <font class="smallfont"><p>I have do some tests.<br/>
It's not the "?" the illegal char but the space.</p>

<p>I have this URL to pilot lights in the house : <a href="http://10.20.1.51/cgi-bin/domo.cgi?cmd=OFF%20A12">http://10.20.1.51/cgi-bin/domo.cgi?cmd=OFF%20A12</a></p>

<p>I have try with the space, and with the encoding %20. Not working.</p>

<p>Any idea ?<br/>
Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Mar 31, 2012 14:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440024"></a>
                                    <font class="smallfont"><p>How is the URL written in the controller.xml file?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Mar 31, 2012 21:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440026"></a>
                                    <font class="smallfont"><p>&lt;command id="100" protocol="http"&gt;<br/>
      &lt;property name="url" value="http://10.20.1.51/cgi-bin/domo.cgi?cmd=ON A12" /&gt;<br/>
      &lt;property name="name" value="Meuble TV ON" /&gt;<br/>
&lt;/command&gt;</p>

<p>and here the log :</p>

<p>java.lang.IllegalArgumentException: Illegal character in query at index 41: <a href="http://10.20.1.51/cgi-bin/domo.cgi?cmd=ON">http://10.20.1.51/cgi-bin/domo.cgi?cmd=ON</a> A12<br/>
	at java.net.URI.create(URI.java:859)<br/>
	at org.apache.http.client.methods.HttpGet.&lt;init&gt;(HttpGet.java:69)<br/>
	at org.openremote.controller.protocol.http.HttpGetCommand.requestURL(HttpGetCommand.java:171)<br/>
	at org.openremote.controller.protocol.http.HttpGetCommand.send(HttpGetCommand.java:136)<br/>
	at org.openremote.controller.service.impl.ControlCommandServiceImpl.trigger(ControlCommandServiceImpl.java:95)<br/>
	at org.openremote.controller.rest.ControlCommandRESTServlet.handleRequest(ControlCommandRESTServlet.java:77)<br/>
	at org.openremote.controller.rest.RESTAPI.doPost(RESTAPI.java:125)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)<br/>
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.openremote.controller.rest.support.json.JSONCallbackFilter.doFilter(JSONCallbackFilter.java:63)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:78)<br/>
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)<br/>
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)<br/>
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)<br/>
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)<br/>
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)<br/>
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)<br/>
	at java.lang.Thread.run(Thread.java:722)<br/>
Caused by: java.net.URISyntaxException: Illegal character in query at index 41: <a href="http://10.20.1.51/cgi-bin/domo.cgi?cmd=ON">http://10.20.1.51/cgi-bin/domo.cgi?cmd=ON</a> A12<br/>
	at java.net.URI$Parser.fail(URI.java:2829)<br/>
	at java.net.URI$Parser.checkChars(URI.java:3002)<br/>
	at java.net.URI$Parser.parseHierarchical(URI.java:3092)<br/>
	at java.net.URI$Parser.parse(URI.java:3034)<br/>
	at java.net.URI.&lt;init&gt;(URI.java:595)<br/>
	at java.net.URI.create(URI.java:857)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Apr 01, 2012 07:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440032"></a>
                                    <font class="smallfont"><p>Ok, thanks.<br/>
Looks like the "blank" is the problem and we need to add a rewrite in HttpGetCommand.<br/>
I will take a look at that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 01, 2012 22:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440047"></a>
                                    <font class="smallfont"><p>Guillaume,</p>

<p>besides me looking into the HttpGetCommand, maybe you are interested in beta testig our zwave support? Hopefully in the next 1-2 weeks, we will have a version that can be tested. What zwave device are you using in the moment? Do you have a USB zwave stick? I am currently using the AEON Z-Stick S2 for my tests.</p>

<p>--Marcus</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 03, 2012 07:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440050"></a>
                                    <font class="smallfont"><p>The HttpGetCommand needs an URI and that needs to have URL parameter to be encoded.<br/>
I am using a differen URI constructor now which encodes the parameter.<br/>
Please replace the 2 attached files at this location "openremote-controller/webapps/controller/WEB-INF/classes/org/openremote/controller/protocol/http" and give it a try.<br/>
<a href="attachments/19439997/19398812.class">HttpGetCommandBuilder.class</a><br/>
<a href="attachments/19439997/19398811.class">HttpGetCommand.class</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 03, 2012 15:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440070"></a>
                                    <font class="smallfont"><p>Marcus,<br/>
I am interested to look into this as soon as I have my Z-stick (AEON) and Z-Wave switch. As soon as I get the grips on this I intend to get myself one of these Danfoss Living connect devices.<br/>
Pieter </p>

<p>Edit: Got the Danfoss Living Connect in the meantime.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 05, 2012 08:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440081"></a>
                                    <font class="smallfont"><p>Just let me know when you are ready and we can organize something.<br/>
--Marcus</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 06, 2012 08:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440082"></a>
                                    <font class="smallfont"><p>Hi there</p>

<p>I'm using now a Zibase from Zodianet. I can pilot this trough TCP, UDP or HTTP commands. </p>

<p>Regards</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by simnet at Apr 06, 2012 09:44
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440084"></a>
                                    <font class="smallfont"><p>I suggest you to start a new thread for these testing purposes. (as a new user I found it difficult to cope with changes of topic within threads)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 06, 2012 10:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440086"></a>
                                    <font class="smallfont"><p>Our upcoming zwave integration is based on the zwave serial protocol which needs a zwave stick to communicate with the devices. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 06, 2012 13:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440089"></a>
                                    <font class="smallfont"><p>I will do an "official call for testers" and start a new thread when we are ready.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 06, 2012 13:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440119"></a>
                                    <font class="smallfont"><p>I have received the Z-stick and a plug adaptor (Duwi ZS 3500). I did a few experiments with installing and controlling the devices in ZWave.me (<a href="http://en.z-wave.me/">http://en.z-wave.me/</a>). That is a nice environment to get acquainted with ZWave devices for a novice like me.<br/>
So I am ready whenever you are. Don't hurry, I have enough to play and read in the meantime.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 09, 2012 08:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440124"></a>
                                    <font class="smallfont"><p>Ok, I will post upcoming information on Z-Wave testing here: <a href="http://www.openremote.org/display/forums/Z-Wave+support+beta+testing">http://www.openremote.org/display/forums/Z-Wave+support+beta+testing</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 09, 2012 10:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440247"></a>
                                    <font class="smallfont"><p>On Tuesday I spoke to Danfoss at the Light&amp;Building fair in Frankfurt and they want to help <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
I will most likely get one device from them and some Z-Wave API documentation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 19, 2012 00:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440254"></a>
                                    <font class="smallfont"><p>Hope they are really willing to invest time in helping you out. The guys from Homeseer have rather negative experiences (<a href="http://board.homeseer.com/showpost.php?p=985785&amp;postcount=33">http://board.homeseer.com/showpost.php?p=985785&amp;postcount=33</a>). The remainder of that thread is also worthwhile to peruse. <br/>
I do not want to scare you off. The Danfoss Radiator Valve Controller is an important device for energy conservation. I see quotes of possible energy savings in the range of 10-30% by smart heating-zone control.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 19, 2012 07:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440444"></a>
                                    <font class="smallfont"><p>Any news on availability of zwave beta for test</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 27, 2012 10:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19440445"></a>
                                    <font class="smallfont"><p>I will answer here: <a href="http://www.openremote.org/display/forums/Z-Wave+support+beta+testing">http://www.openremote.org/display/forums/Z-Wave+support+beta+testing</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 27, 2012 10:48
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:43</font></td>
		    </tr>
	    </table>
    </body>
</html>