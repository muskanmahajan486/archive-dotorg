<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Z-Wave control with Razberry</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Z-Wave control with Razberry
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 27, 2015 by <font color="#0050B2">pz1</font>.
				    </div>

				    <p>The documentation on installation and usage of Razberry is now on: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry" title="OpenRemote 2.0 How To - Z-Wave with Razberry">OpenRemote 2.0 How To &#45; Z&#45;Wave with Razberry</a><br/>
RaZberry <a href="http://razberry.z-wave.me/z-way-server/ChangeLog">latest version info</a></p>

<p>Any comments on that document, and other comments and questions can go here.</p>

<p><b>NOTE 20150227</b> As of Z-Way v2.0.1-rc16 the <b>metrics</b> function in OpenRemoteHelpers has been changed. <a href="http://forum.z-wave.me/viewtopic.php?f=3424&amp;t=20819&amp;p=55194#p55194">See here</a></p>

<p><b>NOTE 20150109</b> Z-Way v2.xBeta for Windows has been released. <a href="http://forum.z-wave.me/viewtopic.php?f=3422&amp;t=21068">Release note</a></p>

<p><b>EDIT 20141214</b> Z-Way version 2.0.0 has been released it is a major release that requires existing users to review their configurations. Documentation has been updated to this version. A number of posts predating this release may no longer be strictly valid check proposed solutions with the How To</p>

<p><b>EDIT 20140614</b> At this moment release 1.7.1-rc2 is the most stable release. It has cured memory leaks that occurred since 1.5.<br/>
                <a href="http://razberry.z-wave.me/docs/zwayDev.pdf">Documentation has also been updated to version 1.7</a></p>

<p><b>EDIT 20140519</b> As the bundled RaZ-OR module uses the same names for many of its commands, it can not co-exist with the openremote.js file. Users best update the commands at the OpenRemote side. See instructions in <a href="http://forum.z-wave.me/viewtopic.php?f=3422&amp;t=20271#p49887">this post</a> I have tested with release 1.7-rc3. I think that is sufficiently stable to justify the chore of editing all your Z-Wave devices.</p>

<p><b>NOTE: 20140301</b> <em>Zwave&gt;me</em> maintains a variant of RaZ-OR that will be bundled with version 1.5.x and higher. The sources are maintained on <a href="https://github.com/Z-Wave-Me/home-automation.git">https://github.com/Z-Wave-Me/home-automation.git</a> in subdirectory modules/OpenRemoteHelpers. At this date it is still in the <b>develop</b>-branch</p>

<p><b>NOTE: 20131002</b> The RaZ-OR module is now available under OpenRemote license on <a href="https://github.com/openremote/Integration/tree/master/Razberry">github</a></p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052986.png">StatusSensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052987.png">Status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052990.png">Queue.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052993.png">Razberry Binary ON.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052994.png">Razberry Read Status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052995.png">Razberry Switch sensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22052996.png">Razberry Switch.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22053038.png">SwitchBinaryOn.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708229.png">Switch7On.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708228.png">7Status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708230.png">7Sensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708231.png">7Status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708225.png">Switch7On.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708227.png">7Sensor.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708226.png">7Status.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708242.png">console.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708232.png">console.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708244.png">thermostat.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708243.png">thermostat.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708303.png">1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708304.png">2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708305.png">3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708306.png">4.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708307.png">5.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708308.png">6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/22708309.png">7.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035909.png">NamingExample.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035910.png">NamingExample.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035906.png">NamingExample.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035947.png">ipadhomescreen.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035981.jpg">DimmerStatus.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035982.jpg">DimmerSensor.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035983.jpg">DimmerSwitch.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035984.jpg">photo2.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23035985.jpg">answer.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21859290/23036488.pdf">CommandTranslation.pdf</a> ("application/pdf")
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21859732"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>I really appreciate your input on the use of the razberry.  I have exactly the same configuration and I'm strugling since a while using OR together with the razberry(see an older post).  I tried to implement your information but it failed due to wrong URL.  Would you mind posting an image of your 4 commands?<br/>
I was more experimenting using the /Data/0 command together with the JSONPath expression but never managed to get the right values.</p>

<p>Thanks again for your input</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by delvedi at Apr 06, 2013 11:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860053"></a>
                                    <font class="smallfont"><p><em><b>Updated 20130509</b> Page deleted by author</em></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 10, 2013 16:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860706"></a>
                                    <font class="smallfont"><p>From my developer point-of-view, I would assume the code has to look like this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
SwitchBinaryStatus = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].SwitchBinary.data.level.value;
}</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Apr 29, 2013 08:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21860712"></a>
                                    <font class="smallfont"><p>That's also the one I tried first as a non-developer, but it did not seem to work. As my backup keeps 20 versions, I could recheck. To my embarassment I noticed I missed the last <b>e</b> in <b>value</b>.<img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>  <br/>
It works now. Nice birthday present, thanks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Apr 29, 2013 10:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414054"></a>
                                    <font class="smallfont"><p>I have added to the RaZ-OR module a function to get the battery load status from a device. In the Code section below <b>N</b> stands for the Z-Wave <b>device number</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/*GetBatteryLevel
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/GetBatteryLevel(N)
</span>Do use Sensor type:Range with <span class="code-keyword">this</span> command <span class="code-keyword">for</span> use in slider
*/
GetBatteryLevel = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].commandClasses[128].data.last.value;
}</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 10, 2013 12:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414075"></a>
                                    <font class="smallfont"><p>I started testing the RaZ-OR module with the free version of OpenRemote I did install the controller under Win XP as described on page <a href="http://www.openremote.org/display/docs/Get+Started#GetStarted-SettingUpOpenRemote">http://www.openremote.org/display/docs/Get+Started#GetStarted-SettingUpOpenRemote</a>.<br/>
The webconsole displays endlessly <b>Loading</b><br/>
In the dev.log I notice two error lines</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">2013-05-10 18:31:39,859 DEBUG [main]: A <span class="code-keyword">switch</span> sensor (Name = 'Switch2Sensor', ID = 162) has an incomplete 
&lt;state&gt; element mapping, the value attribute is missing in &lt;state name = on/&gt;.
2013-05-10 18:31:39,875 DEBUG [main]: A <span class="code-keyword">switch</span> sensor (Name = 'Switch2Sensor', ID = 162) has an incomplete 
&lt;state&gt; element mapping, the value attribute is missing in &lt;state name = off/&gt;.
</pre>
</div></div>
<p>I do not see this with the Professional version. I guess these errors are caused by the Regular Expression not being evaluated correctly. I do use expression<br/>
on|off<br/>
to strip the "" from the returned value. The sensor being used is type:switch which I had chosen deliberately, because it is simpler for end users than the Custom type.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 10, 2013 17:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414079"></a>
                                    <font class="smallfont"><p>The debug message regarding switch sensor states should not effect the switch sensor to work correctly.<br/>
The webconsole might be an older one. <br/>
Does it work with your Android tab and the free controller?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 10, 2013 19:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414082"></a>
                                    <font class="smallfont"><p>Yes, it did work on my Android. <br/>
I normally work in FF. Updating Webconsole to latest release 7178 did not make a difference.<br/>
Then I tried Chrome. After quite a while I got to the screen where I could check the controller to use. <br/>
It had port 15851 defined (used in the Synology setup) After changing that to 8080 it worked on chrome.<br/>
I noticed that in designer I still had that port for discovery on 15851. But that should not matter afaik.</p>

<p>Still no success with FF.</p>

<p>I'll see later if the original webconsole.war will work on Chrome</p>

<p><b>update</b>: It did work on Chrome with the "old" webconsole, which happened to be version 7746 <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> </p>

<p>I have to find out what is wrong with my FF, but the good news is that at least a binary switch works <br/>
through the RaZ-OR module on the free version of OpenRemote</p>

<p><b>update2</b>: Solved the FF problem. I hadn't enabled cookies for my localhost</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 10, 2013 20:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414571"></a>
                                    <font class="smallfont"><p>Hi Everyone!</p>

<p>I am currently working on a home automation project using raspberry pi + razberry. I am new to the world of OR and Z-Wave with moderate knowledge in programming. So please excuse me if I somehow missed an obvious point or </p>

<p>I've been following most of Pe Zanstra's write ups, and I am really thankful to you for documenting them like that. Those documents and forum posts have helped me a great deal. I am currently running both the controller and razberry on the RPi (so far so good), and I've added some switches and sensors using the HTTP POST and Raz-OR module. However I lack a great deal of knowledge when it comes to adding the following devices: </p>

<p>-Dimmers<br/>
-Blind controllers </p>

<p>Which command class should I use to control these devices? Can they be controlled at all? I hope you can shed some light on how to go about these. And I would really appreciate it if you could let me know how far you have gone with Razberry + Rpi. </p>

<p>Another question : is there any way (or is it possible?) that I can use a controller like Aeon Zwave stick with Rpi and import devices directly in to the OR designer?</p>

<p>OR is a great product and I am glad I stumbled upon it, I hope I can be of some value to this community as I tread along this path.</p>

<p>D1. </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 20, 2013 15:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414572"></a>
                                    <font class="smallfont"><p>Great to hear you have got both OR and Razberry working on the Pi. I do hope it does scale if more devices are added.</p>

<ul class="alternate" type="square">
	<li>W.r.t. the Dimmers and Blind controllers I am sorry to say that I do not own any of those devices, but I will look into the RaZ-OR module to see what I can do. In principle you can use the Zway API manual to find the controls, but I admit it is a bit steep. I'll look into it tomorrow.</li>
</ul>


<ul class="alternate" type="square">
	<li>You can use the Aeon stick on Raspberry, but that does not work togehter with with the Zway API (goes only with Razberry) You can however use the native Z-Wave controller from OpenRemote. That only does switches, dimmers and thermostats at the moment if I remember correctly. But it does have the advantage of automatically configuring your Z-Wave devices with sensors and switches etc.</li>
</ul>


<p>Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 20, 2013 17:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414579"></a>
                                    <font class="smallfont"><p>Hi Pieter, </p>

<p>Thanks alot for the reply. I was having a bad day but you really shed some light into that gloominess.</p>

<p>I got one month to get a living room automated. (AC control, light switches,dimmers, motion sensors, webcams, door locks,blind controllers, tv remote integration) Well less than a month now <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>(. </p>

<p>I am looking for the easiest and quickest methods. But I am stuck with the raspberry pi because we are trying to build a very low cost device. (razberry wasn't low cost at all!)</p>

<p>As for the Razberry, I did go through the Z-way API manual a couple of times, but I couldn't locate a command specific to those devices. </p>

<p>I am happy to hear about the Aeon Stick on Rpi, I'll try to give it a go tomorrow. I found a couple of posts on that. It would be nice if someone from open remote could tell me if the functionality of the Z-wave controller is really limited to what Pieter said. </p>

<p>Once again thank you for your reply. </p>

<p>D1. </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 20, 2013 18:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414582"></a>
                                    <font class="smallfont"><p>The native Z-Wave support (Serial API and Aeon Stick) is currently limited to switch, dimmer, thermostat and binary sensor (which works for door contact or presence detection). This solution should also work on the Raspberry Pi.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 20, 2013 19:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414583"></a>
                                    <font class="smallfont"><p>It is quite a lot that you want to achieve in a short period of time. <br/>
In the meantime I looked a bit into dimmers and blind controllers, which both use the <em>Command Class SwitchMultilevel</em> (See paragraph 15.11 of the present (May 2013) Zway documentation). As this command class has many ways to vary I have to think and experiment more to come with a good extension in the RaZ-OR module. For <b>RaZ-OR</b> I'll probably make separate calls for dimmers and blinds. As said I do not yet have a device to test this, but in it's simplest form the RaZ-OR extension for a simple dimmer could look like this.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
/*DimmerSet
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerSet(N,${param})
</span>*/
SwitchMultilevelSet = function(N,SetLevel) {
  zway.devices[N].instances[0].SwitchMultilevel.Set(SetLevel)
}

/*DimmerStatus
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerStatus(N)
</span>*/
DimmerStatus = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SwitchMultilevel.data.level.value
}
</pre>
</div></div>

<p>For experimentation with a dimmer you can add this piece of code at the end of your OpenRemote.js file on the Raspberry.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 20, 2013 19:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414587"></a>
                                    <font class="smallfont"><p>SwitchMultilevel is supported in OpenRemote which means, you could probably control blinds just like dimmers.<br/>
I don't have a ZWave blind actuator, so I cannot test.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 20, 2013 19:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414588"></a>
                                    <font class="smallfont"><p>Does the Openremote SwitchMultilevel next to Set and Status also implement the SetWithDuration, StartLevelChange, StartLevelChangeWithDuration, etc. ? (See <a href="http://razberry.zwave.me/docs/zway.pdf">Zway documentation</a> page 47 and further for the Razberry side)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 20, 2013 19:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414589"></a>
                                    <font class="smallfont"><p>No, it's actually only using the CommandClassBasic in the background.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 20, 2013 19:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414590"></a>
                                    <font class="smallfont"><p>Thanks Pieter and Marcus for your responses. </p>

<p>@Pieter, I will try out your code tomorrow and let you know how it goes...</p>

<p>D1.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 20, 2013 19:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414594"></a>
                                    <font class="smallfont"><p>Could you tell us what brands and types of device you are using. That may be usefull if you need further help. (Also interesting for me to update the list of tested devices in the documentation)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 20, 2013 20:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414632"></a>
                                    <font class="smallfont"><p>Your code worked great Peiter! Thanks. </p>

<p>I am now able to control/sense the following: </p>

<ul class="alternate" type="square">
	<li>Fibaro Dimmer</li>
	<li>Aeon Door/Window Sensor</li>
	<li>Presence Detector - (I am experiencing probs with this even on the Zway demo app, it doesn't detect the presence as quickly as required, have to check if there is some kind of internal polling interval)</li>
	<li>TBKHome power socket- <a href="http://www.uk-automation.co.uk/products/Z-Wave-Appliance-plug-by-TKBHome.html">http://www.uk-automation.co.uk/products/Z-Wave-Appliance-plug-by-TKBHome.html</a></li>
</ul>


<p>I thought I would go along with the Razberry as I am a bit familiar with it now. I tried getting the Aeon Zwave stick in my RPi but wasn't successful. I'll post it in the other forum (<a href="http://www.openremote.org/pages/viewpage.action?pageId=20452294&amp;focusedCommentId=22414591#comment-22414591">http://www.openremote.org/pages/viewpage.action?pageId=20452294&amp;focusedCommentId=22414591#comment-22414591</a>)</p>

<p>I got a few more stuff to add, and they're probably the hardest: </p>

<ul class="alternate" type="square">
	<li>A door lock (don't have the model I'll update this when I do)</li>
	<li>Smoke Detector + Alarm (Everspring SF812)</li>
	<li>Fibaro Roller Shutter ( I would have tried this today but I don't have a motor to connect to it)</li>
	<li>Aeon Home Energy Meter (&lt;&lt; this might be the hardest, but I read about the RRD4J and using the Command Class Meter on the Zway API)</li>
	<li>Aeotec Smart Energy Illuminator (This is a dimmer, but gives you the power consumption of the lights connected to it)</li>
</ul>


<p>I will be having more gloomy moments in the coming days, hopefully you guys will be around <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I can update my progress if you all want. Is it alright if I update it in this post? or should I start a new one?</p>

<p>Thanks again!</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 21, 2013 12:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414636"></a>
                                    <font class="smallfont"><p>To keep the time line in place, it would be better to continue replying in the forum.</p>
<ul class="alternate" type="square">
	<li>Do you have the latest Razberry s/w from 17-05-2013. They have improved support for door locks there.</li>
	<li>I have tried the Everspring, but as it does not provide early warning (without beeping very loud) of low battery levels, I sent it back.</li>
	<li>I'll have a look into the Fibaro Roller shutter<br/>
<b>edit</b>: For the roller device be careful with the selection. As far as I remember Fibaro has a few remarks on that in their documents. </li>
	<li>I have a Fibaro Plugin Switch with power meter on order, So I'll test that when it arrives. I expect that metering command will work with the Aeotec dimmer. Though I must say that apart from the Z-stick I seen a lot of problems with Aeotec on the forums.</li>
</ul>


<p>What I would like to see from you are the exact URL's that you send to the Raspberry for the</p>
<ul class="alternate" type="square">
	<li>Fibaro Dimmer (I guess it is as I described in my earlier post)</li>
	<li>Aeon Door/Window sensor. What did you use there?</li>
	<li>Presence detector I am really curious about what you used.</li>
</ul>


<p>If you have one or a few screenshots would be nice. If you need help with screenshot just ask.<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 21, 2013 13:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414641"></a>
                                    <font class="smallfont"><blockquote><p>I'll post it in the other forum (<a href="http://www.openremote.org/pages/viewpage.action?pageId=20452294&amp;focusedCommentId=22414591#comment-22414591">http://www.openremote.org/pages/viewpage.action?pageId=20452294&amp;focusedCommentId=22414591#comment-22414591</a>)</p></blockquote>

<p>Please stick to this thread. The other thread deals with the <b>native OpenRemote</b> Z-Wave implementation, and not with the support of <b>Zwave&gt;Me's Razberry</b> device. It looks as if you are mixing the two. The RaZ-OR module only works with the Razberry Z-Wave board. Not with the Aeon Z-Stick </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 21, 2013 13:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414656"></a>
                                    <font class="smallfont"><p>Hi peiter, </p>

<p>My whole set up is at the workplace. So I will post the screenshots and the specific URLs when I go there tomorrow. </p>

<p>I'll copy and paste the Raz-OR section, and screenshots of the openremote designer like the one you have on <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry</a>. </p>

<p>Planning to work on the meter reading tomorrow...let's hope it works out <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> </p>

<p>Regards, </p>

<p>D1. </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 21, 2013 19:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414660"></a>
                                    <font class="smallfont"><p>Hi Peiter, </p>

<p>My(mostly yours) Raz-Or functions are pasted below (defaults are not included)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
/*DWSensorStatus
OpenRemote usage : http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DWSensorStatus(N)
</span>*/
DWSensorStatus = function(N) {
	<span class="code-keyword">var</span> status= (zway.devices[N].instances[0].SensorBinary.data.level.value==0) ? <span class="code-quote">"Cls"</span> : <span class="code-quote">"Opn"</span> ;
	<span class="code-keyword">return</span> status;
}

/*GetBatteryLevel
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/GetBatteryLevel(N)
</span>Do use Sensor type:Range with <span class="code-keyword">this</span> command <span class="code-keyword">for</span> use in slider
*/
GetBatteryLevel = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].commandClasses[128].data.last.value;
}


/*AlarmSensor
OpenRemote usage : http:<span class="code-comment">//raspberry_IP:8083/JS/Run/AlarmSensor(N)
</span>*/
AlarmSensor = function(N) {
	<span class="code-keyword">var</span> status = (zway.devices[N].instances[0].AlarmSensor.data.level.value==0) ? <span class="code-quote">"On"</span> : <span class="code-quote">"Off"</span> ;
	<span class="code-keyword">return</span> status;
}

/*DimmerSet
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerSet(N,${param})
</span>*/

DimmerSet = function(N,SetLevel) {
  zway.devices[N].instances[0].SwitchMultilevel.Set(SetLevel)
}

/*DimmerStatus
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerStatus(N)
</span>*/
DimmerStatus = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SwitchMultilevel.data.level.value
}

</pre>
</div></div>

<p>Please note that the AlarmSensor function haven't been tested yet. I also took your battery level function, it works great <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>


<p>Here are the Screenshots: </p>

<p>1st- A list of the current devices in OR <br/>
<a class="confluence-thumbnail-link 650x579" href='http://www.openremote.org/download/attachments/21859290/1.png'><img src="attachments/thumbnails/21859290/22708303" align="absmiddle" border="0"/></a></p>

<p>Others are screenshots of how they're configured. </p>

<p> <a class="confluence-thumbnail-link 448x499" href='http://www.openremote.org/download/attachments/21859290/2.png'><img src="attachments/thumbnails/21859290/22708304" align="left" border="0" hspace="20" vspace="20"/></a> <a class="confluence-thumbnail-link 418x519" href='http://www.openremote.org/download/attachments/21859290/3.png'><img src="attachments/thumbnails/21859290/22708305" align="left" border="0" hspace="20" vspace="20"/></a> <a class="confluence-thumbnail-link 450x435" href='http://www.openremote.org/download/attachments/21859290/4.png'><img src="attachments/thumbnails/21859290/22708306" align="left" border="0" hspace="20" vspace="20"/></a> <a class="confluence-thumbnail-link 450x240" href='http://www.openremote.org/download/attachments/21859290/5.png'><img src="attachments/thumbnails/21859290/22708307" align="left" border="0" hspace="20" vspace="20"/></a> <a class="confluence-thumbnail-link 440x556" href='http://www.openremote.org/download/attachments/21859290/6.png'><img src="attachments/thumbnails/21859290/22708308" align="left" border="0" hspace="20" vspace="20"/></a> <div align="center"><a class="confluence-thumbnail-link 435x481" href='http://www.openremote.org/download/attachments/21859290/7.png'><img src="attachments/thumbnails/21859290/22708309" border="0" hspace="20" vspace="20"/></a></div></p>




<p>If anybody needs further explaination please let me know. Right now I've got a lot on my shoulders. Peiter, please let me know how it goes with the meter. </p>


<p>Regards, </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 07:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414661"></a>
                                    <font class="smallfont"><p>Please put code into {code}...{code} tags or else it's hard to read.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 08:01
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414663"></a>
                                    <font class="smallfont"><p>thanks marcus <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>any way to better align the screenshots?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 08:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414666"></a>
                                    <font class="smallfont"><p>Screendumps are always a bit of a mess. Just place all of them in one or two lines side by side. Do write the explanation just above the images.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 08:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414667"></a>
                                    <font class="smallfont"><p>You could put them on new lines each, but I think it's ok already.<br/>
Thanks for showing your stuff.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 08:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414670"></a>
                                    <font class="smallfont"><p>Great that this has worked for you. Interesting to see how you were able to make your own extensions to RaZ-OR. It is a good input for further thinking on naming of commands, as well as on how to make the RaZ-OR functions generically applicable. <br/>
I assume you won't mind if I include in RaZ-OR some of the functions. May be altered a bit. </p>

<ul class="alternate" type="square">
	<li>Why do you use a "custom" type sensor for the door Switch and not a "binary" switch?</li>
	<li>Also a question about the Alarm sensor, where you return "On" or "Off" instead of "on" or "off", which would be required to drive a binary switch type of sensor.</li>
	<li>As soon as I have my meter I will report on it here.</li>
</ul>


<p>Thanks for sharing your experience<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 08:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414675"></a>
                                    <font class="smallfont"><p><b>Update RaZ-OR module</b><br/>
I have uploaded version <em>1.00.001</em> of RaZ-OR to the HowTo page. Changes are:</p>
<ul class="alternate" type="square">
	<li>To improve consistency in naming I have changed the call ThermostatRead is now <b>ThermostatLevel</b>. All ranges or levels do get <b>Level</b> in their name, all binary outcomes will be named <b>Status</b>.</li>
	<li>The battery level function now uses the <em>Battery</em> command instead of <em>commandClasses[128]</em></li>
	<li>I added the following functions some are slightly modified from what Dsen contributed. For his DWSensorStatus I used the more generic BinaryStatus, where I did change the return values, to make them fit for sensor type:switch (which actually his boolean I think)</li>
</ul>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/*DimmerSet
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerSet(N,${param})
</span>*/
SwitchMultilevelSet = function(N,SetLevel) {
  zway.devices[N].instances[0].SwitchMultilevel.Set(SetLevel)
}
/*DimmerLevel
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerStatus(N)
</span>*/
DimmerStatus = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SwitchMultilevel.data.level.value
}

/*AlarmStatus
OpenRemote usage : http:<span class="code-comment">//raspberry_IP:8083/JS/Run/AlarmStatus(N)
</span>*/
AlarmStatus = function(N) {
	<span class="code-keyword">var</span> status = (zway.devices[N].instances[0].AlarmSensor.data.level.value==0) ? <span class="code-quote">"on"</span> : <span class="code-quote">"off"</span> ;
	<span class="code-keyword">return</span> status;
}

/*BinaryStatus
OpenRemote usage : http:<span class="code-comment">//raspberry_IP:8083/JS/Run/BinaryStatus(N)
</span>To be used <span class="code-keyword">for</span> Door/Window sensors, etc.
*/
BinaryStatus = function(N) {
	<span class="code-keyword">var</span> status= (zway.devices[N].instances[0].SensorBinary.data.level.value==0) ? <span class="code-quote">"on"</span> : <span class="code-quote">"off"</span> ;
	<span class="code-keyword">return</span> status;
}

</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 10:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414682"></a>
                                    <font class="smallfont"><p>Great to see it updated Peiter!!</p>

<ul class="alternate" type="square">
	<li>I'm sorry but I don't understand your first question regarding the "custom" type sensor.</li>
	<li>I could not trigger the alarm system, but it did return Off when I queried it. (any idea on how to trigger it? I tried burning a piece of paper under it, but it didn't trigger)</li>
	<li>I am currently testing with the meter, but there is this scale subtree that I have to deal with. The following function returns null:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
MeterRead = function(N,M) {
<span class="code-keyword">return</span> zway.devices[N].instances[M].Meter.data.previous;
}
</pre>
</div></div></li>
</ul>


<p>But if I query with just the following : </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
MeterRead = function(N,M) {
<span class="code-keyword">return</span> zway.devices[N].instances[M];
}
</pre>
</div></div>

<p>it gives me a whole lot of subtree info, at the end there is the following: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"name"</span>:<span class="code-quote">"previous"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045}}},<span class="code-quote">"id"</span>:50}
</pre>
</div></div>

<p>The above value is the one which is being displayed on Z-way interface. This is something that was mentioned in the manual. but I don't know where to put the scale values. Do you have any idea where I can put it?: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
Note that during data updates some values are update by big subtrees. For example, in
Meter Command <span class="code-object">Class</span> value of a scale is always updated as a scale subtree by [scale].val object
(containing scale and type descriptions).
</pre>
</div></div>

<p>Regards,</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 12:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414684"></a>
                                    <font class="smallfont"><p>Some correction to my previous post: </p>

<p>the value I am actually looking for is the following: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"name"</span>:<span class="code-quote">"val"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"scale"</span>:
</pre>
</div></div>

<p>I still get the null value when I query using the following: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">return</span> zway.devices[N].instances[M].Meter.data.val;
</pre>
</div></div>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 13:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414685"></a>
                                    <font class="smallfont"><p>It should be</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">return</span> zway.devices[N].instances[M].Meter.data.value;
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 13:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414687"></a>
                                    <font class="smallfont"><blockquote><p>I'm sorry but I don't understand your first question regarding the "custom" type sensor.</p></blockquote>
<p>Your door sensor function returns "Cls" or "Opn" If you want to make that visible in your user interface you can only use a sensor of type:custom. As this door sensor essentially is a two-state device I prefer it to return the values "on" and "off" that drive a sensor type:switch (essentially boolean)</p>
<blockquote><p>I could not trigger the alarm system, but it did return Off when I queried it. (any idea on how to trigger it? I tried burning a piece of paper under it, but it didn't trigger)</p></blockquote>
<p>Is this what you get if you do the following call in Chrome or FF?</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//raspberry_IP:8083/ZWaveAPI/Run/devices[N].instances[0].AlarmSensor.data.level.value</span></pre>
</div></div>
<p>Do replace the N for your actual number.<br/>
Calls like this one do query the Zway data tree, not directly the alarm device. To get a valid value I should first have sent a Get() command, then check if it is valid, and only than return the value. This Get() is afaik sent automatically by Razberry for the switch, dimmer en thermostat commands, but I think not for this one. The Get() commands does update the Zway data tree. </p>
<blockquote><p>I am currently testing with the meter, but there is this scale subtree that I have to deal with. The following function returns null:</p></blockquote>
<p>I guess you do get null because you do not ask a specific attribute value. Do try:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">return</span> zway.devices[N].instances[M].Meter.data.previous.value</pre>
</div></div>
<p>The Zway API description section 15.8 warns that it is complex. I really have to test first with a real device. Subtrees afaik cannot be handled with the HTTP protocol directly. I do not know if that can be passed on to the Drools engine for further parsing. Maybe others can tell.</p>
<blockquote><p>MeterRead = function(N,M)</p></blockquote>
<p>Please note that I use parameter I for <em>instances</em> not M</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 13:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414689"></a>
                                    <font class="smallfont"><p>The HTTP protocol can also handle data in this format</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"name"</span>:<span class="code-quote">"val"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"scale"</span>:...}
</pre>
</div></div>
<p>This is a JSON structure and you can filter the requiered value using the JSON path attribute which is provided on the HTTP protocol definition window.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 13:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414690"></a>
                                    <font class="smallfont"><p>"Your door sensor function returns "Cls" or "Opn" If you want to make that visible in your user interface you can only use a sensor of type:custom. As this door sensor essentially is a two-state device I prefer it to return the values "on" and "off" that drive a sensor type:switch (essentially boolean)"</p>

<p>Yes Peiter that is true, I did use the custom type sensor, I will update it according to your advice. I am still learning about OR so these things were not obvious to me. </p>

<p>For some reason now the Alarm sensor is giving me the Null value as well. I will troubleshoot this further once I get somewhere with the meter readings. </p>

<p>The codes that both (peiter and marcus) suggested returned null values. (its a null nightmare!!)</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 13:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414692"></a>
                                    <font class="smallfont"><p>Hi Marcus,</p>

<p>Could you tell me a way to extract that value using the JSON path attribute? An example would be great! </p>

<p>I have to extract that value from the following: </p>

<div style="max-width: 800px;"><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"name"</span>:<span class="code-quote">"Meter"</span>,<span class="code-quote">"data"</span>:{<span class="code-quote">"name"</span>:<span class="code-quote">"devices.7.instances.1.commandClasses.50.data"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"NoneType"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">null</span>,<span class="code-quote">"updateTime"</span>:1369204045,<span class="code-quote">"invalidateTime"</span>:1369204044,
<span class="code-quote">"version"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"version"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:2,<span class="code-quote">"updateTime"</span>:1369204045,<span class="code-quote">"invalidateTime"</span>:1369204044},
<span class="code-quote">"security"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"security"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"bool"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">false</span>,<span class="code-quote">"updateTime"</span>:1369204045,<span class="code-quote">"invalidateTime"</span>:1369204044},
<span class="code-quote">"interviewDone"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"interviewDone"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"bool"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">true</span>,<span class="code-quote">"updateTime"</span>:1369204047,<span class="code-quote">"invalidateTime"</span>:1369204044},
<span class="code-quote">"interviewCounter"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"interviewCounter"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:9,<span class="code-quote">"updateTime"</span>:1369204045,<span class="code-quote">"invalidateTime"</span>:1369204044},
<span class="code-quote">"resettable"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"resettable"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"bool"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">true</span>,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204044},

**************************

<span class="code-quote">"0"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"0"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"NoneType"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">null</span>,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369215089,
<span class="code-quote">"sensorType"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"sensorType"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:1,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"sensorTypeString"</span>:{<span class="code-quote">"name"</span>:<span class="code-quote">"sensorTypeString"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"str"</span>,<span class="code-quote">"value"</span>:<span class="code-quote">"Electric "</span>,<span class="code-quote">"updateTime"</span>:1369204046,
<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"val"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"val"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"scale"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"scale"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:0,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"scaleString"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"scaleString"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"str"</span>,<span class="code-quote">"value"</span>:<span class="code-quote">"kWh"</span>,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"ratetype"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"ratetype"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:1,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"delta"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"delta"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:545,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},
<span class="code-quote">"previous"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"previous"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045}},

**************************************
<span class="code-quote">"2"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"2"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"NoneType"</span>,<span class="code-quote">"value"</span>:<span class="code-keyword">null</span>,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369215089,<span class="code-quote">"sensorType"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"sensorType"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:1,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"sensorTypeString"</span>:{<span class="code-quote">"name"</span>:<span class="code-quote">"sensorTypeString"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"str"</span>,<span class="code-quote">"value"</span>:<span class="code-quote">"Electric "</span>,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"val"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"val"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"scale"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"scale"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:2,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"scaleString"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"scaleString"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"str"</span>,<span class="code-quote">"value"</span>:<span class="code-quote">"W"</span>,<span class="code-quote">"updateTime"</span>:1369204046,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"ratetype"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"ratetype"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:1,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"delta"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"delta"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">int</span>"</span>,<span class="code-quote">"value"</span>:0,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045},<span class="code-quote">"previous"</span>:
{<span class="code-quote">"name"</span>:<span class="code-quote">"previous"</span>,<span class="code-quote">"type"</span>:<span class="code-quote">"<span class="code-object">float</span>"</span>,<span class="code-quote">"value"</span>:0.017999999225139618,<span class="code-quote">"updateTime"</span>:1369215090,<span class="code-quote">"invalidateTime"</span>:1369204045}}},<span class="code-quote">"id"</span>:50}
</pre>
</div></div></div>

<p>UPDATE:: </p>

<p>I tried querying using: </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;&lt;RaspberryIP&gt;&gt;:8083/ZWaveAPI/Run/devices[7].instances[1].Meter.data.&lt;subtree&gt;
</pre>
</div></div>

<p>I was successful till I came to the point where I have put a line of asterisks (****). There's a BIG 0 there, when I put it in my query it gives the following error: </p>

<p>JavaScript compilation error: Uncaught SyntaxError: Unexpected number</p>

<p>Is there anyway I can put that in a way the javascript will understand ? </p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 13:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414697"></a>
                                    <font class="smallfont"><blockquote><p> I am still learning about OR so these things were not obvious to me. </p></blockquote>
<p>Things can be done in many ways within OpenRemote. In custom sensor you can make the transformation in more readable texts in the devices specification, A binary sensor does allow you to do the transformation at the GUI level. If you haven't done so yet try to add a label in a screen, and connect a sensor type:switch to it. Than you have to define your texts there.</p>

<p>I curious now to see your interface emerging..</p>

<p>PZ</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 14:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414698"></a>
                                    <font class="smallfont"><p>deleted double post</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 14:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414704"></a>
                                    <font class="smallfont"><p>It did that to me aswell <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>Peiter I used the custom type sensor, and then did the transformation using the image module. It worked fine <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I'm trying to build a cool GUI, but thats on hold at the moment because of these issues. Please take a look at the update I posted above. </p>

<p>thanks. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 14:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414706"></a>
                                    <font class="smallfont"><p>These sites will help:</p>
<ul class="alternate" type="square">
	<li><a href="http://jsonpath.curiousconcept.com/">http://jsonpath.curiousconcept.com/</a></li>
	<li><a href="http://jsonformatter.curiousconcept.com/">http://jsonformatter.curiousconcept.com/</a></li>
</ul>


<p>The JSON path would be: </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">data[0].val.value</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 14:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414708"></a>
                                    <font class="smallfont"><p>Do have a look at the Razberry forum. I think this may help:
<a href="http://en.z-wave.me/content/delta-value-meter-command-class">http://en.z-wave.me/content/delta-value-meter-command-class</a></p>

<p><b>update</b>: Try something like:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;&lt;RaspberryIP&gt;&gt;:8083/ZWaveAPI/Run/devices[7].instances[1].Meter.data[2].delta.value</pre>
</div></div>
<p>I believe the <em>commandClasses</em> as shown in the Razberry forum is no longer necessary in the path. But I have to check that.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 14:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414709"></a>
                                    <font class="smallfont"><p>It is good to see how JSON can help as an interim solution, but for a generic simple solution imho it would be beter to focus on do a direct selection of a value using the Zway API.<br/>
That is at least what I will be working on when I get my device.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 14:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414710"></a>
                                    <font class="smallfont"><p>True and it makes more sense to use the Z-Way engine to already extract the correct value.<br/>
One should be able to access the same values from within z-way's Javascript engine.<br/>
It looks to me as if the notation you use in the javascript file is just like JSON path.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 14:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414711"></a>
                                    <font class="smallfont"><p>Yes, the Z-Way data tree is JSON</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 15:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414715"></a>
                                    <font class="smallfont"><p>Yeeeah!...</p>

<p>Guys, this code worked!!</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;&lt;RaspberryIP&gt;&gt;/ZWaveAPI/Run/devices[7].instances[1].Meter.data[0].val.value
</pre>
</div></div>

<p>Thanks guys!! Tomorrow I will try RRD4J and graph this value. I tried many combinations, except that. I guess the lack of knowledge in programming does hinder my progress a bit...</p>

<p>@Peiter<br/>
I will try out the smoke alarm and give you some feedback <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 22, 2013 15:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414716"></a>
                                    <font class="smallfont"><p>Thanks for your efforts. We are now making much more progress on this than I anticipated a couple of days ago <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
My metering plugin switch seems to be in the mail.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 22, 2013 15:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414718"></a>
                                    <font class="smallfont"><p>Great, you are welcome.<br/>
I assume you will use OpenRemote's RRD4J stuff <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
How to: <a href="http://www.openremote.org/pages/viewpage.action?pageId=19988490">http://www.openremote.org/pages/viewpage.action?pageId=19988490</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 22, 2013 15:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414748"></a>
                                    <font class="smallfont"><p>Hi all, </p>

<p>Trying to graph the meter values today. </p>

<p>I am experiencing a prob when I try to extract the value from the </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
http:<span class="code-comment">//raspberry_IP:8083/JS/Run/MeterRead(N)</span>
</pre>
</div></div>

<p>In OR designer, I created the following: </p>
<ul class="alternate" type="square">
	<li>A command called MeterRead = Name:MeterRead, URL: the one above, HTTP Method: Post, Polling Interval:10s</li>
</ul>


<p>Then I created a "Level" Sensor (i think thats where I went wrong).</p>

<p>Peiter, could you tell me how you got the Temperature to be displayed on your UI ?</p>

<p>Thanks. </p>

<p>D1. </p>

<p>!!UPDATE: I got it working with a custom sensor <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 23, 2013 07:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414751"></a>
                                    <font class="smallfont"><p>Actually the temperature in my display is the Thermostat setpoint. <br/>
I did use a Range sensor for that, because I also used the sensor for the slider where I wanted to restrict the range to 4-28 C.<br/>
If display is your only concern type:custom is safe.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 23, 2013 08:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414752"></a>
                                    <font class="smallfont"><p>New problems <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>When I use the webview module and use the created sensor ( as described on <a href="http://www.openremote.org/pages/viewpage.action?pageId=19988490">http://www.openremote.org/pages/viewpage.action?pageId=19988490</a>) to get the graph URL, the URL I get is the loopback address which is 127.0.0.1 therefore it is not being displayed. </p>

<p>Then I copied that URL on to my web browser and put the correct IP, I get a nice BLANK graph <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/> ... </p>

<p>I read in the comments on the above mentioned guide about other people having this problem. But from what I read this problem should be fixed in the controller version I am using right now. (because I downloaded it about a week ago by clicking on Download Controller on the top right of Pro Designer)</p>

<p>Any comments? </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 23, 2013 08:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414753"></a>
                                    <font class="smallfont"><p>I made a comment there:<br/>
"You can either specify ip and port when defining the RrdGraph command or the configured webapp.ip and webapp.port from config.xml are used."<br/>
That should work. Did you specify ip and port in the RRDGraphCommand?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 23, 2013 08:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414754"></a>
                                    <font class="smallfont"><p>Marcus, </p>

<p>The only values I can enter in the RRDgraph command configs are these: </p>

<ul class="alternate" type="square">
	<li>Name</li>
	<li>Protocol : RRD4J Graph URL</li>
	<li>Graph name</li>
	<li>Width</li>
	<li>height</li>
	<li>Start time</li>
	<li>end time</li>
	<li>Command</li>
</ul>


<p>I re-read the guide but i doubt i missed any steps. ?</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 23, 2013 08:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414755"></a>
                                    <font class="smallfont"><p>Sorry, can't help you with this. I only played a bit with it a while ago.<br/>
PZ</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 23, 2013 08:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414756"></a>
                                    <font class="smallfont"><p>It's been a while for me also <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
Can you try and change the webapp.ip property in file config.properties.<br/>
The file is located in webapps/controller/WEB-INF/classes of the OpenRemote controller installation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 23, 2013 09:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414758"></a>
                                    <font class="smallfont"><p>In the next release (<em>1.00.002</em>) of <b>RaZ-OR</b> the name of function <em>GetBatteryLevel</em> will be changed into <b>BatteryLevel</b> because of naming consistency.<br/>
In the meantime you may replace the following code fragment at your convenience.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/*BatteryLevel
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/BatteryLevel(N)
</span>Do use Sensor type:Range with <span class="code-keyword">this</span> command <span class="code-keyword">for</span> use in slider
*/
BatteryLevel = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].Battery.data.last.value;
}</pre>
</div></div>

<p>That release is expected to also have a <b>MeterLevel</b> function</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 23, 2013 09:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414822"></a>
                                    <font class="smallfont"><p>I did as Marcus suggested and got the graph to load without a problem. </p>

<p>Now I am stuck with a blank graph. I posted in here about it (<a href="http://www.openremote.org/pages/viewpage.action?pageId=19988490&amp;focusedCommentId=22414820#comment-22414820">http://www.openremote.org/pages/viewpage.action?pageId=19988490&amp;focusedCommentId=22414820#comment-22414820</a>). Hopefully someone will be able to give me some input on it. </p>

<p>Boss took away half of my day, otherwise I'd have had the chance to investigate it further. </p>

<p>@peiter</p>

<p>nice to see the Raz-Or being updated, I am sorry but I didn't have a chance to look at the Smoke Alarm. Will let you know as soon as i do. </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 23, 2013 14:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414825"></a>
                                    <font class="smallfont"><p>The Alarms and Meters are complex because of the many options. I have to think if I should make one generic function with many parameters, or several functions with only a few parameters but a meaningfull name. I am inclined to do the latter. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 23, 2013 16:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414827"></a>
                                    <font class="smallfont"><p>Yes peiter, several functions with meaningful names would be less confusing as there aren't too many parameters.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 23, 2013 16:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414851"></a>
                                    <font class="smallfont"><p>I got this very interesting link to a <a href="http://translate.google.ru/translate?hl=en&amp;sl=ru&amp;tl=en&amp;u=http%3A%2F%2Fhabrahabr.ru%2Fpost%2F180749%2F">Howto in Russsian</a> by the Razberry team on installation and use of RaZ-OR. It is Google translated. Great contribution! I'll update the HowTo in the coming days. I also point you to the Temperature example, where they show how data conversion like rounding of numbers can be done within RaZ-OR! <br/>
<b>update 1</b>:On the same site is an earlier <a href="http://translate.google.ru/translate?hl=en&amp;sl=ru&amp;tl=en&amp;u=http%3A%2F%2Fhabrahabr.ru%2Fpost%2F180749%2F">tutorial on the Razberry itself</a>. Also in Russian originaly, and hopefully comprehensible via this Google translation in English<br/>
<b>update 2</b>: At the bottom of those pages is an ongoing lively discussion!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 24, 2013 07:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414864"></a>
                                    <font class="smallfont"><p>I learned from these Russian posts that the installation of the <b>RaZ-OR</b> module can be made simpler. No need to make changes to the <b>config.xml</b> anymore. So that can be left in its original state as:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;config&gt;</span>
    <span class="code-tag">&lt;device&gt;</span>/dev/ttyAMA0<span class="code-tag">&lt;/device&gt;</span>
    <span class="code-tag">&lt;config-dir&gt;</span><span class="code-tag">&lt;/config-dir&gt;</span>
    <span class="code-tag">&lt;translations-dir&gt;</span><span class="code-tag">&lt;/translations-dir&gt;</span>
    <span class="code-tag">&lt;zddx-dir&gt;</span><span class="code-tag">&lt;/zddx-dir&gt;</span>
    <span class="code-tag">&lt;port&gt;</span>8083<span class="code-tag">&lt;/port&gt;</span>
    <span class="code-tag">&lt;http-root-dir&gt;</span>./htdocs<span class="code-tag">&lt;/http-root-dir&gt;</span>
    <span class="code-tag">&lt;automation-file&gt;</span>automation/main.js<span class="code-tag">&lt;/automation-file&gt;</span>
    <span class="code-tag">&lt;shell-script-on-save-xml&gt;</span>sync<span class="code-tag">&lt;/shell-script-on-save-xml&gt;</span>
    <span class="code-tag">&lt;shell-script-on-save-http&gt;</span>sync<span class="code-tag">&lt;/shell-script-on-save-http&gt;</span>
<span class="code-tag">&lt;/config&gt;</span></pre>
</div></div> 

<p>Towards the end of file <b>/opt/z-way-server/automation/main.js</b> , you only have to add the line starting with <em>executeFile</em> as shown below</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-javascript">
executeFile(automationRoot + "/" + "openremote.js");
startAutomation();
</pre>
</div></div>
<p> And the RaZ-OR module should be saved as <em>openremote.js</em> in directory <b>/opt/z-way-server/automation/</b></p>

<p><b>WARNING</b> On my machine this did not yet work properly; it actually broke my installation, maybe because I did not stop the Z-Way server <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
On a next try it did work. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 24, 2013 13:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414892"></a>
                                    <font class="smallfont"><p>Nice, wish it was in English, particularly the comments thread.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 24, 2013 19:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414893"></a>
                                    <font class="smallfont"><p>Yes indeed. Some knowledge of the Russian language would certainly help understanding the English translation by Google ;(</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 24, 2013 19:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414894"></a>
                                    <font class="smallfont"><p>As promised here is the first try for a Electricity function:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-javascript">
/*MeterElectricityLevel
OpenRemote usage: http://raspberry_IP:8083/JS/Run/MeterElectricityLevel(N,I,S)
Use S=0 <span class="code-keyword">for</span> kWh; S=2 <span class="code-keyword">for</span> Watts;  
*/
MeterElectricityLevel = <span class="code-keyword">function</span>(N,I,S) {
  zway.devices[N].instances[I].Meter.Get();
  <span class="code-keyword">return</span> <span class="code-object">Math</span>.round((zway.devices[N].instances[I].Meter.data[S].val.value)*100)/100;
}</pre>
</div></div>

<p>This functions rounds the values at maximal two decimal positions.<br/>
As before if you want to play copy this toe your RaZ=OR module on Pi, and do a z-way restart as instructed.</p>

<p><b>Note</b>: this function may be different in future <b>RaZ-OR</b> updates</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 24, 2013 19:29
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22414974"></a>
                                    <font class="smallfont"><p>I have tested this function successfully with <a href="http://www.pepper1.net/zwavedb/device/418">Fibaro FGWPE Wall plug</a>. It is added to <b>RaZ-OR</b>. I do consider to apply different round functions for the <em>Watt</em> and <em>kWh</em> values. I also consider an optional fourth parameter to reset individual counters.<br/>
<b>Suggestions to make this into a more generic Electricity meter are most welcome</b>. I am happy to add along the same lines meters for <b>Gas</b>, and <b>Water</b>. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 26, 2013 09:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415026"></a>
                                    <font class="smallfont"><p>Dsen,<br/>
Could you give the new <a href="http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22414894#comment-22414894">MeterElectricityLevel</a> function a try on your <em>Aeotec Smart Energy Illuminator</em>. I would appreciate your feedback on that function.<br/>
Thanks, Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 26, 2013 14:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415039"></a>
                                    <font class="smallfont"><p>Hi peiter, </p>

<p>I will definitely give it a try and update here. (didn't go to office today)</p>

<p>I also found this <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Energy+Monitoring+with+EmonCMS?focusedCommentId=22414993&amp;#comment-22414993">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Energy+Monitoring+with+EmonCMS?focusedCommentId=22414993&amp;#comment-22414993</a></p>

<p>It gives better graphs. I'm not sure if one raspberry pi will be able to handle all that. Will let you all know how it goes. </p>

<p>I've been looking into writing the rules in OR, do you know of any place where I can get a full detail of the available syntax? </p>

<p>Regards,</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 26, 2013 15:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415041"></a>
                                    <font class="smallfont"><p>I've seen you wrestling with the graphs. Tried to apply your example on my Fibaro Plug, but did not get any further than http errors <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>. The EmonCMS is on my agenda for considerable time. <br/>
My next hardware priorities are the temperature sensors of a Fibaro Universal sensor, which I intend to use in the test of a new type of radiator valve. </p>

<p>PS: Any nice console screenshots yet?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 26, 2013 15:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415043"></a>
                                    <font class="smallfont"><p>The fibaro plug looks interesting, it looks like it uses a normal binary switch. I assume it works from z-way interface? </p>

<p>Which console are you using? The webconsole is a bit of a headache, I always use android platform to check stuff. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 26, 2013 16:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415050"></a>
                                    <font class="smallfont"><p>Yes, it is done with the <b>MeterElectricityLevel</b> function. You may notice that I did add the Meter.Get() function call. This call makes that the actual device value is update in the Zway data tree. That is necessary to constantly refresh the value. Actually I think I must add some logic to test if it is a valid value. But as the meter is read every 2 seconds it doesn't matter if it is this time frame behind.<br/>
I still have to review all my existing Level and Status functions to see where Get() calls should be added.<br/>
(My initial goal with RaZ-OR was a proof of concept. Now users are deploying those functions must be made more robust)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 26, 2013 16:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415106"></a>
                                    <font class="smallfont"><p>Peiter, </p>

<p>Sorry couldn't get back to you yesterday, had to relocate to a new place. Your electricity meter function is working smoothly, and rounding up the values to 2 decimal places!! </p>

<p>In the process of trying to graph values with EmonCMS, and also trying to get some events and scenarios happening. I will update whenever I can, but I will be slow in my responses. </p>

<p>Regards, </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 28, 2013 06:14
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22415107"></a>
                                    <font class="smallfont"><p>Good to hear it works on a device different from mine. My next plan is to implement something like <b>MeterElectricityReset</b> for counters that accumulate power usage like kWh. But there are some other priorities here too <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 28, 2013 07:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872107"></a>
                                    <font class="smallfont"><p>hi everyone, </p>

<p>I'm in a new pit fall...</p>

<p>I have an Everspring HSP02 Presence Detector which I am using to check for a presence of a person (any person). Its usually in sleep mode to save battery life. Therefore it turns on automatically after a certain interval and checks the presence (this is what I understand from the manual : <a href="https://docs.google.com/file/d/0B_9fluni1aqVNzg5OTYzZTEtNTBlNC00MWRlLWJhNTktYjRiNDk1Zjc4OTE3/edit?usp=drive_web">https://docs.google.com/file/d/0B_9fluni1aqVNzg5OTYzZTEtNTBlNC00MWRlLWJhNTktYjRiNDk1Zjc4OTE3/edit?usp=drive_web</a>).</p>

<p>What I want to achieve is, according to the manual, it says it supports Command class wake up, which I think means waking up the device to check for presence again, therefore I want to wake up the device for about 10s after I send the wake up command. Problem is I am not quite sure how to use that command class. </p>

<p>@peiter, have you ever worked with a presence detector? I would appreciate your advice on this. (btw I am able to get the status i.e. presence detected or not using the sensor_binary command class)</p>

<p>thanks and regards, </p>

<p>D1</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 30, 2013 19:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872116"></a>
                                    <font class="smallfont"><p>CommandClassWakeup is to configure devices which run on battery. You cannot acutually wakeup a device.<br/>
You can configure an interval which the devices wakes up itself to ask the controller for new information.<br/>
Also you need to configure the device which the battery device should use to send it's "I am awake" call to and which is used when a presence is detected. In that case the device wakes up by itself and sends  the "presence detected" frame to the configuered "receive my presence detection" device.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 30, 2013 20:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872119"></a>
                                    <font class="smallfont"><p>Sorry, I don't have any experience with that. It is one of the too many things on my list.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 30, 2013 20:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872120"></a>
                                    <font class="smallfont"><p><a class="confluence-thumbnail-link 356x546" href='http://www.openremote.org/download/attachments/21859290/NamingExample.png'><img src="attachments/thumbnails/21859290/23035906" align="right" border="0"/></a><br/>
The Razberry User interface allows to register device names and locations via the Expert Commands.<br/>
In the attached experimental console you can see the name and location of the thermostat, als well as the locations for the lights, as they were extracted from Razberry.</p>

<p>I made the following functions that you may include in the <b>RaZ-OR</b> module openremote.js.<br/>
Be warned again that they may appear in a slightly different form in a future RaZ-OR release.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
/*DeviceName
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DeviceName(N)
</span>Use Regular Expression [\w\s]{1,} in the Http call to get rid of quotes in returned value
*/
 DeviceName = function(N) {
   <span class="code-keyword">return</span> zway.devices[N].instances[0].NodeNaming.data.nodename.value;
 }

/*DeviceLocation
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DeviceLocation(N)
</span>Use Regular Expression [\w\s]{1,} in the Http call to get rid of quotes in returned value
*/
 DeviceLocation = function(N) {
   <span class="code-keyword">return</span> zway.devices[N].instances[0].NodeNaming.data.location.value;
 }
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 30, 2013 21:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872130"></a>
                                    <font class="smallfont"><p>Thanks for the inputs marcus and peiter...</p>

<p>I think I have configured the device in such a way that it wakes up every 10s. I wish they came with more precise documentation... </p>

<p>The rules are giving me a hard time. Im trying to use the presence detector to turn a light on or off. As in if there is nobody in the room (detected by the PIR) turn the light off. But so far the following rule does not work for me at all : </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">package</span> org.openremote.controller.model.event

global org.openremote.controller.statuscache.CommandFacade execute;
global org.openremote.controller.statuscache.SwitchFacade switches;
global org.openremote.controller.statuscache.LevelFacade levels;
global org.openremote.controller.statuscache.RangeFacade ranges;

<span class="code-keyword">import</span> org.openremote.controller.protocol.Event;
<span class="code-keyword">import</span> java.lang.<span class="code-object">Integer</span>;
<span class="code-keyword">import</span> org.openremote.controller.protocol.*;
<span class="code-keyword">import</span> java.io.*;
<span class="code-keyword">import</span> java.util.*;
<span class="code-keyword">import</span> java.lang.<span class="code-object">Float</span>;


rule <span class="code-quote">"Light1 On"</span> 

when

Event(source == <span class="code-quote">"Switch1status"</span>, value == <span class="code-quote">"on"</span>) 
Event(source == <span class="code-quote">"PIRStatusSensor"</span>, value == <span class="code-quote">"No"</span>)

then 

execute.command(<span class="code-quote">"Switch1off"</span>);

end

</pre>
</div></div>

<p>Edit1: PIRStatusSensor gives Yes if presence is detected, and No for presence is not detected. ( its just for testing <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>)</p>

<p>If you guys see anything wrong with it, please let me know. It compiles without a problem but it doesn't work. </p>

<p>Another thing, how often does the openremote controller execute the rules? or is it automatically done whenever a change is detected? </p>

<p>Thanks.</p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 07:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872132"></a>
                                    <font class="smallfont"><ul class="alternate" type="square">
	<li>Just a wild guess. If you are using RaZ-OR, the quotes around status values are stripped of with the regular expression on|off. Could it be that Drools does needs the quotes arond the value.</li>
	<li>The essence of a rule engine is, that as soon a status of a variable changes the rule is fired.</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 31, 2013 07:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872133"></a>
                                    <font class="smallfont"><p>If your PIRSensor is connected to a switch sensor the value should be "off".<br/>
Or is it a custom sensor that sends "No" and "Yes"?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 31, 2013 07:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872134"></a>
                                    <font class="smallfont"><p>Thanks for the quick response from both of you. </p>

<p>@peiter: </p>

<p>But the rule is getting the status from the sensor which is configured to give out Yes (or) No according to the status change. Or do you think that it might not work with custom sensors? </p>

<p>@marcus, </p>

<p>I am using a custom sensor, i.e. where I'm getting "Yes" and "No"</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 08:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872136"></a>
                                    <font class="smallfont"><p>Is the rules parsed correct or do you see any errors when you deploy your design?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 31, 2013 08:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872139"></a>
                                    <font class="smallfont"><p>No Errors <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>If it at least gave me an error, I can do something about it. Any ideas marcus? Do you think that my code logic is wrong or something? </p>

<p>Update: <br/>
This code works when presence is detected. But the other one still doesn't work. </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
rule <span class="code-quote">"Light1 On"</span> 

when

Event(source == <span class="code-quote">"PIRStatusSensor"</span>, value == <span class="code-quote">"Yes"</span>)

then 

execute.command(<span class="code-quote">"Switch1off"</span>);

end

</pre>
</div></div>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 08:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872145"></a>
                                    <font class="smallfont"><p>Could you create a label on your design and link to the PIRStatusSensor?<br/>
Then you would see that the sensor is already working and the label should show "Yes" and "No".</p>

<p>If that works you could create 2 rules one with Yes -&gt; ligh on <br/>
and one with No -&gt; light off</p>

<p>Just to test that the PIRStatusSensor is evaluated correct within the rules.</p>

<p>After that it's just a matter of combining to events which might be the problem in your initial rule.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 31, 2013 09:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872148"></a>
                                    <font class="smallfont"><p>Guysss! </p>

<p>Alright...</p>

<p>The code is working! </p>

<p>How?? </p>

<p>Initially I was testing using the physical switch of the light. Turn the light on and wait for the PIR status to go to "No". But now, when I turned ON the switch using the Android Console, the rule is executed without any probs, i.e. when the PIR status goes to "No" the bulb is automatically switched off. </p>

<p>I have set the poller of the Switch1Status sensor to 2s. How could I go about this so that turning on the switch physically would activate the rule? Should I execute the code every 5 minutes or so? (should I use timer? or cron?)</p>

<p>Regards,<br/>
D1.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 10:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872150"></a>
                                    <font class="smallfont"><p>Is the spelling of your switch status correct in the rule.<br/>
If I follow your other spelling habits shouldn't:<br/>
Switch1status be Switch1Status</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 31, 2013 10:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872152"></a>
                                    <font class="smallfont"><p>Doesn't it work with the 2s polling on Switch1Status and physically turning light on? For me it works on my switches. A manual switch on/off is reflected on the console within 2s. <br/>
What code do you actually want to run every 5 minutes? The rules?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 31, 2013 10:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872153"></a>
                                    <font class="smallfont"><p>Not all physical ZWave switches send a status update when you execute them.<br/>
If that is the case we cannot receive the signal unless we poll it.</p>

<p>But if the rule should only turn on/off the light based on the PIRSensor, the physical switch should not matter, no?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 31, 2013 10:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872154"></a>
                                    <font class="smallfont"><p>Yes peiter the spelling is correct. Thanks...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 11:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872157"></a>
                                    <font class="smallfont"><p>peiter, </p>

<p>EDIT:<br/>
when I have a label displaying the status of the Switch1status, it updates when I switch it on/off physically or using openremote apps. </p>

<p>BUT the problem is, my rules do not trigger when I switch it on using the physical switch. Using on/off from the openremote app, it works! </p>

<p>I was thinking that the physical switching on/off of the device might not be detected by the rule engine, so that's why I thought of checking the rule every 5mins using one of the methods i mentioned. Do you think it will solve my problem?</p>

<p>Regards, </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 11:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872158"></a>
                                    <font class="smallfont"><p>The label of your PIRStatusSensor should not be effected when you switch your manual switch. <br/>
That should only update if the presence state changes.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 31, 2013 11:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872163"></a>
                                    <font class="smallfont"><p>sorry marcus...i was talking about the sensor for switch 1. I edited it above. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 11:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872166"></a>
                                    <font class="smallfont"><blockquote><p>Not all physical ZWave switches send a status update when you execute them.<br/>
If that is the case we cannot receive the signal unless we poll it.</p></blockquote>
<p>Correct, but you have to realise what you poll. The present polling in RaZ-OR except for the MeterElectric only reads the Zway-tree. That may hold an old status value. Since all my switches worked with that strategy I did not yet bother to ask an update from the device itself with a Get() call, as I have done in function <a href="http://raspberry_IP:8083/JS/Run/MeterElectricityLevel(N,I,S">http://raspberry_IP:8083/JS/Run/MeterElectricityLevel(N,I,S</a>).<br/>
Nobody has complained sofar so I left it as is for the binary switches. It is on the todo list, but as long as ORCJAVA-337 hasn't been implemented there is not a real incentive to give it higher priority.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 31, 2013 12:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872180"></a>
                                    <font class="smallfont"><p>peiter, </p>

<p>if you are saying that it is not updating, how would you explain a label changing it's value when the PIRSensorStatus changes? </p>

<p>Marcus,</p>

<p>The rule doesn't turn the light on, it only switches it off if there is nobody in the room. So that's why I want the user to be able to switch on the light at his/her own time, but when they leave the place without turning it off, it should be turned off automatically. </p>

<p>ah...peiter! ...after some digging around in the z-way forum i found out that door locks can be unlocked using </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
http:<span class="code-comment">//ip:8083/ZWaveAPI/Run/devices[N].instances[0].commandClasses[62].Set(0/255)</span>
</pre>
</div></div>

<p>commandClass 62 is the door lock command class. </p>

<p>I saw that in the z-way forum. Havent tested it, if it works I will let you know so we'll have another new function in Raz-OR. Its sad these things aren't in the z-way api documentation. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at May 31, 2013 20:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872186"></a>
                                    <font class="smallfont"><blockquote><p>if you are saying that it is not updating, how would you explain a label changing it's value when the PIRSensorStatus changes</p></blockquote>
<p>I don't know for sure, but I think the device might send the status change to the controller, which in turn triggers the Razberry software to update the ZWay tree.</p>

<p>The manual that comes with Razberry still needs a lot of updating/correcting.<br/>
I do use notepad++ with JSON viewer a lot for getting insight in the Zway structures. An additional source of knowledge are the XML files in subdirectory &lt;i&gt;translations&lt;/i&gt;</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 31, 2013 23:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872305"></a>
                                    <font class="smallfont"><p>For use with the <a href="http://www.eurotronic.org/en/produkte/stella-f.html">Stella Z radiator thermostat</a>, I have made a <b>ThermostatModeName</b> function for the next release of RaZ-OR. The source is here for you to test and comment.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/*ThermostatModeName 
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/ThermostatModeName(N)
</span>Do use RexExp [\w\s]{1,} in the http-call
*/
ThermostatModeName = function(N) {
  <span class="code-keyword">var</span> modus = zway.devices[N].ThermostatMode.data.mode.value;
  <span class="code-keyword">return</span> zway.devices[N].instances[0].ThermostatMode.data[modus].modeName.value
}</pre>
</div></div>
<p>See <a href="http://www.openremote.org/download/attachments/21859290/NamingExample.png">this image</a> for the result shown below the slider</p>

<p>Functions for manipulations with mode will follow later (<a href="http://www.openremote.org/display/~pz1/Stella+Z+with+RaZ-OR">See my Application note for Stella Z</a>)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 05, 2013 10:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872315"></a>
                                    <font class="smallfont"><p>peiter, </p>

<p>here is a function for door lock, I have tested it with a Vision Electronic Deadbolt Lock (ZM1702). </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
 /*DoorLock
 Openremote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DoorLock(N)
</span> */
 
 DoorLock = function(N) {
	<span class="code-keyword">return</span> zway.devices[N].instances[0].DoorLock.Set(255);
	
/*DoorUnLock
 Openremote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DoorUnLock(N)
</span> */
 
 DoorUnLock = function(N) {
	<span class="code-keyword">return</span> zway.devices[N].instances[0].DoorLock.Set(0);
	}
	
</pre>
</div></div>

<p>My newest challenge is trying to get the Zwave-to-IR extender (Remotec zxt-120) working. I have managed to turn the aircondition on and off so far. But I can't change the temperatures (not even from the z-way interface)</p>

<p>I got some more devices such as an Aeon multisensor, Aeon flood detector, etc... They are working, I will update the list when I can. The deadline is near, so I'm trying to get things in order. </p>

<p>Oh, another thing, I am still having trouble with the rules. When i delete a rule from the editor, and click submit then save. It still keeps on running. I wrote several new rules, but the deleted one is still there. Any idea why?</p>

<p>Regards, </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at Jun 05, 2013 19:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872325"></a>
                                    <font class="smallfont"><blockquote><p>Oh, another thing, I am still having trouble with the rules. When i delete a rule from the editor, and click submit then save. It still keeps on running. I wrote several new rules, but the deleted one is still there. Any idea why?</p></blockquote>
<p>I have had some problems with batch shells that were called, and continued to run. Never found the real cause. I therefor powered down and restarted the Synology on which OR ran. That helped.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 05, 2013 22:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872335"></a>
                                    <font class="smallfont"><p>Nice start on locks. On the Razberry forum I noticed some discussions about security. Locks are outside my present scope, so I did not lock in detail. Did you look into any of that?</p>

<p>I'll add your code for the next update of the collection. There is a } missing at the end of your Doorlock function. I corrected that.</p>

<p>The lock is also added to the list of tested devices in the howto</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 06, 2013 07:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872342"></a>
                                    <font class="smallfont"><p>I have updated the RaZ-OR module that can be downloaded from page <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry" title="OpenRemote 2.0 How To - Z-Wave with Razberry">OpenRemote 2.0 How To &#45; Z&#45;Wave with Razberry</a><br/>
At the bottom of that page I have added a list of available functions.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 06, 2013 09:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872556"></a>
                                    <font class="smallfont"><blockquote><p>Aeon Home Energy Meter (&lt;&lt; this might be the hardest, but I read about the RRD4J and using the Command Class Meter on the Zway API)</p></blockquote>
<p>Have you ever been successful with this Energy Meter?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 11, 2013 12:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22872558"></a>
                                    <font class="smallfont"><p>It works like a charm <img class="emoticon" src="images/icons/emoticons/biggrin.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>.... </p>

<p>I used the same functions you used for the MeterElectricityLevel. I managed to get the EmonCMS as well, therefore the presentation is much better. If you're experiencing any probs, let me know. </p>

<p>Regards, </p>

<p>D1. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at Jun 11, 2013 13:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873277"></a>
                                    <font class="smallfont"><p>Hi All, </p>

<p>Sorry it took me a bit of time to get back to the forum. I completed the project last weekend. It functioned well except for a few minor problems : </p>

<p>-At times some commands took a long time to execute, not sure if its the load on raspberry pi, or because we used multiple tablets for demonstration. <br/>
-After a while the rules stopped working, even though I restarted the controller it did not fix the problem(drools engine loaded successfully at startup)<br/>
-Vision Door Lock is a pain, I had to replace the 4 batteries everyday, and it took about 20-30s to unlock/lock after the command is given.<br/>
-Remotec zxt-120 IR extender took a while to respond to commands as well.</p>

<p>Those are the few probs that I ran into, otherwise it was good. Overall I had about 20 Z-wave devices in the razberry, I also managed to connect the Raspbmc and had the TV function with remotec zxt-120 (even though it is only for ACs, you can teach it some IR commands).I will put up the list of devices I used, and also as promised earlier some screenshots of my interface. </p>

<p>I would like to thank Peiter and Marcus for helping me out throughout the last few weeks, and also everyone else that gave me any type of input. </p>


<p>Regards.</p>

<p>D1.<br/>
Below is a screenshot of my ipad homescreen, basically when you click on an appliance, it is supposed to turn on / off. <br/>
<img src="attachments/21859290/23035947.png" align="absmiddle" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at Jun 23, 2013 10:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873347"></a>
                                    <font class="smallfont"><p>Thanks for updating us. Glad to hear your demo went ok, and nice looking UI.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Jun 26, 2013 00:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873485"></a>
                                    <font class="smallfont"><p>A user reported a bug in RaZ-OR function <b>SwitchBinaryOff</b>. I have corrected the error, which was a left-over from experimentation to return a valid switch status after switching off. Apologies for the inconvenience<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 30, 2013 11:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873491"></a>
                                    <font class="smallfont"><p><b>Testing your own extensions</b><br/>
Since some weeks I am using a separate Java script file for my own extensions to the RaZ-OR module. For obvious reasons (lazyness) I chose my_openremote.js as a name. You can upload it to the same location as the standard openremote.js<br/>
Adapt the last lines of main.js on the Raspberry as follows:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"tags.js"</span>);
executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"openremote.js"</span>);
executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"my_openremote.js"</span>);
startAutomation();</pre>
</div></div>
<p>Restart Z-way on the Raspberry.<br/>
Check with the <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry" title="OpenRemote 2.0 How To - Z-Wave with Razberry">Howto page</a> for the exact locations</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 30, 2013 15:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873767"></a>
                                    <font class="smallfont"><p>Thanks for the great job - projects like this is exactly why I bought a Razberry <img class="emoticon" src="images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>I decided to give Z-Way/OpenRemote a go and everything worked well with my BinarySwitch - On, Off, and Status.</p>

<p>I also have a multilevel switch/dimmer, and using the provided JS interface I was having a nightmare controlling the switch and slider. So I climbed into the code. I apologise if I've done things incorrectly - I haven't spent all that much time learning the intricacies of Z-Wave, but I do have a workable solution now.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
/*DimmerSet(N,${param})
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerSet(N,${param})
</span>*/
DimmerSet = function(N,SetLevel) {
   zway.devices[N].instances[0].SwitchMultilevel.SetWithDuration(SetLevel,0)
}

/*DimmerLevel(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerLevel(N)
</span>*/
DimmerLevel = function(N) {
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SwitchMultilevel.data.level.value
}

/*DimmerStatus(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerStatus(N)
</span>*/
DimmerStatus = function(N) {
 <span class="code-keyword">var</span> status = (zway.devices[N].instances[0].SwitchMultilevel.data.level.value&gt;0) ? <span class="code-quote">"on"</span> : <span class="code-quote">"off"</span>;
  <span class="code-keyword">return</span> status;
}
</pre>
</div></div>

<p><em>DimmerSet</em> seemed to be performing random functions when using the underlying <em>SwitchMultilevel.Set</em> so I switched to using <em>SwitchMultilevel.SetWithDuration</em>. I was also wanted to be able to see if the SwitchMultilevel was on or off, so I added <em>DimmerStatus</em></p>

<p>This seemed to work nicely for me - I can now control the Dimmer with an On/Off switch, as well as with a slider.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by velouria at Jul 09, 2013 10:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22873769"></a>
                                    <font class="smallfont"><p>Thanks for your valuable feedback. As I do not have any dimmers, I was/am unable to test. I hope other users are willing to try if they can duplicate and comment on your solution, so we can improve the JS on the HowTo page</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 09, 2013 10:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874016"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
Can you share a list of commands containing all controls developed until today or add links from the subject on OpenRemote to each command? I am very interested by it.<br/>
Thank you all for sharing your knowledge</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Jul 19, 2013 22:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874023"></a>
                                    <font class="smallfont"><p>A list of commands available in the RaZ-OR module (openremote.js) is published at the bottom of the HowTo page. Some variants are published in this thread.</p>

<blockquote><p>or add links from the subject on OpenRemote to each command</p></blockquote>
<p>I don't understand what you mean with this question.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 20, 2013 07:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874041"></a>
                                    <font class="smallfont"><p>I'm able to get return from value of On or Off using the DimmerStatus function to display with <a href="http://raspberry_IP:8083/JS/Run/DimmerStatus(N">http://raspberry_IP:8083/JS/Run/DimmerStatus(N</a>) command on the browser.  But it's not working with Switch function on OR.  Please see my screenshot and hope someone can help me.  Thanks in advance!</p>


<p><a class="confluence-thumbnail-link 377x451" href='http://www.openremote.org/download/attachments/21859290/DimmerStatus.jpg'><img src="attachments/thumbnails/21859290/23035981" align="absmiddle" border="0"/></a><a class="confluence-thumbnail-link 370x279" href='http://www.openremote.org/download/attachments/21859290/DimmerSensor.jpg'><img src="attachments/thumbnails/21859290/23035982" align="absmiddle" border="0"/></a><a class="confluence-thumbnail-link 383x201" href='http://www.openremote.org/download/attachments/21859290/DimmerSwitch.jpg'><img src="attachments/thumbnails/21859290/23035983" align="absmiddle" border="0"/></a><a class="confluence-thumbnail-link 877x476" href='http://www.openremote.org/download/attachments/21859290/photo2.jpg'><img src="attachments/thumbnails/21859290/23035984" align="absmiddle" border="0"/></a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aibojian at Jul 21, 2013 05:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874044"></a>
                                    <font class="smallfont"><p>I solved it!</p>

<p><a class="confluence-thumbnail-link 354x427" href='http://www.openremote.org/download/attachments/21859290/answer.jpg'><img src="attachments/thumbnails/21859290/23035985" align="absmiddle" border="0"/></a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aibojian at Jul 21, 2013 07:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874047"></a>
                                    <font class="smallfont"><p>The DimmerLevel function contains two errors. Where it says DimmerStatus, it should be DimmerLevel. I' will update that in Version 1.00.005/2013-07-21</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 21, 2013 12:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874048"></a>
                                    <font class="smallfont"><p>The DimmerStatus command should work with sensor type:binary if you use *Regular Expression*<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">on|off</pre>
</div></div><br/>
See for example the comments in function SwitchBinaryStatus</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 21, 2013 12:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874052"></a>
                                    <font class="smallfont"><p>I have corrected/updated the Dimmer functions in the RaZ-OR module (openremote.js)</p>

<p>Version 1.00.005      2013-07-21</p>
<ul class="alternate" type="square">
	<li>Fixed error in DimmerLevel</li>
	<li>Now use .SetWithDuration (0) instead of .Set in DimmerSet function</li>
	<li>Added function DimmerStatus</li>
</ul>


<p>Thanks to Velouria</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 21, 2013 13:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874067"></a>
                                    <font class="smallfont"><p>Hi Dirk,</p>

<p>I have implemented RazBerry with OR and experiencing the same issue with JSON API calls returned value incorrect value, it's due to the end device reporting a value before it is still executing the command to dim up/down.  Have you resolved this issue.  I'm looking at the code to see if we can delay calls when posting commands through JSON API, so it returns the correct value.  Any help would be much appreciated.  Thanks! <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aibojian at Jul 22, 2013 20:23
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874146"></a>
                                    <font class="smallfont"><p>Originally I did intend to combine the <b>status</b> read with the <b>set</b> commands in RaZ-OR. That however would only be interesting if issue ORC-JAVA 337 (see howto page) is solved. As it seems highly unlikely that issue will be solved (<a href="http://www.openremote.org/pages/viewpage.action?pageId=22413335">see this discussion</a>), so I stopped the further development of the RaZ-OR. I do include improvements of others published in this thread however.  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jul 25, 2013 18:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874270"></a>
                                    <font class="smallfont"><p>Zwave&gt;me is about to release v1.4 of the Razberry software. At the moment RC1 is available for testers to download. I myself will not be able to do extensive testing until the final release is available a couple of weeks from now.<br/>
As I do not have a great variety of devices, I would appreciate if other users could report back here their experiences with the RaZ-OR module and the new "firmware".<br/>
Thanks,<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 01, 2013 12:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874291"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
can be used with the following rules Razberry</p>

<p><a href="http://www.openremote.org/display/docs/Designer+2.0+-+Scheduled+Rule+Examples#Designer2.0-ScheduledRuleExamples-GradualLightBrightnessIncreaseatWakeUp">http://www.openremote.org/display/docs/Designer+2.0+-+Scheduled+Rule+Examples#Designer2.0-ScheduledRuleExamples-GradualLightBrightnessIncreaseatWakeUp</a></p>

<p>RULES :<br/>
package org.openremote.controller.protocol</p>

<p>global org.openremote.controller.statuscache.CommandFacade execute;<br/>
global org.openremote.controller.statuscache.SwitchFacade switches;</p>

<p>rule "Sunrise"</p>

<p>  timer (cron: 0 00-30 7 ? * 2-6)</p>

<p>when eval(true) then</p>

<p>  execute.command("bedroom_dim(UP)", 1);</p>

<p>end</p>



<p>how to make a dimmer with a "SwitchMultilevel" =&gt; Dim UP or Dim Down with z-wave ?</p>

<p>Thanks, <br/>
Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Aug 01, 2013 23:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874295"></a>
                                    <font class="smallfont"><p>With Z-Wave you probably can do it simpler. I can think of the following solution:</p>
<ul class="alternate" type="square">
	<li>Make a variant of the RaZ-OR <b>DimmerSet</b> command which adds duration as a parameter
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">DimmerSetPitt13 = function(N,SetLevel,Duration) {
  zway.devices[N].instances[0].SwitchMultilevel.SetWithDuration(SetLevel,Duration)</pre>
</div></div></li>
	<li>With Designer make an http call named <em>bedroomDimUp</em> which has the following url
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerSet(N,99,158)</span></pre>
</div></div> Replace as usual N with your actual device number. This should increase the lightlevel over a period of 30 minutes to maximum(99)</li>
	<li>Change the rule so it triggers only once at 07:00h the command
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">execute.command(<span class="code-quote">"bedroomDimUp"</span>)</pre>
</div></div></li>
</ul>


<p><b>Note</b>: See the <a href="http://razberry.z-wave.me/docs/zway.pdf">Zway manual</a> section 15.11 on page 47 <em>Command SwitchMultilevel SetWithDuration</em> for interpretation of the duration parameter<br/>
<b>Disclaimer</b>: I haven tested this. The rule command may be syntactically wrong<br/>
<b>Caution</b>: You are advised to make this RaZ-OR extension in a separate file as <a href="http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22873491#comment-22873491">described here</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 02, 2013 08:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874306"></a>
                                    <font class="smallfont"><p>Hello,<br/>
Thank you for your reply, I will test it.</p>

<p>Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Aug 02, 2013 13:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874449"></a>
                                    <font class="smallfont"><p>Anyone know the  command to call luminescene?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by aibojian at Aug 06, 2013 06:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874450"></a>
                                    <font class="smallfont"><p><a href="Razberry and Aeon Labs Multisensor 4in1.html" title="Razberry and Aeon Labs Multisensor 4in1">Razberry and Aeon Labs Multisensor 4in1</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 06, 2013 07:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874513"></a>
                                    <font class="smallfont"><p>I am about to release a new version of RaZ-OR:<br/>
Version 1.00.007      2013-08-07</p>
<ul class="alternate" type="square">
	<li>Added a number of SensorMultilevel variants (Humidity, Luminescence)</li>
</ul>


<p>Please note that I have also added a section on safely modifying RaZ-OR functions on page <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry" title="OpenRemote 2.0 How To - Z-Wave with Razberry">OpenRemote 2.0 How To &#45; Z&#45;Wave with Razberry</a></p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/* Next section contains a number of SensorMultilevel variants.
Note: On the Raspberry in the Z-way subdirectory translations/Scales.xml you
can find the standard names and their translations. I think they <span class="code-keyword">do</span> follow the
index numbers <span class="code-keyword">for</span> the apropriate <span class="code-quote">"data"</span> element. Use that <span class="code-keyword">for</span> other specific 
sensors.
*/

/*TemperatureLevel(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/TemperatureLevel(N)
</span>*/
TemperatureLevel = function(N) {
  zway.devices[N].instances[0].SensorMultilevel.Get();
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SensorMultilevel.data[1].val.value;
}

/*HumidityLevel(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/HumidityLevel(N)
</span>*/
HumidityLevel = function(N) {
  zway.devices[N].instances[0].SensorMultilevel.Get();
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SensorMultilevel.data[5].val.value;
}

/*LuminescenceLevel(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/LuminescenceLevel(N)
</span>*/
LuminescenceLevel = function(N) {
  zway.devices[N].instances[0].SensorMultilevel.Get();
  <span class="code-keyword">return</span> zway.devices[N].instances[0].SensorMultilevel.data[3].val.value;
}
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 07, 2013 12:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22874569"></a>
                                    <font class="smallfont"><p>If you want Razberry to report temperatures either in Celsius, or in Fahrenheit, you can configure Z-Way globally to C or F in file <b>/opt/z-way-server/config/Defaults.xml</b> in the following element:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">	<span class="code-tag">&lt;CommandClass id=<span class="code-quote">"0x31"</span>&gt;</span>
 		<span class="code-tag">&lt;Fahrenheit&gt;</span>1<span class="code-tag">&lt;/Fahrenheit&gt;</span>
	<span class="code-tag">&lt;/CommandClass&gt;</span>
</pre>
</div></div>
<p>0 = Celsius<br/>
1 = Fahrenheit</p>

<p>This setting also makes the <em>scaleString</em> change from C to F </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 09, 2013 09:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875010"></a>
                                    <font class="smallfont"><p>I am presently working on a RaZ-OR function that can control the Raspberry Pi GPIO interface. Next to the RaZberry Z-Wave module there are still 7 pins exposed that can be used for other purposes. The function that I am developing aims to control Sunshades using a "hacked" Somfy/Telis remote control device.</p>

<p>With my development I am stuck at the point where my Javascript code is calling a bash script. The script itself functions fine from the Raspberry command line.</p>

<p>I am preparing a detailed <a href="http://www.openremote.org/display/~pz1/How+To+Control+Somfy-Telis+Sunshades+with+Raspberry+Pi">HowTo in my private space</a>. You must be signed into the forum to read it I think. As said in that document, it <b>does not function yet</b>.</p>

<p>I hope there are some more knowledgeable persons who can comment.</p>

<p>Thanks,<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 16, 2013 16:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875034"></a>
                                    <font class="smallfont"><p>There seems to be a compatibility issue between the Razberry RC 1.4 and the RaZ-OR module.<br/>
(See <a href="http://en.z-wave.me/comment/2214#comment-2214">http://en.z-wave.me/comment/2214#comment-2214</a>)<br/>
As I was out of town I could not report it earlier. Sorry for that.<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 18, 2013 14:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875045"></a>
                                    <font class="smallfont"><p>I have solved the remaining problem with this sunshades control. There were some changes in the bash script needed. You'll find it in the updates manual page. I hope to move those contents to a publicly accessible place soon.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 18, 2013 21:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875046"></a>
                                    <font class="smallfont"><p>From response on the Zwave&gt;Me forum I understand that in contrast to what is said in our RaZ-OR setup, for Z-Way version 1.4 and onwards the two lines:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"openremote.js"</span>);
executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"my_openremote.js"</span>);
</pre>
</div></div>
<p>Should be entered at the very <b>top</b> of the main.js file.</p>

<p><em>May I ask RaZ-OR users that do experiment with RC 1.4 to report if this works correct?</em></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 18, 2013 21:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875064"></a>
                                    <font class="smallfont"><p>Nejc and me just found out that this instruction doesn't seem to work both on v1.3 and RC 1.4</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 19, 2013 10:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875074"></a>
                                    <font class="smallfont"><p>Found the solution for version 1.3. the two lines should not go at the very top of main.js, but just between the <em>declarations</em> and the first <em>function</em></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">var</span> automationRoot = <span class="code-quote">"automation/"</span>;
<span class="code-keyword">var</span> configFile = automationRoot + <span class="code-quote">"config.js"</span>;
<span class="code-keyword">var</span> moduleFolder = automationRoot + <span class="code-quote">"modules/"</span>;

executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"openremote.js"</span>);
executeFile(automationRoot + <span class="code-quote">"/"</span> + <span class="code-quote">"my_openremote.js"</span>);

function startAutomation() {
</pre>
</div></div>

<p>As soon as I have confirmation that it works in 1.4, I will update the How To instruction.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 19, 2013 12:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875104"></a>
                                    <font class="smallfont"><p>The completed documentation is now public at <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Control+Sunshades+-+Somfy+with+Raspberry+Pi" title="OpenRemote 2.0 How To - Control Sunshades - Somfy with Raspberry Pi">OpenRemote 2.0 How To &#45; Control Sunshades &#45; Somfy with Raspberry Pi</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 19, 2013 16:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875108"></a>
                                    <font class="smallfont"><p>From direct discussions with the RaZberry developers I understood it wil be different again in the final version 1.4<br/>
As soon as I get the word from them I will publish it in this thread.</p>

<p><b>edit 20130911:</b> version 1.4 is now expected this week.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 19, 2013 17:56
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875109"></a>
                                    <font class="smallfont"><p>Bugs fixed<br/>
The completed documentation is now public at <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Control+Sunshades+-+Somfy+with+Raspberry+Pi" title="OpenRemote 2.0 How To - Control Sunshades - Somfy with Raspberry Pi">OpenRemote 2.0 How To &#45; Control Sunshades &#45; Somfy with Raspberry Pi</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 19, 2013 18:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22875166"></a>
                                    <font class="smallfont"><p>I just noticed that I had uploaded an old schematics for the Raspberry Pi GPIO interface.<br/>
The correct diagram is now on the HowTo page</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Aug 20, 2013 15:15
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876157"></a>
                                    <font class="smallfont"><p>With 133 replies over a period of some 4 months, I find the comment about "apparent lack of interest" pretty strange.</p>

<p>What license are this code under? If you haven't chosen yet, please go for BSD or public domain. That way, anyone could do anything with it - and the life of the little library could probably be the richest!</p>

<p>Could you put it on github? So that it would be easier to pitch in, fork and thrive further? That would have been great.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 08, 2013 22:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876164"></a>
                                    <font class="smallfont"><blockquote><p>With 133 replies over a period of some 4 months, I find the comment about "apparent lack of interest" pretty strange.</p></blockquote>
<p>At the end of your partial quote, I did mention at the time:<br/>
<b>Many thanks to those that did actively contribute to this work in the early phase.</b><br/>
That really was only a handful of good people. Maybe many more use it, but they don't bother to report back here.</p>

<p>My main drive for RaZ-OR is to make life of "unskilled" Razberry users (like myself) easier. So they don't have to deal with all the deep technicalities to get a nice system with a nice looking interface. That's why I bothered to write the basic installation instruction augmented with another three application documents (one waiting for acceptation by OR). And that's also why I actively responded (the vast majority of those 133) on posts in this thread. My target audience doesn't know what github is, and I don't want to send them into the diaspora of github and the likes. </p>

<p>The present RaZ-OR module can be taken, extended and changed by any user as the manual describes. I do expect the "takers" to have the courtesy and kindness to feedback experiences to this community in the interest of newbie users.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 09, 2013 09:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876547"></a>
                                    <font class="smallfont"><p>What is the license? Can I take it, and put it on github, and license it as either public domain, or BSD-style?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 19, 2013 08:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876548"></a>
                                    <font class="smallfont"><p>I thought my answer was clear, but if you do need a direct answer, then: As far as I am concerned, the answer is no.<br/>
The page where it is published is copyrighted OpenRemote Inc., which may or may not overrule my opinion.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 19, 2013 08:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876549"></a>
                                    <font class="smallfont"><p>This is truly absurd: You want this code of yours to be used, but do NOT want it to be maintained by a person willing to actually take it and enhance it, on an open source actual code repository, open for all, enhanceable for all?</p>

<p>That is OK: I will then create a similar library and leave this bullshit attitude behind. It is truly sad that you want all the work performed here - by you and other users - to have to be performed once again. But that is apparently your choice - so be it.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 19, 2013 08:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876551"></a>
                                    <font class="smallfont"><p>You are jumping to conclusions. This is an open community, so if anybody really wants to enhance this, just say so here, and publish and discuss here and update the resource on this site. The only thing that you need is to have write access to this specific page. If you have something to add just contact Juha Lindfors for editing rights and share.</p>

<p>The reason that I am insisting to keep things here is because there were many good people on the forums in this community who kindly helped me getting on track. This is a small community. Therefor I don't think it is a good idea to dilute the knowledge to other places.    </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 19, 2013 09:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876552"></a>
                                    <font class="smallfont"><p>That's not how open source works.</p>

<p>Forks shall always be welcome. IN PARTICULAR when the initial developer don't wanna go on anymore!</p>

<p>And code needs to be in a proper repository. And git is the shit right now, and github is where most open source action is.</p>

<p>You have just proved that your approach right here DOES NOT WORK (re: the reason for starting this thread here), so why do you want to stand in the way of testing another approach?! This completely baffles and eludes me.</p>

<p>I would of course both credit you as the initiator, and the community, and link back here. That goes w/o saying - but maybe it does needs saying?!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 19, 2013 09:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876555"></a>
                                    <font class="smallfont"><p>Endre, please calm down. Open Source and its never-ending complexities on licenses are new to many people, particularly to those who do not arrive from the programmer/developer background. So drop the attitude and have some patience.</p>

<p>I'll discuss with Pieter in private on options with regards to licensing.</p>

<p>Best regards,</p>

<p>&#8211; Juha</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Sep 19, 2013 10:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876838"></a>
                                    <font class="smallfont"><p>I just read on the RaZberry forum that version 1.4 has been released. Zwave&gt;Me did promise to send us an early instruction on how to incorporate RaZ-OR in the final 1.4 release. Up til now I have not received such notification.<br/>
As soon as I have I will come back here and report.<br/>
<b>note</b> The present RaZ-OR instuctions are NOT compatible with v1.4*<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 24, 2013 09:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876884"></a>
                                    <font class="smallfont"><p>(moved to top level post, <a href="http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22876940#comment-22876940">here</a>).</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 24, 2013 23:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876891"></a>
                                    <font class="smallfont"><p>I am now working in direct contact with Sergeui on this issue. I am waiting on his confirmation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 24, 2013 23:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876907"></a>
                                    <font class="smallfont"><p><b>Update to RaZberry v1.4</b><br/>
My Razberry remained dead after the upgrade, so I can not yet test the new setup for the <b>RaZ-OR</b> module. While I am waiting for an SD cardreader to arrive I can describe the changes in the setup.</p>

<p><b>Install RaZ-OR</b></p>
<ul class="alternate" type="square">
	<li>As before you can store <b>openremote.js</b> in the <em>automation</em> folder where it always was. There is no longer a need to add instructions in main.js!</li>
	<li>In file \opt\z-way-server\automation\modules\CustomUserCode\module.json change in the 5th line <b>[ ]</b> into <b>[openremote.js]</b><br/>
That's all.  (I think if you have your own functions in private file you can use: [openremote.js, my_openremote.js])</li>
</ul>


<p><b>Change to openremote.js</b><br/>
As the <em>SwitchMultilevel command SetWithDuration</em> has been abandoned in the Z-Way API, I assume the <b>DimmerSet</b> command has to be changed back into:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">DimmerSet = function(N,SetLevel) {
  zway.devices[N].instances[0].SwitchMultilevel.Set(SetLevel)
}</pre>
</div></div>

<p><em>NOTE: Due to the breakdown of my Pi, I have not been able to test this, so I would appreciate if someone who has been succesful with the upgrade can check the above instructions.</em> </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 25, 2013 13:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876930"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
no it does not work on my system, I think it does not launch the "openremote.js" when z-way starts. <br/>
On my smartphone app is ok but not return data (temperature). </p>

<p>Even in the URL =&gt; IP_RPi/JS/Run/Switch10 (4.0)</p>

<p>Result<br/>
"Error 500: Internal Server Error<br/>
Uncaught ReferenceError: Switch10 is not defined "</p>

<p>as I have defined it in "openremote.js"</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 25, 2013 17:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876933"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
it's good for me, I added the "main.js"</p>

<p>"ExecuteFile (config.basePath +" / openremote.js ");"</p>

<p>resulting in the "main.js"</p>

<p>/ / &#8212; Load Automation subsystem classes<br/>
ExecuteFile (config.classesPath + "/ AutomationController.js");<br/>
ExecuteFile (config.classesPath + "/ AutomationModule.js");<br/>
ExecuteFile (config.classesPath + "/ VirtualDevice.js");</p>

<p>ExecuteFile (config.basePath + "/ openremote.js");</p>

<p>As stated on Nejc Z-WAVE.ME/Razberry forum
<a href="http://en.z-wave.me/content/new-version-razberry-released?page=1">http://en.z-wave.me/content/new-version-razberry-released?page=1</a></p>

<p>Have fun all <br/>
;D<br/>
Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 25, 2013 18:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876940"></a>
                                    <font class="smallfont"><p>Here's my solution for Z-Way Server 1.4:</p>

<p>I put the <b>openremote.js</b> file into <b>/opt/z-way-server/automation/</b>, renaming it to <b>OpenRemote-EndreXY.js</b> (just so that I know what I myself have added in there).</p>

<p>In the <b>custom.js</b> file that was introduced with v1.4, residing in same dir, I add two lines, and the entire file now reads as follows:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
console.log(<span class="code-quote">"Custom code executed !!!"</span>);

<span class="code-comment">// EndreXY 2013-09-24: Loading the <span class="code-quote">"simplified Ajax <span class="code-keyword">interface</span>"</span> <span class="code-keyword">for</span> OpenRemote.
</span>executeFile(config.basePath+<span class="code-quote">"/OpenRemote-EndreXY.js"</span>);
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 25, 2013 20:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22876957"></a>
                                    <font class="smallfont"><p>My machine is still down, so I can't test. From my latest discussion with PoltoS I understood their intended method to do this is to change the following the following section in <b>/opt/z-way-server/automation/config.json</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">            <span class="code-quote">"CustomUserCode"</span>: {
            	<span class="code-quote">"module"</span>: <span class="code-quote">"CustomUserCode"</span>,
            	<span class="code-quote">"config"</span>: {
            	    <span class="code-quote">"customCodeFiles"</span>: [ <span class="code-quote">"custom.js"</span> ]
            	}
            },
</pre>
</div></div>
<p>by adding <b>"openremote.js"</b> to the customCodeFiles. I guess separated with a comma (Do add <em>my_openremote.js</em> if you actualy have that file)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">[ <span class="code-quote">"custom.js"</span>, <span class="code-quote">"openremote.js"</span>, <span class="code-quote">"my_openremote.js"</span> ]</pre>
</div></div>
<p>With this method you should not add the two lines that ENDRE added to custom.js. I guess you can even leave custom.js out alltogether</p>

<p>Could anyone give this a try?<br/>
Thanks, Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 26, 2013 06:42
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877013"></a>
                                    <font class="smallfont"><p>Hello all<br/>
it worked for 1 hour and then crash OpenRemote  <img class="emoticon" src="images/icons/emoticons/sad.gif" height="20" width="20" align="absmiddle" alt="" border="0"/><br/>
finally does not work</p>

<p>Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 26, 2013 17:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877014"></a>
                                    <font class="smallfont"><p>Hello,<br/>
@ ENDRE<br/>
for me it does not work =&gt; application crash</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 26, 2013 18:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877015"></a>
                                    <font class="smallfont"><p>Hello,<br/>
@ PE ZANSTRA<br/>
for me it does not work =&gt; no communication to openremote.js<br/>
but app is ok</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 26, 2013 18:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877018"></a>
                                    <font class="smallfont"><p>I got my rig working again with a complete fresh install using the Raspberry PI NOOBS package to install Rasbian.<br/>
I did use this configuration with <b>CustomCodeFiles</b>. As all my devices were messed up, so far I only got the binary switches functioning.<br/>
<b>edit:</b> All devices are now under control of either <em>openremote.js</em> or <em>my_openremote.js</em>. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 26, 2013 18:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877019"></a>
                                    <font class="smallfont"><p>What do you mean by "app is ok"? </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 26, 2013 18:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877022"></a>
                                    <font class="smallfont"><p>the application runs, it starts correctly but no value is viewable and no command can be launched. As if we had lost the file openremote.js</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Sep 26, 2013 19:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877027"></a>
                                    <font class="smallfont"><p>I have just updated the document <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-Wave+with+Razberry" title="OpenRemote 2.0 How To - Z-Wave with Razberry">OpenRemote 2.0 How To &#45; Z&#45;Wave with Razberry</a> for usage with RaZberry release <b>v1.4</b><br/>
I have also uploaded file openremote.js </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Version 1.00.008      2013-09-25
Adaptations <span class="code-keyword">for</span> RazBerry v1.4 release
- .SetWithDuration has been abandoned so DimmerSet has been changed again.
</pre>
</div></div>
<p>The intention is to move openremote.js to the OR Github one of these days.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Sep 26, 2013 20:09
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877028"></a>
                                    <font class="smallfont"><p>Check the logs.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Sep 26, 2013 20:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877274"></a>
                                    <font class="smallfont"><p>This is now available in <a href="https://github.com/openremote/Integration/tree/master/Razberry">https://github.com/openremote/Integration/tree/master/Razberry</a></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at Oct 01, 2013 21:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877318"></a>
                                    <font class="smallfont"><p>Juha,<br/>
Thanks for taking care of this. I have updated the "HowTo" to reflect these changes.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 02, 2013 09:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877427"></a>
                                    <font class="smallfont"><p>With <b>GNU Affero License</b>?! For a 20-line, absurdly simple js-file? Wow.</p>

<p>That is just simply not good enough, folks. I'll rather then make my own, putting it in Public Domain.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Oct 03, 2013 22:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22877858"></a>
                                    <font class="smallfont"><p>In my private space I have described (<a href="http://www.openremote.org/x/fRJdAQ">http://www.openremote.org/x/fRJdAQ</a>) a cheap integration solution for the <b>AXA remote 2.0</b> window opener.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 09, 2013 14:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878263"></a>
                                    <font class="smallfont"><p>In my private space I have described (<a href="http://www.openremote.org/x/mxJdAQ">http://www.openremote.org/x/mxJdAQ</a>) the integration of the Hydreon RG-11 rainsensor using the Fibaro Universal Sensor FGBS-001. For the rainsensor I only used one binary sensor of the Fibaro. The other binary sensor I intend to use for a switch that determines whether my sunshades are in their docking position. <br/>
The Fibaro device also sports four temperature sensors, which I intend to monitor the outside temperature, as well as some unoccupied spaces.<br/>
As part of this application I had to extend the RaZ-OR functions <b>BinarySensor(N)</b> and <b>TemperatureLevel(N)</b> with the <em>instance</em>-parameter <b>I</b>. I made separate functions in my_openremote.js for it now, but maybe it should be done in a next release of RaZ-OR</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 15, 2013 20:38
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878460"></a>
                                    <font class="smallfont"><p>I made one small correction in each of the functions</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 19, 2013 12:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878677"></a>
                                    <font class="smallfont"><p>Pieter, it seems that this section is not present in the 1.4.20 version of the software in config.json file.<br/>
Can you confirm that ?</p>

<p>And if that's correct, is there anything to do besides placing OpenRemote.js in the automation folder ?</p>

<p>Thanks,<br/>
Eric</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 22, 2013 20:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878679"></a>
                                    <font class="smallfont"><p>Eric,<br/>
I am not aware of a version 1.4.20. According to the Zwave&gt;Me forum, users are desperately waiting for release 1.4.1. Questions on the Razberry forum haven't been answered for a long time. I am also waitng response to some questions I posed directly and via the forum. I know the experts are traveling last week and this week.</p>

<p>The only news of a couple of days ago is that the latest batch of Razberry devices seem to have a serious bug. <a href="http://en.z-wave.me/comment/2506#comment-2506">Users who are having problems should contact their distributor for a possible replacement</a>.</p>

<p>For the json.config: This was introduced with software release 1.4. I adapted the HowTo for that level. (In <a href="http://www.openremote.org/display/forums/Z-Wave+control+with+Razberry?focusedCommentId=22414864#comment-22414864">this post</a> I describe how we did it in version 1.3.</p>

<p>Where/How did you find 1.4.20?<br/>
Pieter</p>

<p>edit 20131023: Added link for failed RaZberry hardware</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 22, 2013 21:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878681"></a>
                                    <font class="smallfont"><p>I see they have recently published this version 1.4.20 without announcing it. The source does have a config.json in the automation folder, but the content is completely different from the previous folder.</p>

<p>I am not amused to put it mildly. They make it very difficult for me to support their product. I 'll ask for an explanation.</p>

<p>Pieter </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 22, 2013 21:57
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878685"></a>
                                    <font class="smallfont"><p>Eric,<br/>
Just got an answer from Sergeui:</p>
<blockquote><p>That was an error on our side - our "last version" script accepted daily snapshot as release version. We have fixed this. There was no release so far - I'll inform you about the next release, but nothing will change in terms of OpenRemote in future releases.</p>

<p>The v1.4-20-gxxxxxxx was a daily snapshot made for one of our customer to test new Command Classes. Unfortunatelly I have not notiecd that it bacame the "last release version". <b>Now it is fixed. Please suggest everyone using this version to run the install script again to get the 1.4</b></p></blockquote>

<p>(Bold formatting by me)<br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 22, 2013 22:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878706"></a>
                                    <font class="smallfont"><p>Pieter,</p>

<p>Thanks a lot for investigating this and finding the issue.<br/>
I don't have a Razberry myself and was trying to support a customer, so having you checked on that was of great help.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 23, 2013 08:54
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878772"></a>
                                    <font class="smallfont"><p>There is a <a href="http://en.z-wave.me/content/new-version-razberry-released">Release Candidate for version 1.4.1</a>. My experience is that it may take an other 3-4 weeks before a final version will be available. Unless the release candidate fulfills some pressing needs, I suggest regular users to wait a while. I planned to start testing some time next week.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 24, 2013 07:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878779"></a>
                                    <font class="smallfont"><p>Hey,<br/>
I tried to get through your tutorial of openremote with Razberry. But I can't solve my problems at the beginning. <br/>
I can add devices, change status, see status of my z-wave modules with the Demo-UI. But when I test Razberry HTTP interface using Z-Way calls via a Web browser it fails. <br/>
I enter: </p>

<p>"http://IP-ADDRESS:8083/ZWaveAPI/Run/devices2.instances0.commandClasses0x20.Set(255)"</p>

<p>the message: <br/>
Error 500: Internal Server Error<br/>
Uncaught TypeError: Cannot call method 'Set' of undefined</p>

<p>Can you help me? Im very new to this issue. </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by zone. at Oct 24, 2013 11:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878787"></a>
                                    <font class="smallfont"><p>I did change the link in the "how to" page to be <a href="https://raw.github.com/openremote/Integration/master/Razberry/openremote.js">https://raw.github.com/openremote/Integration/master/Razberry/openremote.js</a><br/>
Otherwise if you do a wget, you get the HTML page, not the file itself. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 24, 2013 14:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878794"></a>
                                    <font class="smallfont"><p>Providing support for a user with an LG Switch, it seems that the SwitchBinaryOff() function does not work and that the SwitchBinaryOn() function does a toggle.</p>

<p>Have you already seen anything like that ?<br/>
Any pointers on what to look for / how to diagnose ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at Oct 24, 2013 15:41
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878796"></a>
                                    <font class="smallfont"><p>Thanks, github is outside my league.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 24, 2013 16:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878797"></a>
                                    <font class="smallfont"><p>There is an issue with Binary switches in 1.4. But the commands like that from Franz does not exist for me. What has changed since Razberry 1.3.1 is that if I manually toggle a binary switch, RaZberry, and hence the OR display does not update.<br/>
From the release note of 1.4.1RC1 I gather that they have done something about that.<br/>
But as I said, I do not have time to look into this until next week.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 24, 2013 16:55
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22878798"></a>
                                    <font class="smallfont"><p>The command:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"> http:<span class="code-comment">//raspberry_IP:8083/ZWaveAPI/Run/devices[2].instances[0].commandClasses[0x20].Set(255)</span></pre>
</div></div>
<p> works for me with Zwave&gt;Me wall switches, several Fibaro's, and Duwi plugin.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Oct 24, 2013 16:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879225"></a>
                                    <font class="smallfont"><p>I have done some initial testing with <b>1.4.1-RC1</b>. Unfortunately the config.json in the automation subdirectory is still mixed up and unusable. I did get my system working by copying this file from the previous version, which is in the backup directory under <b>/opt</b></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 02, 2013 10:10
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879320"></a>
                                    <font class="smallfont"><p>Hello</p>

<p> I made the update 1.4.1 because the binary sensor did not work with 1.4 but config.json cannot receive openremote it is possible to you to explain to me how to return to the version 1.3.1 because it is compatible with openremote and the binary sensor </p>

<p>Thank you</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Nov 03, 2013 17:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879324"></a>
                                    <font class="smallfont"><p>You can download 1.3.1 here: <a href="http://razberry.z-wave.me/z-way-server-RaspberryPiXTools-v1.3.1.tgz">http://razberry.z-wave.me/z-way-server-RaspberryPiXTools-v1.3.1.tgz</a> </p>

<p>For release candidate 1.4.1-rc1, you could also try to replace the present content of <em>config.json</em> with the following:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{
    <span class="code-quote">"basePath"</span>: <span class="code-quote">"./"</span>,
    <span class="code-quote">"controller"</span>: {
        <span class="code-quote">"tickInterval"</span>: 1000,
        <span class="code-quote">"modulesPath"</span>: <span class="code-quote">"./modules"</span>,
        <span class="code-quote">"modules"</span>: [
            <span class="code-quote">"EventLog"</span>,
            <span class="code-quote">"Cron"</span>,
            <span class="code-quote">"ZWaveGate"</span>,
            <span class="code-quote">"CustomUserCode"</span>,
            <span class="code-quote">"AutoOff"</span>,
            <span class="code-quote">"BatteryPolling"</span>,
            <span class="code-quote">"BasicReactions"</span>
        ],
        <span class="code-quote">"instances"</span>: {
            <span class="code-quote">"EventLog"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"EventLog"</span>,
                <span class="code-quote">"config"</span>: {}
            },
            <span class="code-quote">"Cron"</span> : {
                <span class="code-quote">"module"</span>: <span class="code-quote">"Cron"</span>,
                <span class="code-quote">"config"</span>: {}
            },
            <span class="code-quote">"ZWave"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"ZWaveGate"</span>,
                <span class="code-quote">"config"</span>: {
                    <span class="code-quote">"basicsEnabled"</span>: <span class="code-keyword">true</span>
                }
            },
            <span class="code-quote">"CustomUserCode"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"CustomUserCode"</span>,
                <span class="code-quote">"config"</span>: {
                    <span class="code-quote">"customCodeFiles"</span>: [ <span class="code-quote">"custom.js"</span>, <span class="code-quote">"openremote.js"</span>]
                }
            },
            <span class="code-quote">"AutoOffTest1"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"AutoOff"</span>,
                <span class="code-quote">"config"</span>: {
                    <span class="code-quote">"device"</span>: <span class="code-quote">"ZWayAutoDevice_3-0"</span>,
                    <span class="code-quote">"timeout"</span>: 3
                }
            },
            <span class="code-quote">"BatteryPolling"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"BatteryPolling"</span>,
                <span class="code-quote">"config"</span>: {}
            },
            <span class="code-quote">"BasicReactor"</span>: {
                <span class="code-quote">"module"</span>: <span class="code-quote">"BasicReactions"</span>,
                <span class="code-quote">"config"</span>: {
                    <span class="code-quote">"map"</span>: []
                }
            }
        }
    }
}
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 03, 2013 19:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879326"></a>
                                    <font class="smallfont"><p>I have just tried by modifying the file json.config of V1.4.1 switches work but not the binary sensors</p>

<p>I tried with the version 1.3.1 switches and binary sensors work</p>

<p> Thank you Pieter Zanstra</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Nov 03, 2013 20:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879338"></a>
                                    <font class="smallfont"><p>I have two binary sensors in Fibaro Universal Sensor working with v1.4.1.<br/>
I had to make a change to the BinarySensor to make that happen. See <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Sense+rain+-+Hydreon+RG-11+Rain+Sensor+using+Fibaro+Universal+Sensor" title="OpenRemote 2.0 How To - Sense rain - Hydreon RG-11 Rain Sensor using Fibaro Universal Sensor">this page</a></p>

<p><em>edit 20131229:</em> Updated link</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 04, 2013 07:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879879"></a>
                                    <font class="smallfont"><p>You state "json.config". Do you mean the file "config.json"? Easy mistake to make so I just want to ask to be sure.</p>

<p>Even replacing config.json with the file you pasted above doesn't seem to work. I just get: </p>

<p>Error 500: Internal Server Error<br/>
Uncaught ReferenceError: DimmerStatus is not defined</p>


<p>The direct calls to z-way do work. For example the following call worked:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
http:<span class="code-comment">//myip:8083/ZWaveAPI/Run/devices[2].instances[0].commandClasses[0x26].data.level.value</span>
</pre>
</div></div>

<p>It is just the Raz-OR ones which seem to be failing. I'm not sure how to troubleshoot it at this point.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by melchoir55 at Nov 16, 2013 01:39
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879882"></a>
                                    <font class="smallfont"><blockquote><p>You state "json.config". Do you mean the file "config.json"? Easy mistake to make so I just want to ask to be sure.</p></blockquote>
<p>Thanks for pointing me to this error: Corrected</p>

<p>I do not have any dimmers, but on my StellaZ radiator thermostats, which support the Command Class <b>SwitchMultilevel</b> the call in Firefox: </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//raspberry:8083/JS/Run/DimmerStatus[22]</span></pre>
</div></div>
<p>does return as expected </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-quote">"on"</span></pre>
</div></div>

<p>For your convenience, the DimmerStatus function as it is in my OpenRemote.js</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">/*DimmerStatus(N)
OpenRemote usage: http:<span class="code-comment">//raspberry_IP:8083/JS/Run/DimmerStatus(N)
</span>Add Regular Expression on|off in http call specification 
Do use Sensor type:<span class="code-keyword">switch</span> with <span class="code-keyword">this</span> command
*/
DimmerStatus = function(N) {
 <span class="code-keyword">var</span> status = (zway.devices[N].instances[0].SwitchMultilevel.data.level.value&gt;0) ? <span class="code-quote">"on"</span> : <span class="code-quote">"off"</span>;
  <span class="code-keyword">return</span> status;
}</pre>
</div></div>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 16, 2013 08:27
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879889"></a>
                                    <font class="smallfont"><p>For the 1.4.1 I ended up putting the include in the main.js. Towards the end of this file, it now reads (look for the comment "ADDED THIS LINE HERE" in the code below):</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
    ...
    ...
    <span class="code-comment">//--- Load constants &amp; 3d-party dependencies
</span>
    executeFile(<span class="code-quote">"constants.js"</span>);
    executeFile(config.libPath + <span class="code-quote">"/eventemitter2.js"</span>);

    <span class="code-comment">//--- Load Automation subsystem classes
</span>
    executeFile(config.classesPath+<span class="code-quote">"/AutomationController.js"</span>);
    executeFile(config.classesPath+<span class="code-quote">"/AutomationModule.js"</span>);
    executeFile(config.classesPath+<span class="code-quote">"/VirtualDevice.js"</span>);

    executeFile(<span class="code-quote">"OpenRemote-EndreXY.js"</span>);   <span class="code-comment">// ADDED THIS LINE HERE!!!
</span>
    <span class="code-comment">//--- Instantiate Automation Controller
</span>    ...
    ...
</pre>
</div></div>

<p>I am now very close to giving up on RaZberry. Primarily because the RaZberry project is just too crap. Each REVISION of their code breaks pretty much everything. And that is pretty bad because their own interface is utterly useless, admitted by themselves - so the only real use of that add-on-board IS the public API, both the web and JS code. And when that changes for each version, what is the point? The 1.4.1 is released calling itself 1.4.1rc1 inside the code. The whole thing is so amateurish that it really cannot be used.</p>

<p>I am probably going over to "Mi Casa Verde", now "Vera Control Ltd"'s controlles/gateways - the VeraLite seems promising, and a buddy of mine have it and have linked "everything" to it and is very happy. Open API, have its own "Open Remote"-style solution with apps that works.. RaZberry/Raspberry would be fun if it wasn't so exceedingly crappy coded and maintained.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Nov 16, 2013 10:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879891"></a>
                                    <font class="smallfont"><p>On the Razberry forum they very clearly state:</p>
<blockquote><p>New RaZberry is out!</p>

<p>23.10.2013 v1.4.1-rc1 (Release candidate - do not update if unsure!)</p></blockquote>

<p>So it is not only mentioned in the code as you seem to suggest. But I am afraid I have to agree with your other observations.</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 16, 2013 11:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879892"></a>
                                    <font class="smallfont"><p>If you right now - this day - do a standard install (using the non-version-specific install script), you get v1.4.1. Which apparently just is the RC1 "rebranded" without even rebranding it...</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Nov 16, 2013 11:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879903"></a>
                                    <font class="smallfont"><p>This recommendation worked. Thank you Endre, and Pieter.</p>

<p>I am disheartened that their release candidate is both the installed version when someone calls for a stable release, and that a problem as significant as this config file having completely incorrect contents is going unadresed between releases.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by melchoir55 at Nov 16, 2013 18:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879914"></a>
                                    <font class="smallfont"><p>Isaac,<br/>
Well the fact is that version 1.4.1 has never (or not yet) been formally released. I think they tried to be kind to their users by giving them a simpler link to the rc1, and did not include that fact in the name of the link. <br/>
Pieter</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 17, 2013 07:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879923"></a>
                                    <font class="smallfont"><p>You feel confident here, I see?</p>

<p><a href="http://razberry.z-wave.me/install/v1.4.1">http://razberry.z-wave.me/install/v1.4.1</a><br/>
Contains the line "wget -q <a href="http://razberry.z-wave.me/z-way-server-RaspberryPiXTools-v1.4.1.tgz">http://razberry.z-wave.me/z-way-server-RaspberryPiXTools-v1.4.1.tgz</a>"</p>

<p><a href="http://razberry.z-wave.me/install">http://razberry.z-wave.me/install</a>  (you do know what that is?) IS THE EXACT SAME FILE, and hence also points to the 1.4.1.tgz</p>

<p>.. and I cannot seem to find the "rc1"-links anymore.</p>

<p>So - not released? Okay, then.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Nov 17, 2013 08:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879927"></a>
                                    <font class="smallfont"><p>Please send your flames to the RaZberry people directly. I am not related to them in any way, nor is the OpenRemote organisation.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 17, 2013 09:47
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879928"></a>
                                    <font class="smallfont"><p>"I am not related to them in any way, nor is the OpenRemote organisation." - so why do you say that "... the fact is ...", when the facts seems to point to something different?</p>

<p>I started this particular thread by trying to help out for people that doesn't get 1.4.1 to work, and you apparently feel that you have to grind some "fact" in my face. However, the facts on the website in question IMHO points to me being correct.</p>

<p>Stop trying to make yourself so important, and everyone would be better off.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by stolsvik at Nov 17, 2013 10:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879930"></a>
                                    <font class="smallfont"><p>Pieter is just trying to help. We're all on the same team, and the forum is a professional one. Our goal is to create under a common cause. Flaming isn't conducive to that. I understand you are upset the potential in Raz isn't being maximized, but that still isn't a reason to lash out.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by melchoir55 at Nov 17, 2013 18:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879995"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
I too am disappointed in the time of razberry and Z-way, but not forget a key point is that the price of razberry and especially being in local mode not in the cloud ... This is a very important point in relation to other products.<br/>
In addition, if the 1.4.1 version is not ready yet, version 1.4 runs pretty well, and there is still version 1.3.<br/>
The only regrettable thing is that they let in too much time between each update, then they are part of the aliance Z-wave. they even out n book on Z-Wave but they are not able to be fast enough. An example of speed and efficiency is the box eedomus: each month there is an update with the latest unit z-wave (Fibaro FGRGB-101 BeNext, etc ...)</p>

<p>Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Nov 19, 2013 19:59
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22879997"></a>
                                    <font class="smallfont"><p>I'll grant you the local mode thing could be key in some applications(ultra privacy-concerned clients, high security, etc). The price seems like a trivial savings to me, though. Verde, for example, is under $200. A pi with Raz is going to cost over $100. I'm not sure the $ savings are worth the headache. I haven't tried the verde yet, though.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by melchoir55 at Nov 19, 2013 20:20
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880435"></a>
                                    <font class="smallfont"><p>It appears that RaZberry has silently changed the the name of the 1.4.1-rc1 package into 1.4.1</p>

<p>They confirmed that nothing has changed otherwise. I can confirm that copying the config.json as described before does work for me in 1.4.1. At the moment we are discussing more robust interactions with the RaZberry folks.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 28, 2013 13:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880574"></a>
                                    <font class="smallfont"><p>Hi DSEN <br/>
  I am trying to get Zwave-to-IR extender(remotec ZXT-120) working in OR, My setup is like vera3,fibaro/TKB switches/dimmer, Foscam IP camera, SQ blaster Plus,4-1 sensors by TKB etc. <br/>
   I currently trying to get remotec ZXT-120 and SQ blaster Plus for AV  working, I belive you manage to got remotec working  in OR appreciate if you could share any info. <br/>
   I manage to get slider for temperature control which auto discovered by vera discovery, If I move slider AC gets ON But can't put if OFF, I did try to create command ON and OFF but no JOY yet    </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nvatkar at Dec 02, 2013 14:22
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880577"></a>
                                    <font class="smallfont"><p>Hi nvatkar,</p>

<p>I'm sorry but I am not familiar with vera3. Are you integrating openremote with it? My setup was using openremote + razberry (z wave controller for raspberry pi) + Raz OR mentioned here. I could not use openremote's zwave library, instead, with the help of RazOR I had HTTP Posts for all the functions I implemented. </p>

<p>As for the ZXT-120, I did not have an AC system that was compatible with it. So I put it on 'Learning Mode' and inserted the commands. This way I was even able to insert commands of the TV/DVD remotes as well. You can refer to the manual to see how to do this. If you can't find it let me know, I will look for the document and send it to you.</p>

<p>I'm not sure if this is helpful so do let me know if you have any specific doubts,</p>

<p>D1.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by d1_sen at Dec 02, 2013 16:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880638"></a>
                                    <font class="smallfont"><p>thanks Dsen <br/>
  it was really swift replay appreciate it. I do have manual and aware of learning process. <br/>
  Currenlty my chanllenge is how to make it OFF/ON, as there are no command for ON and OFF working even after I created commands manually   </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nvatkar at Dec 03, 2013 14:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880639"></a>
                                    <font class="smallfont"><p>thanks Dsen <br/>
  it was really swift replay appreciate it. I do have manual and aware of learning process. <br/>
  Currenlty my chanllenge is how to make it OFF/ON, as there are no command for ON and OFF working even after I created commands manually   </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by nvatkar at Dec 03, 2013 14:11
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880640"></a>
                                    <font class="smallfont"><p>I think you better start a new thread with for example the title:<br/>
<b>Problem controlling ZXT-120 with Vera</b></p>

<p>That better raises the attention of people using Vera</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 03, 2013 14:28
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880732"></a>
                                    <font class="smallfont"><p>Hello everyone,<br/>
can you give me the way to follow for installation with the update to v1.3.1 Razberry please ?<br/>
at what location do I put the file openremote.js and which file should I modify (main.js? config)?</p>

<p>Pitt13</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pitt13 at Dec 05, 2013 21:50
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22880754"></a>
                                    <font class="smallfont"><p>The latest RaZ-OR documentation applying to RaZberry <b>1.3.1</b> is <a href="http://www.openremote.org/pages/viewpage.action?pageId=22877025">here</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 06, 2013 09:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882167"></a>
                                    <font class="smallfont"><p>Just to encourage anyone else out there trying (1) Razberry and (ii) Danfoss living connect, I've recently gone down this route, and have been able to get it all working with 1.4.1, largely by following the various articles and posts on here.</p>

<p>Many many thanks to Pieter and anyone else who has put this together for the work above and for openremote.js </p>

<p>I'll try and find time to write it up but the key points I can remember at the moment</p>
<hr />
<p>Java<br/>
====<br/>
The docs are all clear on this - but it's just buried in three different documents, some parts of which are irrelevant, so it took me a while to work out what to do.</p>

<p>I downloaded from <a href="https://jdk8.java.net/download.html">https://jdk8.java.net/download.html</a> and<br/>
To install it I followed the instructions at <a href="https://wiki.openjdk.java.net/display/OpenJFX/OpenJFX+on+the+Raspberry+Pi">https://wiki.openjdk.java.net/display/OpenJFX/OpenJFX+on+the+Raspberry+Pi</a>, but only the section on Running a JDK Early Access build on the Raspberry Pi is relevant. i.e just </p>

<p>sudo tar zxvf jdk-8-ea-b97-linux-arm-vfp-hflt-03_jul_2013.tar.gz -C /opt </p>

<p>and checking the version number.</p>

<hr />
<p>Z-way<br/>
=====<br/>
As described in the z-way docs PLUS correcting the config.json as described above. No need to muck about as described above to get a particular version. For my hardware the Razberry instructions were fine - PROVIDING I used the correct config.json.</p>

<p>-------------<br/>
OpenRemote.js<br/>
=============<br/>
I have an assortment of binary switch sockets which worked using the openremote.js calls. The Danfoss stuff did not work with the existing Thermostat calls so I had to clone and amend these. Principally removing a reference to modus. I will post this at some point when I've tidied it up. Anyone got a view on how to name the calls ?</p>

<p>Pardon the formatting. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pizzameister at Jan 05, 2014 10:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22882168"></a>
                                    <font class="smallfont"><p>Thank you for reporting back to us. I am curious about how long your batteries will last/how fast they drain.<br/>
What is the exact type number of your Danfoss LC?<br/>
I think there is no need to remove the Thermostat Mode related functions if you don't use them. I did develop and use the <em>ThermostatSet</em> and <em>ThermostatLevel</em> functions with the DLC. So I am curious to know what errors they gave. I am also interested in the modified code.<br/>
If you are willing to publish that here please enclose it as:<br/>
{code}<br/>
&lt;your stuff&gt;<br/>
{code}<br/>
<a href="http://www.openremote.org/display/website/Wiki+Markup+Quick+Start">(see markup instructions)</a></p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 05, 2014 10:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22883475"></a>
                                    <font class="smallfont"><p>I have been informed that the next RaZberry release 1.5 will be released with a modified RaZ-OR module included in the distribution. As they had to made some changes in the function names, be prepared that you may have to make adaptations in your OpenRemote model. That is about all I know at the moment.</p>

<p>They expect to release 1.5 by the end of this month. The fixes include the serious bugs that occured with the new Rasbian and V8 releases. I do hope the new release will be more robust, and that user support will improve drastically.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jan 27, 2014 08:58
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884813"></a>
                                    <font class="smallfont"><p>I noticed that Razberry 1.5.0 has been released silently today. I did not find any traces of an included RaZ-OR module. There are quite a few changes again(see <a href="http://razberry.z-wave.me/index.php?id=24">http://razberry.z-wave.me/index.php?id=24</a>). There also is a resurrected phpBB forum at <a href="http://forum.z-wave.me">http://forum.z-wave.me</a>. (You can use your existing username, but have to ask for a new password on the forum)</p>

<p>At the moment I think that Z-Wave users who need more functionality than the native OpenRemote implementation offers, should consider Micasaverde Vera instead</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 26, 2014 10:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884827"></a>
                                    <font class="smallfont"><p>Apparantly a kind of module RaZ-OR is coming with Release Candidate 3. I was told there will be differences with the original, which require changes in command specifications at the OR side. (Depending of what you have substantial editing in commands)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Feb 26, 2014 14:31
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884992"></a>
                                    <font class="smallfont"><p>It is available now for testing. See more on the <a href="http://forum.z-wave.me/viewtopic.php?f=3422&amp;t=20271">Razberry forum</a>.</p>
<ul class="alternate" type="square">
	<li>Sergeui Poltorak from zwave&gt;me has rewritten RaZ-OR to better fit their design philosophy. In doing so he has choosen to rename the commands, and make them more like the internal Zwave commands. My philosophy for RaZ-OR was to chose names closer to the users. So <em>Dimmer</em> instead of <em>SwitchMultilevel</em>. I was aware at the time, that my approach would result in a much longer list of devices. Here is the comparison I made between the two versions: <a href="attachments/21859290/23036488.pdf">CommandTranslation.pdf</a>.</li>
	<li>For new users with little Linux skills the new module is definitely the preferred mode, though it does come at the cost of slightly more difficult to understand commands. They only need to install the RaZberry software on their Pi</li>
	<li>It is obvious that using the new version does mean quite an editing job for existing installations.</li>
	<li>I did install it on a new SD card in order not to spoil my existing production set. I got stuck at the RaZberry interface, where I probably had to re-include all the devices. I stopped there, because I feared that would also spoil things for the production version.</li>
	<li>I do expect (but have not tested) that is still possible to use your existing java script files in version 1.5 by calling them from main.js as describerd elsewhere in thsi thread.</li>
</ul>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 03, 2014 07:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22884993"></a>
                                    <font class="smallfont"><blockquote><p>Just to encourage anyone else out there trying (1) Razberry and (ii) Danfoss living connect</p></blockquote>

<p>Danfoss seems to have released a new version 014G0013 of the Z-Wave compatible Living Connect. I noticed it in one of the online shops here. Zwave.me confirmed to me they have tested it back in October 2013 as working without issues on the RaZberry software.  In this device they apparantly have solved the "panic" problem that caused the notorious high battery drainage. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 03, 2014 10:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885430"></a>
                                    <font class="smallfont"><p>Hi all,<br/>
this is my first discussion so I would like to introduce myself.<br/>
First of all sorry if my English is very poor but ....</p>

<p>I'm using Raspberry to monitor the energy produced by my photovoltaic system and the energy consumed.<br/>
Based on the difference Produced-Consumed I'm driving a relay to turn on/ turn off a boiler.</p>

<p>I have now discovered a new word with Z-Wave and I have understood that I coud use my Raspberry PI as a 'Home Center' with the Razberry.</p>

<p>I have bought it and I hope to receive it in a couple of days.</p>

<p>Need you help how to mow now, possibly spet by step.<br/>
Should I use Soft-float or Hard-float OS in my Rasp+RaZ?<br/>
Should I now load OpenRemote? what is Raz-OR module?</p>

<p>Thanks for your help</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by solarflor at Mar 22, 2014 20:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885438"></a>
                                    <font class="smallfont"><p>I've answered these questions on the Razberry forum, where they were posted first.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 23, 2014 10:18
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885439"></a>
                                    <font class="smallfont"><p>Yes, I have seen now.<br/>
I will study your answer.<br/>
Thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by solarflor at Mar 23, 2014 10:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885440"></a>
                                    <font class="smallfont"><p>Haven't had the time to further test release 1.5 <br/>
I'll wait for the next release candidate, which is due anytime soon.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 23, 2014 10:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885441"></a>
                                    <font class="smallfont"><p>Pieter,<br/>
I'm currently using the Rasp to monitor the energy consumed and produced.</p>

<p><a href="http://http://solarflor.dyndns.org/123solar/SolarFlor.html">http://http://solarflor.dyndns.org/123solar/SolarFlor.html</a></p>

<p>Do you believe I could use the information I have to drive the sensor in Z-Wave? I mean writing some scripts in OpenRemote that allow me to interfaces with the energy monitoring system (e.g. URLs)<br/>
Thanks<br/>
Floriano </p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by solarflor at Mar 23, 2014 10:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885448"></a>
                                    <font class="smallfont"><p>Unfortunately I can't see at that page how you collect your data.  I have described how I collect my solar data, and how I use it with OpenRemote rules: <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Monitor+Solar+Power+-+FuturePower4All+PVlogger" title="OpenRemote 2.0 How To - Monitor Solar Power - FuturePower4All PVlogger">OpenRemote 2.0 How To &#45; Monitor Solar Power &#45; FuturePower4All PVlogger</a><br/>
Working with rules in OpenRemote is not trivial. There is not much maintenance on OpenRemote anymore. It uses an outdated version of Drools, which conflicts with Java 7.</p>

<p>In Zway 1.5.0 there seems to come/be a function to parse XML data. They also will release an equivalent of the rule engine. I haven't looked into that yet, so I don't know how user friendly it is. I quess we will know within a month from now if it is a viable alternative. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 23, 2014 14:53
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885450"></a>
                                    <font class="smallfont"><p>see the instructions below.<br/>
What I woul dlike to do is to control the status of a Z_Wave relay according to the value of $kw_disponib (difference between production and consumption)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
# Current Production Power from PV [kW] from 123SolarLog ---------------------------
$URL_123solar = <span class="code-quote">"http:<span class="code-comment">//IP/123solar/programs/programmultilive.php"</span>;
</span>$json_123solar = file_get_contents($URL_123solar);
    
$data_123solar = json_decode($json_123solar, <span class="code-keyword">true</span>);
<span class="code-keyword">if</span> (isset($data_123solar[0][<span class="code-quote">"GPTOT"</span>]))
{
	$kw_prod = $data_123solar[0][<span class="code-quote">"GPTOT"</span>];
} <span class="code-keyword">else</span> {
	$kw_prod = <span class="code-quote">"0"</span>;
}
# ----------------------

# Total Production [kWh] from 123SolarLog ---------------------------
$URL_TOT_DAY = <span class="code-quote">"http:<span class="code-comment">//IP/123solar/programs/programmultiday.php"</span>;
</span>$json_tot_day = file_get_contents($URL_TOT_DAY);
$data_tot_day = json_decode($json_tot_day, <span class="code-keyword">true</span>);
$kwh_tot_day = $data_tot_day[<span class="code-quote">"title"</span>];
# ----------------------


# Current Consumption Power [kW] from MeasureIt ---------------------------
$URL_measureit = <span class="code-quote">"http:<span class="code-comment">//IP/php/measureit_functions.php?<span class="code-keyword">do</span>=summary_start"</span>;
</span>$json_measureit = file_get_contents($URL_measureit);
$data_measureit = json_decode($json_measureit, <span class="code-keyword">true</span>);
$kw_consumo = $data_measureit[0][<span class="code-quote">"watt"</span>];
# ----------------------

# Total Production [kWh] from MeasureIt ---------------------------
$URL_measureit = <span class="code-quote">"http:<span class="code-comment">//IP/php/measureit_functions.php?<span class="code-keyword">do</span>=summary_start"</span>;
</span>$json_measureit = file_get_contents($URL_measureit);
$data_measureit = json_decode($json_measureit, <span class="code-keyword">true</span>);
$kw_consumo_day = $data_measureit[0][<span class="code-quote">"daily"</span>];

# ----------------------

# Difference Prod - Cons -----------------------------------
$kw_disponib = $kw_prod - $kw_consumo;

$data = array (
    <span class="code-quote">"PROD"</span> =&gt; (<span class="code-object">int</span>) $kw_prod,
    <span class="code-quote">"TOT_PROD"</span> =&gt; $kwh_tot_day,
    <span class="code-quote">"CONS"</span> =&gt; (<span class="code-object">int</span>) $kw_consumo,
<span class="code-comment">//    <span class="code-quote">"TOT_CONS"</span> =&gt; (<span class="code-object">int</span>) $kw_consumo_day,    
</span>    <span class="code-quote">"TOT_CONS"</span> =&gt; $kw_consumo_day,
    <span class="code-quote">"NET"</span> =&gt; (<span class="code-object">int</span>) $kw_disponib
);

header(<span class="code-quote">"Content-type: application/json"</span>);
echo json_encode($data)
?&gt;
</pre>
</div></div></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by solarflor at Mar 23, 2014 15:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22885454"></a>
                                    <font class="smallfont"><p>I do not fully understand the PHP. You might try to get the kWh values with the openremote <b>http-protocol</b>  
<a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+HTTP+Protocol">http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+HTTP+Protocol</a>. It supports parsing JSON. (I have no experience with that)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 23, 2014 17:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886027"></a>
                                    <font class="smallfont"><p>Hi,</p>

<p>Do you know if there is a possibility to recover the device status (dead or operating)</p>

<p>Thank you</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Apr 22, 2014 18:33
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22886130"></a>
                                    <font class="smallfont"><p>Solved with    ( raspberry_IP:8083/JS/Run/zway.devices[ N ].data.isFailed.value  )</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pierre2302 at Apr 27, 2014 18:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22887053"></a>
                                    <font class="smallfont"><p><a href="http://razberry.z-wave.me/docs/zwayDev.pdf">RaZberry Z-Way documentation</a> has been updated to version 1.7. The latest Release Candidate 1.7.1-rc2 is pretty stable. There still is ongoing work on the automation engine.<br/>
This version is the result of a major rewrite of the system since release 1.4.1. An updated RaZ-OR engine is bundled as a module with their HA package.</p>

<p>For me it works quite well with the OpenRemote controller on my Synology DS212+. I had hoped to run Z-way as well on my Synobox instead of on the Raspberry. Unfortunately Google dropped support on arm5 processors for their V8 JS engine that is used in Z-Way.</p>

<p>Are there still users out here who are interested in this RaZ-OR combo? </p>

<p><b>Edit 20140619:</b> Version 1.7.1 has been released yesterday. Users of version 1.5 and higher are strongly recommended to upgrade, as some nasty memory leaks have been fixed in 1.7.1</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Jun 14, 2014 13:46
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-22888742"></a>
                                    <font class="smallfont"><p>Hi everybody,</p>

<p>Plz have a look to my post under:</p>


<p><a href="http://openremote.org/display/forums/RaZBerry+as+replacement+of+Vera2">http://openremote.org/display/forums/RaZBerry+as+replacement+of+Vera2</a></p>

<p>Really need your help!</p>

<p>Thanks!</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dclaeys at Sep 14, 2014 20:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23593739"></a>
                                    <font class="smallfont"><p>I have updated the description to match the upcoming RaZberry 2.0 release. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Nov 15, 2014 18:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23594370"></a>
                                    <font class="smallfont"><p>The RaZberry release v2.0.0-rc24 of 29 November is close to the final release version. It is much more stable than the previous versions. </p>

<p>With the kind help of Michal Rutka and the Zwave.me-team, I have developed a method to <a href="http://www.openremote.org/display/docs/OpenRemote+2.0+How+To+-+Z-wave+with+Razberry+via+UDP">- push status changes over UDP -</a> from RaZberry to the OpenRemote Controller. This means there is no longer a need for polling sensor states. For me this has led to a ~50% reduction in the CPU load for the z-way-server process on Raspberry Pi. </p>

<p><a href="http://razberry.z-wave.me/z-way-server/ChangeLog">ZWay Version 2.x.y Changelog</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 03, 2014 15:02
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23606053"></a>
                                    <font class="smallfont"><p>ZWay software release v2.2.1 now comes with an <a href="http://new.zwave.eu/fileadmin/user_upload/presse/Englisch/PR_APP_SmartHome-AppsZ-Way_28-01-2016.pdf">App store</a>. At this moment there are some 45 Apps available.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Mar 14, 2016 11:36
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607030"></a>
                                    <font class="smallfont"><p>Hi<br/>
I've just updated Zway server to 2.2.2 and OR http protocol does not work any more. I have OR 2.1.0 stably working with Z-way since more than 2 years!!! No logs showed any strange things but the OR log for devices with a generic<br/>
ERROR <span class="error">&#91;Polling thread for sensor: OnOffDimSens&#93;</span>: ClientProtocolException when executing HTTP method<br/>
org.apache.http.client.HttpResponseException: Internal Server Error</p>


<p>No strange thing on the ZWay side. If I run the http command (such as <a href="http://10.0.0.3:8083/ZWaveAPI/Run/devices6.instances0.SwitchMultilevel.data.level.value">http://10.0.0.3:8083/ZWaveAPI/Run/devices6.instances0.SwitchMultilevel.data.level.value</a>) on my browser it works. If I running from the Rasberry where the OR is installed by using curls or python it works. ZWay is set to accept anonymous calls. I really have no idea.  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mcfanda at May 23, 2016 20:06
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607031"></a>
                                    <font class="smallfont"><p>On the Zway side, the only strange log lines are several (thus indicating a response to a frequent call):</p>

<p>"Can not make request: Not Found"</p>

<p>with no other specification</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mcfanda at May 23, 2016 20:32
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607034"></a>
                                    <font class="smallfont"><p>I just found out by sniffing the traffic that OR is sending the http request like this:<br/>
/ZWaveAPI/Run/devices%5B6%5D.instances%5B0%5D.SwitchMultilevel.data.level.value</p>

<p>whereas the browser sends them like this:</p>

<p>/ZWaveAPI/Run/devices[8].instances[0].SwitchBinary.data.level.value</p>

<p>how can I change this?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mcfanda at May 24, 2016 02:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607036"></a>
                                    <font class="smallfont"><p>I stopped support on the awkward Openremote fora. </p>

<p>For questions about OpenRemoteHelpers, please do post here <a href="http://forum.z-wave.me/viewtopic.php?f=3424&amp;t=20819">http://forum.z-wave.me/viewtopic.php?f=3424&amp;t=20819</a></p>

<p>In the meantime I am looking for a new visualisation platform to replace OR.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 24, 2016 08:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607037"></a>
                                    <font class="smallfont"><p>You can't and shouldn't. Weird that the browser sends it like that.<br/>
[ and ] are reserved character and they should be encoded in the URL.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ebariaux at May 24, 2016 15:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607039"></a>
                                    <font class="smallfont"><p>Thanks, the problem then is on Z-way side, that does not understand encoded urls</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mcfanda at May 25, 2016 07:25
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-23607044"></a>
                                    <font class="smallfont"><p>Just noticed this post.<br/>
Copied the http command below from my Pro Designer</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">http:<span class="code-comment">//raspi:8083/ZWaveAPI/Run/devices[6].Meter.Get()</span></pre>
</div></div>
<p>works perfectly well for <a href="https://github.com/pz1/ZWayModules/blob/master/Documentation/MYSYSTEM.MD">my 2.2.2 installation</a> including the [ ]. Does OR internally do the the url-encoding?</p>

<p>It looks like Marcello has <a href="http://forum.z-wave.me/viewtopic.php?f=3419&amp;t=23308">posted on the Zwave.me forum</a> now. Hope we can resolve his problem there.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 25, 2016 09:58
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 09:43</font></td>
		    </tr>
	    </table>
    </body>
</html>