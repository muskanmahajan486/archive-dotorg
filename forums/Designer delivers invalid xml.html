<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : Designer delivers invalid xml</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : Designer delivers invalid xml
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 10, 2012 by <font color="#0050B2">pz1</font>.
				    </div>

				    <p>Using XMLSpy 2006, I have tried to validate the controller and panel XML files. Validation fails because the schema (<a href="http://www.openremote.org/schemas/panel.xsd">http://www.openremote.org/schemas/panel.xsd</a>) defined in the header is not found.  </p>

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-19988574"></a>
                                    <font class="smallfont"><p>The schema files are not accessible through the URL's used in the XML definition. <br/>
You have to tell XMLSpy to use a local version of the XSD.</p>

<p>You can download the XSD's from here:</p>

<p><a href="http://openremote.svn.sourceforge.net/viewvc/openremote/tags/project/Controller/Controller_2_0_0/config/panel-2.0-M7.xsd?revision=6189&amp;view=markup">http://openremote.svn.sourceforge.net/viewvc/openremote/tags/project/Controller/Controller_2_0_0/config/panel-2.0-M7.xsd?revision=6189&amp;view=markup</a></p>

<p><a href="http://openremote.svn.sourceforge.net/viewvc/openremote/tags/project/Controller/Controller_2_0_0/config/controller-2.0-M7.xsd?revision=6189&amp;view=markup">http://openremote.svn.sourceforge.net/viewvc/openremote/tags/project/Controller/Controller_2_0_0/config/controller-2.0-M7.xsd?revision=6189&amp;view=markup</a></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 11, 2012 10:37
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988576"></a>
                                    <font class="smallfont"><p>This is not terribly important or urgent for me, but I just would like to understand. I have worked myself quite a bit with XML, but mostly used DTD as reference.</p>

<p>I have downloaded the controller.xsd and copied that to the directory where I also have controller.xml. I openend the latter in XML Spy, and used that tool to assign the reference to the XSD. That resulted in:<br/>
&lt;openremote xmlns:n="http://www.openremote.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openremote.org <br/>
D:\ORcontroller.xsd"&gt;</p>

<p>XMLSpy reports on revalidate that this file is not valid, The element declaration was not found for root element 'openremote'</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 11, 2012 17:08
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988577"></a>
                                    <font class="smallfont"><p>I don't have XMLSpy, so I cannot really say anthing to that.<br/>
The XSD contains the declaration for 'openremote' and the java parser is cool with it.<br/>
Maybe somebody else has XMLSpy and can say something to this.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 11, 2012 17:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988580"></a>
                                    <font class="smallfont"><p>My XMLspy is from 2006, maybe the newer versions deal with assignment of local XSD's better. </p>

<p>I never had problems with locally verfying an XML against a URL reference to a .XSD. I just checked one of my old resources and saw that I never used namespaces, and could use something like:  "xsi:noNamespaceSchemaLocation="http://clam.eggbird.eu/EN14463-2007.xsd" as reference. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 11, 2012 19:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988591"></a>
                                    <font class="smallfont"><p>@Marcus<br/>
You stated:<br/>
"The schema files are not accessible through the URL's used in the XML definition. <br/>
 You have to tell XMLSpy to use a local version of the XSD."</p>

<p>I could not believe that you cannot refer to a schema using a URL. So I reassessed my experiment with XMLSpy, where I noticed that it had placed a ":n" after the first occurence of xmlns. The XML was assessed as valid after deleting that.<br/>
Next I placed a copy of of the .xsd on my webserver, adapted the controller.xml to refer to that address. Also that resulted in a valid XML according to XMLspy.</p>

<p>So the problem in my first post is probably due to the fact that the the xsd is not available/accessible in the schema directory <a href="http://www.openremote.org/schema">http://www.openremote.org/schema</a>. IMHO that is wrong for production environments. The generated XML should always refer to the prevailing schema!</p>

<p>Note: So XMLSpy seems happy now, but the official W3 Consortium validator ( <a href="http://validator.w3.org">http://validator.w3.org</a> )is less happy. It seems to insist on a Doctype declaration for the schema.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 13, 2012 08:24
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988594"></a>
                                    <font class="smallfont"><p>What I ment with that sentence was, that the files are not accessible at the openremot server at that address. If you copy them somewhere else and change the definition, that is of course possible.</p>

<p>I will see if we can also put the XSD's at the location stated in the XML.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at May 13, 2012 14:03
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988596"></a>
                                    <font class="smallfont"><blockquote>
<p>So the problem in my first post is probably due to the fact that the the xsd is not available/accessible in the schema directory <a href="http://www.openremote.org/schema">http://www.openremote.org/schema</a>. IMHO that is wrong for production environments. The generated XML should always refer to the prevailing schema!</p></blockquote>

<p>As far as I understand, namespace bindings are unique identifiers and are not necessarily valid URLs.</p>

<p><a href="http://www.w3.org/TR/REC-xml-names/#ns-decl">Declaring Namespaces</a> states:</p>

<blockquote>
<p>The attribute's normalized value MUST be either a URI reference — the namespace name identifying the namespace — or an empty string. The namespace name, to serve its intended purpose, SHOULD have the characteristics of uniqueness and persistence. <b>It is not a goal that it be directly usable for retrieval of a schema (if any exists).</b> Uniform Resource Names RFC2141 is an example of a syntax that is designed with these goals in mind. However, it should be noted that ordinary URLs can be managed in such a way as to achieve these same goals.</p></blockquote>

<p>(see emphasis)</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 13, 2012 15:12
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988599"></a>
                                    <font class="smallfont"><p>My initial problem was indeed with understanding the role of the namespace name in the xsi specifier. I thought it was part of the path to the XSD, which it isn't. Thanks for emphasizing that. <br/>
If I do understand the above statement correctly it does not say anything about the second argument, i.e. the URL to the .xsd. So I still think it would be beter that the xsd's are in the schema subdirectory, as specified in the generated xml files. </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 13, 2012 16:04
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988600"></a>
                                    <font class="smallfont"><p>Not sure I understand what the second argument is?</p>

<p>The namespace declaration is indeed just a string, and is interpreted as such. It must follow the URI specification or be left empty. For example, the namespace used for XHMTL is <a href="http://www.w3.org/1999/xhtml/">http://www.w3.org/1999/xhtml/</a> which also does not locate the schema itself (even though the identifier can be resolved to a valid URL, it should not be treated as such, or assumed that it locates a schema).</p>

<p>Or in other words, the namespace value is intended for humans to read only, and has no additional semantics.</p>


</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 13, 2012 16:16
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988602"></a>
                                    <font class="smallfont"><p>With "second argument" I meant the part (<a href="http://www.openremote.org/schemas/controller.xsd">http://www.openremote.org/schemas/controller.xsd</a>) of the &lt;openremote&gt; attribute xsi:schemaLocation="http://www.openremote.org <a href="http://www.openremote.org/schemas/controller.xsd">http://www.openremote.org/schemas/controller.xsd</a>"  </p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at May 13, 2012 22:17
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-19988606"></a>
                                    <font class="smallfont"><p>Correct, that should be updated to give a more appropriate hint to where the schema is located, or removed.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by juha at May 14, 2012 08:40
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21038941"></a>
                                    <font class="smallfont"><p>How difficult is it to just put a copy of controller.xsd in <a href="http://www.openremote/org/schemas">http://www.openremote/org/schemas</a> ? Or is there more to it?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by pz1 at Dec 21, 2012 11:31
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 11:03</font></td>
		    </tr>
	    </table>
    </body>
</html>