<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Forums : openremote connection manager</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Forums : openremote connection manager
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 18, 2013 by <font color="#0050B2">kbdeir</font>.
				    </div>

				    <p>Hi,</p>

<p>I am new to this form. good to see all this activity and great support.</p>

<p>I am using openremote in a home automation project. mainly relying on the Telnet protocol to poll sensors values from a set of proprietary control boards which control AC loads. the challenge though is that the controllers seem to be unable to deal with the number of sockets initiated by the openremote controller (on a raspberry pi)</p>

<p>the solution proposed here <a href="http://openremote.org/display/forums/Connection+Manager+Code+Branch">http://openremote.org/display/forums/Connection+Manager+Code+Branch</a><br/>
seems to be a very sensible one and would relieve the 'simple' telnet implementation on the boards from dealing with the excessive load generated by the polling process.</p>

<p>would be grateful if you could provide a link to a version with that functionality included. for many reasons, i am unable to build openremote locally.</p>

<p>thanks</p>


				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-21857774"></a>
                                    <font class="smallfont"><p>ok, seems i ve asked for too much.</p>

<p>I have another question which may provide a workaround solution:</p>

<p>in a command definition box for a tcpip command to port 23, i use the following format</p>

<p>null|R1Sts|what should i use here?|exit</p>

<p>i want basically to:<br/>
1-start connection, wait for null<br/>
2-send R1sts command<br/>
3-wait for a reply "on" or "off"<br/>
4-send the "exit" word to close the connection</p>

<p>my question: is what should i use in step 3 above? is a regular expression acceptable here. if yes then what should i use?</p>

<p>thanks</p>

</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kbdeir at Feb 19, 2013 15:52
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857790"></a>
                                    <font class="smallfont"><p>Sorry, I don't see why this is related to this pollingInterval exception mentioned in the other forum thread.<br/>
I am not sure if tcpip works the same as telnet.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 19, 2013 21:00
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857791"></a>
                                    <font class="smallfont"><p>the relation is that i am using tcpip on port 23 to execute a telnet commands to some boards. the connection is that the polling interval you've introduced in the other forum thread will allow for some kind of traffic control limiting the number of polls which seems to be too much for my boards to handle as i have mentioned in the first question above.</p>

<p>thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kbdeir at Feb 19, 2013 21:05
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857793"></a>
                                    <font class="smallfont"><p>ok, gotcha.<br/>
for that you need the version juha mentioned in the other thread.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 19, 2013 21:07
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857794"></a>
                                    <font class="smallfont"><p>thanks </p>

<p>but a connection manager would be a much better and elegant solution to 'talk' to small automation boards with limited implementation of telnet (only able to open few sockets at a time before choking!)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kbdeir at Feb 19, 2013 21:13
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857796"></a>
                                    <font class="smallfont"><p>Yes, Richard is working on that. Some threads exist on  the forum already.</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mredeker at Feb 19, 2013 21:26
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857822"></a>
                                    <font class="smallfont"><p>just finished a testing session. still unstable. <br/>
is it posible to provide a link to a binary with connection manager implementation.?</p>

<p>thanks</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kbdeir at Feb 20, 2013 15:34
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857835"></a>
                                    <font class="smallfont"><p>now i am getting this error</p>

<p>20-Feb-2013 21:48:08 org.openremote.controller.utils.Logger info<br/>
INFO: Querying changed state from ChangedStatus table...<br/>
20-Feb-2013 21:48:08 org.openremote.controller.utils.Logger info<br/>
INFO: Found: [device =&gt; ecba163bb8265a639f8f153c8bc68e1e3d0f17a1, sensorIDs =&gt; 330, 331, 332, 333, 334] in ChangedStatus table.<br/>
20-Feb-2013 21:48:08 org.openremote.controller.utils.Logger info<br/>
INFO: ChangedStatusRecord:ecba163bb8265a639f8f153c8bc68e1e3d0f17a1-330, 331, 332, 333, 334 sensorID:330, 331, 332, 333, 334 statusChangedSensor                                         ID:[]Waiting...<br/>
20-Feb-2013 21:48:58 org.openremote.controller.utils.Logger info<br/>
INFO: Had timeout for waiting status change.<br/>
20-Feb-2013 21:48:58 org.openremote.controller.utils.Logger info<br/>
INFO: Finished polling at 2013-02-20 21:48:58</p>


<p>any idea why it is timing out?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kbdeir at Feb 20, 2013 17:51
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-21857844"></a>
                                    <font class="smallfont"><p>Hi Kevin,</p>

<p>The Status polling REST API works by monitoring sensor IDs and waits for a change (to be HTTP compliant the connection times out after a specified period) I believe this is what you are seeing in the log output above, essentially none of the sensor values have changed (sensors 330, 331....334) and so the status polling call from the Console timed out.</p>

<p>Regarding the connection manager, I was working on a new implementation of this but haven't had a chance to pick it up again and haven't looked at it for a few months. I wrote a basic connection management branch a couple of years ago but it is no longer compatible with the current code base but you're welcome to compile that from the repo.</p>

<p>Connection management is much needed; but on a side note it is possible to implement some basic form of connection management with the current code base (it has been done for several protocols - russound is probably the best one to look at), this would obviously require some JAVA programming.</p>

<p>Regards,</p>

<p>Rich</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by kurrazyman at Feb 20, 2013 19:14
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://www.openremote.org/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 05, 2016 10:44</font></td>
		    </tr>
	    </table>
    </body>
</html>